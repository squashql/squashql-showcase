"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{6777:function(t,e,n){n.d(e,{AfN:function(){return vg},D6R:function(){return gQ},EDF:function(){return vb},F1h:function(){return yH},HZt:function(){return bA},Hu7:function(){return xQ},IZo:function(){return xN},LRf:function(){return yM},N6r:function(){return bR},NO_:function(){return vm},O9R:function(){return x6},Pyr:function(){return gV},TA7:function(){return bO},Teh:function(){return r6},Unm:function(){return wa},VQD:function(){return vv},WNh:function(){return iO},X0t:function(){return mz},_61:function(){return CW},_Ge:function(){return wi},agQ:function(){return vy},c8d:function(){return yF},ch4:function(){return CD},d5G:function(){return x1},f4X:function(){return yJ},mUW:function(){return ie},o3g:function(){return gq},q7_:function(){return vN},qPk:function(){return gZ},utx:function(){return vd},vQq:function(){return yT},vhY:function(){return iC},xzT:function(){return gY}}),t=n.hmd(t);var r,i,o,a=n(9079),s=Object.freeze({__proto__:null,get Base(){return rN},get Circle(){return rD},get Ellipse(){return rk},get Image(){return rP},get Line(){return rF},get Marker(){return rG},get Path(){return rK},get Polygon(){return r$},get Polyline(){return rQ},get Rect(){return rJ},get Text(){return r0}}),l=function(t,e){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function u(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var h=function(){return(h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function c(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)0>e.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function d(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function p(t,e,n){if(n||2==arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;var v=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},g={}.toString,y=function(t,e){return g.call(t)==="[object "+e+"]"},m=function(t){return y(t,"Function")},C=function(t){return null==t},w=function(t){return Array.isArray?Array.isArray(t):y(t,"Array")},x=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function S(t,e){if(t){if(w(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(x(t)){for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break}}}var b=function(t){return"object"==typeof t&&null!==t},_=function(t){if(w(t))return t.reduce(function(t,e){return Math.max(t,e)},t[0])},E=function(t){if(w(t))return t.reduce(function(t,e){return Math.min(t,e)},t[0])},L=function(t){return y(t,"String")},T=function(t){return y(t,"Number")},M=function(t,e){return(t%e+e)%e},R=Math.PI/180,I=function(t){return R*t},O=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return S(t,function(n,r){m(t)&&"prototype"===r||e.push(n)}),e},A=function(t){var e=C(t)?"":t.toString();return e.charAt(0).toUpperCase()+e.substring(1)};function B(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function N(t,e,n,r){return e&&B(t,e),n&&B(t,n),r&&B(t,r),t}var D=function(t,e){if(t===e)return!0;if(!t||!e||L(t)||L(e))return!1;if(v(t)||v(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=D(t[r],e[r]));r++);return n}if(b(t)||b(e)){var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(var n=!0,r=0;r<i.length&&(n=D(t[i[r]],e[i[r]]));r++);return n}return!1},k={},z=function(){};!function(t,e){if(!m(t))throw TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};n.cache=new Map}(function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,a=e.fontVariant;return tH||(tH=document.createElement("canvas").getContext("2d")),tH.font=[o,a,i,n+"px",r].join(" "),tH.measureText(L(t)?t:"").width},function(t,e){return void 0===e&&(e={}),(function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r})([t],O(e)).join("")});var P="	\n\v\f\r \xa0 ᠎             　\u2028\u2029",H=RegExp("([a-z])["+P+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+P+"]*,?["+P+"]*)+)","ig"),F=RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+P+"]*,?["+P+"]*","ig"),W=function(t){if(!t)return null;if(w(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(H,function(r,i,o){var a=[],s=i.toLowerCase();if(o.replace(F,function(t,e){e&&a.push(+e)}),"m"===s&&a.length>2&&(n.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&n.push([i,a[0]]),"r"===s)n.push([i].concat(a));else for(;a.length>=e[s]&&(n.push([i].concat(a.splice(0,e[s]))),e[s]););return t}),n},G=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?o[3]={x:+t[0],y:+t[1]}:i-2===r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},V=function(t,e,n,r,i){var o=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var a=Math.PI/180,s=t+n*Math.cos(-r*a),l=t+n*Math.cos(-i*a),u=e+n*Math.sin(-r*a),h=e+n*Math.sin(-i*a);o=[["M",s,u],["A",n,n,0,+(i-r>180),0,l,h]]}else o=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return o},Y=function(t){if(!(t=W(t))||!t.length)return[["M",0,0]];var e,n,r=[],i=0,o=0,a=0,s=0,l=0;"M"===t[0][0]&&(i=+t[0][1],o=+t[0][2],a=i,s=o,l++,r[0]=["M",i,o]);for(var u=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),h=void 0,c=void 0,d=l,f=t.length;d<f;d++){if(r.push(h=[]),(e=(c=t[d])[0])!==e.toUpperCase())switch(h[0]=e.toUpperCase(),h[0]){case"A":h[1]=c[1],h[2]=c[2],h[3]=c[3],h[4]=c[4],h[5]=c[5],h[6]=+c[6]+i,h[7]=+c[7]+o;break;case"V":h[1]=+c[1]+o;break;case"H":h[1]=+c[1]+i;break;case"R":n=[i,o].concat(c.slice(1));for(var p=2,v=n.length;p<v;p++)n[p]=+n[p]+i,n[++p]=+n[p]+o;r.pop(),r=r.concat(G(n,u));break;case"O":r.pop(),(n=V(i,o,c[1],c[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),h=["U"].concat((r=r.concat(V(i,o,c[1],c[2],c[3])))[r.length-1].slice(-2));break;case"M":a=+c[1]+i,s=+c[2]+o;break;default:for(var p=1,v=c.length;p<v;p++)h[p]=+c[p]+(p%2?i:o)}else if("R"===e)n=[i,o].concat(c.slice(1)),r.pop(),r=r.concat(G(n,u)),h=["R"].concat(c.slice(-2));else if("O"===e)r.pop(),(n=V(i,o,c[1],c[2])).push(n[0]),r=r.concat(n);else if("U"===e)r.pop(),h=["U"].concat((r=r.concat(V(i,o,c[1],c[2],c[3])))[r.length-1].slice(-2));else for(var g=0,y=c.length;g<y;g++)h[g]=c[g];if("O"!==(e=e.toUpperCase()))switch(h[0]){case"Z":i=+a,o=+s;break;case"H":i=h[1];break;case"V":o=h[1];break;case"M":a=h[h.length-2],s=h[h.length-1];break;default:i=h[h.length-2],o=h[h.length-1]}}return r},U=function(t,e,n,r){return[t,e,n,r,n,r]},j=function(t,e,n,r,i,o){return[1/3*t+2/3*n,1/3*e+2/3*r,1/3*i+2/3*n,1/3*o+2/3*r,i,o]},X=function(t,e,n,r,i,o,a,s,l,u){n===r&&(n+=1);var h,c,d,f,p,v=120*Math.PI/180,g=Math.PI/180*(+i||0),y=[],m=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(u)c=u[0],d=u[1],f=u[2],p=u[3];else{t=(h=m(t,e,-g)).x,e=h.y,s=(h=m(s,l,-g)).x,l=h.y,t===s&&e===l&&(s+=1,l+=1);var C=(t-s)/2,w=(e-l)/2,x=C*C/(n*n)+w*w/(r*r);x>1&&(n*=x=Math.sqrt(x),r*=x);var S=n*n,b=r*r,_=(o===a?-1:1)*Math.sqrt(Math.abs((S*b-S*w*w-b*C*C)/(S*w*w+b*C*C)));f=_*n*w/r+(t+s)/2,p=-(_*r)*C/n+(e+l)/2,c=Math.asin(((e-p)/r).toFixed(9)),d=Math.asin(((l-p)/r).toFixed(9)),c=t<f?Math.PI-c:c,d=s<f?Math.PI-d:d,c<0&&(c=2*Math.PI+c),d<0&&(d=2*Math.PI+d),a&&c>d&&(c-=2*Math.PI),!a&&d>c&&(d-=2*Math.PI)}var E=d-c;if(Math.abs(E)>v){var L=d,T=s,M=l;y=X(s=f+n*Math.cos(d=c+v*(a&&d>c?1:-1)),l=p+r*Math.sin(d),n,r,i,0,a,T,M,[d,L,f,p])}E=d-c;var R=Math.cos(c),I=Math.cos(d),O=Math.tan(E/4),A=4/3*n*O,B=4/3*r*O,N=[t,e],D=[t+A*Math.sin(c),e-B*R],k=[s+A*Math.sin(d),l-B*I],z=[s,l];if(D[0]=2*N[0]-D[0],D[1]=2*N[1]-D[1],u)return[D,k,z].concat(y);y=[D,k,z].concat(y).join().split(",");for(var P=[],H=0,F=y.length;H<F;H++)P[H]=H%2?m(y[H-1],y[H],g).y:m(y[H],y[H+1],g).x;return P},q=function(t,e){var n,r=Y(t),i=e&&Y(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],u="",h="",c=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(X.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(j(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(j(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(U(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(U(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(U(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(U(e.x,e.y,e.X,e.Y))}return t},d=function(t,e){if(t[e].length>7){t[e].shift();for(var o=t[e];o.length;)s[e]="A",i&&(l[e]="A"),t.splice(e++,0,["C"].concat(o.splice(0,6)));t.splice(e,1),n=Math.max(r.length,i&&i.length||0)}},f=function(t,e,o,a,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=t[s][1],o.y=t[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var p=0;p<n;p++){r[p]&&(u=r[p][0]),"C"!==u&&(s[p]=u,p&&(h=s[p-1])),r[p]=c(r[p],o,h),"A"!==s[p]&&"C"===u&&(s[p]="C"),d(r,p),i&&(i[p]&&(u=i[p][0]),"C"!==u&&(l[p]=u,p&&(h=l[p-1])),i[p]=c(i[p],a,h),"A"!==l[p]&&"C"===u&&(l[p]="C"),d(i,p)),f(r,i,o,a,p),f(i,r,a,o,p);var v=r[p],g=i&&i[p],y=v.length,m=i&&g.length;o.x=v[y-2],o.y=v[y-1],o.bx=parseFloat(v[y-4])||o.x,o.by=parseFloat(v[y-3])||o.y,a.bx=i&&(parseFloat(g[m-4])||a.x),a.by=i&&(parseFloat(g[m-3])||a.y),a.x=i&&g[m-2],a.y=i&&g[m-1]}return i?[r,i]:r},K=/,?([a-z]),?/gi,Z=function(t){return t.join(",").replace(K,"$1")},$=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},Q=function(t,e,n,r,i,o,a,s,l){null===l&&(l=1);for(var u=(l=l>1?1:l<0?0:l)/2,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],c=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,f=0;f<12;f++){var p=u*h[f]+u,v=$(p,t,n,i,a),g=$(p,e,r,o,s),y=v*v+g*g;d+=c[f]*Math.sqrt(y)}return u*d},J=function(t,e,n,r,i,o,a,s){for(var l,u,h,c,d,f=[],p=[[],[]],v=0;v<2;++v){if(0===v?(u=6*t-12*n+6*i,l=-3*t+9*n-9*i+3*a,h=3*n-3*t):(u=6*e-12*r+6*o,l=-3*e+9*r-9*o+3*s,h=3*r-3*e),1e-12>Math.abs(l)){if(1e-12>Math.abs(u))continue;(c=-h/u)>0&&c<1&&f.push(c);continue}var g=u*u-4*h*l,y=Math.sqrt(g);if(!(g<0)){var m=(-u+y)/(2*l);m>0&&m<1&&f.push(m);var C=(-u-y)/(2*l);C>0&&C<1&&f.push(C)}}for(var w=f.length,x=w;w--;)d=1-(c=f[w]),p[0][w]=d*d*d*t+3*d*d*c*n+3*d*c*c*i+c*c*c*a,p[1][w]=d*d*d*e+3*d*d*c*r+3*d*c*c*o+c*c*c*s;return p[0][x]=t,p[1][x]=e,p[0][x+1]=a,p[1][x+1]=s,p[0].length=p[1].length=x+2,{min:{x:Math.min.apply(0,p[0]),y:Math.min.apply(0,p[1])},max:{x:Math.max.apply(0,p[0]),y:Math.max.apply(0,p[1])}}},tt=function(t,e,n,r,i,o,a,s){if(!(Math.max(t,n)<Math.min(i,a)||Math.min(t,n)>Math.max(i,a)||Math.max(e,r)<Math.min(o,s)||Math.min(e,r)>Math.max(o,s))){var l=(t-n)*(o-s)-(e-r)*(i-a);if(l){var u=((t*r-e*n)*(i-a)-(t-n)*(i*s-o*a))/l,h=((t*r-e*n)*(o-s)-(e-r)*(i*s-o*a))/l,c=+u.toFixed(2),d=+h.toFixed(2);if(!(c<+Math.min(t,n).toFixed(2)||c>+Math.max(t,n).toFixed(2)||c<+Math.min(i,a).toFixed(2)||c>+Math.max(i,a).toFixed(2)||d<+Math.min(e,r).toFixed(2)||d>+Math.max(e,r).toFixed(2)||d<+Math.min(o,s).toFixed(2)||d>+Math.max(o,s).toFixed(2)))return{x:u,y:h}}}},te=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},tn=function(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=Z,o},tr=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:tn(t,e,n,r),vb:[t,e,n,r].join(" ")}},ti=function(t,e,n,r,i,o,a,s){w(t)||(t=[t,e,n,r,i,o,a,s]);var l=J.apply(null,t);return tr(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},to=function(t,e,n,r,i,o,a,s,l){var u=1-l,h=Math.pow(u,3),c=Math.pow(u,2),d=l*l,f=d*l,p=t+2*l*(n-t)+d*(i-2*n+t),v=e+2*l*(r-e)+d*(o-2*r+e),g=n+2*l*(i-n)+d*(a-2*i+n),y=r+2*l*(o-r)+d*(s-2*o+r),m=90-180*Math.atan2(p-g,v-y)/Math.PI;return{x:h*t+3*c*l*n+3*u*l*l*i+f*a,y:h*e+3*c*l*r+3*u*l*l*o+f*s,m:{x:p,y:v},n:{x:g,y:y},start:{x:u*t+l*n,y:u*e+l*r},end:{x:u*i+l*a,y:u*o+l*s},alpha:m}},ta=function(t,e,n){var r,i,o=ti(t),a=ti(e);if(r=o,i=a,r=tr(r),!(te(i=tr(i),r.x,r.y)||te(i,r.x2,r.y)||te(i,r.x,r.y2)||te(i,r.x2,r.y2)||te(r,i.x,i.y)||te(r,i.x2,i.y)||te(r,i.x,i.y2)||te(r,i.x2,i.y2))&&((!(r.x<i.x2)||!(r.x>i.x))&&(!(i.x<r.x2)||!(i.x>r.x))||(!(r.y<i.y2)||!(r.y>i.y))&&(!(i.y<r.y2)||!(i.y>r.y))))return n?0:[];for(var s=Q.apply(0,t),l=Q.apply(0,e),u=~~(s/8),h=~~(l/8),c=[],d=[],f={},p=n?0:[],v=0;v<u+1;v++){var g=to.apply(0,t.concat(v/u));c.push({x:g.x,y:g.y,t:v/u})}for(var v=0;v<h+1;v++){var g=to.apply(0,e.concat(v/h));d.push({x:g.x,y:g.y,t:v/h})}for(var v=0;v<u;v++)for(var y=0;y<h;y++){var m=c[v],C=c[v+1],w=d[y],x=d[y+1],S=.001>Math.abs(C.x-m.x)?"y":"x",b=.001>Math.abs(x.x-w.x)?"y":"x",_=tt(m.x,m.y,C.x,C.y,w.x,w.y,x.x,x.y);if(_){if(f[_.x.toFixed(4)]===_.y.toFixed(4))continue;f[_.x.toFixed(4)]=_.y.toFixed(4);var E=m.t+Math.abs((_[S]-m[S])/(C[S]-m[S]))*(C.t-m.t),L=w.t+Math.abs((_[b]-w[b])/(x[b]-w[b]))*(x.t-w.t);E>=0&&E<=1&&L>=0&&L<=1&&(n?p+=1:p.push({x:_.x,y:_.y,t1:E,t2:L}))}}return p},ts=function(t,e,n){t=q(t),e=q(e);for(var r,i,o,a,s,l,u,h,c,d,f=n?0:[],p=0,v=t.length;p<v;p++){var g=t[p];if("M"===g[0])r=s=g[1],i=l=g[2];else{"C"===g[0]?(r=(c=[r,i].concat(g.slice(1)))[6],i=c[7]):(c=[r,i,r,i,s,l,s,l],r=s,i=l);for(var y=0,m=e.length;y<m;y++){var C=e[y];if("M"===C[0])o=u=C[1],a=h=C[2];else{"C"===C[0]?(o=(d=[o,a].concat(C.slice(1)))[6],a=d[7]):(d=[o,a,o,a,u,h,u,h],o=u,a=h);var w=ta(c,d,n);if(n)f+=w;else{for(var x=0,S=w.length;x<S;x++)w[x].segment1=p,w[x].segment2=y,w[x].bez1=c,w[x].bez2=d;f=f.concat(w)}}}}}return f},tl=function(t,e,n){if(1===n)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(function(t,e,n){var r=[[t[1],t[2]]];n=n||2;var i=[];"A"===e[0]?(r.push(e[6]),r.push(e[7])):"C"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var o=r,a=1/n,s=0;s<n-1;s++){var l=function(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var o=[],a=0;a<e.length-1;a++)0===a&&n.push(e[0]),a===e.length-2&&r.push(e[a+1]),o[a]=[(1-i)*e[a][0]+i*e[a+1][0],(1-i)*e[a][1]+i*e[a+1][1]];t(o,i)}}(t,e),{left:n,right:r.reverse()}}(o,a/(1-a*s));i.push(l.left),o=l.right}return i.push(o),i.map(function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e=e.concat(t[t.length-1])})}(t,e,n));else{var i=[].concat(t);"M"===i[0]&&(i[0]="L");for(var o=0;o<=n-1;o++)r.push(i)}return r},tu=function(t,e){if(t.length!==e.length)return!1;var n=!0;return S(t,function(t,r){if(t!==e[r])return n=!1,!1}),n},th=function(t,e){var n,r=t.length,i=e.length,o=0;if(0===r||0===i)return null;for(var a=[],s=0;s<=r;s++)a[s]=[],a[s][0]={min:s};for(var l=0;l<=i;l++)a[0][l]={min:l};for(var s=1;s<=r;s++){n=t[s-1];for(var l=1;l<=i;l++){o=tu(n,e[l-1])?0:1;var u=a[s-1][l].min+1,h=a[s][l-1].min+1,c=a[s-1][l-1].min+o;a[s][l]=function(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}(u,h,c)}}return a},tc=function(t,e){var n=th(t,e),r=t.length,i=e.length,o=[],a=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var u=n[l][l].min;s=l;for(var h=a;h<=i;h++)n[l][h].min<u&&(u=n[l][h].min,s=h);a=s,n[l][a].type&&o.push({index:l-1,type:n[l][a].type})}for(var l=o.length-1;l>=0;l--)a=o[l].index,"add"===o[l].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}var c=i-(r=t.length);if(r<i)for(var l=0;l<c;l++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function td(t,e,n){for(var r,i=[].concat(t),o=1/(n+1),a=tf(e)[0],s=1;s<=n;s++)o*=s,0===(r=Math.floor(t.length*o))?i.unshift([a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]);return i}function tf(t){var e=[];switch(t[0]){case"M":case"L":case"T":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var tp=function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=tf(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(r>0)n=td(n,t[r-1],1);else{t[r]=e[r];break}}t[r]=["Q"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(r>0)n=td(n,t[r-1],2);else{t[r]=e[r];break}}t[r]=["C"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;case"S":if(n.length<2){if(r>0)n=td(n,t[r-1],1);else{t[r]=e[r];break}}t[r]=["S"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;default:t[r]=e[r]}return t},tv=Object.freeze({__proto__:null,catmullRomToBezier:G,fillPath:function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,o=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<r-n;a++)t.push(t[0]);return t}for(var a=0;a<r;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var l=o.reduce(function(e,r,i){return i===n?e.concat(t[n]):e.concat(tl(t[i],t[i+1],r))},[]);return l.unshift(t[0]),("Z"===e[r]||"z"===e[r])&&l.push("Z"),l},fillPathByDiff:tc,formatPath:tp,intersection:function(t,e){return ts(t,e)},parsePathArray:Z,parsePathString:W,pathToAbsolute:Y,pathToCurve:q,rectPath:tn}),tg=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}(),ty=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],o=this._events["*"]||[],a=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],s=a.callback;a.once&&(r.splice(o,1),0===r.length&&delete e._events[t],i--,o--),s.apply(e,n)}};a(i),a(o)},t.prototype.off=function(t,e){if(t){if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t]}else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();function tm(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var tC=void 0!==window.document;function tw(t,e){if(t.isCanvas())return!0;for(var n=e.getParent(),r=!1;n;){if(n===t){r=!0;break}n=n.getParent()}return r}function tx(t){return t.cfg.visible&&t.cfg.capture}var tS=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=N(r,e),n}return u(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(ty),tb=function(t,e,n){if(n||2==arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},t_=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},tE=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"},tL=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},tT=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,tM=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],tR=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function tI(t){var e=""!==t&&tM.reduce(function(e,n){var r=n[0],i=n[1];if(e)return e;var o=i.exec(t);return!!o&&[r,o]},!1);if(!e)return null;var n=e[0],r=e[1];if("searchbot"===n)return new tL;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=tb(tb([],i,!0),function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(3-i.length),!0)):i=[];var o=i.join("."),a=function(t){for(var e=0,n=tR.length;e<n;e++){var r=tR[e],i=r[0];if(r[1].exec(t))return i}return null}(t),s=tT.exec(t);return s&&s[1]?new tE(n,o,a,s[1]):new t_(n,o,a)}var tO="undefined"!=typeof Float32Array?Float32Array:Array;function tA(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],h=e[7],c=e[8],d=n[0],f=n[1],p=n[2],v=n[3],g=n[4],y=n[5],m=n[6],C=n[7],w=n[8];return t[0]=d*r+f*a+p*u,t[1]=d*i+f*s+p*h,t[2]=d*o+f*l+p*c,t[3]=v*r+g*a+y*u,t[4]=v*i+g*s+y*h,t[5]=v*o+g*l+y*c,t[6]=m*r+C*a+w*u,t[7]=m*i+C*s+w*h,t[8]=m*o+C*l+w*c,t}function tB(t,e){for(var n=t?[].concat(t):[1,0,0,0,1,0,0,0,1],r=0,i=e.length;r<i;r++){var o=e[r];switch(o[0]){case"t":!function(t,e,n){var r=[0,0,0,0,0,0,0,0,0];r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=n[0],r[7]=n[1],r[8]=1,tA(t,r,e)}(n,n,[o[1],o[2]]);break;case"s":!function(t,e,n){var r=[0,0,0,0,0,0,0,0,0];r[0]=n[0],r[1]=0,r[2]=0,r[3]=0,r[4]=n[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,tA(t,r,e)}(n,n,[o[1],o[2]]);break;case"r":!function(t,e,n){var r,i,o=[0,0,0,0,0,0,0,0,0];r=Math.sin(n),i=Math.cos(n),o[0]=i,o[1]=r,o[2]=0,o[3]=-r,o[4]=i,o[5]=0,o[6]=0,o[7]=0,o[8]=1,tA(t,o,e)}(n,n,o[1]);break;case"m":tA(n,o[1],n)}}return n}function tN(t,e){var n=[],r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],h=t[7],c=t[8],d=e[0],f=e[1],p=e[2],v=e[3],g=e[4],y=e[5],m=e[6],C=e[7],w=e[8];return n[0]=d*r+f*a+p*u,n[1]=d*i+f*s+p*h,n[2]=d*o+f*l+p*c,n[3]=v*r+g*a+y*u,n[4]=v*i+g*s+y*h,n[5]=v*o+g*l+y*c,n[6]=m*r+C*a+w*u,n[7]=m*i+C*s+w*h,n[8]=m*o+C*l+w*c,n}function tD(t,e){var n=[],r=e[0],i=e[1];return n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7],n}function tk(t){var e=[],n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],h=t[8],c=h*a-s*u,d=-h*o+s*l,f=u*o-a*l,p=n*c+r*d+i*f;return p?(p=1/p,e[0]=c*p,e[1]=(-h*r+i*u)*p,e[2]=(s*r-i*a)*p,e[3]=d*p,e[4]=(h*n-i*l)*p,e[5]=(-s*n+i*o)*p,e[6]=f*p,e[7]=(-u*n+r*l)*p,e[8]=(a*n-r*o)*p,e):null}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),tz=new tO(3),tO!=Float32Array&&(tz[0]=0,tz[1]=0,tz[2]=0),tP=new tO(2),tO!=Float32Array&&(tP[0]=0,tP[1]=0);var tz,tP,tH,tF,tW,tG="matrix",tV=["zIndex","capture","visible","type"],tY=["repeat"],tU=function(t){function e(e){var n=t.call(this,e)||this;n.attrs={};var r=n.getDefaultAttrs();return N(r,e.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return u(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1];if(!r)return this.attrs;if(x(r)){for(var o in r)this.setAttr(o,r[o]);return this.afterAttrsChange(r),this}return 2===e.length?(this.setAttr(r,i),this.afterAttrsChange(((t={})[r]=i,t)),this):this.attrs[r]},e.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},e.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},e.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren();this.get("el");var n=e.indexOf(this);e.splice(n,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren();this.get("el");var n=e.indexOf(this);e.splice(n,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?(tm(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(tG,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(tG)},e.prototype.setMatrix=function(t){this.attr(tG,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),n=this.cfg.parentMatrix;t=n&&e?tN(n,e):e||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),n=null;n=t&&e?tN(t,e):e||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?tD(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var n=tk(e);if(n)return tD(n,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),n=null;if(t){var r=this.getShapeBase()[A(t.type)];r&&(n=new r({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){return this.cfg.clipShape||null},e.prototype.clone=function(){var t=this,e=this.attrs,n={};S(e,function(t,r){w(e[r])?n[r]=function(t){for(var e=[],n=0;n<t.length;n++)w(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[r]):n[r]=e[r]});var r=new this.constructor({attrs:n});return S(tV,function(e){r.set(e,t.get(e))}),r},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t,e,n,r,i,o,a,s,l,u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var c=this.get("timeline");c||(c=this.get("canvas").get("timeline"),this.set("timeline",c));var d=this.get("animations")||[];c.timer||c.initTimer();var f=u[0],p=u[1],v=u[2],g=void 0===v?"easeLinear":v,y=u[3],C=void 0===y?z:y,w=u[4],b=void 0===w?0:w;m(f)?(i=f,f={}):x(f)&&f.onFrame&&(i=f.onFrame,o=f.repeat),x(p)?(p=(l=p).duration,g=l.easing||"easeLinear",b=l.delay||0,o=l.repeat||o||!1,C=l.callback||z,a=l.pauseCallback||z,s=l.resumeCallback||z):(T(C)&&(b=C,C=null),m(g)?(C=g,g="easeLinear"):g=g||"easeLinear");var _=(t=f,e={},n=this.attr(),S(t,function(t,r){-1!==tY.indexOf(r)||D(n[r],t)||(e[r]=t)}),e),E={fromAttrs:function(t,e){var n={},r=e.attrs;for(var i in t)n[i]=r[i];return n}(_,this),toAttrs:_,duration:p,easing:g,repeat:o,callback:C,pauseCallback:a,resumeCallback:s,delay:b,startTime:c.getTime(),id:(k[r=r||"g"]?k[r]+=1:k[r]=1,r+k[r]),onFrame:i,pathFormatted:!1};d.length>0?d=function(t,e){if(e.onFrame)return t;var n=e.startTime,r=e.delay,i=e.duration,o=Object.prototype.hasOwnProperty;return S(t,function(t){n+r<t.startTime+t.delay+t.duration&&i>t.delay&&S(e.toAttrs,function(e,n){o.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])})}),t}(d,E):c.addAnimator(this),d.push(E),this.set("animations",d),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0),S(this.get("animations"),function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),n=t.getTime();return S(e,function(t){t._paused=!0,t._pauseTime=n,t.pauseCallback&&t.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),n=this.get("_pause").pauseTime;return S(e,function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},e.prototype.emitDelegation=function(t,e){var n,r=this,i=e.propagationPath;this.getEvents(),"mouseenter"===t?n=e.fromShape:"mouseleave"===t&&(n=e.toShape);for(var o=this,a=0;a<i.length&&"break"!==function(t){var a=i[t],s=a.get("name");if(s){if((a.isGroup()||a.isCanvas&&a.isCanvas())&&n&&tw(a,n))return"break";w(s)?S(s,function(t){r.emitDelegateEvent(a,t,e)}):o.emitDelegateEvent(a,s,e)}}(a);a++);},e.prototype.emitDelegateEvent=function(t,e,n){var r=this.getEvents(),i=e+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(i,n))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=tB(this.getMatrix(),[["t",t,e]]);return this.setMatrix(n),this},e.prototype.move=function(t,e){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-n,e-r),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var n=tB(this.getMatrix(),[["s",t,e||t]]);return this.setMatrix(n),this},e.prototype.rotate=function(t){var e=tB(this.getMatrix(),[["r",t]]);return this.setMatrix(e),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),n=e.x,r=e.y,i=tB(this.getMatrix(),[["t",-n,-r],["r",t],["t",n,r]]);return this.setMatrix(i),this},e.prototype.rotateAtPoint=function(t,e,n){var r=tB(this.getMatrix(),[["t",-t,-e],["r",n],["t",t,e]]);return this.setMatrix(r),this},e}(tS),tj={},tX="_INDEX",tq=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.getChildren().filter(function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)});return i.length>0?S(i,function(i){var o=i.getBBox(),a=o.minX,s=o.maxX,l=o.minY,u=o.maxY;a<t&&(t=a),s>e&&(e=s),l<n&&(n=l),u>r&&(r=u)}):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.getChildren().filter(function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)});return i.length>0?S(i,function(i){var o=i.getCanvasBBox(),a=o.minX,s=o.maxX,l=o.minY,u=o.maxY;a<t&&(t=a),s>e&&(e=s),l<n&&(n=l),u>r&&(r=u)}):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,n,r){if(t.prototype.onAttrChange.call(this,e,n,r),"matrix"===e){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},e.prototype._applyChildrenMarix=function(t){S(this.getChildren(),function(e){e.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];x(n)?r=n:r.type=n;var i=tj[r.type];i||(i=A(r.type),tj[r.type]=i);var o=new(this.getShapeBase())[i](r);return this.add(o),o},e.prototype.addGroup=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1];return t=m(r)?new r(i||{parent:this}):new(this.getGroupBase())(r||{}),this.add(t),t},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,n){if(!tx(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,t,e,n);else{var o=[t,e,1];o=this.invertFromMatrix(o),this.isClipped(o[0],o[1])||(r=this._findShape(i,o[0],o[1],n))}return r},e.prototype._findShape=function(t,e,n,r){for(var i=null,o=t.length-1;o>=0;o--){var a=t[o];if(tx(a)&&(a.isGroup()?i=a.getShape(e,n,r):a.isHit(e,n)&&(i=a)),i)break}return i},e.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=t.getParent();i&&(t.set("parent",null),t.set("canvas",null),tm(i.getChildren(),t)),t.set("parent",this),e&&function t(e,n){if(e.set("canvas",n),e.isGroup()){var r=e.get("children");r.length&&r.forEach(function(e){t(e,n)})}}(t,e),r&&function t(e,n){if(e.set("timeline",n),e.isGroup()){var r=e.get("children");r.length&&r.forEach(function(e){t(e,n)})}}(t,r),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();S(t,function(t,e){return t[tX]=e,t}),t.sort(function(t,e){var n=t.get("zIndex")-e.get("zIndex");return 0===n?t[tX]-e[tX]:n}),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[];return S(this.getChildren(),function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))}),e},e.prototype.find=function(t){var e=null;return S(this.getChildren(),function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1}),e},e.prototype.findById=function(t){return this.find(function(e){return e.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(e){return e.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(e){return e.get("name")===t})},e}(tU),tK=0,tZ=0,t$=0,tQ=0,tJ=0,t0=0,t1="object"==typeof performance&&performance.now?performance:Date,t2=window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function t4(){return tJ||(t2(t3),tJ=t1.now()+t0)}function t3(){tJ=0}function t5(){this._call=this._time=this._next=null}function t8(t,e,n){var r=new t5;return r.restart(t,e,n),r}function t6(){tJ=(tQ=t1.now())+t0,tK=tZ=0;try{!function(){t4(),++tK;for(var t,e=tF;e;)(t=tJ-e._time)>=0&&e._call.call(null,t),e=e._next;--tK}()}finally{tK=0,function(){for(var t,e,n=tF,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:tF=e);tW=t,t9(r)}(),tJ=0}}function t7(){var t=t1.now(),e=t-tQ;e>1e3&&(t0-=e,tQ=t)}function t9(t){!tK&&(tZ&&(tZ=clearTimeout(tZ)),t-tJ>24?(t<1/0&&(tZ=setTimeout(t6,t-t1.now()-t0)),t$&&(t$=clearInterval(t$))):(t$||(tQ=t1.now(),t$=setInterval(t7,1e3)),tK=1,t2(t6)))}function et(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ee(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function en(){}t5.prototype=t8.prototype={constructor:t5,restart:function(t,e,n){if("function"!=typeof t)throw TypeError("callback is not a function");n=(null==n?t4():+n)+(null==e?0:+e),this._next||tW===this||(tW?tW._next=this:tF=this,tW=this),this._call=t,this._time=n,t9()},stop:function(){this._call&&(this._call=null,this._time=1/0,t9())}};var er="\\s*([+-]?\\d+)\\s*",ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ea=/^#([0-9a-f]{3,8})$/,es=new RegExp("^rgb\\(".concat(er,",").concat(er,",").concat(er,"\\)$")),el=new RegExp("^rgb\\(".concat(eo,",").concat(eo,",").concat(eo,"\\)$")),eu=new RegExp("^rgba\\(".concat(er,",").concat(er,",").concat(er,",").concat(ei,"\\)$")),eh=new RegExp("^rgba\\(".concat(eo,",").concat(eo,",").concat(eo,",").concat(ei,"\\)$")),ec=new RegExp("^hsl\\(".concat(ei,",").concat(eo,",").concat(eo,"\\)$")),ed=new RegExp("^hsla\\(".concat(ei,",").concat(eo,",").concat(eo,",").concat(ei,"\\)$")),ef={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ep(){return this.rgb().formatHex()}function ev(){return this.rgb().formatRgb()}function eg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ea.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ey(e):3===n?new ew(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?em(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?em(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=es.exec(t))?new ew(e[1],e[2],e[3],1):(e=el.exec(t))?new ew(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=eu.exec(t))?em(e[1],e[2],e[3],e[4]):(e=eh.exec(t))?em(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ec.exec(t))?eL(e[1],e[2]/100,e[3]/100,1):(e=ed.exec(t))?eL(e[1],e[2]/100,e[3]/100,e[4]):ef.hasOwnProperty(t)?ey(ef[t]):"transparent"===t?new ew(NaN,NaN,NaN,0):null}function ey(t){return new ew(t>>16&255,t>>8&255,255&t,1)}function em(t,e,n,r){return r<=0&&(t=e=n=NaN),new ew(t,e,n,r)}function eC(t,e,n,r){var i;return 1==arguments.length?((i=t)instanceof en||(i=eg(i)),i)?new ew((i=i.rgb()).r,i.g,i.b,i.opacity):new ew:new ew(t,e,n,null==r?1:r)}function ew(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function ex(){return"#".concat(eE(this.r)).concat(eE(this.g)).concat(eE(this.b))}function eS(){let t=eb(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(e_(this.r),", ").concat(e_(this.g),", ").concat(e_(this.b)).concat(1===t?")":", ".concat(t,")"))}function eb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function e_(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function eE(t){return((t=e_(t))<16?"0":"")+t.toString(16)}function eL(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new eM(t,e,n,r)}function eT(t){if(t instanceof eM)return new eM(t.h,t.s,t.l,t.opacity);if(t instanceof en||(t=eg(t)),!t)return new eM;if(t instanceof eM)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+(n<r)*6:n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new eM(a,s,l,t.opacity)}function eM(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function eR(t){return(t=(t||0)%360)<0?t+360:t}function eI(t){return Math.max(0,Math.min(1,t||0))}function eO(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}et(en,eg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ep,formatHex:ep,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return eT(this).formatHsl()},formatRgb:ev,toString:ev}),et(ew,eC,ee(en,{brighter(t){return t=null==t?1.4285714285714286:Math.pow(1.4285714285714286,t),new ew(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ew(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ew(e_(this.r),e_(this.g),e_(this.b),eb(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ex,formatHex:ex,formatHex8:function(){return"#".concat(eE(this.r)).concat(eE(this.g)).concat(eE(this.b)).concat(eE((isNaN(this.opacity)?1:this.opacity)*255))},formatRgb:eS,toString:eS})),et(eM,function(t,e,n,r){return 1==arguments.length?eT(t):new eM(t,e,n,null==r?1:r)},ee(en,{brighter(t){return t=null==t?1.4285714285714286:Math.pow(1.4285714285714286,t),new eM(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new eM(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ew(eO(t>=240?t-240:t+120,i,r),eO(t,i,r),eO(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new eM(eR(this.h),eI(this.s),eI(this.l),eb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=eb(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(eR(this.h),", ").concat(100*eI(this.s),"%, ").concat(100*eI(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));var eA=t=>()=>t;function eB(t,e){var n=e-t;return n?function(e){return t+e*n}:eA(isNaN(t)?e:t)}var eN=function t(e){var n,r=1==(n=+(n=e))?eB:function(t,e){var r,i,o;return e-t?(r=t,i=e,r=Math.pow(r,o=n),i=Math.pow(i,o)-r,o=1/o,function(t){return Math.pow(r+t*i,o)}):eA(isNaN(t)?e:t)};function i(t,e){var n=r((t=eC(t)).r,(e=eC(e)).r),i=r(t.g,e.g),o=r(t.b,e.b),a=eB(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function eD(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function ek(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ez(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=Array(i),a=Array(r);for(n=0;n<i;++n)o[n]=eW(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function eP(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var eH=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,eF=RegExp(eH.source,"g");function eW(t,e){var n,r=typeof e;return null==e||"boolean"===r?eA(e):("number"===r?eP:"string"===r?(n=eg(e))?(e=n,eN):function(t,e){var n,r,i,o,a,s=eH.lastIndex=eF.lastIndex=0,l=-1,u=[],h=[];for(t+="",e+="";(i=eH.exec(t))&&(o=eF.exec(e));)(a=o.index)>s&&(a=e.slice(s,a),u[l]?u[l]+=a:u[++l]=a),(i=i[0])===(o=o[0])?u[l]?u[l]+=o:u[++l]=o:(u[++l]=null,h.push({i:l,x:eP(i,o)})),s=eF.lastIndex;return s<e.length&&(a=e.slice(s),u[l]?u[l]+=a:u[++l]=a),u.length<2?h[0]?(n=h[0].x,function(t){return n(t)+""}):(r=e,function(){return r}):(e=h.length,function(t){for(var n,r=0;r<e;++r)u[(n=h[r]).i]=n.x(t);return u.join("")})}:e instanceof eg?eN:e instanceof Date?function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}:ek(e)?eD:Array.isArray(e)?ez:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,r={},i={};for(n in(null===t||"object"!=typeof t)&&(t={}),(null===e||"object"!=typeof e)&&(e={}),e)n in t?r[n]=eW(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}:eP)(t,e)}function eG(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function eV(t){return t*t*t}function eY(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var eU=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),ej=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),eX=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),eq=Math.PI,eK=eq/2;function eZ(t){return(1-Math.cos(eq*t))/2}function e$(t){return(Math.pow(2,-10*t)-9765625e-10)*1.0009775171065494}function eQ(t){return((t*=2)<=1?e$(1-t):2-e$(t-1))/2}function eJ(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var e0=4/11,e1=6/11,e2=8/11,e4=3/4,e3=9/11,e5=10/11,e8=15/16,e6=21/22,e7=63/64,e9=1/(4/11)/(4/11);function nt(t){return(t=+t)<e0?e9*t*t:t<e2?e9*(t-=e1)*t+e4:t<e5?e9*(t-=e3)*t+e8:e9*(t-=e6)*t+e7}var ne=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(1.70158),nn=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(1.70158),nr=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),ni=2*Math.PI,no=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ni);function i(t){return e*e$(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*ni)},i.period=function(n){return t(e,n)},i}(1,.3),na=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ni);function i(t){return 1-e*e$(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*ni)},i.period=function(n){return t(e,n)},i}(1,.3),ns=Object.freeze({__proto__:null,easeLinear:function(t){return+t},easeQuad:eG,easeQuadIn:function(t){return t*t},easeQuadOut:function(t){return t*(2-t)},easeQuadInOut:eG,easeCubic:eY,easeCubicIn:eV,easeCubicOut:function(t){return--t*t*t+1},easeCubicInOut:eY,easePoly:eX,easePolyIn:eU,easePolyOut:ej,easePolyInOut:eX,easeSin:eZ,easeSinIn:function(t){return 1==+t?1:1-Math.cos(t*eK)},easeSinOut:function(t){return Math.sin(t*eK)},easeSinInOut:eZ,easeExp:eQ,easeExpIn:function(t){return e$(1-+t)},easeExpOut:function(t){return 1-e$(t)},easeExpInOut:eQ,easeCircle:eJ,easeCircleIn:function(t){return 1-Math.sqrt(1-t*t)},easeCircleOut:function(t){return Math.sqrt(1- --t*t)},easeCircleInOut:eJ,easeBounce:nt,easeBounceIn:function(t){return 1-nt(1-t)},easeBounceOut:nt,easeBounceInOut:function(t){return((t*=2)<=1?1-nt(1-t):nt(t-1)+1)/2},easeBack:nr,easeBackIn:ne,easeBackOut:nn,easeBackInOut:nr,easeElastic:na,easeElasticIn:no,easeElasticOut:na,easeElasticInOut:function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ni);function i(t){return((t=2*t-1)<0?e*e$(-t)*Math.sin((r-t)/n):2-e*e$(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*ni)},i.period=function(n){return t(e,n)},i}(1,.3)}),nl={},nu=[1,0,0,0,1,0,0,0,1],nh=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,n,r=this;this.timer=t8(function(i){if(r.current=i,r.animators.length>0){for(var o=r.animators.length-1;o>=0;o--){if((t=r.animators[o]).destroyed){r.removeAnimator(o);continue}if(!t.isAnimatePaused()){e=t.get("animations");for(var a=e.length-1;a>=0;a--)(function(t,e,n){var r,i,o=e.startTime;if(n<o+e.delay||e._paused)return!1;var a=e.duration,s=nl[(r=e.easing).toLowerCase()]||ns[r];if(n=n-o-e.delay,e.repeat)i=s(i=n%a/a);else{if(!((i=n/a)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;i=s(i)}if(e.onFrame){var l=e.onFrame(i);t.attr(l)}else!function(t,e,n){var r,i={},o=e.fromAttrs,a=e.toAttrs;if(!t.destroyed){for(var s in a)if(!D(o[s],a[s])){if("path"===s){var l,u=a[s],h=o[s];u.length>h.length?(u=W(a[s]),h=tp(h=tc(h=W(o[s]),u),u),e.fromAttrs.path=h,e.toAttrs.path=u):e.pathFormatted||(u=W(a[s]),h=tp(h=W(o[s]),u),e.fromAttrs.path=h,e.toAttrs.path=u,e.pathFormatted=!0),i[s]=[];for(var c=0;c<u.length;c++){for(var d=u[c],f=h[c],p=[],v=0;v<d.length;v++)T(d[v])&&f&&T(f[v])?(r=eW(f[v],d[v]),p.push(r(n))):p.push(d[v]);i[s].push(p)}}else if("matrix"===s){var g,y,C=(g=o[s]||nu,(ek(y=a[s]||nu)?eD:ez)(g,y))(n);i[s]=C}else["fill","stroke","fillStyle","strokeStyle"].includes(s)&&(l=a[s],/^[r,R,L,l]{1}[\s]*\(/.test(l))?i[s]=a[s]:m(a[s])||(r=eW(o[s],a[s]),i[s]=r(n))}t.attr(i)}}(t,e,i);return!1})(t,n=e[a],i)&&(e.splice(a,1),n.callback&&n.callback())}0===e.length&&r.removeAnimator(o)}r.canvas.get("autoDraw")||r.canvas.draw()}})},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach(function(e){e.stopAnimate(t)}),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),nc=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function nd(t,e,n){n.name=e,n.target=t,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}var nf=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var n=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,n,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var n=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,n,null),e._emitEvent("dragend",t,n,e.draggingShape),e._afterDrag(e.draggingShape,n,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");S(nc,function(n){e.addEventListener(n,t._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");S(nc,function(n){e.removeEventListener(n,t._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,n,r,i,o){var a=new tg(t,e);return a.fromShape=i,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),r=e.getPointByEvent(t);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),r=this._getShape(n,e),i=this["_on"+t],o=!1;if(i)i.call(this,n,r,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,r),r&&this._emitEvent(t,e,n,r,null,r),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,a&&this._emitEvent(t,e,n,a,a,null),this._emitEvent(t,e,n,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(t,e,n){0===n.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",t,e,n,n,r),this._emitEvent("mouseleave",t,e,n,n,r),(!r||r.get("destroyed"))&&(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",t,e,r,n,r),this._emitEvent("mouseenter",t,e,r,n,r)))},t.prototype._emitDragoverEvents=function(t,e,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,r),this._emitEvent("dragenter",t,e,r,n,r)),i||this._emitEvent("dragover",t,e,r)):n&&this._emitEvent("dragleave",t,e,n,n,r),i&&this._emitEvent("dragover",t,e,r)},t.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(e,n);r!==t&&this._emitMouseoverEvents(n,e,t,r),this.currentShape=r},t.prototype._onmouseup=function(t,e,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,r),this._afterDrag(r,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,t,r,e,!0)},t.prototype._onmousemove=function(t,e,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,i,e,!1),this._emitEvent("drag",n,t,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,u=a.clientX-t.clientX,h=a.clientY-t.clientY;l>120||u*u+h*h>40?s&&s.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)}},t.prototype._emitEvent=function(t,e,n,r,i,o){var a=this._getEventObj(t,e,n,r,i,o);if(r){a.shape=r,nd(r,t,a);for(var s=r.getParent();s;)s.emitDelegation(t,a),a.propagationStopped||function(t,e,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===e?(r=n.fromShape,i=!0):"mouseleave"===e&&(i=!0,r=n.toShape),!t.isCanvas()||!i){if(r&&tw(t,r)){n.bubbles=!1;return}n.name=e,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}}}(s,t,a),a.propagationPath.push(s),s=s.getParent()}else nd(this.canvas,t,a)},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),np=m7?tI(m7):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}:"undefined"!=typeof navigator?tI(navigator.userAgent):void 0!==a&&a.version?new function(t){this.version=t,this.type="node",this.name="node",this.os=a.platform}(a.version.slice(1)):null,nv=np&&"firefox"===np.name,ng=function(t){function e(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return u(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},e.prototype.initContainer=function(){var t=this.get("container");L(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new nf({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new nh(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var n=this.get("el");tC&&(n.style.width=t+"px",n.style.height=e+"px")},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");tC&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(nv&&!C(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!C(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),n=e.x,r=e.y;return this.getPointByClient(n,r)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t-n.left,y:e-n.top}},e.prototype.getClientByPoint=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t+n.left,y:e+n.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(tq),ny=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];e.add(i.clone())}return e},e}(tq),nm=function(t){function e(e){return t.call(this,e)||this}return u(e,t),e.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;if(e){var a=tD(e,[t.minX,t.minY]),s=tD(e,[t.maxX,t.minY]),l=tD(e,[t.minX,t.maxY]),u=tD(e,[t.maxX,t.maxY]);n=Math.min(a[0],s[0],l[0],u[0]),i=Math.max(a[0],s[0],l[0],u[0]),r=Math.min(a[1],s[1],l[1],u[1]),o=Math.max(a[1],s[1],l[1],u[1])}var h=this.attrs;if(h.shadowColor){var c=h.shadowBlur,d=void 0===c?0:c,f=h.shadowOffsetX,p=void 0===f?0:f,v=h.shadowOffsetY,g=void 0===v?0:v,y=n-d+p,m=i+d+p,C=r-d+g,w=o+d+g;n=Math.min(n,y),i=Math.max(i,m),r=Math.min(r,C),o=Math.max(o,w)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:o,width:i-n,height:o-r}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[t,e,1],o=(i=this.invertFromMatrix(i))[0],a=i[1],s=this._isInBBox(o,a);return this.isOnlyHitBox()?s:!!(s&&!this.isClipped(o,a)&&(this.isInShape(o,a)||n&&n.isHit(o,a)||r&&r.isHit(o,a)))},e}(tU),nC=new Map;function nw(t,e){nC.set(t,e)}function nx(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}function nS(t){var e=t.attr(),n=e.x,r=e.y,i=e.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function nb(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function n_(t,e){return .001>Math.abs(t-e)}function nE(t,e){var n=E(t),r=E(e);return{x:n,y:r,width:_(t)-n,height:_(e)-r}}function nL(t){return(t+2*Math.PI)%(2*Math.PI)}var nT={box:function(t,e,n,r){return nE([t,n],[e,r])},length:function(t,e,n,r){return nb(t,e,n,r)},pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,o){var a=(n-t)*(i-t)+(r-e)*(o-e);return a<0?nb(t,e,i,o):a>(n-t)*(n-t)+(r-e)*(r-e)?nb(n,r,i,o):this.pointToLine(t,e,n,r,i,o)},pointToLine:function(t,e,n,r,i,o){var a,s,l,u,h=[n-t,r-e];if(0===h[0]&&0===h[1])return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var c=[-h[1],h[0]];return(l=(a=c[0])*a+(s=c[1])*s)>0&&(l=1/Math.sqrt(l)),c[0]=c[0]*l,c[1]=c[1]*l,Math.abs((u=[i-t,o-e])[0]*c[0]+u[1]*c[1])},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}};function nM(t,e,n,r,i,o){var a,s=1/0,l=[n,r],u=20;o&&o>200&&(u=o/10);for(var h=1/u,c=h/10,d=0;d<=u;d++){var f=d*h,p=[i.apply(null,t.concat([f])),i.apply(null,e.concat([f]))],v=nb(l[0],l[1],p[0],p[1]);v<s&&(a=f,s=v)}if(0===a)return{x:t[0],y:e[0]};if(1===a){var g=t.length;return{x:t[g-1],y:e[g-1]}}s=1/0;for(var d=0;d<32&&!(c<1e-4);d++){var y=a-c,m=a+c,p=[i.apply(null,t.concat([y])),i.apply(null,e.concat([y]))],v=nb(l[0],l[1],p[0],p[1]);if(y>=0&&v<s)a=y,s=v;else{var C=[i.apply(null,t.concat([m])),i.apply(null,e.concat([m]))],w=nb(l[0],l[1],C[0],C[1]);m<=1&&w<s?(a=m,s=w):c*=.5}}return{x:i.apply(null,t.concat([a])),y:i.apply(null,e.concat([a]))}}function nR(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function nI(t,e,n){var r=t+n-2*e;if(n_(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function nO(t,e,n,r){return 2*(1-r)*(e-t)+2*r*(n-e)}function nA(t,e,n,r,i,o,a){var s=nR(t,n,i,a),l=nR(e,r,o,a),u=nT.pointAt(t,e,n,r,a),h=nT.pointAt(n,r,i,o,a);return[[t,e,u.x,u.y,s,l],[s,l,h.x,h.y,i,o]]}var nB={box:function(t,e,n,r,i,o){var a=nI(t,n,i)[0],s=nI(e,r,o)[0],l=[t,i],u=[e,o];return void 0!==a&&l.push(nR(t,n,i,a)),void 0!==s&&u.push(nR(e,r,o,s)),nE(l,u)},length:function(t,e,n,r,i,o){return function t(e,n,r,i,o,a,s){if(0===s)return(nb(e,n,r,i)+nb(r,i,o,a)+nb(e,n,o,a))/2;var l=nA(e,n,r,i,o,a,.5),u=l[0],h=l[1];return u.push(s-1),h.push(s-1),t.apply(null,u)+t.apply(null,h)}(t,e,n,r,i,o,3)},nearestPoint:function(t,e,n,r,i,o,a,s){return nM([t,n,i],[e,r,o],a,s,nR)},pointDistance:function(t,e,n,r,i,o,a,s){var l=this.nearestPoint(t,e,n,r,i,o,a,s);return nb(l.x,l.y,a,s)},interpolationAt:nR,pointAt:function(t,e,n,r,i,o,a){return{x:nR(t,n,i,a),y:nR(e,r,o,a)}},divide:function(t,e,n,r,i,o,a){return nA(t,e,n,r,i,o,a)},tangentAngle:function(t,e,n,r,i,o,a){var s=nO(t,n,i,a);return nL(Math.atan2(nO(e,r,o,a),s))}};function nN(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function nD(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function nk(t,e,n,r){var i,o,a,s=-3*t+9*e-9*n+3*r,l=6*t-12*e+6*n,u=3*e-3*t,h=[];if(n_(s,0))!n_(l,0)&&(i=-u/l)>=0&&i<=1&&h.push(i);else{var c=l*l-4*s*u;n_(c,0)?h.push(-l/(2*s)):c>0&&(i=(-l+(a=Math.sqrt(c)))/(2*s),o=(-l-a)/(2*s),i>=0&&i<=1&&h.push(i),o>=0&&o<=1&&h.push(o))}return h}function nz(t,e,n,r,i,o,a,s,l){var u=nN(t,n,i,a,l),h=nN(e,r,o,s,l),c=nT.pointAt(t,e,n,r,l),d=nT.pointAt(n,r,i,o,l),f=nT.pointAt(i,o,a,s,l),p=nT.pointAt(c.x,c.y,d.x,d.y,l),v=nT.pointAt(d.x,d.y,f.x,f.y,l);return[[t,e,c.x,c.y,p.x,p.y,u,h],[u,h,v.x,v.y,f.x,f.y,a,s]]}var nP={extrema:nk,box:function(t,e,n,r,i,o,a,s){for(var l=[t,a],u=[e,s],h=nk(t,n,i,a),c=nk(e,r,o,s),d=0;d<h.length;d++)l.push(nN(t,n,i,a,h[d]));for(var d=0;d<c.length;d++)u.push(nN(e,r,o,s,c[d]));return nE(l,u)},length:function(t,e,n,r,i,o,a,s){return function t(e,n,r,i,o,a,s,l,u){if(0===u)return function(t,e){for(var n=0,r=t.length,i=0;i<r;i++)n+=nb(t[i],e[i],t[(i+1)%r],e[(i+1)%r]);return n/2}([e,r,o,s],[n,i,a,l]);var h=nz(e,n,r,i,o,a,s,l,.5),c=h[0],d=h[1];return c.push(u-1),d.push(u-1),t.apply(null,c)+t.apply(null,d)}(t,e,n,r,i,o,a,s,3)},nearestPoint:function(t,e,n,r,i,o,a,s,l,u,h){return nM([t,n,i,a],[e,r,o,s],l,u,nN,h)},pointDistance:function(t,e,n,r,i,o,a,s,l,u,h){var c=this.nearestPoint(t,e,n,r,i,o,a,s,l,u,h);return nb(c.x,c.y,l,u)},interpolationAt:nN,pointAt:function(t,e,n,r,i,o,a,s,l){return{x:nN(t,n,i,a,l),y:nN(e,r,o,s,l)}},divide:function(t,e,n,r,i,o,a,s,l){return nz(t,e,n,r,i,o,a,s,l)},tangentAngle:function(t,e,n,r,i,o,a,s,l){var u=nD(t,n,i,a,l);return nL(Math.atan2(nD(e,r,o,s,l),u))}};function nH(t,e){var n=Math.abs(t);return e>0?n:-1*n}var nF={box:function(t,e,n,r){return{x:t-n,y:e-r,width:2*n,height:2*r}},length:function(t,e,n,r){return Math.PI*(3*(n+r)-Math.sqrt((3*n+r)*(n+3*r)))},nearestPoint:function(t,e,n,r,i,o){if(0===n||0===r)return{x:t,y:e};for(var a,s,l=i-t,u=o-e,h=Math.abs(l),c=Math.abs(u),d=n*n,f=r*r,p=Math.PI/4,v=0;v<4;v++){a=n*Math.cos(p),s=r*Math.sin(p);var g=(d-f)*Math.pow(Math.cos(p),3)/n,y=(f-d)*Math.pow(Math.sin(p),3)/r,m=a-g,C=s-y,w=h-g,x=c-y,S=Math.hypot(C,m),b=Math.hypot(x,w);p+=S*Math.asin((m*x-C*w)/(S*b))/Math.sqrt(d+f-a*a-s*s),p=Math.min(Math.PI/2,Math.max(0,p))}return{x:t+nH(a,l),y:e+nH(s,u)}},pointDistance:function(t,e,n,r,i,o){var a=this.nearestPoint(t,e,n,r,i,o);return nb(a.x,a.y,i,o)},pointAt:function(t,e,n,r,i){var o=2*Math.PI*i;return{x:t+n*Math.cos(o),y:e+r*Math.sin(o)}},tangentAngle:function(t,e,n,r,i){var o=2*Math.PI*i;return nL(Math.atan2(r*Math.cos(o),-n*Math.sin(o)))}};function nW(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function nG(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}function nV(t,e,n){return{x:t*Math.cos(n),y:e*Math.sin(n)}}function nY(t,e,n){var r=Math.cos(n),i=Math.sin(n);return[t*r-e*i,t*i+e*r]}var nU={box:function(t,e,n,r,i,o,a){for(var s=Math.atan(-r/n*Math.tan(i)),l=1/0,u=-1/0,h=[o,a],c=-(2*Math.PI);c<=2*Math.PI;c+=Math.PI){var d=s+c;o<a?o<d&&d<a&&h.push(d):a<d&&d<o&&h.push(d)}for(var c=0;c<h.length;c++){var f=nW(t,e,n,r,i,h[c]);f<l&&(l=f),f>u&&(u=f)}for(var p=Math.atan(r/(n*Math.tan(i))),v=1/0,g=-1/0,y=[o,a],c=-(2*Math.PI);c<=2*Math.PI;c+=Math.PI){var m=p+c;o<a?o<m&&m<a&&y.push(m):a<m&&m<o&&y.push(m)}for(var c=0;c<y.length;c++){var C=nG(t,e,n,r,i,y[c]);C<v&&(v=C),C>g&&(g=C)}return{x:l,y:v,width:u-l,height:g-v}},length:function(t,e,n,r,i,o,a){},nearestPoint:function(t,e,n,r,i,o,a,s,l){var u,h=nY(s-t,l-e,-i),c=h[0],d=h[1],f=nF.nearestPoint(0,0,n,r,c,d),p=(u=f.x,(Math.atan2(f.y*n,u*r)+2*Math.PI)%(2*Math.PI));p<o?f=nV(n,r,o):p>a&&(f=nV(n,r,a));var v=nY(f.x,f.y,i);return{x:v[0]+t,y:v[1]+e}},pointDistance:function(t,e,n,r,i,o,a,s,l){var u=this.nearestPoint(t,e,n,r,s,l);return nb(u.x,u.y,s,l)},pointAt:function(t,e,n,r,i,o,a,s){var l=(a-o)*s+o;return{x:nW(t,e,n,r,i,l),y:nG(t,e,n,r,i,l)}},tangentAngle:function(t,e,n,r,i,o,a,s){var l=(a-o)*s+o,u=-1*n*Math.cos(i)*Math.sin(l)-r*Math.sin(i)*Math.cos(l);return nL(Math.atan2(-1*n*Math.sin(i)*Math.sin(l)+r*Math.cos(i)*Math.cos(l),u))}};function nj(t){for(var e=0,n=[],r=0;r<t.length-1;r++){var i=t[r],o=t[r+1],a=nb(i[0],i[1],o[0],o[1]),s={from:i,to:o,length:a};n.push(s),e+=a}return{segments:n,totalLength:e}}var nX={box:function(t){for(var e=[],n=[],r=0;r<t.length;r++){var i=t[r];e.push(i[0]),n.push(i[1])}return nE(e,n)},length:function(t){return function(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=nb(r[0],r[1],i[0],i[1])}return e}(t)},pointAt:function(t,e){return function(t,e){if(e>1||e<0||t.length<2)return null;var n=nj(t),r=n.segments,i=n.totalLength;if(0===i)return{x:t[0][0],y:t[0][1]};for(var o=0,a=null,s=0;s<r.length;s++){var l=r[s],u=l.from,h=l.to,c=l.length/i;if(e>=o&&e<=o+c){var d=(e-o)/c;a=nT.pointAt(u[0],u[1],h[0],h[1],d);break}o+=c}return a}(t,e)},pointDistance:function(t,e,n){return function(t,e,n){for(var r=1/0,i=0;i<t.length-1;i++){var o=t[i],a=t[i+1],s=nT.pointDistance(o[0],o[1],a[0],a[1],e,n);s<r&&(r=s)}return r}(t,e,n)},tangentAngle:function(t,e){return function(t,e){if(e>1||e<0||t.length<2)return 0;for(var n=nj(t),r=n.segments,i=n.totalLength,o=0,a=0,s=0;s<r.length;s++){var l=r[s],u=l.from,h=l.to,c=l.length/i;if(e>=o&&e<=o+c){a=Math.atan2(h[1]-u[1],h[0]-u[0]);break}o+=c}return a}(t,e)}};function nq(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function nK(t,e){var n=t.get("startArrowShape"),r=t.get("endArrowShape");return n&&(e=nq(e,n.getCanvasBBox())),r&&(e=nq(e,r.getCanvasBBox())),e}var nZ=null;function n$(){if(!nZ){var t=document.createElement("canvas");t.width=1,t.height=1,nZ=t.getContext("2d")}return nZ}function nQ(t,e,n){var r=1;if(L(t)&&(r=t.split("\n").length),r>1)return e*r+(n?n-e:.14*e)*(r-1);return e}function nJ(t){var e=t.fontSize,n=t.fontFamily,r=t.fontWeight;return[t.fontStyle,t.fontVariant,r,e+"px",n].join(" ").trim()}var n0=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,n1=/[^\s\,]+/ig,n2="	\n\v\f\r \xa0 ᠎             　\u2028\u2029",n4=RegExp("([a-z])["+n2+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+n2+"]*,?["+n2+"]*)+)","ig"),n3=RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+n2+"]*,?["+n2+"]*","ig"),n5=/[a-z]/;function n8(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function n6(t){var e=function(t){if(!t)return null;if(w(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(n4,function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(n3,function(t,e){e&&o.push(+e)}),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=e[a]&&(n.push([r].concat(o.splice(0,e[a]))),e[a]););return""}),n}(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,r=0;r<e.length;r++){var i=e[r][0];if(n5.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return e;var o=[],a=0,s=0,l=0,u=0,h=0,c=e[0];("M"===c[0]||"m"===c[0])&&(a=+c[1],s=+c[2],l=a,u=s,h++,o[0]=["M",a,s]);for(var r=h,d=e.length;r<d;r++){var f=e[r],p=o[r-1],v=[],i=f[0],g=i.toUpperCase();if(i!==g)switch(v[0]=g,g){case"A":v[1]=f[1],v[2]=f[2],v[3]=f[3],v[4]=f[4],v[5]=f[5],v[6]=+f[6]+a,v[7]=+f[7]+s;break;case"V":v[1]=+f[1]+s;break;case"H":v[1]=+f[1]+a;break;case"M":l=+f[1]+a,u=+f[2]+s,v[1]=l,v[2]=u;break;default:for(var y=1,m=f.length;y<m;y++)v[y]=+f[y]+(y%2?a:s)}else v=e[r];switch(g){case"Z":a=+l,s=+u;break;case"H":v=["L",a=v[1],s];break;case"V":v=["L",a,s=v[1]];break;case"T":a=v[1],s=v[2];var C=n8([p[1],p[2]],[p[3],p[4]]);v=["Q",C[0],C[1],a,s];break;case"S":a=v[v.length-2],s=v[v.length-1];var x=p.length,S=n8([p[x-4],p[x-3]],[p[x-2],p[x-1]]);v=["C",S[0],S[1],v[1],v[2],a,s];break;case"M":l=v[v.length-2],u=v[v.length-1];break;default:a=v[v.length-2],s=v[v.length-1]}o.push(v)}return o}function n7(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function n9(t,e){return n7(t)*n7(e)?(t[0]*e[0]+t[1]*e[1])/(n7(t)*n7(e)):1}function rt(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(n9(t,e))}function re(t,e){return t[0]===e[0]&&t[1]===e[1]}function rn(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function rr(t){t=w(e=t||[])?e:L(e)?(S(e=e.match(n0),function(t,n){if((t=t.match(n1))[0].length>1){var r=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=r}S(t,function(e,n){isNaN(e)||(t[n]=+e)}),e[n]=t}),e):void 0;for(var e,n=[],r=null,i=null,o=null,a=0,s=t.length,l=0;l<s;l++){var u=t[l];i=t[l+1];var h=u[0],c={command:h,prePoint:r,params:u,startTangent:null,endTangent:null};switch(h){case"M":o=[u[1],u[2]],a=l;break;case"A":var d=function(t,e){var n=e[1],r=e[2],i=M(I(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],l=t[1],u=e[6],h=e[7],c=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-h)/2,d=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-h)/2,f=c*c/(n*n)+d*d/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(d*d)+r*r*(c*c),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*d/r:0,y=n?-(v*r)*c/n:0,m=(s+u)/2+Math.cos(i)*g-Math.sin(i)*y,C=(l+h)/2+Math.sin(i)*g+Math.cos(i)*y,w=[(c-g)/n,(d-y)/r],x=[(-1*c-g)/n,(-1*d-y)/r],S=rt([1,0],w),b=rt(w,x);return -1>=n9(w,x)&&(b=Math.PI),n9(w,x)>=1&&(b=0),0===a&&b>0&&(b-=2*Math.PI),1===a&&b<0&&(b+=2*Math.PI),{cx:m,cy:C,rx:re(t,[u,h])?0:n,ry:re(t,[u,h])?0:r,startAngle:S,endAngle:S+b,xRotation:i,arcFlag:o,sweepFlag:a}}(r,u);c.arcParams=d}if("Z"===h)r=o,i=t[a+1];else{var f=u.length;r=[u[f-2],u[f-1]]}i&&"Z"===i[0]&&(i=t[a],n[a]&&(n[a].prePoint=r)),c.currentPoint=r,n[a]&&re(r,n[a].currentPoint)&&(n[a].prePoint=c.prePoint);var p=i?[i[i.length-2],i[i.length-1]]:null;c.nextPoint=p;var v=c.prePoint;if(["L","H","V"].includes(h))c.startTangent=[v[0]-r[0],v[1]-r[1]],c.endTangent=[r[0]-v[0],r[1]-v[1]];else if("Q"===h){var g=[u[1],u[2]];c.startTangent=[v[0]-g[0],v[1]-g[1]],c.endTangent=[r[0]-g[0],r[1]-g[1]]}else if("T"===h){var y=n[l-1],g=rn(y.currentPoint,v);"Q"===y.command?(c.command="Q",c.startTangent=[v[0]-g[0],v[1]-g[1]],c.endTangent=[r[0]-g[0],r[1]-g[1]]):(c.command="TL",c.startTangent=[v[0]-r[0],v[1]-r[1]],c.endTangent=[r[0]-v[0],r[1]-v[1]])}else if("C"===h){var m=[u[1],u[2]],C=[u[3],u[4]];c.startTangent=[v[0]-m[0],v[1]-m[1]],c.endTangent=[r[0]-C[0],r[1]-C[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[m[0]-C[0],m[1]-C[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[C[0]-m[0],C[1]-m[1]])}else if("S"===h){var y=n[l-1],m=rn(y.currentPoint,v),C=[u[1],u[2]];"C"===y.command?(c.command="C",c.startTangent=[v[0]-m[0],v[1]-m[1]]):(c.command="SQ",c.startTangent=[v[0]-C[0],v[1]-C[1]]),c.endTangent=[r[0]-C[0],r[1]-C[1]]}else if("A"===h){var x=.001,b=c.arcParams||{},_=b.cx,E=void 0===_?0:_,T=b.cy,R=void 0===T?0:T,O=b.rx,A=void 0===O?0:O,B=b.ry,N=void 0===B?0:B,D=b.sweepFlag,k=void 0===D?0:D,z=b.startAngle,P=void 0===z?0:z,H=b.endAngle,F=void 0===H?0:H;0===k&&(x*=-1);var W=A*Math.cos(P-x)+E,G=N*Math.sin(P-x)+R;c.startTangent=[W-o[0],G-o[1]];var V=A*Math.cos(P+F+x)+E,Y=N*Math.sin(P+F-x)+R;c.endTangent=[v[0]-V,v[1]-Y]}n.push(c)}return n}function ri(t,e){var n,r=t.prePoint,i=t.currentPoint,o=t.nextPoint,a=Math.pow(i[0]-r[0],2)+Math.pow(i[1]-r[1],2),s=Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2),l=Math.acos((a+s-(Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)))/(2*Math.sqrt(a)*Math.sqrt(s)));if(!l||0===Math.sin(l)||(void 0===n&&(n=1e-5),Math.abs(l-0)<n))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(o[1]-i[1],o[0]-i[0])),h=Math.abs(Math.atan2(o[0]-i[0],o[1]-i[1]));return{xExtra:e/2*(1/Math.sin(l/2))*Math.cos(l/2-(u=u>Math.PI/2?Math.PI-u:u))-e/2||0,yExtra:e/2*(1/Math.sin(l/2))*Math.cos((h=h>Math.PI/2?Math.PI-h:h)-l/2)-e/2||0}}function ro(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function ra(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function rs(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function rl(t,e){return t[0]===e[0]&&t[1]===e[1]}nw("rect",nx),nw("image",nx),nw("circle",nS),nw("marker",nS),nw("polyline",function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}var a=nE(n,r),s=a.x,l=a.y,u={minX:s,minY:l,maxX:s+a.width,maxY:l+a.height};return{x:(u=nK(t,u)).minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}}),nw("polygon",function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}return nE(n,r)}),nw("text",function(t){var e,n,r,i,o=t.attr(),a=o.x,s=o.y,l=o.text,u=o.fontSize,h=o.lineHeight,c=o.font;c||(c=nJ(o));var d=(e=c,n=n$(),r=0,C(l)||""===l||(n.save(),n.font=e,L(l)&&l.includes("\n")?S(l.split("\n"),function(t){var e=n.measureText(t).width;r<e&&(r=e)}):r=n.measureText(l).width,n.restore()),r);if(d){var f=o.textAlign,p=o.textBaseline,v=nQ(l,u,h),g={x:a,y:s-v};f&&("end"===f||"right"===f?g.x-=d:"center"===f&&(g.x-=d/2)),p&&("top"===p?g.y+=v:"middle"===p&&(g.y+=v/2)),i={x:g.x,y:g.y,width:d,height:v}}else i={x:a,y:s,width:0,height:0};return i}),nw("path",function(t){var e=t.attr(),n=e.path,r=e.stroke?e.lineWidth:0,i=function(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=t[o],s=a.currentPoint,l=a.params,u=a.prePoint,h=void 0;switch(a.command){case"Q":h=nB.box(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":h=nP.box(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var c=a.arcParams;h=nU.box(c.cx,c.cy,c.rx,c.ry,c.xRotation,c.startAngle,c.endAngle);break;default:n.push(s[0]),r.push(s[1])}h&&(a.box=h,n.push(h.x,h.x+h.width),r.push(h.y,h.y+h.height)),e&&("L"===a.command||"M"===a.command)&&a.prePoint&&a.nextPoint&&i.push(a)}n=n.filter(function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}),r=r.filter(function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0});var d=E(n),f=E(r),p=_(n),v=_(r);if(0===i.length)return{x:d,y:f,width:p-d,height:v-f};for(var o=0;o<i.length;o++){var a=i[o],s=a.currentPoint;s[0]===d?d-=ri(a,e).xExtra:s[0]===p&&(p+=ri(a,e).xExtra),s[1]===f?f-=ri(a,e).yExtra:s[1]===v&&(v+=ri(a,e).yExtra)}return{x:d,y:f,width:p-d,height:v-f}}(t.get("segments")||rr(n),r),o=i.x,a=i.y,s={minX:o,minY:a,maxX:o+i.width,maxY:a+i.height};return{x:(s=nK(t,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}}),nw("line",function(t){var e=t.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,o),maxY:Math.max(r,o)};return{x:(a=nK(t,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}}),nw("ellipse",function(t){var e=t.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}});var ru=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,rh=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,rc=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,rd=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function rf(t,e){S(t.match(rd),function(t){var n=t.split(":");e.addColorStop(n[0],n[1])})}function rp(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function rv(t,e){return rp(t)*rp(e)?(t[0]*e[0]+t[1]*e[1])/(rp(t)*rp(e)):1}function rg(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(rv(t,e))}function ry(t,e){var n=e[1],r=e[2],i=M(I(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],l=t[1],u=e[6],h=e[7],c=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-h)/2,d=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-h)/2,f=c*c/(n*n)+d*d/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(d*d)+r*r*(c*c),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*d/r:0,y=n?-(v*r)*c/n:0,m=(s+u)/2+Math.cos(i)*g-Math.sin(i)*y,C=(l+h)/2+Math.sin(i)*g+Math.cos(i)*y,w=[(c-g)/n,(d-y)/r],x=[(-1*c-g)/n,(-1*d-y)/r],S=rg([1,0],w),b=rg(w,x);return -1>=rv(w,x)&&(b=Math.PI),rv(w,x)>=1&&(b=0),0===a&&b>0&&(b-=2*Math.PI),1===a&&b<0&&(b+=2*Math.PI),{cx:m,cy:C,rx:rl(t,[u,h])?0:n,ry:rl(t,[u,h])?0:r,startAngle:S,endAngle:S+b,xRotation:i,arcFlag:o,sweepFlag:a}}var rm=Math.sin,rC=Math.cos,rw=Math.atan2,rx=Math.PI;function rS(t,e,n,r,i,o,a){var s=e.stroke,l=e.lineWidth,u=rw(r-o,n-i),h=new rK({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*rC(rx/6)+","+10*rm(rx/6)+" L0,0 L"+10*rC(rx/6)+",-"+10*rm(rx/6),stroke:s,lineWidth:l}});h.translate(i,o),h.rotateAtPoint(i,o,u),t.set(a?"startArrowShape":"endArrowShape",h)}function rb(t,e,n,r,i,o,a){var s=e.startArrow,l=e.endArrow,u=e.stroke,d=e.lineWidth,f=a?s:l,p=f.d,v=f.fill,g=f.stroke,y=f.lineWidth,m=c(f,["d","fill","stroke","lineWidth"]),C=rw(r-o,n-i);p&&(i-=rC(C)*p,o-=rm(C)*p);var w=new rK({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:h(h({},m),{stroke:g||u,lineWidth:y||d,fill:v})});w.translate(i,o),w.rotateAtPoint(i,o,C),t.set(a?"startArrowShape":"endArrowShape",w)}function r_(t,e,n,r,i){var o=rw(r-e,n-t);return{dx:rC(o)*i,dy:rm(o)*i}}function rE(t,e,n,r,i,o){"object"==typeof e.startArrow?rb(t,e,n,r,i,o,!0):e.startArrow?rS(t,e,n,r,i,o,!0):t.set("startArrowShape",null)}function rL(t,e,n,r,i,o){"object"==typeof e.endArrow?rb(t,e,n,r,i,o,!1):e.endArrow?rS(t,e,n,r,i,o,!1):t.set("startArrowShape",null)}var rT={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function rM(t,e){var n=e.attr();for(var r in n){var i=n[r],o=rT[r]?rT[r]:r;"matrix"===o&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===o&&t.setLineDash?w(i)&&t.setLineDash(i):("strokeStyle"===o||"fillStyle"===o?i=function(t,e,n){var r,i,o,a,s,l,u,h,c,d,f,p=e.getBBox();if(isNaN(p.x)||isNaN(p.y)||isNaN(p.width)||isNaN(p.height))return n;if(L(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return a=parseFloat((o=ru.exec(n))[1])%360*(Math.PI/180),s=o[2],l=e.getBBox(),a>=0&&a<.5*Math.PI?(r={x:l.minX,y:l.minY},i={x:l.maxX,y:l.maxY}):.5*Math.PI<=a&&a<Math.PI?(r={x:l.maxX,y:l.minY},i={x:l.minX,y:l.maxY}):Math.PI<=a&&a<1.5*Math.PI?(r={x:l.maxX,y:l.maxY},i={x:l.minX,y:l.minY}):(r={x:l.minX,y:l.maxY},i={x:l.maxX,y:l.minY}),h=(u=Math.tan(a))*u,c=(i.x-r.x+u*(i.y-r.y))/(h+1)+r.x,d=u*(i.x-r.x+u*(i.y-r.y))/(h+1)+r.y,rf(s,f=t.createLinearGradient(r.x,r.y,c,d)),f;if("r"===n[0])return function(t,e,n){var r=rh.exec(n),i=parseFloat(r[1]),o=parseFloat(r[2]),a=parseFloat(r[3]),s=r[4];if(0===a){var l=s.match(rd);return l[l.length-1].split(":")[1]}var u=e.getBBox(),h=u.maxX-u.minX,c=u.maxY-u.minY,d=Math.sqrt(h*h+c*c)/2,f=t.createRadialGradient(u.minX+h*i,u.minY+c*o,0,u.minX+h/2,u.minY+c/2,a*d);return rf(s,f),f}(t,e,n);if("p"===n[0])return function(t,e,n){if(e.get("patternSource")&&e.get("patternSource")===n)return e.get("pattern");var r,i,o=rc.exec(n),a=o[1],s=o[2];function l(){r=t.createPattern(i,a),e.set("pattern",r),e.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),r}(t,e,n)}return n}if(n instanceof CanvasPattern)return n}(t,e,i):"globalAlpha"===o&&(i*=t.globalAlpha),t[o]=i)}}function rR(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];i.cfg.visible?i.draw(t,n):i.skipDraw()}}function rI(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&rI(r.get("children")))}}function rO(t,e,n,r){var i=n.path,o=n.startArrow,a=n.endArrow;if(i){var s=[0,0],l=[0,0],u={dx:0,dy:0};e.beginPath();for(var h=0;h<i.length;h++){var c=i[h],d=c[0];if(0===h&&o&&o.d){var f=t.getStartTangent();u=r_(f[0][0],f[0][1],f[1][0],f[1][1],o.d)}else if(h===i.length-2&&"Z"===i[h+1][0]&&a&&a.d){if("Z"===i[h+1][0]){var f=t.getEndTangent();u=r_(f[0][0],f[0][1],f[1][0],f[1][1],a.d)}}else if(h===i.length-1&&a&&a.d&&"Z"!==i[0]){var f=t.getEndTangent();u=r_(f[0][0],f[0][1],f[1][0],f[1][1],a.d)}var p=u.dx,v=u.dy;switch(d){case"M":e.moveTo(c[1]-p,c[2]-v),l=[c[1],c[2]];break;case"L":e.lineTo(c[1]-p,c[2]-v);break;case"Q":e.quadraticCurveTo(c[1],c[2],c[3]-p,c[4]-v);break;case"C":e.bezierCurveTo(c[1],c[2],c[3],c[4],c[5]-p,c[6]-v);break;case"A":var g=void 0;r?(g=r[h])||(g=ry(s,c),r[h]=g):g=ry(s,c);var y=g.cx,m=g.cy,C=g.rx,w=g.ry,x=g.startAngle,S=g.endAngle,b=g.xRotation,_=g.sweepFlag;if(e.ellipse)e.ellipse(y,m,C,w,b,x,S,1-_);else{var E=C>w?C:w,L=C>w?1:C/w,T=C>w?w/C:1;e.translate(y,m),e.rotate(b),e.scale(L,T),e.arc(0,0,E,x,S,1-_),e.scale(1/L,1/T),e.rotate(-b),e.translate(-y,-m)}break;case"Z":e.closePath()}if("Z"===d)s=l;else{var M=c.length;s=[c[M-2],c[M-1]]}}}}function rA(t,e){var n=t.get("canvas");n&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),!(t.cfg.parent&&t.cfg.parent.get("hasChanged"))&&(n.refreshElement(t,e,n),n.get("autoDraw")&&n.draw())))}var rB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.onCanvasChange=function(t){rA(this,t)},e.prototype.getShapeBase=function(){return s},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),rM(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],n=[];S(t,function(t){var r=t.cfg.cacheCanvasBBox;r&&t.cfg.isInView&&(e.push(r.minX,r.maxX),n.push(r.minY,r.maxY))});var r=null;if(e.length){var i=E(e),o=_(e),a=E(n),s=_(n);r={minX:i,minY:a,x:i,y:a,maxX:o,maxY:s,width:o-i,height:s-a};var l=this.cfg.canvas;if(l){var u=l.getViewRange();this.set("isInView",rs(r,u))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},e.prototype.draw=function(t,e){var n=this.cfg.children,r=!e||this.cfg.refresh;n.length&&r&&(t.save(),rM(t,this),this._applyClip(t,this.getClip()),rR(t,n,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(ny),rN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return h(h({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return s},e.prototype.getGroupBase=function(){return rB},e.prototype.onCanvasChange=function(t){rA(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=nC.get(t)(this),r=e/2,i=n.x-r,o=n.y-r,a=n.x+n.width+r,s=n.y+n.height+r;return{x:i,minX:i,y:o,minY:o,width:n.width+e,height:n.height+e,maxX:a,maxY:s}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,e){e&&(t.save(),rM(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var n=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh){this.set("hasChanged",!1);return}if(!rs(e,this.getCanvasBBox())){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),rM(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),n=rs(e,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isFill()&&(C(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.isStroke()&&n>0&&(C(i)||1===i||(t.globalAlpha=i),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(nm),rD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return h(h({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,s=o.y,l=o.r,u=i/2,h=ro(a,s,t,e);return r&&n?h<=l+u:r?h<=l:!!n&&h>=l-u&&h<=l+u},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.r;t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath()},e}(rN),rk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return h(h({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o,a,s,l,u,h,c=this.attr(),d=i/2,f=c.x,p=c.y,v=c.rx,g=c.ry,y=(t-f)*(t-f),m=(e-p)*(e-p);return r&&n?1>=y/((o=v+d)*o)+m/((a=g+d)*a):r?1>=y/(v*v)+m/(g*g):!!n&&y/((s=v-d)*s)+m/((l=g-d)*l)>=1&&1>=y/((u=v+d)*u)+m/((h=g+d)*h)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;t.beginPath(),t.ellipse?t.ellipse(n,r,i,o,0,0,2*Math.PI,!1):(t.save(),t.translate(n,r),t.scale(i>o?1:i/o,i>o?o/i:1),t.arc(0,0,i>o?i:o,0,2*Math.PI),t.restore(),t.closePath())},e}(rN);function rz(t){return t instanceof HTMLElement&&L(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var rP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return h(h({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,n=this.attrs;if(L(t)){var r=new Image;r.onload=function(){if(e.destroyed)return!1;e.attr("img",r),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},r.crossOrigin="Anonymous",r.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):rz(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,t.getAttribute("height")))},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"img"===e&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.sx,s=e.sy,l=e.swidth,u=e.sheight,h=e.img;(h instanceof Image||rz(h))&&(C(a)||C(s)||C(l)||C(u)?t.drawImage(h,n,r,i,o):t.drawImage(h,a,s,l,u,n,r,i,o))},e}(rN);function rH(t,e,n,r,i,o,a){var s=Math.min(t,n),l=Math.max(t,n),u=Math.min(e,r),h=Math.max(e,r),c=i/2;return o>=s-c&&o<=l+c&&a>=u-c&&a<=h+c&&nT.pointToLine(t,e,n,r,o,a)<=i/2}var rF=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return h(h({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=t.startArrow,a=t.endArrow;o&&rE(this,t,r,i,e,n),a&&rL(this,t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){if(!n||!i)return!1;var o=this.attr();return rH(o.x1,o.y1,o.x2,o.y2,i,t,e)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.startArrow,s=e.endArrow,l={dx:0,dy:0},u={dx:0,dy:0};a&&a.d&&(l=r_(n,r,i,o,e.startArrow.d)),s&&s.d&&(u=r_(n,r,i,o,e.endArrow.d)),t.beginPath(),t.moveTo(n+l.dx,r+l.dy),t.lineTo(i-u.dx,o-u.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return nT.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return nT.pointAt(n,r,i,o,t)},e}(rN),rW={circle:function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},rG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return C(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,n,r=this.attr(),i=r.x,o=r.y,a=r.symbol||"circle",s=this._getR(r);if(m(a))n=n6(n=(t=a)(i,o,s));else{if(!(t=e.Symbols[a]))return console.warn(a+" marker is not supported."),null;n=t(i,o,s)}return n},e.prototype.createPath=function(t){rO(this,t,{path:this._getPath()},this.get("paramsCache"))},e.Symbols=rW,e}(rN);function rV(t,e,n){var r=n$();return t.createPath(r),r.isPointInPath(e,n)}function rY(t){return 1e-6>Math.abs(t)?0:t<0?-1:1}function rU(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a,s=t[o],l=t[(o+1)%i];if(((a=[e,n])[0]-s[0])*(l[1]-s[1])==(l[0]-s[0])*(a[1]-s[1])&&Math.min(s[0],l[0])<=a[0]&&a[0]<=Math.max(s[0],l[0])&&Math.min(s[1],l[1])<=a[1]&&a[1]<=Math.max(s[1],l[1]))return!0;rY(s[1]-n)>0!=rY(l[1]-n)>0&&0>rY(e-(n-s[1])*(s[0]-l[0])/(s[1]-l[1])-s[0])&&(r=!r)}return r}function rj(t,e,n,r,i,o,a,s){var l=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI);if(l<r||l>i)return!1;var u={x:t+n*Math.cos(l),y:e+n*Math.sin(l)};return ro(u.x,u.y,a,s)<=o/2}var rX=h({hasArc:function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e},extractPolygons:function(t){for(var e=t.length,n=[],r=[],i=[],o=0;o<e;o++){var a=t[o],s=a[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(t,e,n,r,i){for(var o=!1,a=e/2,s=0;s<t.length;s++){var l=t[s],u=l.currentPoint,h=l.params,c=l.prePoint,d=l.box;if(!d||ra(d.x-a,d.y-a,d.width+e,d.height+e,n,r)){switch(l.command){case"L":case"Z":o=rH(c[0],c[1],u[0],u[1],e,n,r);break;case"Q":o=nB.pointDistance(c[0],c[1],h[1],h[2],h[3],h[4],n,r)<=e/2;break;case"C":o=nP.pointDistance(c[0],c[1],h[1],h[2],h[3],h[4],h[5],h[6],n,r,i)<=e/2;break;case"A":var f=l.arcParams,p=f.cx,v=f.cy,g=f.rx,y=f.ry,m=f.startAngle,C=f.endAngle,w=f.xRotation,x=[n,r,1],S=g>y?g:y;!function(t,e,n){var r=e[0],i=e[1],o=e[2];t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8]}(x,x,tB(null,[["t",-p,-v],["r",-w],["s",1/(g>y?1:g/y),1/(g>y?y/g:1)]])),o=rj(0,0,S,m,C,e,x[0],x[1])}if(o)break}}return o}},tv);function rq(t,e,n){for(var r=!1,i=0;i<t.length&&!(r=rU(t[i],e,n));i++);return r}var rK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return h(h({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"path"===e&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=n6(t);var e=rX.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=rr(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),e=t.startArrow,n=t.endArrow;if(e){var r=this.getStartTangent();rE(this,t,r[0][0],r[0][1],r[1][0],r[1][1])}if(n){var r=this.getEndTangent();rL(this,t,r[0][0],r[0][1],r[1][0],r[1][1])}},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.getSegments(),a=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=rX.isPointInStroke(o,i,t,e,l)}if(!s&&r){if(a)s=rV(this,t,e);else{var u=this.attr("path"),h=rX.extractPolygons(u);s=rq(h.polygons,t,e)||rq(h.polylines,t,e)}}return s},e.prototype.createPath=function(t){rO(this,t,this.attr(),this.get("paramsCache"))},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return C(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;S(r,function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)});var o=i[n];if(C(o)||C(n))return null;var a=o.length,s=i[n+1];return nP.pointAt(o[a-2],o[a-1],s[1],s[2],s[3],s[4],s[5],s[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",rX.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,n,r,i=0,o=0,a=[],s=this.get("curve");if(s){if(S(s,function(t,e){n=s[e+1],r=t.length,n&&(i+=nP.length(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)}),this.set("totalLength",i),0===i){this.set("tCache",[]);return}S(s,function(l,u){n=s[u+1],r=l.length,n&&((t=[])[0]=o/i,e=nP.length(l[r-2],l[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e||0,t[1]=o/i,a.push(t))}),this.set("tCache",a)}},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?t.push([n[0]-i[0],n[1]-i[1]]):t.push([r[0],r[1]]),t.push([n[0],n[1]])}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),n=e.length;if(n>1){var r=e[n-2].currentPoint,i=e[n-1].currentPoint,o=e[n-1].endTangent;t=[],o?t.push([i[0]-o[0],i[1]-o[1]]):t.push([r[0],r[1]]),t.push([i[0],i[1]])}return t},e}(rN);function rZ(t,e,n,r,i){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++)if(rH(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0;if(i){var s=t[0],l=t[o-1];if(rH(s[0],s[1],l[0],l[1],e,n,r))return!0}return!1}var r$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr().points,a=!1;return n&&(a=rZ(o,i,t,e,!0)),!a&&r&&(a=rU(o,t,e)),a},e.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var n=0;n<e.length;n++){var r=e[n];0===n?t.moveTo(r[0],r[1]):t.lineTo(r[0],r[1])}t.closePath()}},e}(rN),rQ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return h(h({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,r=e.startArrow,i=e.endArrow,o=n.length,a=n[0][0],s=n[0][1],l=n[o-1][0],u=n[o-1][1];r&&rE(this,t,n[1][0],n[1][1],a,s),i&&rL(this,t,n[o-2][0],n[o-2][1],l,u)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!!n&&!!i&&rZ(this.attr().points,i,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),n=e.points,r=e.startArrow,i=e.endArrow,o=n.length;if(!(n.length<2)){var a=n[0][0],s=n[0][1],l=n[o-1][0],u=n[o-1][1];if(r&&r.d){var h=r_(a,s,n[1][0],n[1][1],r.d);a+=h.dx,s+=h.dy}if(i&&i.d){var h=r_(n[o-2][0],n[o-2][1],l,u,i.d);l-=h.dx,u-=h.dy}t.beginPath(),t.moveTo(a,s);for(var c=0;c<o-1;c++){var d=n[c];t.lineTo(d[0],d[1])}t.lineTo(l,u)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return C(e)?(this.set("totalLength",nX.length(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),S(i,function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)}),nT.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t,e,n=this.attr().points;if(n&&0!==n.length){var r=this.getTotalLength();if(!(r<=0)){var i=0,o=[];S(n,function(a,s){n[s+1]&&((t=[])[0]=i/r,e=nT.length(a[0],a[1],n[s+1][0],n[s+1][1]),i+=e,t[1]=i/r,o.push(t))}),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(rN),rJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return h(h({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o,a=this.attr(),s=a.x,l=a.y,u=a.width,h=a.height,c=a.radius;if(c){var d=!1;return n&&(d=rH(s+c,l,s+u-c,l,i,t,e)||rH(s+u,l+c,s+u,l+h-c,i,t,e)||rH(s+u-c,l+h,s+c,l+h,i,t,e)||rH(s,l+h-c,s,l+c,i,t,e)||rj(s+u-c,l+c,c,1.5*Math.PI,2*Math.PI,i,t,e)||rj(s+u-c,l+h-c,c,0,.5*Math.PI,i,t,e)||rj(s+c,l+h-c,c,.5*Math.PI,Math.PI,i,t,e)||rj(s+c,l+c,c,Math.PI,1.5*Math.PI,i,t,e)),!d&&r&&(d=rV(this,t,e)),d}var f=i/2;return r&&n?ra(s-f,l-f,u+f,h+f,t,e):r?ra(s,l,u,h,t,e):n?ra(s-(o=i/2),l-o,u,i,t,e)||ra(s+u-o,l-o,i,h,t,e)||ra(s+o,l+h-o,u,i,t,e)||ra(s-o,l+o,i,h,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.radius;if(t.beginPath(),0===a)t.rect(n,r,i,o);else{var s,l,u,h,c=(s=0,l=0,u=0,h=0,w(a)?1===a.length?s=l=u=h=a[0]:2===a.length?(s=u=a[0],l=h=a[1]):3===a.length?(s=a[0],l=h=a[1],u=a[2]):(s=a[0],l=a[1],u=a[2],h=a[3]):s=l=u=h=a,[s,l,u,h]),d=c[0],f=c[1],p=c[2],v=c[3];t.moveTo(n+d,r),t.lineTo(n+i-f,r),0!==f&&t.arc(n+i-f,r+f,f,-Math.PI/2,0),t.lineTo(n+i,r+o-p),0!==p&&t.arc(n+i-p,r+o-p,p,0,Math.PI/2),t.lineTo(n+v,r+o),0!==v&&t.arc(n+v,r+o-v,v,Math.PI/2,Math.PI),t.lineTo(n,r+d),0!==d&&t.arc(n+d,r+d,d,Math.PI,1.5*Math.PI),t.closePath()}},e}(rN),r0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return h(h({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=nJ(t)},e.prototype._setText=function(t){var e=null;L(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},e.prototype._drawTextArr=function(t,e,n){var r,i=this.attrs,o=i.textBaseline,a=i.x,s=i.y,l=1*i.fontSize,u=this._getSpaceingY(),h=nQ(i.text,i.fontSize,i.lineHeight);S(e,function(e,i){r=s+i*(u+l)-h+l,"middle"===o&&(r+=h-l-(h-l)/2),"top"===o&&(r+=h-l),C(e)||(n?t.fillText(e,a,r):t.strokeText(e,a,r))})},e.prototype._drawText=function(t,e){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");if(o)this._drawTextArr(t,o,e);else{var a=n.text;C(a)||(e?t.fillText(a,r,i):t.strokeText(a,r,i))}},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isStroke()&&n>0&&(C(i)||1===i||(t.globalAlpha=r),this.stroke(t)),this.isFill()&&(C(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(rN);function r1(t,e,n){var r=t.getTotalMatrix();if(r){var i,o=(i=[e,n,1],r?tD(tk(r),i):i);return[o[0],o[1]]}return[e,n]}function r2(t,e,n){if(t.isCanvas&&t.isCanvas())return!0;if(!tx(t)||!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var r=r1(t,e,n),i=r[0],o=r[1];if(t.isClipped(i,o))return!1}var a=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=a.minX&&e<=a.maxX&&n>=a.minY&&n<=a.maxY}var r4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},e.prototype.onCanvasChange=function(t){("attr"===t||"sort"===t||"changeSize"===t)&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return s},e.prototype.getGroupBase=function(){return rB},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,n){t.prototype.setDOMSize.call(this,e,n);var r=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*e,i.height=o*n,o>1&&r.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(e,n){return this.get("quickHit")?function t(e,n,r){if(!r2(e,n,r))return null;for(var i=null,o=e.getChildren(),a=o.length,s=a-1;s>=0;s--){var l=o[s];if(l.isGroup())i=t(l,n,r);else if(r2(l,n,r)){var u=r1(l,n,r),h=u[0],c=u[1];l.isInShape(h,c)&&(i=l)}if(i)break}return i}(this,e,n):t.prototype.getShape.call(this,e,n,null)},e.prototype._getRefreshRegion=function(){var t,e,n=this.get("refreshElements"),r=this.getViewRange();return n.length&&n[0]===this?e=r:(e=function(t){if(!t.length)return null;var e=[],n=[],r=[],i=[];return S(t,function(t){var o=function(t){var e;if(t.destroyed)e=t._cacheCanvasBBox;else{var n=t.get("cacheCanvasBBox"),r=n&&!!(n.width&&n.height),i=t.getCanvasBBox(),o=i&&!!(i.width&&i.height);r&&o?e=n&&i?{minX:Math.min(n.minX,i.minX),minY:Math.min(n.minY,i.minY),maxX:Math.max(n.maxX,i.maxX),maxY:Math.max(n.maxY,i.maxY)}:n||i:r?e=n:o&&(e=i)}return e}(t);o&&(e.push(o.minX),n.push(o.minY),r.push(o.maxX),i.push(o.maxY))}),{minX:E(e),minY:E(n),maxX:_(r),maxY:_(i)}}(n))&&(e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.ceil(e.maxX),e.maxY=Math.ceil(e.maxY),e.maxY+=1,this.get("clipView"))&&(e=(t=e)&&r&&rs(t,r)?{minX:Math.max(t.minX,r.minX),minY:Math.max(t.minY,r.minY),maxX:Math.min(t.maxX,r.maxX),maxY:Math.min(t.maxY,r.maxY)}:null),e},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),rM(t,this),rR(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t,e,n=this.get("context"),r=this.get("refreshElements"),i=this.getChildren(),o=this._getRefreshRegion();o?(n.clearRect(o.minX,o.minY,o.maxX-o.minX,o.maxY-o.minY),n.save(),n.beginPath(),n.rect(o.minX,o.minY,o.maxX-o.minX,o.maxY-o.minY),n.clip(),rM(n,this),t=this,S(e=t.get("refreshElements"),function(e){if(e!==t)for(var n=e.cfg.parent;n&&n!==t&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent}),e[0]===t?rI(i):function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];if(i.cfg.visible){if(i.cfg.hasChanged)i.cfg.refresh=!0,i.isGroup()&&rI(i.cfg.children);else if(i.cfg.refresh)i.isGroup()&&t(i.cfg.children,n);else{var o=function(t,e){var n=t.cfg.cacheCanvasBBox;return t.cfg.isInView&&n&&rs(n,e)}(i,n);i.cfg.refresh=o,o&&i.isGroup()&&t(i.cfg.children,n)}}}}(i,o),rR(n,i,o),n.restore()):r.length&&function t(e){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.hasChanged=!1,r.isGroup()&&!r.destroyed&&t(r.cfg.children)}}(r),S(r,function(t){t.get("hasChanged")&&t.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",e))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(ng),r3="$$value$$",r5="$$extra$$",r8="$$origin$$",r6="$$total$$",r7="$$multi$$",r9="$$series_number$$",it="$$empty_field_value$$",ie="$$empty_extra_placeholder$$";(m9=CB||(CB={})).DATA_CELL_CLICK_EVENT="interaction:data-cell-click",m9.MERGED_CELLS_CLICK_EVENT="interaction:merged-cells-click",m9.CORNER_TEXT_CLICK_EVENT="interaction:corner-cell-text-click",m9.ROW_COLUMN_CLICK_EVENT="interaction:row-column-click",m9.ROW_TEXT_CLICK_EVENT="interaction:row-text-click",m9.HOVER_EVENT="interaction:hover",m9.TREND_ICON_CLICK="interaction:trend-icon-click",(Ct=CN||(CN={})).MOUSE_DOWN="mousedown",Ct.MOUSE_MOVE="mousemove",Ct.MOUSE_OUT="mouseout",Ct.MOUSE_LEAVE="mouseleave",Ct.MOUSE_UP="mouseup",Ct.KEY_DOWN="keydown",Ct.KEY_UP="keyup",Ct.CLICK="click",Ct.HOVER="hover",Ct.DOUBLE_CLICK="dblclick",Ct.CONTEXT_MENU="contextmenu",(Ce=CD||(CD={})).ROW_CELL_HOVER="row-cell:hover",Ce.ROW_CELL_CLICK="row-cell:click",Ce.ROW_CELL_DOUBLE_CLICK="row-cell:double-click",Ce.ROW_CELL_CONTEXT_MENU="row-cell:context-menu",Ce.ROW_CELL_MOUSE_DOWN="row-cell:mouse-down",Ce.ROW_CELL_MOUSE_UP="row-cell:mouse-up",Ce.ROW_CELL_MOUSE_MOVE="row-cell:mouse-move",Ce.ROW_CELL_COLLAPSE_TREE_ROWS="row-cell:collapsed-tree-rows",Ce.ROW_CELL_SCROLL="row-cell:scroll",Ce.ROW_CELL_BRUSH_SELECTION="row-cell:brush-selection",Ce.COL_CELL_HOVER="col-cell:hover",Ce.COL_CELL_CLICK="col-cell:click",Ce.COL_CELL_DOUBLE_CLICK="col-cell:double-click",Ce.COL_CELL_CONTEXT_MENU="col-cell:context-menu",Ce.COL_CELL_MOUSE_DOWN="col-cell:mouse-down",Ce.COL_CELL_MOUSE_UP="col-cell:mouse-up",Ce.COL_CELL_MOUSE_MOVE="col-cell:mouse-move",Ce.COL_CELL_BRUSH_SELECTION="col-cell:brush-selection",Ce.DATA_CELL_HOVER="data-cell:hover",Ce.DATA_CELL_CLICK="data-cell:click",Ce.DATA_CELL_DOUBLE_CLICK="data-cell:double-click",Ce.DATA_CELL_CONTEXT_MENU="data-cell:context-menu",Ce.DATA_CELL_MOUSE_UP="data-cell:mouse-up",Ce.DATA_CELL_MOUSE_DOWN="data-cell:mouse-down",Ce.DATA_CELL_MOUSE_MOVE="data-cell:mouse-move",Ce.DATA_CELL_TREND_ICON_CLICK="data-cell:trend-icon-click",Ce.DATA_CELL_BRUSH_SELECTION="data-cell:brush-selection",Ce.DATA_CELL_SELECT_MOVE="data-cell:select-move",Ce.CORNER_CELL_HOVER="corner-cell:hover",Ce.CORNER_CELL_CLICK="corner-cell:click",Ce.CORNER_CELL_DOUBLE_CLICK="corner-cell:double-click",Ce.CORNER_CELL_CONTEXT_MENU="corner-cell:context-menu",Ce.CORNER_CELL_MOUSE_DOWN="corner-cell:mouse-down",Ce.CORNER_CELL_MOUSE_UP="corner-cell:mouse-up",Ce.CORNER_CELL_MOUSE_MOVE="corner-cell:mouse-move",Ce.MERGED_CELLS_HOVER="merged-cells:hover",Ce.MERGED_CELLS_CLICK="merged-cells:click",Ce.MERGED_CELLS_DOUBLE_CLICK="merged-cells:double-click",Ce.MERGED_CELLS_CONTEXT_MENU="merged-cell:context-menu",Ce.MERGED_CELLS_MOUSE_DOWN="merged-cells:mouse-down",Ce.MERGED_CELLS_MOUSE_UP="merged-cells:mouse-up",Ce.MERGED_CELLS_MOUSE_MOVE="merged-cells:mouse-move",Ce.RANGE_SORT="sort:range-sort",Ce.RANGE_SORTED="sort:range-sorted",Ce.RANGE_FILTER="filter:range-filter",Ce.RANGE_FILTERED="filter:range-filtered",Ce.LAYOUT_AFTER_HEADER_LAYOUT="layout:after-header-layout",Ce.LAYOUT_CELL_SCROLL="layout:cell-scroll",Ce.LAYOUT_PAGINATION="layout:pagination",Ce.LAYOUT_COLLAPSE_ROWS="layout:collapsed-rows",Ce.LAYOUT_AFTER_COLLAPSE_ROWS="layout:after-collapsed-rows",Ce.LAYOUT_AFTER_REAL_DATA_CELL_RENDER="layout:after-real-data-cell-render",Ce.LAYOUT_TREE_ROWS_COLLAPSE_ALL="layout:toggle-collapse-all",Ce.LAYOUT_COLS_EXPANDED="layout:table-col-expanded",Ce.LAYOUT_COLS_HIDDEN="layout:table-col-hidden",Ce.LAYOUT_AFTER_RENDER="layout:after-render",Ce.LAYOUT_BEFORE_RENDER="layout:before-render",Ce.LAYOUT_DESTROY="layout:destroy",Ce.LAYOUT_RESIZE="layout:resize",Ce.LAYOUT_RESIZE_SERIES_WIDTH="layout:resize-series-width",Ce.LAYOUT_RESIZE_ROW_WIDTH="layout:resize-row-width",Ce.LAYOUT_RESIZE_ROW_HEIGHT="layout:resize-row-height",Ce.LAYOUT_RESIZE_COL_WIDTH="layout:resize-column-width",Ce.LAYOUT_RESIZE_COL_HEIGHT="layout:resize-column-height",Ce.LAYOUT_RESIZE_TREE_WIDTH="layout:resize-tree-width",Ce.LAYOUT_RESIZE_MOUSE_DOWN="layout:resize:mouse-down",Ce.LAYOUT_RESIZE_MOUSE_MOVE="layout:resize:mouse-move",Ce.LAYOUT_RESIZE_MOUSE_UP="layout:resize-mouse-up",Ce.GLOBAL_KEYBOARD_DOWN="global:keyboard-down",Ce.GLOBAL_KEYBOARD_UP="global:keyboard-up",Ce.GLOBAL_COPIED="global:copied",Ce.GLOBAL_MOUSE_UP="global:mouse-up",Ce.GLOBAL_MOUSE_MOVE="global:mouse-move",Ce.GLOBAL_ACTION_ICON_CLICK="global:action-icon-click",Ce.GLOBAL_ACTION_ICON_HOVER="global:action-icon-hover",Ce.GLOBAL_ACTION_ICON_HOVER_OFF="global:action-icon-hover-off",Ce.GLOBAL_CONTEXT_MENU="global:context-menu",Ce.GLOBAL_CLICK="global:click",Ce.GLOBAL_DOUBLE_CLICK="global:double-click",Ce.GLOBAL_SELECTED="global:selected",Ce.GLOBAL_HOVER="global:hover",Ce.GLOBAL_RESET="global:reset",Ce.GLOBAL_LINK_FIELD_JUMP="global:link-field-jump",Ce.GLOBAL_SCROLL="global:scroll";var ir="mergedCellsGroup",ii="frozenRowGroup",io="frozenColGroup",ia="rowResizeAreaGroup",is="rowFrozenResizeAreaGroup",il="frozenSplitLine",iu="rowIndexResizeAreaGroup",ih="cornerResizeAreaGroup",ic="colResizeAreaGroup",id="colFrozenResizeAreaGroup",ip="gridGroup",iv="horizontal-resize-area-",ig="root",iy=/^root\[&\]*/;(Cn=Ck||(Ck={})).Line="line",Cn.Bar="bar",Cn.Bullet="bullet";var im="square",iC="antv-s2",iw="valueRanges",ix={},iS="#000000",ib="#FFFFFF",i_={data:[],totalData:[],fields:{rows:[],columns:[],values:[],customTreeItems:[],valueInCols:!0},meta:[],sortParams:[],filterParams:[]};(Cr=CP||(CP={})).ROW="row",Cr.COL="col",Cr.TRAILING_ROW="trailingRow",Cr.TRAILING_COL="trailingCol",Cr.SCROLL="scroll",Cr.TOP="top",Cr.BOTTOM="bottom",(Ci=CH||(CH={})).FROZEN_COL="frozenCol",Ci.FROZEN_ROW="frozenRow",Ci.FROZEN_TRAILING_COL="frozenTrailingCol",Ci.FROZEN_TRAILING_ROW="frozenTrailingRow";var iE=((Cz={})[CP.ROW]="frozenRowGroup",Cz[CP.COL]="frozenColGroup",Cz[CP.TRAILING_COL]="frozenTrailingColGroup",Cz[CP.TRAILING_ROW]="frozenTrailingRowGroup",Cz[CP.SCROLL]="panelScrollGroup",Cz[CP.TOP]="frozenTopGroup",Cz[CP.BOTTOM]="frozenBottomGroup",Cz);(Co=CF||(CF={})).CORNER_CELL_CLICK="cornerCellClick",Co.DATA_CELL_CLICK="dataCellClick",Co.MERGED_CELLS_CLICK="mergedCellsClick",Co.ROW_COLUMN_CLICK="rowColumnClick",Co.ROW_TEXT_CLICK="rowTextClick",Co.HOVER="hover",Co.BRUSH_SELECTION="brushSelection",Co.ROW_BRUSH_SELECTION="rowBrushSelection",Co.COL_BRUSH_SELECTION="colBrushSelection",Co.COL_ROW_RESIZE="rowColResize",Co.DATA_CELL_MULTI_SELECTION="dataCellMultiSelection",Co.RANGE_SELECTION="rangeSelection",Co.SELECTED_CELL_MOVE="selectedCellMove",(Ca=CW||(CW={})).ALL_SELECTED="allSelected",Ca.SELECTED="selected",Ca.BRUSH_SELECTED="brushSelected",Ca.UNSELECTED="unselected",Ca.HOVER="hover",Ca.HOVER_FOCUS="hoverFocus",Ca.HIGHLIGHT="highlight",Ca.SEARCH_RESULT="searchResult",Ca.PREPARE_SELECT="prepareSelect",(Cs=CG||(CG={})).DATA_CELL="dataCell",Cs.HEADER_CELL="headerCell",Cs.ROW_CELL="rowCell",Cs.COL_CELL="colCell",Cs.CORNER_CELL="cornerCell",Cs.MERGED_CELL="mergedCell";var iL={textOpacity:"fillOpacity",backgroundOpacity:"fillOpacity",backgroundColor:"fill",borderOpacity:"strokeOpacity",borderColor:"stroke",borderWidth:"lineWidth",opacity:"opacity"},iT={textShape:["textOpacity"],textShapes:["textOpacity"],linkFieldShape:["opacity"],interactiveBgShape:["backgroundColor","backgroundOpacity"],interactiveBorderShape:["borderColor","borderOpacity","borderWidth"]},iM="interactionStateInfo";(Cl=CV||(CV={})).CLICK="click",Cl.UN_DRAGGED="unDragged",Cl.DRAGGED="dragged",(Cu=CY||(CY={})).SHIFT="Shift",Cu.COPY="c",Cu.ESC="Escape",Cu.META="Meta",Cu.CONTROL="Control",Cu.ARROW_UP="ArrowUp",Cu.ARROW_DOWN="ArrowDown",Cu.ARROW_LEFT="ArrowLeft",Cu.ARROW_RIGHT="ArrowRight",(Ch=CU||(CU={})).ASC="ASC",Ch.DESC="DESC",(Cc=Cj||(Cj={})).HOVER="hover",Cc.CLICK="click",Cc.BRUSH_SELECTION="brushSelection",Cc.ROW_BRUSH_SELECTION="rowBrushSelection",Cc.COL_BRUSH_SELECTION="colBrushSelection",Cc.MULTI_SELECTION="multiSelection",Cc.RESIZE="resize";var iR={x:{value:0,scroll:!1},y:{value:0,scroll:!1}};(Cd=CX||(CX={})).CONTENT="content",Cd.CANVAS="canvas",(Cf=Cq||(Cq={})).SCROLL_UP="scrollUp",Cf.SCROLL_DOWN="scrollDown",(Cp=CK||(CK={}))[Cp.SCROLL_UP=-1]="SCROLL_UP",Cp[Cp.SCROLL_DOWN=1]="SCROLL_DOWN",(Cv=CZ||(CZ={})).Horizontal="col",Cv.Vertical="row",(Cg=C$||(C$={})).Field="field",Cg.Cell="cell",Cg.Tree="tree",Cg.Series="series",(Cy=CQ||(CQ={})).ALL="all",Cy.CURRENT="current",(Cm=CJ||(CJ={})).Adaptive="adaptive",Cm.ColAdaptive="colAdaptive",Cm.Compact="compact";var iI={layoutWidthType:CJ.Adaptive,showTreeLeafNodeAlignDot:!1,collapsedRows:{},collapsedCols:{},cellCfg:{width:96,height:30},rowCfg:{width:null,widthByField:{},heightByField:{}},colCfg:{height:30,widthByFieldValue:{},heightByField:{}},device:"pc"},iO={width:600,height:480,debug:!1,hierarchyType:"grid",conditions:{},totals:{},tooltip:{showTooltip:!1,autoAdjustBoundary:"body",operation:{hiddenColumns:!1,trend:!1,sort:!1,menus:[]}},interaction:{linkFields:[],hiddenColumnFields:[],selectedCellsSpotlight:!1,hoverHighlight:!0,hoverFocus:{duration:800},scrollSpeedRatio:{horizontal:1,vertical:1},autoResetSheetStyle:!0,brushSelection:{data:!0,row:!1,col:!1},multiSelection:!0,rangeSelection:!0,scrollbarPosition:CX.CONTENT,resize:{rowCellVertical:!0,cornerCellHorizontal:!0,colCellHorizontal:!0,colCellVertical:!0,rowResizeType:CQ.ALL},eventListenerOptions:!1,selectedCellHighlight:!1,overscrollBehavior:"auto"},showSeriesNumber:!1,customSVGIcons:[],showDefaultHeaderActionIcon:!1,headerActionIcons:[],style:iI,frozenRowHeader:!0,frozenRowCount:0,frozenColCount:0,frozenTrailingRowCount:0,frozenTrailingColCount:0,hdAdapter:!0,cornerText:"",cornerExtraFieldText:"",placeholder:"-",supportCSSTransform:!1,devicePixelRatio:window.devicePixelRatio},iA="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,iB="object"==typeof self&&self&&self.Object===Object&&self,iN=iA||iB||Function("return this")(),iD=iN.Symbol,ik=Object.prototype,iz=ik.hasOwnProperty,iP=ik.toString,iH=iD?iD.toStringTag:void 0,iF=Object.prototype.toString,iW=iD?iD.toStringTag:void 0;function iG(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":iW&&iW in Object(t)?function(t){var e=iz.call(t,iH),n=t[iH];try{t[iH]=void 0;var r=!0}catch(t){}var i=iP.call(t);return r&&(e?t[iH]=n:delete t[iH]),i}(t):iF.call(t)}function iV(t){return null!=t&&"object"==typeof t}function iY(t){return"symbol"==typeof t||iV(t)&&"[object Symbol]"==iG(t)}var iU=0/0;function ij(t){return"number"==typeof t?t:iY(t)?iU:+t}function iX(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var iq=Array.isArray,iK=1/0,iZ=iD?iD.prototype:void 0,i$=iZ?iZ.toString:void 0;function iQ(t){if("string"==typeof t)return t;if(iq(t))return iX(t,iQ)+"";if(iY(t))return i$?i$.call(t):"";var e=t+"";return"0"==e&&1/t==-iK?"-0":e}function iJ(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=iQ(n),r=iQ(r)):(n=ij(n),r=ij(r)),i=t(n,r)}return i}}var i0=iJ(function(t,e){return t+e},0),i1=/\s/;function i2(t){for(var e=t.length;e--&&i1.test(t.charAt(e)););return e}var i4=/^\s+/;function i3(t){return t?t.slice(0,i2(t)+1).replace(i4,""):t}function i5(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var i8=0/0,i6=/^[-+]0x[0-9a-f]+$/i,i7=/^0b[01]+$/i,i9=/^0o[0-7]+$/i,ot=parseInt;function oe(t){if("number"==typeof t)return t;if(iY(t))return i8;if(i5(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i5(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i3(t);var n=i7.test(t);return n||i9.test(t)?ot(t.slice(2),n?2:8):i6.test(t)?i8:+t}var on=1/0;function or(t){return t?(t=oe(t))===on||t===-on?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0}function oi(t){var e=or(t),n=e%1;return e==e?n?e-n:e:0}function oo(t){return t}function oa(t){if(!i5(t))return!1;var e=iG(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var os=iN["__core-js_shared__"],ol=(CC=/[^.]+$/.exec(os&&os.keys&&os.keys.IE_PROTO||""))?"Symbol(src)_1."+CC:"",ou=Function.prototype.toString;function oh(t){if(null!=t){try{return ou.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var oc=/^\[object .+?Constructor\]$/,od=Object.prototype,of=Function.prototype.toString,op=od.hasOwnProperty,ov=RegExp("^"+of.call(op).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function og(t){return!!i5(t)&&(!ol||!(ol in t))&&(oa(t)?ov:oc).test(oh(t))}function oy(t,e){var n=null==t?void 0:t[e];return og(n)?n:void 0}var om=oy(iN,"WeakMap"),oC=om&&new om,ow=oC?function(t,e){return oC.set(t,e),t}:oo,ox=Object.create,oS=function(){function t(){}return function(e){if(!i5(e))return{};if(ox)return ox(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function ob(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=oS(t.prototype),r=t.apply(n,e);return i5(r)?r:n}}function o_(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var oE=Math.max;function oL(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,l=e.length,u=oE(o-a,0),h=Array(l+u),c=!r;++s<l;)h[s]=e[s];for(;++i<a;)(c||i<o)&&(h[n[i]]=t[i]);for(;u--;)h[s++]=t[i++];return h}var oT=Math.max;function oM(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,l=-1,u=e.length,h=oT(o-s,0),c=Array(h+u),d=!r;++i<h;)c[i]=t[i];for(var f=i;++l<u;)c[f+l]=e[l];for(;++a<s;)(d||i<o)&&(c[f+n[a]]=t[i++]);return c}function oR(){}function oI(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function oO(){}oI.prototype=oS(oR.prototype),oI.prototype.constructor=oI;var oA=oC?function(t){return oC.get(t)}:oO,oB={},oN=Object.prototype.hasOwnProperty;function oD(t){for(var e=t.name+"",n=oB[e],r=oN.call(oB,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function ok(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function oz(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function oP(t){if(t instanceof oI)return t.clone();var e=new ok(t.__wrapped__,t.__chain__);return e.__actions__=oz(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}ok.prototype=oS(oR.prototype),ok.prototype.constructor=ok;var oH=Object.prototype.hasOwnProperty;function oF(t){if(iV(t)&&!iq(t)&&!(t instanceof oI)){if(t instanceof ok)return t;if(oH.call(t,"__wrapped__"))return oP(t)}return new ok(t)}function oW(t){var e=oD(t),n=oF[e];if("function"!=typeof n||!(e in oI.prototype))return!1;if(t===n)return!0;var r=oA(n);return!!r&&t===r[0]}oF.prototype=oR.prototype,oF.prototype.constructor=oF;var oG=Date.now;function oV(t){var e=0,n=0;return function(){var r=oG(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var oY=oV(ow),oU=/\{\n\/\* \[wrapped with (.+)\] \*/,oj=/,? & /,oX=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function oq(t){return function(){return t}}var oK=function(){try{var t=oy(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),oZ=oV(oK?function(t,e){return oK(t,"toString",{configurable:!0,enumerable:!1,value:oq(e),writable:!0})}:oo);function o$(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function oQ(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return -1}function oJ(t){return t!=t}function o0(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return -1}(t,e,n):oQ(t,oJ,n)}function o1(t,e){return!!(null==t?0:t.length)&&o0(t,e,0)>-1}var o2=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function o4(t,e,n){var r,i,o=e+"";return oZ(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(oX,"{\n/* [wrapped with "+e+"] */\n")}(o,(i=(r=o.match(oU))?r[1].split(oj):[],o$(o2,function(t){var e="_."+t[0];n&t[1]&&!o1(i,e)&&i.push(e)}),i.sort())))}function o3(t,e,n,r,i,o,a,s,l,u){var h=8&e;e|=h?32:64,4&(e&=~(h?64:32))||(e&=-4);var c=[t,e,i,h?o:void 0,h?a:void 0,h?void 0:o,h?void 0:a,s,l,u],d=n.apply(void 0,c);return oW(t)&&oY(d,c),d.placeholder=r,o4(d,t,e)}function o5(t){return t.placeholder}var o8=/^(?:0|[1-9]\d*)$/;function o6(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&o8.test(t))&&t>-1&&t%1==0&&t<e}var o7=Math.min,o9="__lodash_placeholder__";function at(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];(a===e||a===o9)&&(t[n]=o9,o[i++]=n)}return o}function ae(t,e,n,r,i,o,a,s,l,u){var h=128&e,c=1&e,d=2&e,f=24&e,p=512&e,v=d?void 0:ob(t);return function g(){for(var y=arguments.length,m=Array(y),C=y;C--;)m[C]=arguments[C];if(f)var w=o5(g),x=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(m,w);if(r&&(m=oL(m,r,i,f)),o&&(m=oM(m,o,a,f)),y-=x,f&&y<u){var S=at(m,w);return o3(t,e,ae,g.placeholder,n,m,S,s,l,u-y)}var b=c?n:this,_=d?b[t]:t;return y=m.length,s?m=function(t,e){for(var n=t.length,r=o7(e.length,n),i=oz(t);r--;){var o=e[r];t[r]=o6(o,n)?i[o]:void 0}return t}(m,s):p&&y>1&&m.reverse(),h&&l<y&&(m.length=l),this&&this!==iN&&this instanceof g&&(_=v||ob(_)),_.apply(b,m)}}var an="__lodash_placeholder__",ar=Math.min,ai=Math.max;function ao(t,e,n,r,i,o,a,s){var l=2&e;if(!l&&"function"!=typeof t)throw TypeError("Expected a function");var u=r?r.length:0;if(u||(e&=-97,r=i=void 0),a=void 0===a?a:ai(oi(a),0),s=void 0===s?s:oi(s),u-=i?i.length:0,64&e){var h=r,c=i;r=i=void 0}var d=l?void 0:oA(t),f=[t,e,n,r,i,h,c,o,a,s];if(d&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(o||a){1&r&&(t[2]=e[2],i|=1&n?0:4);var s=e[3];if(s){var l=t[3];t[3]=l?oL(l,s,e[4]):s,t[4]=l?at(t[3],an):e[4]}(s=e[5])&&(l=t[5],t[5]=l?oM(l,s,e[6]):s,t[6]=l?at(t[5],an):e[6]),(s=e[7])&&(t[7]=s),128&r&&(t[8]=null==t[8]?e[8]:ar(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}}(f,d),t=f[0],e=f[1],n=f[2],r=f[3],i=f[4],(s=f[9]=void 0===f[9]?l?0:t.length:ai(f[9]-u,0))||!(24&e)||(e&=-25),e&&1!=e)8==e||16==e?(p=t,v=e,g=s,y=ob(p),R=function t(){for(var e=arguments.length,n=Array(e),r=e,i=o5(t);r--;)n[r]=arguments[r];var o=e<3&&n[0]!==i&&n[e-1]!==i?[]:at(n,i);return(e-=o.length)<g?o3(p,v,ae,t.placeholder,void 0,n,o,void 0,void 0,g-e):o_(this&&this!==iN&&this instanceof t?y:p,this,n)}):32!=e&&33!=e||i.length?R=ae.apply(void 0,f):(m=t,C=e,w=n,x=r,S=1&C,b=ob(m),R=function t(){for(var e=-1,n=arguments.length,r=-1,i=x.length,o=Array(i+n),a=this&&this!==iN&&this instanceof t?b:m;++r<i;)o[r]=x[r];for(;n--;)o[r++]=arguments[++e];return o_(a,S?w:this,o)});else var p,v,g,y,m,C,w,x,S,b,_,E,L,T,M,R=(_=t,E=e,L=n,T=1&E,M=ob(_),function t(){return(this&&this!==iN&&this instanceof t?M:_).apply(T?L:this,arguments)});return o4((d?ow:oY)(R,f),t,e)}function aa(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,ao(t,128,void 0,void 0,void 0,void 0,e)}function as(t,e,n){"__proto__"==e&&oK?oK(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function al(t,e){return t===e||t!=t&&e!=e}var au=Object.prototype.hasOwnProperty;function ah(t,e,n){var r=t[e];au.call(t,e)&&al(r,n)&&(void 0!==n||e in t)||as(t,e,n)}function ac(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?as(n,s,l):ah(n,s,l)}return n}var ad=Math.max;function af(t,e,n){return e=ad(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=ad(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),o_(t,this,s)}}function ap(t,e){return oZ(af(t,e,oo),t+"")}function av(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function ag(t){return null!=t&&av(t.length)&&!oa(t)}function ay(t,e,n){if(!i5(n))return!1;var r=typeof e;return("number"==r?!!(ag(n)&&o6(e,n.length)):"string"==r&&e in n)&&al(n[e],t)}function am(t){return ap(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&ay(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}var aC=Object.prototype;function aw(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||aC)}function ax(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function aS(t){return iV(t)&&"[object Arguments]"==iG(t)}var ab=Object.prototype,a_=ab.hasOwnProperty,aE=ab.propertyIsEnumerable,aL=aS(function(){return arguments}())?aS:function(t){return iV(t)&&a_.call(t,"callee")&&!aE.call(t,"callee")};function aT(){return!1}var aM="object"==typeof exports&&exports&&!exports.nodeType&&exports,aR=aM&&t&&!t.nodeType&&t,aI=aR&&aR.exports===aM?iN.Buffer:void 0,aO=(aI?aI.isBuffer:void 0)||aT,aA={};function aB(t){return function(e){return t(e)}}aA["[object Float32Array]"]=aA["[object Float64Array]"]=aA["[object Int8Array]"]=aA["[object Int16Array]"]=aA["[object Int32Array]"]=aA["[object Uint8Array]"]=aA["[object Uint8ClampedArray]"]=aA["[object Uint16Array]"]=aA["[object Uint32Array]"]=!0,aA["[object Arguments]"]=aA["[object Array]"]=aA["[object ArrayBuffer]"]=aA["[object Boolean]"]=aA["[object DataView]"]=aA["[object Date]"]=aA["[object Error]"]=aA["[object Function]"]=aA["[object Map]"]=aA["[object Number]"]=aA["[object Object]"]=aA["[object RegExp]"]=aA["[object Set]"]=aA["[object String]"]=aA["[object WeakMap]"]=!1;var aN="object"==typeof exports&&exports&&!exports.nodeType&&exports,aD=aN&&t&&!t.nodeType&&t,ak=aD&&aD.exports===aN&&iA.process,az=function(){try{var t=aD&&aD.require&&aD.require("util").types;if(t)return t;return ak&&ak.binding&&ak.binding("util")}catch(t){}}(),aP=az&&az.isTypedArray,aH=aP?aB(aP):function(t){return iV(t)&&av(t.length)&&!!aA[iG(t)]},aF=Object.prototype.hasOwnProperty;function aW(t,e){var n=iq(t),r=!n&&aL(t),i=!n&&!r&&aO(t),o=!n&&!r&&!i&&aH(t),a=n||r||i||o,s=a?ax(t.length,String):[],l=s.length;for(var u in t)(e||aF.call(t,u))&&!(a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||o6(u,l)))&&s.push(u);return s}function aG(t,e){return function(n){return t(e(n))}}var aV=aG(Object.keys,Object),aY=Object.prototype.hasOwnProperty;function aU(t){if(!aw(t))return aV(t);var e=[];for(var n in Object(t))aY.call(t,n)&&"constructor"!=n&&e.push(n);return e}function aj(t){return ag(t)?aW(t):aU(t)}var aX=Object.prototype.hasOwnProperty,aq=am(function(t,e){if(aw(e)||ag(e)){ac(e,aj(e),t);return}for(var n in e)aX.call(e,n)&&ah(t,n,e[n])}),aK=Object.prototype.hasOwnProperty;function aZ(t){return ag(t)?aW(t,!0):function(t){if(!i5(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=aw(t),n=[];for(var r in t)"constructor"==r&&(e||!aK.call(t,r))||n.push(r);return n}(t)}var a$=am(function(t,e){ac(e,aZ(e),t)}),aQ=am(function(t,e,n,r){ac(e,aZ(e),t,r)}),aJ=am(function(t,e,n,r){ac(e,aj(e),t,r)}),a0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a1=/^\w*$/;function a2(t,e){if(iq(t))return!1;var n=typeof t;return!!("number"==n||"symbol"==n||"boolean"==n||null==t||iY(t))||a1.test(t)||!a0.test(t)||null!=e&&t in Object(e)}var a4=oy(Object,"create"),a3=Object.prototype.hasOwnProperty,a5=Object.prototype.hasOwnProperty;function a8(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function a6(t,e){for(var n=t.length;n--;)if(al(t[n][0],e))return n;return -1}a8.prototype.clear=function(){this.__data__=a4?a4(null):{},this.size=0},a8.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},a8.prototype.get=function(t){var e=this.__data__;if(a4){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return a3.call(e,t)?e[t]:void 0},a8.prototype.has=function(t){var e=this.__data__;return a4?void 0!==e[t]:a5.call(e,t)},a8.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=a4&&void 0===e?"__lodash_hash_undefined__":e,this};var a7=Array.prototype.splice;function a9(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}a9.prototype.clear=function(){this.__data__=[],this.size=0},a9.prototype.delete=function(t){var e=this.__data__,n=a6(e,t);return!(n<0)&&(n==e.length-1?e.pop():a7.call(e,n,1),--this.size,!0)},a9.prototype.get=function(t){var e=this.__data__,n=a6(e,t);return n<0?void 0:e[n][1]},a9.prototype.has=function(t){return a6(this.__data__,t)>-1},a9.prototype.set=function(t,e){var n=this.__data__,r=a6(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var st=oy(iN,"Map");function se(t,e){var n,r=t.__data__;return("string"==(n=typeof e)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?r["string"==typeof e?"string":"hash"]:r.map}function sn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function sr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(sr.Cache||sn),n}sn.prototype.clear=function(){this.size=0,this.__data__={hash:new a8,map:new(st||a9),string:new a8}},sn.prototype.delete=function(t){var e=se(this,t).delete(t);return this.size-=e?1:0,e},sn.prototype.get=function(t){return se(this,t).get(t)},sn.prototype.has=function(t){return se(this,t).has(t)},sn.prototype.set=function(t,e){var n=se(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},sr.Cache=sn;var si=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,so=/\\(\\)?/g,sa=(Cx=(Cw=sr(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(si,function(t,n,r,i){e.push(r?i.replace(so,"$1"):n||t)}),e},function(t){return 500===Cx.size&&Cx.clear(),t})).cache,Cw);function ss(t){return null==t?"":iQ(t)}function sl(t,e){return iq(t)?t:a2(t,e)?[t]:sa(ss(t))}var su=1/0;function sh(t){if("string"==typeof t||iY(t))return t;var e=t+"";return"0"==e&&1/t==-su?"-0":e}function sc(t,e){e=sl(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[sh(e[n++])];return n&&n==r?t:void 0}function sd(t,e,n){var r=null==t?void 0:sc(t,e);return void 0===r?n:r}function sf(t,e){for(var n=-1,r=e.length,i=Array(r),o=null==t;++n<r;)i[n]=o?void 0:sd(t,e[n]);return i}function sp(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var sv=iD?iD.isConcatSpreadable:void 0;function sg(t){return iq(t)||aL(t)||!!(sv&&t&&t[sv])}function sy(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=sg),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?sy(s,e-1,n,r,i):sp(i,s):r||(i[i.length]=s)}return i}function sm(t){return(null==t?0:t.length)?sy(t,1):[]}function sC(t){return oZ(af(t,void 0,sm),t+"")}var sw=sC(sf),sx=aG(Object.getPrototypeOf,Object),sS=Object.prototype,sb=Function.prototype.toString,s_=sS.hasOwnProperty,sE=sb.call(Object);function sL(t){if(!iV(t)||"[object Object]"!=iG(t))return!1;var e=sx(t);if(null===e)return!0;var n=s_.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&sb.call(n)==sE}function sT(t){if(!iV(t))return!1;var e=iG(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!sL(t)}var sM=ap(function(t,e){try{return o_(t,void 0,e)}catch(t){return sT(t)?t:Error(t)}});function sR(t,e){var n;if("function"!=typeof e)throw TypeError("Expected a function");return t=oi(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var sI=ap(function(t,e,n){var r=1;if(n.length){var i=at(n,o5(sI));r|=32}return ao(t,r,e,n,i)});sI.placeholder={};var sO=sC(function(t,e){return o$(e,function(e){as(t,e=sh(e),sI(t[e],t))}),t}),sA=ap(function(t,e,n){var r=3;if(n.length){var i=at(n,o5(sA));r|=32}return ao(e,r,t,n,i)});function sB(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function sN(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:sB(t,e,n)}sA.placeholder={};var sD=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function sk(t){return sD.test(t)}var sz="\ud800-\udfff",sP="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",sH="\ud83c[\udffb-\udfff]",sF="[^"+sz+"]",sW="(?:\ud83c[\udde6-\uddff]){2}",sG="[\ud800-\udbff][\udc00-\udfff]",sV="(?:"+sP+"|"+sH+")?",sY="[\\ufe0e\\ufe0f]?",sU="(?:\\u200d(?:"+[sF,sW,sG].join("|")+")"+sY+sV+")*",sj=RegExp(sH+"(?="+sH+")|(?:"+[sF+sP+"?",sP,sW,sG,"["+sz+"]"].join("|")+")"+(sY+sV+sU),"g");function sX(t){return sk(t)?t.match(sj)||[]:t.split("")}function sq(t){return function(e){var n=sk(e=ss(e))?sX(e):void 0,r=n?n[0]:e.charAt(0),i=n?sN(n,1).join(""):e.slice(1);return r[t]()+i}}var sK=sq("toUpperCase");function sZ(t){return sK(ss(t).toLowerCase())}function s$(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function sQ(t){return function(e){return null==t?void 0:t[e]}}var sJ=sQ({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),s0=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s1=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function s2(t){return(t=ss(t))&&t.replace(s0,sJ).replace(s1,"")}var s4=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,s3=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,s5="\ud800-\udfff",s8="\\u2700-\\u27bf",s6="a-z\\xdf-\\xf6\\xf8-\\xff",s7="A-Z\\xc0-\\xd6\\xd8-\\xde",s9="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lt="['’]",le="["+s9+"]",ln="["+s6+"]",lr="[^"+s5+s9+"\\d+"+s8+s6+s7+"]",li="(?:\ud83c[\udde6-\uddff]){2}",lo="[\ud800-\udbff][\udc00-\udfff]",la="["+s7+"]",ls="(?:"+ln+"|"+lr+")",ll="(?:"+lt+"(?:d|ll|m|re|s|t|ve))?",lu="(?:"+lt+"(?:D|LL|M|RE|S|T|VE))?",lh="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\ud83c[\udffb-\udfff])?",lc="[\\ufe0e\\ufe0f]?",ld="(?:\\u200d(?:"+["[^"+s5+"]",li,lo].join("|")+")"+lc+lh+")*",lf="(?:"+["["+s8+"]",li,lo].join("|")+")"+(lc+lh+ld),lp=RegExp([la+"?"+ln+"+"+ll+"(?="+[le,la,"$"].join("|")+")","(?:"+la+"|"+lr+")+"+lu+"(?="+[le,la+ls,"$"].join("|")+")",la+"?"+ls+"+"+ll,la+"+"+lu,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",lf].join("|"),"g");function lv(t,e,n){if(t=ss(t),void 0===(e=n?void 0:e)){var r;return(r=t,s3.test(r))?t.match(lp)||[]:t.match(s4)||[]}return t.match(e)||[]}var lg=RegExp("['’]","g");function ly(t){return function(e){return s$(lv(s2(e).replace(lg,"")),t,"")}}var lm=ly(function(t,e,n){return e=e.toLowerCase(),t+(n?sZ(e):e)}),lC=iN.isFinite,lw=Math.min;function lx(t){var e=Math[t];return function(t,n){if(t=oe(t),(n=null==n?0:lw(oi(n),292))&&lC(t)){var r=(ss(t)+"e").split("e");return+((r=(ss(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var lS=lx("ceil");function lb(t){var e=oF(t);return e.__chain__=!0,e}var l_=Math.ceil,lE=Math.max;function lL(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function lT(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=oe(n))==n?n:0),void 0!==e&&(e=(e=oe(e))==e?e:0),lL(oe(t),e,n)}function lM(t){var e=this.__data__=new a9(t);this.size=e.size}function lR(t,e){return t&&ac(e,aj(e),t)}lM.prototype.clear=function(){this.__data__=new a9,this.size=0},lM.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},lM.prototype.get=function(t){return this.__data__.get(t)},lM.prototype.has=function(t){return this.__data__.has(t)},lM.prototype.set=function(t,e){var n=this.__data__;if(n instanceof a9){var r=n.__data__;if(!st||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new sn(r)}return n.set(t,e),this.size=n.size,this};var lI="object"==typeof exports&&exports&&!exports.nodeType&&exports,lO=lI&&t&&!t.nodeType&&t,lA=lO&&lO.exports===lI?iN.Buffer:void 0,lB=lA?lA.allocUnsafe:void 0;function lN(t,e){if(e)return t.slice();var n=t.length,r=lB?lB(n):new t.constructor(n);return t.copy(r),r}function lD(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function lk(){return[]}var lz=Object.prototype.propertyIsEnumerable,lP=Object.getOwnPropertySymbols,lH=lP?function(t){return null==t?[]:lD(lP(t=Object(t)),function(e){return lz.call(t,e)})}:lk,lF=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)sp(e,lH(t)),t=sx(t);return e}:lk;function lW(t,e,n){var r=e(t);return iq(t)?r:sp(r,n(t))}function lG(t){return lW(t,aj,lH)}function lV(t){return lW(t,aZ,lF)}var lY=oy(iN,"DataView"),lU=oy(iN,"Promise"),lj=oy(iN,"Set"),lX="[object Map]",lq="[object Promise]",lK="[object Set]",lZ="[object WeakMap]",l$="[object DataView]",lQ=oh(lY),lJ=oh(st),l0=oh(lU),l1=oh(lj),l2=oh(om),l4=iG;(lY&&l4(new lY(new ArrayBuffer(1)))!=l$||st&&l4(new st)!=lX||lU&&l4(lU.resolve())!=lq||lj&&l4(new lj)!=lK||om&&l4(new om)!=lZ)&&(l4=function(t){var e=iG(t),n="[object Object]"==e?t.constructor:void 0,r=n?oh(n):"";if(r)switch(r){case lQ:return l$;case lJ:return lX;case l0:return lq;case l1:return lK;case l2:return lZ}return e});var l3=l4,l5=Object.prototype.hasOwnProperty,l8=iN.Uint8Array;function l6(t){var e=new t.constructor(t.byteLength);return new l8(e).set(new l8(t)),e}var l7=/\w*$/,l9=iD?iD.prototype:void 0,ut=l9?l9.valueOf:void 0;function ue(t,e){var n=e?l6(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function un(t){return"function"!=typeof t.constructor||aw(t)?{}:oS(sx(t))}var ur=az&&az.isMap,ui=ur?aB(ur):function(t){return iV(t)&&"[object Map]"==l3(t)},uo=az&&az.isSet,ua=uo?aB(uo):function(t){return iV(t)&&"[object Set]"==l3(t)},us="[object Arguments]",ul="[object Function]",uu="[object Object]",uh={};function uc(t,e,n,r,i,o){var a,s=1&e,l=2&e,u=4&e;if(n&&(a=i?n(t,r,i,o):n(t)),void 0!==a)return a;if(!i5(t))return t;var h=iq(t);if(h){if(c=t.length,d=new t.constructor(c),c&&"string"==typeof t[0]&&l5.call(t,"index")&&(d.index=t.index,d.input=t.input),a=d,!s)return oz(t,a)}else{var c,d,f,p,v,g=l3(t),y=g==ul||"[object GeneratorFunction]"==g;if(aO(t))return lN(t,s);if(g==uu||g==us||y&&!i){if(a=l||y?{}:un(t),!s)return l?(p=(f=a)&&ac(t,aZ(t),f),ac(t,lF(t),p)):(v=lR(a,t),ac(t,lH(t),v))}else{if(!uh[g])return i?t:{};a=function(t,e,n){var r,i,o=t.constructor;switch(e){case"[object ArrayBuffer]":return l6(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return r=n?l6(t.buffer):t.buffer,new t.constructor(r,t.byteOffset,t.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ue(t,n);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return(i=new t.constructor(t.source,l7.exec(t))).lastIndex=t.lastIndex,i;case"[object Symbol]":return ut?Object(ut.call(t)):{}}}(t,g,s)}}o||(o=new lM);var m=o.get(t);if(m)return m;o.set(t,a),ua(t)?t.forEach(function(r){a.add(uc(r,e,n,r,t,o))}):ui(t)&&t.forEach(function(r,i){a.set(i,uc(r,e,n,i,t,o))});var C=u?l?lV:lG:l?aZ:aj,w=h?void 0:C(t);return o$(w||t,function(r,i){w&&(r=t[i=r]),ah(a,i,uc(r,e,n,i,t,o))}),a}function ud(t){return uc(t,4)}function uf(t){return uc(t,5)}function up(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function uv(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return sp(iq(n)?oz(n):[n],sy(e,1))}function ug(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new sn;++e<n;)this.add(t[e])}function uy(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function um(t,e){return t.has(e)}function uC(t,e,n,r,i,o){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t),h=o.get(e);if(u&&h)return u==e&&h==t;var c=-1,d=!0,f=2&n?new ug:void 0;for(o.set(t,e),o.set(e,t);++c<s;){var p=t[c],v=e[c];if(r)var g=a?r(v,p,c,e,t,o):r(p,v,c,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!uy(e,function(t,e){if(!um(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)})){d=!1;break}}else if(!(p===v||i(p,v,n,r,o))){d=!1;break}}return o.delete(t),o.delete(e),d}function uw(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function ux(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}uh[us]=uh["[object Array]"]=uh["[object ArrayBuffer]"]=uh["[object DataView]"]=uh["[object Boolean]"]=uh["[object Date]"]=uh["[object Float32Array]"]=uh["[object Float64Array]"]=uh["[object Int8Array]"]=uh["[object Int16Array]"]=uh["[object Int32Array]"]=uh["[object Map]"]=uh["[object Number]"]=uh[uu]=uh["[object RegExp]"]=uh["[object Set]"]=uh["[object String]"]=uh["[object Symbol]"]=uh["[object Uint8Array]"]=uh["[object Uint8ClampedArray]"]=uh["[object Uint16Array]"]=uh["[object Uint32Array]"]=!0,uh["[object Error]"]=uh[ul]=uh["[object WeakMap]"]=!1,ug.prototype.add=ug.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ug.prototype.has=function(t){return this.__data__.has(t)};var uS=iD?iD.prototype:void 0,ub=uS?uS.valueOf:void 0,u_=Object.prototype.hasOwnProperty,uE="[object Arguments]",uL="[object Array]",uT="[object Object]",uM=Object.prototype.hasOwnProperty;function uR(t,e,n,r,i){return t===e||(null!=t&&null!=e&&(iV(t)||iV(e))?function(t,e,n,r,i,o){var a=iq(t),s=iq(e),l=a?uL:l3(t),u=s?uL:l3(e);l=l==uE?uT:l,u=u==uE?uT:u;var h=l==uT,c=u==uT,d=l==u;if(d&&aO(t)){if(!aO(e))return!1;a=!0,h=!1}if(d&&!h)return o||(o=new lM),a||aH(t)?uC(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":if(t.byteLength!=e.byteLength||!o(new l8(t),new l8(e)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return al(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=uw;case"[object Set]":var l=1&r;if(s||(s=ux),t.size!=e.size&&!l)break;var u=a.get(t);if(u)return u==e;r|=2,a.set(t,e);var h=uC(s(t),s(e),r,i,o,a);return a.delete(t),h;case"[object Symbol]":if(ub)return ub.call(t)==ub.call(e)}return!1}(t,e,l,n,r,i,o);if(!(1&n)){var f=h&&uM.call(t,"__wrapped__"),p=c&&uM.call(e,"__wrapped__");if(f||p){var v=f?t.value():t,g=p?e.value():e;return o||(o=new lM),i(v,g,n,r,o)}}return!!d&&(o||(o=new lM),function(t,e,n,r,i,o){var a=1&n,s=lG(t),l=s.length;if(l!=lG(e).length&&!a)return!1;for(var u=l;u--;){var h=s[u];if(!(a?h in e:u_.call(e,h)))return!1}var c=o.get(t),d=o.get(e);if(c&&d)return c==e&&d==t;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++u<l;){var v=t[h=s[u]],g=e[h];if(r)var y=a?r(g,v,h,e,t,o):r(v,g,h,t,e,o);if(!(void 0===y?v===g||i(v,g,n,r,o):y)){f=!1;break}p||(p="constructor"==h)}if(f&&!p){var m=t.constructor,C=e.constructor;m!=C&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof C&&C instanceof C)&&(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))}(t,e,n,r,uR,i):t!=t&&e!=e)}function uI(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var l=(s=n[i])[0],u=t[l],h=s[1];if(a&&s[2]){if(void 0===u&&!(l in t))return!1}else{var c=new lM;if(r)var d=r(u,h,l,t,e,c);if(!(void 0===d?uR(h,u,3,r,c):d))return!1}}return!0}function uO(t){for(var e=aj(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,i==i&&!i5(i)]}return e}function uA(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}function uB(t){var e=uO(t);return 1==e.length&&e[0][2]?uA(e[0][0],e[0][1]):function(n){return n===t||uI(n,t,e)}}function uN(t,e){return null!=t&&e in Object(t)}function uD(t,e,n){e=sl(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=sh(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&av(i)&&o6(a,i)&&(iq(t)||aL(t))}function uk(t,e){return null!=t&&uD(t,e,uN)}function uz(t,e){var n;return a2(t)&&(n=e)==n&&!i5(n)?uA(sh(t),e):function(n){var r=sd(n,t);return void 0===r&&r===e?uk(n,t):uR(e,r,3)}}function uP(t){return function(e){return null==e?void 0:e[t]}}function uH(t){return a2(t)?uP(sh(t)):function(e){return sc(e,t)}}function uF(t){return"function"==typeof t?t:null==t?oo:"object"==typeof t?iq(t)?uz(t[0],t[1]):uB(t):uH(t)}function uW(t){var e=null==t?0:t.length;return t=e?iX(t,function(t){if("function"!=typeof t[1])throw TypeError("Expected a function");return[uF(t[0]),t[1]]}):[],ap(function(n){for(var r=-1;++r<e;){var i=t[r];if(o_(i[0],this,n))return o_(i[1],this,n)}})}function uG(t,e,n){var r=n.length;if(null==t)return!r;for(t=Object(t);r--;){var i=n[r],o=e[i],a=t[i];if(void 0===a&&!(i in t)||!o(a))return!1}return!0}function uV(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function uY(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}var uU=uY();function uj(t,e){return t&&uU(t,e,aj)}function uX(t,e){return function(n,r){if(null==n)return n;if(!ag(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}var uq=uX(uj);function uK(t,e,n,r){return uq(t,function(t,i,o){e(r,t,n(t),o)}),r}function uZ(t,e){return function(n,r){var i=iq(n)?uV:uK,o=e?e():{};return i(n,t,uF(r),o)}}var u$=Object.prototype.hasOwnProperty,uQ=uZ(function(t,e,n){u$.call(t,n)?++t[n]:as(t,n,1)});function uJ(t,e,n){var r=ao(t,8,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=uJ.placeholder,r}function u0(t,e,n){var r=ao(t,16,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=u0.placeholder,r}uJ.placeholder={},u0.placeholder={};var u1=function(){return iN.Date.now()},u2=Math.max,u4=Math.min;function u3(t,e,n){var r,i,o,a,s,l,u=0,h=!1,c=!1,d=!0;if("function"!=typeof t)throw TypeError("Expected a function");function f(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function p(t){var n=t-l,r=t-u;return void 0===l||n>=e||n<0||c&&r>=o}function v(){var t,n,r,i=u1();if(p(i))return g(i);s=setTimeout(v,(t=i-l,n=i-u,r=e-t,c?u4(r,o-n):r))}function g(t){return(s=void 0,d&&r)?f(t):(r=i=void 0,a)}function y(){var t,n=u1(),o=p(n);if(r=arguments,i=this,l=n,o){if(void 0===s)return u=t=l,s=setTimeout(v,e),h?f(t):a;if(c)return clearTimeout(s),s=setTimeout(v,e),f(l)}return void 0===s&&(s=setTimeout(v,e)),a}return e=oe(e)||0,i5(n)&&(h=!!n.leading,o=(c="maxWait"in n)?u2(oe(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},y.flush=function(){return void 0===s?a:g(u1())},y}var u5=Object.prototype,u8=u5.hasOwnProperty,u6=ap(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&ay(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=aZ(o),s=-1,l=a.length;++s<l;){var u=a[s],h=t[u];(void 0===h||al(h,u5[u])&&!u8.call(t,u))&&(t[u]=o[u])}return t});function u7(t,e,n){(void 0===n||al(t[e],n))&&(void 0!==n||e in t)||as(t,e,n)}function u9(t){return iV(t)&&ag(t)}function ht(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function he(t){return ac(t,aZ(t))}function hn(t,e,n,r,i){t!==e&&uU(e,function(o,a){if(i||(i=new lM),i5(o))!function(t,e,n,r,i,o,a){var s=ht(t,n),l=ht(e,n),u=a.get(l);if(u){u7(t,n,u);return}var h=o?o(s,l,n+"",t,e,a):void 0,c=void 0===h;if(c){var d=iq(l),f=!d&&aO(l),p=!d&&!f&&aH(l);h=l,d||f||p?iq(s)?h=s:u9(s)?h=oz(s):f?(c=!1,h=lN(l,!0)):p?(c=!1,h=ue(l,!0)):h=[]:sL(l)||aL(l)?(h=s,aL(s)?h=he(s):(!i5(s)||oa(s))&&(h=un(l))):c=!1}c&&(a.set(l,h),i(h,l,r,o,a),a.delete(l)),u7(t,n,h)}(t,e,a,n,hn,r,i);else{var s=r?r(ht(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),u7(t,a,s)}},aZ)}function hr(t,e,n,r,i,o){return i5(t)&&i5(e)&&(o.set(e,t),hn(t,e,void 0,hr,o),o.delete(e)),t}var hi=am(function(t,e,n,r){hn(t,e,n,r)}),ho=ap(function(t){return t.push(void 0,hr),o_(hi,void 0,t)});function ha(t,e,n){if("function"!=typeof t)throw TypeError("Expected a function");return setTimeout(function(){t.apply(void 0,n)},e)}var hs=ap(function(t,e){return ha(t,1,e)}),hl=ap(function(t,e,n){return ha(t,oe(e)||0,n)});function hu(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function hh(t,e,n,r){var i=-1,o=o1,a=!0,s=t.length,l=[],u=e.length;if(!s)return l;n&&(e=iX(e,aB(n))),r?(o=hu,a=!1):e.length>=200&&(o=um,a=!1,e=new ug(e));t:for(;++i<s;){var h=t[i],c=null==n?h:n(h);if(h=r||0!==h?h:0,a&&c==c){for(var d=u;d--;)if(e[d]===c)continue t;l.push(h)}else o(e,c,r)||l.push(h)}return l}var hc=ap(function(t,e){return u9(t)?hh(t,sy(e,1,u9,!0)):[]});function hd(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var hf=ap(function(t,e){var n=hd(e);return u9(n)&&(n=void 0),u9(t)?hh(t,sy(e,1,u9,!0),uF(n)):[]}),hp=ap(function(t,e){var n=hd(e);return u9(n)&&(n=void 0),u9(t)?hh(t,sy(e,1,u9,!0),void 0,n):[]}),hv=iJ(function(t,e){return t/e},1);function hg(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?sB(t,r?0:o,r?o+1:i):sB(t,r?o+1:0,r?i:o)}function hy(t){return"function"==typeof t?t:oo}function hm(t,e){return(iq(t)?o$:uq)(t,hy(e))}var hC=uY(!0);function hw(t,e){return t&&hC(t,e,aj)}var hx=uX(hw,!0);function hS(t,e,n){t=ss(t),e=iQ(e);var r=t.length,i=n=void 0===n?r:lL(oi(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e}function hb(t){return function(e){var n,r,i=l3(e);return"[object Map]"==i?uw(e):"[object Set]"==i?(n=-1,r=Array(e.size),e.forEach(function(t){r[++n]=[t,t]}),r):iX(t(e),function(t){return[t,e[t]]})}}var h_=hb(aj),hE=hb(aZ),hL=sQ({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),hT=/[&<>"']/g,hM=RegExp(hT.source);function hR(t){return(t=ss(t))&&hM.test(t)?t.replace(hT,hL):t}var hI=/[\\^$.*+?()[\]{}|]/g,hO=RegExp(hI.source);function hA(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function hB(t,e){var n=!0;return uq(t,function(t,r,i){return n=!!e(t,r,i)}),n}function hN(t,e,n){var r=iq(t)?hA:hB;return n&&ay(t,e,n)&&(e=void 0),r(t,uF(e))}function hD(t){return t?lL(oi(t),0,4294967295):0}function hk(t,e){var n=[];return uq(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function hz(t,e){return(iq(t)?lD:hk)(t,uF(e))}function hP(t){return function(e,n,r){var i=Object(e);if(!ag(e)){var o=uF(n);e=aj(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}var hH=Math.max;function hF(t,e,n){var r=null==t?0:t.length;if(!r)return -1;var i=null==n?0:oi(n);return i<0&&(i=hH(r+i,0)),oQ(t,uF(e),i)}var hW=hP(hF);function hG(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}var hV=Math.max,hY=Math.min;function hU(t,e,n){var r=null==t?0:t.length;if(!r)return -1;var i=r-1;return void 0!==n&&(i=oi(n),i=n<0?hV(r+i,0):hY(i,r-1)),oQ(t,uF(e),i,!0)}var hj=hP(hU);function hX(t){return t&&t.length?t[0]:void 0}function hq(t,e){var n=-1,r=ag(t)?Array(t.length):[];return uq(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function hK(t,e){return(iq(t)?iX:hq)(t,uF(e))}function hZ(t,e){return sy(hK(t,e),1)}var h$=1/0,hQ=1/0;function hJ(t){return(null==t?0:t.length)?sy(t,hQ):[]}var h0=lx("floor");function h1(t){return sC(function(e){var n=e.length,r=n,i=ok.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw TypeError("Expected a function");if(i&&!a&&"wrapper"==oD(o))var a=new ok([],!0)}for(r=a?r:n;++r<n;){var s=oD(o=e[r]),l="wrapper"==s?oA(o):void 0;a=l&&oW(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[oD(l[0])].apply(a,l[3]):1==o.length&&oW(o)?a[s]():a.thru(o)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&iq(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}var h2=h1(),h4=h1(!0);function h3(t,e){return null==t?t:uU(t,hy(e),aZ)}function h5(t,e){return lD(e,function(e){return oa(t[e])})}var h8=Object.prototype.hasOwnProperty,h6=uZ(function(t,e,n){h8.call(t,n)?t[n].push(e):as(t,n,[e])});function h7(t,e){return t>e}function h9(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=oe(e),n=oe(n)),t(e,n)}}var ct=h9(h7),ce=h9(function(t,e){return t>=e}),cn=Object.prototype.hasOwnProperty;function cr(t,e){return null!=t&&cn.call(t,e)}function ci(t,e){return null!=t&&uD(t,e,cr)}var co=Math.max,ca=Math.min;function cs(t,e,n){var r,i,o;return e=or(e),void 0===n?(n=e,e=0):n=or(n),(r=t=oe(t))>=ca(i=e,o=n)&&r<co(i,o)}function cl(t){return"string"==typeof t||!iq(t)&&iV(t)&&"[object String]"==iG(t)}function cu(t,e){return iX(e,function(e){return t[e]})}function ch(t){return null==t?[]:cu(t,aj(t))}var cc=Math.max;function cd(t,e,n,r){t=ag(t)?t:ch(t),n=n&&!r?oi(n):0;var i=t.length;return n<0&&(n=cc(i+n,0)),cl(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&o0(t,e,n)>-1}var cf=Math.max;function cp(t,e,n){var r=null==t?0:t.length;if(!r)return -1;var i=null==n?0:oi(n);return i<0&&(i=cf(r+i,0)),o0(t,e,i)}var cv=Math.min;function cg(t,e,n){for(var r=n?hu:o1,i=t[0].length,o=t.length,a=o,s=Array(o),l=1/0,u=[];a--;){var h=t[a];a&&e&&(h=iX(h,aB(e))),l=cv(h.length,l),s[a]=!n&&(e||i>=120&&h.length>=120)?new ug(a&&h):void 0}h=t[0];var c=-1,d=s[0];t:for(;++c<i&&u.length<l;){var f=h[c],p=e?e(f):f;if(f=n||0!==f?f:0,!(d?um(d,p):r(u,p,n))){for(a=o;--a;){var v=s[a];if(!(v?um(v,p):r(t[a],p,n)))continue t}d&&d.push(p),u.push(f)}}return u}function cy(t){return u9(t)?t:[]}var cm=ap(function(t){var e=iX(t,cy);return e.length&&e[0]===t[0]?cg(e):[]}),cC=ap(function(t){var e=hd(t),n=iX(t,cy);return e===hd(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?cg(n,uF(e)):[]}),cw=ap(function(t){var e=hd(t),n=iX(t,cy);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?cg(n,void 0,e):[]});function cx(t,e){return function(n,r){var i,o;return i=e(r),o={},uj(n,function(e,n,r){t(o,i(e),n,r)}),o}}var cS=Object.prototype.toString,cb=cx(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=cS.call(e)),t[e]=n},oq(oo)),c_=Object.prototype,cE=c_.hasOwnProperty,cL=c_.toString,cT=cx(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=cL.call(e)),cE.call(t,e)?t[e].push(n):t[e]=[n]},uF);function cM(t,e){return e.length<2?t:sc(t,sB(e,0,-1))}function cR(t,e,n){e=sl(e,t);var r=null==(t=cM(t,e))?t:t[sh(hd(e))];return null==r?void 0:o_(r,t,n)}var cI=ap(cR),cO=ap(function(t,e,n){var r=-1,i="function"==typeof e,o=ag(t)?Array(t.length):[];return uq(t,function(t){o[++r]=i?o_(e,t,n):cR(t,e,n)}),o}),cA=az&&az.isArrayBuffer,cB=cA?aB(cA):function(t){return iV(t)&&"[object ArrayBuffer]"==iG(t)};function cN(t){return!0===t||!1===t||iV(t)&&"[object Boolean]"==iG(t)}var cD=az&&az.isDate,ck=cD?aB(cD):function(t){return iV(t)&&"[object Date]"==iG(t)},cz=Object.prototype.hasOwnProperty;function cP(t){if(null==t)return!0;if(ag(t)&&(iq(t)||"string"==typeof t||"function"==typeof t.splice||aO(t)||aH(t)||aL(t)))return!t.length;var e=l3(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(aw(t))return!aU(t).length;for(var n in t)if(cz.call(t,n))return!1;return!0}var cH=iN.isFinite;function cF(t){return"number"==typeof t&&t==oi(t)}function cW(t){return"number"==typeof t||iV(t)&&"[object Number]"==iG(t)}function cG(t){return cW(t)&&t!=+t}var cV=os?oa:aT;function cY(t){return null==t}function cU(t){return null===t}var cj=az&&az.isRegExp,cX=cj?aB(cj):function(t){return iV(t)&&"[object RegExp]"==iG(t)};function cq(t){return void 0===t}var cK=Array.prototype.join,cZ=ly(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),c$=uZ(function(t,e,n){as(t,n,e)}),cQ=Math.max,cJ=Math.min,c0=ly(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),c1=sq("toLowerCase");function c2(t,e){return t<e}var c4=h9(c2),c3=h9(function(t,e){return t<=e});function c5(t,e){var n={};return e=uF(e),uj(t,function(t,r,i){as(n,e(t,r,i),t)}),n}function c8(t){return uB(uc(t,1))}function c6(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!iY(a):n(a,s)))var s=a,l=o}return l}function c7(t){return t&&t.length?c6(t,oo,h7):void 0}function c9(t,e){return t&&t.length?c6(t,uF(e),h7):void 0}function dt(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}var de=0/0;function dn(t,e){var n=null==t?0:t.length;return n?dt(t,e)/n:de}var dr=am(function(t,e,n){hn(t,e,n)}),di=ap(function(t,e){return function(n){return cR(n,t,e)}}),da=ap(function(t,e){return function(n){return cR(t,n,e)}});function ds(t){return t&&t.length?c6(t,oo,c2):void 0}var dl=iJ(function(t,e){return t*e},1);function du(t){if("function"!=typeof t)throw TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var dh=iD?iD.iterator:void 0;function dc(t){if(!t)return[];if(ag(t))return cl(t)?sX(t):oz(t);if(dh&&t[dh])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[dh]());var e=l3(t);return("[object Map]"==e?uw:"[object Set]"==e?ux:ch)(t)}function dd(t,e){var n=t.length;if(n)return o6(e+=e<0?n:0,n)?t[e]:void 0}function df(t,e){return e=sl(e,t),null==(t=cM(t,e))||delete t[sh(hd(e))]}function dp(t){return sL(t)?void 0:t}var dv=sC(function(t,e){var n={};if(null==t)return n;var r=!1;e=iX(e,function(e){return e=sl(e,t),r||(r=e.length>1),e}),ac(t,lV(t),n),r&&(n=uc(n,7,dp));for(var i=e.length;i--;)df(n,e[i]);return n});function dg(t,e,n,r){if(!i5(t))return t;e=sl(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var l=sh(e[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)break;if(i!=a){var h=s[l];void 0===(u=r?r(h,l,s):void 0)&&(u=i5(h)?h:o6(e[i+1])?[]:{})}ah(s,l,u),s=s[l]}return t}function dy(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=sc(t,a);n(s,a)&&dg(o,sl(a,t),s)}return o}function dm(t,e){if(null==t)return{};var n=iX(lV(t),function(t){return[t]});return e=uF(e),dy(t,n,function(t,n){return e(t,n[0])})}function dC(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=iY(t),a=void 0!==e,s=null===e,l=e==e,u=iY(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return -1}return 0}function dw(t,e,n){e=e.length?iX(e,function(t){return iq(t)?function(e){return sc(e,1===t.length?t[0]:t)}:t}):[oo];var r=-1;return e=iX(e,aB(uF)),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(hq(t,function(t,n,i){return{criteria:iX(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=dC(i[r],o[r]);if(l){if(r>=s)return l;return l*("desc"==n[r]?-1:1)}}return t.index-e.index}(t,e,n)})}function dx(t,e,n,r){return null==t?[]:(iq(e)||(e=null==e?[]:[e]),iq(n=r?void 0:n)||(n=null==n?[]:[n]),dw(t,e,n))}function dS(t){return sC(function(e){return e=iX(e,aB(uF)),ap(function(n){var r=this;return t(e,function(t){return o_(t,r,n)})})})}var db=dS(iX),d_=Math.min,dE=ap(function(t,e){var n=(e=1==e.length&&iq(e[0])?iX(e[0],aB(uF)):iX(sy(e,1),aB(uF))).length;return ap(function(r){for(var i=-1,o=d_(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return o_(t,this,r)})}),dL=dS(hA),dT=dS(uy),dM=Math.floor;function dR(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do e%2&&(n+=t),(e=dM(e/2))&&(t+=t);while(e);return n}var dI=uP("length"),dO="\ud800-\udfff",dA="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",dB="\ud83c[\udffb-\udfff]",dN="[^"+dO+"]",dD="(?:\ud83c[\udde6-\uddff]){2}",dk="[\ud800-\udbff][\udc00-\udfff]",dz="(?:"+dA+"|"+dB+")?",dP="[\\ufe0e\\ufe0f]?",dH="(?:\\u200d(?:"+[dN,dD,dk].join("|")+")"+dP+dz+")*",dF=RegExp(dB+"(?="+dB+")|(?:"+[dN+dA+"?",dA,dD,dk,"["+dO+"]"].join("|")+")"+(dP+dz+dH),"g");function dW(t){return sk(t)?function(t){for(var e=dF.lastIndex=0;dF.test(t);)++e;return e}(t):dI(t)}var dG=Math.ceil;function dV(t,e){var n=(e=void 0===e?" ":iQ(e)).length;if(n<2)return n?dR(e,t):e;var r=dR(e,dG(t/dW(e)));return sk(e)?sN(sX(r),0,t).join(""):r.slice(0,t)}var dY=Math.ceil,dU=Math.floor,dj=/^\s+/,dX=iN.parseInt,dq=ap(function(t,e){var n=at(e,o5(dq));return ao(t,32,void 0,e,n)});dq.placeholder={};var dK=ap(function(t,e){var n=at(e,o5(dK));return ao(t,64,void 0,e,n)});dK.placeholder={};var dZ=uZ(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),d$=sC(function(t,e){return null==t?{}:dy(t,e,function(e,n){return uk(t,n)})});function dQ(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return -1}var dJ=Array.prototype.splice;function d0(t,e,n,r){var i=r?dQ:o0,o=-1,a=e.length,s=t;for(t===e&&(e=oz(e)),n&&(s=iX(t,aB(n)));++o<a;)for(var l=0,u=e[o],h=n?n(u):u;(l=i(s,h,l,r))>-1;)s!==t&&dJ.call(s,l,1),dJ.call(t,l,1);return t}function d1(t,e){return t&&t.length&&e&&e.length?d0(t,e):t}var d2=ap(d1),d4=Array.prototype.splice;function d3(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;o6(i)?d4.call(t,i,1):df(t,i)}}return t}var d5=sC(function(t,e){var n=null==t?0:t.length,r=sf(t,e);return d3(t,iX(e,function(t){return o6(t,n)?+t:t}).sort(dC)),r}),d8=Math.floor,d6=Math.random;function d7(t,e){return t+d8(d6()*(e-t+1))}var d9=parseFloat,ft=Math.min,fe=Math.random,fn=Math.ceil,fr=Math.max;function fi(t){return function(e,n,r){return r&&"number"!=typeof r&&ay(e,n,r)&&(n=r=void 0),e=or(e),void 0===n?(n=e,e=0):n=or(n),r=void 0===r?e<n?1:-1:or(r),function(t,e,n,r){for(var i=-1,o=fr(fn((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}(e,n,r,t)}}var fo=fi(),fa=fi(!0),fs=sC(function(t,e){return ao(t,256,void 0,void 0,void 0,e)});function fl(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function fu(t,e,n){var r=iq(t)?s$:fl,i=arguments.length<3;return r(t,uF(e),n,i,uq)}function fh(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}var fc=Array.prototype.reverse;function fd(t){return null==t?t:fc.call(t)}var ff=lx("round");function fp(t){var e=t.length;return e?t[d7(0,e-1)]:void 0}function fv(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=d7(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function fg(t,e,n){return null==t?t:dg(t,e,n)}function fy(t){if(null==t)return 0;if(ag(t))return cl(t)?dW(t):t.length;var e=l3(t);return"[object Map]"==e||"[object Set]"==e?t.size:aU(t).length}var fm=ly(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});function fC(t,e){var n;return uq(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function fw(t,e,n){var r=iq(t)?uy:fC;return n&&ay(t,e,n)&&(e=void 0),r(t,uF(e))}var fx=ap(function(t,e){if(null==t)return[];var n=e.length;return n>1&&ay(t,e[0],e[1])?e=[]:n>2&&ay(e[0],e[1],e[2])&&(e=[e[0]]),dw(t,sy(e,1),[])}),fS=Math.floor,fb=Math.min;function f_(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!=e,s=null===e,l=iY(e),u=void 0===e;i<o;){var h=fS((i+o)/2),c=n(t[h]),d=void 0!==c,f=null===c,p=c==c,v=iY(c);if(a)var g=r||p;else g=u?p&&(r||d):s?p&&d&&(r||!f):l?p&&d&&!f&&(r||!v):!f&&!v&&(r?c<=e:c<e);g?i=h+1:o=h}return fb(o,4294967294)}function fE(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!iY(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return f_(t,e,oo,n)}function fL(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!al(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function fT(t,e,n){return(n&&"number"!=typeof n&&ay(t,e,n)&&(e=n=void 0),n=void 0===n?4294967295:n>>>0)?(t=ss(t))&&("string"==typeof e||null!=e&&!cX(e))&&!(e=iQ(e))&&sk(t)?sN(sX(t),0,n):t.split(e,n):[]}var fM=Math.max,fR=ly(function(t,e,n){return t+(n?" ":"")+sK(e)});function fI(){return!0}var fO=iJ(function(t,e){return t-e},0);function fA(t,e){return t&&t.length?dt(t,uF(e)):0}var fB=Object.prototype,fN=fB.hasOwnProperty;function fD(t,e,n,r){return void 0===t||al(t,fB[n])&&!fN.call(r,n)?e:t}var fk={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function fz(t){return"\\"+fk[t]}var fP=/<%=([\s\S]+?)%>/g,fH={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:fP,variable:"",imports:{_:{escape:hR}}},fF=/\b__p \+= '';/g,fW=/\b(__p \+=) '' \+/g,fG=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fV=/[()=,{}\[\]\/\s]/,fY=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fU=/($^)/,fj=/['\n\r\u2028\u2029\\]/g,fX=Object.prototype.hasOwnProperty;function fq(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw TypeError("Expected a function");return i5(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),u3(t,e,{leading:r,maxWait:e,trailing:i})}function fK(t,e){return e(t)}var fZ=Math.min;function f$(t,e){var n=t;return n instanceof oI&&(n=n.value()),s$(e,function(t,e){return e.func.apply(e.thisArg,sp([t],e.args))},n)}function fQ(t){return ss(t).toUpperCase()}function fJ(t,e){for(var n=t.length;n--&&o0(e,t[n],0)>-1;);return n}function f0(t,e){for(var n=-1,r=t.length;++n<r&&o0(e,t[n],0)>-1;);return n}function f1(t,e,n){if((t=ss(t))&&(n||void 0===e))return i3(t);if(!t||!(e=iQ(e)))return t;var r=sX(t),i=sX(e),o=f0(r,i),a=fJ(r,i)+1;return sN(r,o,a).join("")}var f2=/^\s+/,f4=/\w*$/,f3=sQ({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),f5=/&(?:amp|lt|gt|quot|#39);/g,f8=RegExp(f5.source),f6=lj&&1/ux(new lj([,-0]))[1]==1/0?function(t){return new lj(t)}:oO;function f7(t,e,n){var r=-1,i=o1,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=hu;else if(o>=200){var u=e?null:f6(t);if(u)return ux(u);a=!1,i=um,l=new ug}else l=e?[]:s;t:for(;++r<o;){var h=t[r],c=e?e(h):h;if(h=n||0!==h?h:0,a&&c==c){for(var d=l.length;d--;)if(l[d]===c)continue t;e&&l.push(c),s.push(h)}else i(l,c,n)||(l!==s&&l.push(c),s.push(h))}return s}var f9=ap(function(t){return f7(sy(t,1,u9,!0))}),pt=ap(function(t){var e=hd(t);return u9(e)&&(e=void 0),f7(sy(t,1,u9,!0),uF(e))}),pe=ap(function(t){var e=hd(t);return e="function"==typeof e?e:void 0,f7(sy(t,1,u9,!0),void 0,e)});function pn(t){return t&&t.length?f7(t):[]}var pr=0;function pi(t,e){return null==t||df(t,e)}var po=Math.max;function pa(t){if(!(t&&t.length))return[];var e=0;return t=lD(t,function(t){if(u9(t))return e=po(t.length,e),!0}),ax(e,function(e){return iX(t,uP(e))})}function ps(t,e){if(!(t&&t.length))return[];var n=pa(t);return null==e?n:iX(n,function(t){return o_(e,void 0,t)})}function pl(t,e,n,r){return dg(t,e,n(sc(t,e)),r)}var pu=ly(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),ph=ap(function(t,e){return u9(t)?hh(t,e):[]}),pc=sC(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return sf(e,t)};return!(e>1)&&!this.__actions__.length&&r instanceof oI&&o6(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:fK,args:[i],thisArg:void 0}),new ok(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(void 0),t})):this.thru(i)});function pd(t,e,n){var r=t.length;if(r<2)return r?f7(t[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=hh(o[i]||a,t[s],e,n));return f7(sy(o,1),e,n)}var pf=ap(function(t){return pd(lD(t,u9))}),pp=ap(function(t){var e=hd(t);return u9(e)&&(e=void 0),pd(lD(t,u9),uF(e))}),pv=ap(function(t){var e=hd(t);return e="function"==typeof e?e:void 0,pd(lD(t,u9),void 0,e)}),pg=ap(pa);function py(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}var pm=ap(function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,ps(t,n)}),pC={chunk:function(t,e,n){e=(n?ay(t,e,n):void 0===e)?1:lE(oi(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=Array(l_(r/e));i<r;)a[o++]=sB(t,i,i+=e);return a},compact:up,concat:uv,difference:hc,differenceBy:hf,differenceWith:hp,drop:function(t,e,n){var r=null==t?0:t.length;return r?sB(t,(e=n||void 0===e?1:oi(e))<0?0:e,r):[]},dropRight:function(t,e,n){var r=null==t?0:t.length;return r?sB(t,0,(e=r-(e=n||void 0===e?1:oi(e)))<0?0:e):[]},dropRightWhile:function(t,e){return t&&t.length?hg(t,uF(e),!0,!0):[]},dropWhile:function(t,e){return t&&t.length?hg(t,uF(e),!0):[]},fill:function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ay(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=oi(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:oi(r))<0&&(r+=i),r=n>r?0:hD(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},findIndex:hF,findLastIndex:hU,flatten:sm,flattenDeep:hJ,flattenDepth:function(t,e){return(null==t?0:t.length)?sy(t,e=void 0===e?1:oi(e)):[]},fromPairs:function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},head:hX,indexOf:cp,initial:function(t){return(null==t?0:t.length)?sB(t,0,-1):[]},intersection:cm,intersectionBy:cC,intersectionWith:cw,join:function(t,e){return null==t?"":cK.call(t,e)},lastIndexOf:function(t,e,n){var r=null==t?0:t.length;if(!r)return -1;var i=r;return void 0!==n&&(i=(i=oi(n))<0?cQ(r+i,0):cJ(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--&&t[r]!==e;);return r}(t,e,i):oQ(t,oJ,i,!0)},nth:function(t,e){return t&&t.length?dd(t,oi(e)):void 0},pull:d2,pullAll:d1,pullAllBy:function(t,e,n){return t&&t.length&&e&&e.length?d0(t,e,uF(n)):t},pullAllWith:function(t,e,n){return t&&t.length&&e&&e.length?d0(t,e,void 0,n):t},pullAt:d5,remove:function(t,e){var n=[];if(!(t&&t.length))return n;var r=-1,i=[],o=t.length;for(e=uF(e);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return d3(t,i),n},reverse:fd,slice:function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ay(t,e,n)?(e=0,n=r):(e=null==e?0:oi(e),n=void 0===n?r:oi(n)),sB(t,e,n)):[]},sortedIndex:function(t,e){return fE(t,e)},sortedIndexBy:function(t,e,n){return f_(t,e,uF(n))},sortedIndexOf:function(t,e){var n=null==t?0:t.length;if(n){var r=fE(t,e);if(r<n&&al(t[r],e))return r}return -1},sortedLastIndex:function(t,e){return fE(t,e,!0)},sortedLastIndexBy:function(t,e,n){return f_(t,e,uF(n),!0)},sortedLastIndexOf:function(t,e){if(null==t?0:t.length){var n=fE(t,e,!0)-1;if(al(t[n],e))return n}return -1},sortedUniq:function(t){return t&&t.length?fL(t):[]},sortedUniqBy:function(t,e){return t&&t.length?fL(t,uF(e)):[]},tail:function(t){var e=null==t?0:t.length;return e?sB(t,1,e):[]},take:function(t,e,n){return t&&t.length?sB(t,0,(e=n||void 0===e?1:oi(e))<0?0:e):[]},takeRight:function(t,e,n){var r=null==t?0:t.length;return r?sB(t,(e=r-(e=n||void 0===e?1:oi(e)))<0?0:e,r):[]},takeRightWhile:function(t,e){return t&&t.length?hg(t,uF(e),!1,!0):[]},takeWhile:function(t,e){return t&&t.length?hg(t,uF(e)):[]},union:f9,unionBy:pt,unionWith:pe,uniq:pn,uniqBy:function(t,e){return t&&t.length?f7(t,uF(e)):[]},uniqWith:function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?f7(t,void 0,e):[]},unzip:pa,unzipWith:ps,without:ph,xor:pf,xorBy:pp,xorWith:pv,zip:pg,zipObject:function(t,e){return py(t||[],e||[],ah)},zipObjectDeep:function(t,e){return py(t||[],e||[],dg)},zipWith:pm},pw={countBy:uQ,every:hN,filter:hz,find:hW,findLast:hj,flatMap:hZ,flatMapDeep:function(t,e){return sy(hK(t,e),h$)},flatMapDepth:function(t,e,n){return n=void 0===n?1:oi(n),sy(hK(t,e),n)},forEach:hm,forEachRight:function(t,e){return(iq(t)?function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}:hx)(t,hy(e))},groupBy:h6,includes:cd,invokeMap:cO,keyBy:c$,map:hK,orderBy:dx,partition:dZ,reduce:fu,reduceRight:function(t,e,n){var r=iq(t)?fh:fl,i=arguments.length<3;return r(t,uF(e),n,i,hx)},reject:function(t,e){return(iq(t)?lD:hk)(t,du(uF(e)))},sample:function(t){return(iq(t)?fp:function(t){return fp(ch(t))})(t)},sampleSize:function(t,e,n){return e=(n?ay(t,e,n):void 0===e)?1:oi(e),(iq(t)?function(t,e){return fv(oz(t),lL(e,0,t.length))}:function(t,e){var n=ch(t);return fv(n,lL(e,0,n.length))})(t,e)},shuffle:function(t){return(iq(t)?function(t){return fv(oz(t))}:function(t){return fv(ch(t))})(t)},size:fy,some:fw,sortBy:fx},px={after:function(t,e){if("function"!=typeof e)throw TypeError("Expected a function");return t=oi(t),function(){if(--t<1)return e.apply(this,arguments)}},ary:aa,before:sR,bind:sI,bindKey:sA,curry:uJ,curryRight:u0,debounce:u3,defer:hs,delay:hl,flip:function(t){return ao(t,512)},memoize:sr,once:function(t){return sR(2,t)},overArgs:dE,partial:dq,partialRight:dK,rearg:fs,rest:function(t,e){if("function"!=typeof t)throw TypeError("Expected a function");return ap(t,e=void 0===e?e:oi(e))},spread:function(t,e){if("function"!=typeof t)throw TypeError("Expected a function");return e=null==e?0:fM(oi(e),0),ap(function(n){var r=n[e],i=sN(n,0,e);return r&&sp(i,r),o_(t,this,i)})},throttle:fq,unary:function(t){return aa(t,1)},wrap:function(t,e){return dq(hy(e),t)}},pS={castArray:function(){if(!arguments.length)return[];var t=arguments[0];return iq(t)?t:[t]},clone:ud,cloneDeep:uf,cloneDeepWith:function(t,e){return uc(t,5,e="function"==typeof e?e:void 0)},cloneWith:function(t,e){return uc(t,4,e="function"==typeof e?e:void 0)},conformsTo:function(t,e){return null==e||uG(t,e,aj(e))},eq:al,gt:ct,gte:ce,isArguments:aL,isArrayBuffer:cB,isArrayLike:ag,isArrayLikeObject:u9,isBoolean:cN,isBuffer:aO,isDate:ck,isElement:function(t){return iV(t)&&1===t.nodeType&&!sL(t)},isEmpty:cP,isEqual:function(t,e){return uR(t,e)},isEqualWith:function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?uR(t,e,void 0,n):!!r},isError:sT,isFinite:function(t){return"number"==typeof t&&cH(t)},isFunction:oa,isInteger:cF,isLength:av,isMap:ui,isMatch:function(t,e){return t===e||uI(t,e,uO(e))},isMatchWith:function(t,e,n){return n="function"==typeof n?n:void 0,uI(t,e,uO(e),n)},isNaN:cG,isNative:function(t){if(cV(t))throw Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return og(t)},isNil:cY,isNull:cU,isNumber:cW,isObjectLike:iV,isPlainObject:sL,isRegExp:cX,isSafeInteger:function(t){return cF(t)&&t>=-9007199254740991&&t<=9007199254740991},isSet:ua,isString:cl,isSymbol:iY,isTypedArray:aH,isUndefined:cq,isWeakMap:function(t){return iV(t)&&"[object WeakMap]"==l3(t)},isWeakSet:function(t){return iV(t)&&"[object WeakSet]"==iG(t)},lt:c4,lte:c3,toArray:dc,toFinite:or,toLength:hD,toNumber:oe,toPlainObject:he,toSafeInteger:function(t){return t?lL(oi(t),-9007199254740991,9007199254740991):0===t?t:0}},pb={add:i0,ceil:lS,divide:hv,floor:h0,max:c7,maxBy:c9,mean:function(t){return dn(t,oo)},meanBy:function(t,e){return dn(t,uF(e))},min:ds,minBy:function(t,e){return t&&t.length?c6(t,uF(e),c2):void 0},multiply:dl,round:ff,subtract:fO,sum:function(t){return t&&t.length?dt(t,oo):0},sumBy:fA},p_={clamp:lT,inRange:cs,random:function(t,e,n){if(n&&"boolean"!=typeof n&&ay(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=or(t),void 0===e?(e=t,t=0):e=or(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=fe();return ft(t+i*(e-t+d9("1e-"+((i+"").length-1))),e)}return d7(t,e)}},pE={assign:aq,assignIn:a$,assignInWith:aQ,assignWith:aJ,at:sw,create:function(t,e){var n=oS(t);return null==e?n:lR(n,e)},defaults:u6,defaultsDeep:ho,findKey:function(t,e){return hG(t,uF(e),uj)},findLastKey:function(t,e){return hG(t,uF(e),hw)},forIn:h3,forInRight:function(t,e){return null==t?t:hC(t,hy(e),aZ)},forOwn:function(t,e){return t&&uj(t,hy(e))},forOwnRight:function(t,e){return t&&hw(t,hy(e))},functions:function(t){return null==t?[]:h5(t,aj(t))},functionsIn:function(t){return null==t?[]:h5(t,aZ(t))},get:sd,has:ci,hasIn:uk,invert:cb,invertBy:cT,invoke:cI,keysIn:aZ,mapKeys:c5,mapValues:function(t,e){var n={};return e=uF(e),uj(t,function(t,r,i){as(n,r,e(t,r,i))}),n},merge:dr,mergeWith:hi,omit:dv,omitBy:function(t,e){return dm(t,du(uF(e)))},pick:d$,pickBy:dm,result:function(t,e,n){e=sl(e,t);var r=-1,i=e.length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[sh(e[r])];void 0===o&&(r=i,o=n),t=oa(o)?o.call(t):o}return t},set:fg,setWith:function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:dg(t,e,n,r)},toPairs:h_,toPairsIn:hE,transform:function(t,e,n){var r=iq(t),i=r||aO(t)||aH(t);if(e=uF(e),null==n){var o=t&&t.constructor;n=i?r?new o:[]:i5(t)&&oa(o)?oS(sx(t)):{}}return(i?o$:uj)(t,function(t,r,i){return e(n,t,r,i)}),n},unset:pi,update:function(t,e,n){return null==t?t:pl(t,e,hy(n))},updateWith:function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:pl(t,e,hy(n),r)},values:ch,valuesIn:function(t){return null==t?[]:cu(t,aZ(t))}},pL={at:pc,chain:lb,commit:function(){return new ok(this.value(),this.__chain__)},next:function(){void 0===this.__values__&&(this.__values__=dc(this.value()));var t=this.__index__>=this.__values__.length,e=t?void 0:this.__values__[this.__index__++];return{done:t,value:e}},plant:function(t){for(var e,n=this;n instanceof oR;){var r=oP(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},reverse:function(){var t=this.__wrapped__;if(t instanceof oI){var e=t;return this.__actions__.length&&(e=new oI(this)),(e=e.reverse()).__actions__.push({func:fK,args:[fd],thisArg:void 0}),new ok(e,this.__chain__)}return this.thru(fd)},tap:function(t,e){return e(t),t},thru:fK,toIterator:function(){return this},value:function(){return f$(this.__wrapped__,this.__actions__)},wrapperChain:function(){return lb(this)}},pT={camelCase:lm,capitalize:sZ,deburr:s2,endsWith:hS,escape:hR,escapeRegExp:function(t){return(t=ss(t))&&hO.test(t)?t.replace(hI,"\\$&"):t},kebabCase:cZ,lowerCase:c0,lowerFirst:c1,pad:function(t,e,n){t=ss(t);var r=(e=oi(e))?dW(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return dV(dU(i),n)+t+dV(dY(i),n)},padEnd:function(t,e,n){t=ss(t);var r=(e=oi(e))?dW(t):0;return e&&r<e?t+dV(e-r,n):t},padStart:function(t,e,n){t=ss(t);var r=(e=oi(e))?dW(t):0;return e&&r<e?dV(e-r,n)+t:t},parseInt:function(t,e,n){return n||null==e?e=0:e&&(e=+e),dX(ss(t).replace(dj,""),e||0)},repeat:function(t,e,n){return e=(n?ay(t,e,n):void 0===e)?1:oi(e),dR(ss(t),e)},replace:function(){var t=arguments,e=ss(t[0]);return t.length<3?e:e.replace(t[1],t[2])},snakeCase:fm,split:fT,startCase:fR,startsWith:function(t,e,n){return t=ss(t),n=null==n?0:lL(oi(n),0,t.length),e=iQ(e),t.slice(n,n+e.length)==e},template:function(t,e,n){var r=fH.imports._.templateSettings||fH;n&&ay(t,e,n)&&(e=void 0),t=ss(t),e=aQ({},e,r,fD);var i,o,a=aQ({},e.imports,r.imports,fD),s=aj(a),l=cu(a,s),u=0,h=e.interpolate||fU,c="__p += '",d=RegExp((e.escape||fU).source+"|"+h.source+"|"+(h===fP?fY:fU).source+"|"+(e.evaluate||fU).source+"|$","g"),f=fX.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(d,function(e,n,r,a,s,l){return r||(r=a),c+=t.slice(u,l).replace(fj,fz),n&&(i=!0,c+="' +\n__e("+n+") +\n'"),s&&(o=!0,c+="';\n"+s+";\n__p += '"),r&&(c+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),c+="';\n";var p=fX.call(e,"variable")&&e.variable;if(p){if(fV.test(p))throw Error("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";c=(o?c.replace(fF,""):c).replace(fW,"$1").replace(fG,"$1;"),c="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var v=sM(function(){return Function(s,f+"return "+c).apply(void 0,l)});if(v.source=c,sT(v))throw v;return v},templateSettings:fH,toLower:function(t){return ss(t).toLowerCase()},toUpper:fQ,trim:f1,trimEnd:function(t,e,n){if((t=ss(t))&&(n||void 0===e))return t.slice(0,i2(t)+1);if(!t||!(e=iQ(e)))return t;var r=sX(t),i=fJ(r,sX(e))+1;return sN(r,0,i).join("")},trimStart:function(t,e,n){if((t=ss(t))&&(n||void 0===e))return t.replace(f2,"");if(!t||!(e=iQ(e)))return t;var r=sX(t),i=f0(r,sX(e));return sN(r,i).join("")},truncate:function(t,e){var n=30,r="...";if(i5(e)){var i="separator"in e?e.separator:i;n="length"in e?oi(e.length):n,r="omission"in e?iQ(e.omission):r}var o=(t=ss(t)).length;if(sk(t)){var a=sX(t);o=a.length}if(n>=o)return t;var s=n-dW(r);if(s<1)return r;var l=a?sN(a,0,s).join(""):t.slice(0,s);if(void 0===i)return l+r;if(a&&(s+=l.length-s),cX(i)){if(t.slice(s).search(i)){var u,h=l;for(i.global||(i=RegExp(i.source,ss(f4.exec(i))+"g")),i.lastIndex=0;u=i.exec(h);)var c=u.index;l=l.slice(0,void 0===c?s:c)}}else if(t.indexOf(iQ(i),s)!=s){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+r},unescape:function(t){return(t=ss(t))&&f8.test(t)?t.replace(f5,f3):t},upperCase:pu,upperFirst:sK,words:lv},pM={attempt:sM,bindAll:sO,cond:uW,conforms:function(t){var e,n;return n=aj(e=uc(t,1)),function(t){return uG(t,e,n)}},constant:oq,defaultTo:function(t,e){return null==t||t!=t?e:t},flow:h2,flowRight:h4,iteratee:function(t){return uF("function"==typeof t?t:uc(t,1))},matches:c8,matchesProperty:function(t,e){return uz(t,uc(e,1))},method:di,methodOf:da,noop:oO,nthArg:function(t){return t=oi(t),ap(function(e){return dd(e,t)})},over:db,overEvery:dL,overSome:dT,property:uH,propertyOf:function(t){return function(e){return null==t?void 0:sc(t,e)}},range:fo,rangeRight:fa,stubArray:lk,stubFalse:aT,stubObject:function(){return{}},stubString:function(){return""},stubTrue:fI,times:function(t,e){if((t=oi(t))<1||t>9007199254740991)return[];var n=4294967295,r=fZ(t,4294967295);e=hy(e),t-=4294967295;for(var i=ax(r,e);++n<t;)e(n);return i},toPath:function(t){return iq(t)?iX(t,sh):iY(t)?[t]:oz(sa(ss(t)))},uniqueId:function(t){var e=++pr;return ss(t)+e}},pR=Math.max,pI=Math.min,pO=Math.min,pA=Array.prototype,pB=Object.prototype.hasOwnProperty,pN=iD?iD.iterator:void 0,pD=Math.max,pk=Math.min,pz=(CS=function(t,e,n){var r=aj(e),i=h5(e,r),o=!(i5(n)&&"chain"in n)||!!n.chain,a=oa(t);return o$(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=oz(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,sp([this.value()],arguments))})}),t},function(t,e,n){if(null==n){var r=i5(e),i=r&&aj(e),o=i&&i.length&&h5(e,i);(o?o.length:r)||(n=e,e=t,t=this)}return CS(t,e,n)});function pP(t){return(pP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}oF.after=px.after,oF.ary=px.ary,oF.assign=pE.assign,oF.assignIn=pE.assignIn,oF.assignInWith=pE.assignInWith,oF.assignWith=pE.assignWith,oF.at=pE.at,oF.before=px.before,oF.bind=px.bind,oF.bindAll=pM.bindAll,oF.bindKey=px.bindKey,oF.castArray=pS.castArray,oF.chain=pL.chain,oF.chunk=pC.chunk,oF.compact=pC.compact,oF.concat=pC.concat,oF.cond=pM.cond,oF.conforms=pM.conforms,oF.constant=pM.constant,oF.countBy=pw.countBy,oF.create=pE.create,oF.curry=px.curry,oF.curryRight=px.curryRight,oF.debounce=px.debounce,oF.defaults=pE.defaults,oF.defaultsDeep=pE.defaultsDeep,oF.defer=px.defer,oF.delay=px.delay,oF.difference=pC.difference,oF.differenceBy=pC.differenceBy,oF.differenceWith=pC.differenceWith,oF.drop=pC.drop,oF.dropRight=pC.dropRight,oF.dropRightWhile=pC.dropRightWhile,oF.dropWhile=pC.dropWhile,oF.fill=pC.fill,oF.filter=pw.filter,oF.flatMap=pw.flatMap,oF.flatMapDeep=pw.flatMapDeep,oF.flatMapDepth=pw.flatMapDepth,oF.flatten=pC.flatten,oF.flattenDeep=pC.flattenDeep,oF.flattenDepth=pC.flattenDepth,oF.flip=px.flip,oF.flow=pM.flow,oF.flowRight=pM.flowRight,oF.fromPairs=pC.fromPairs,oF.functions=pE.functions,oF.functionsIn=pE.functionsIn,oF.groupBy=pw.groupBy,oF.initial=pC.initial,oF.intersection=pC.intersection,oF.intersectionBy=pC.intersectionBy,oF.intersectionWith=pC.intersectionWith,oF.invert=pE.invert,oF.invertBy=pE.invertBy,oF.invokeMap=pw.invokeMap,oF.iteratee=pM.iteratee,oF.keyBy=pw.keyBy,oF.keys=aj,oF.keysIn=pE.keysIn,oF.map=pw.map,oF.mapKeys=pE.mapKeys,oF.mapValues=pE.mapValues,oF.matches=pM.matches,oF.matchesProperty=pM.matchesProperty,oF.memoize=px.memoize,oF.merge=pE.merge,oF.mergeWith=pE.mergeWith,oF.method=pM.method,oF.methodOf=pM.methodOf,oF.mixin=pz,oF.negate=du,oF.nthArg=pM.nthArg,oF.omit=pE.omit,oF.omitBy=pE.omitBy,oF.once=px.once,oF.orderBy=pw.orderBy,oF.over=pM.over,oF.overArgs=px.overArgs,oF.overEvery=pM.overEvery,oF.overSome=pM.overSome,oF.partial=px.partial,oF.partialRight=px.partialRight,oF.partition=pw.partition,oF.pick=pE.pick,oF.pickBy=pE.pickBy,oF.property=pM.property,oF.propertyOf=pM.propertyOf,oF.pull=pC.pull,oF.pullAll=pC.pullAll,oF.pullAllBy=pC.pullAllBy,oF.pullAllWith=pC.pullAllWith,oF.pullAt=pC.pullAt,oF.range=pM.range,oF.rangeRight=pM.rangeRight,oF.rearg=px.rearg,oF.reject=pw.reject,oF.remove=pC.remove,oF.rest=px.rest,oF.reverse=pC.reverse,oF.sampleSize=pw.sampleSize,oF.set=pE.set,oF.setWith=pE.setWith,oF.shuffle=pw.shuffle,oF.slice=pC.slice,oF.sortBy=pw.sortBy,oF.sortedUniq=pC.sortedUniq,oF.sortedUniqBy=pC.sortedUniqBy,oF.split=pT.split,oF.spread=px.spread,oF.tail=pC.tail,oF.take=pC.take,oF.takeRight=pC.takeRight,oF.takeRightWhile=pC.takeRightWhile,oF.takeWhile=pC.takeWhile,oF.tap=pL.tap,oF.throttle=px.throttle,oF.thru=fK,oF.toArray=pS.toArray,oF.toPairs=pE.toPairs,oF.toPairsIn=pE.toPairsIn,oF.toPath=pM.toPath,oF.toPlainObject=pS.toPlainObject,oF.transform=pE.transform,oF.unary=px.unary,oF.union=pC.union,oF.unionBy=pC.unionBy,oF.unionWith=pC.unionWith,oF.uniq=pC.uniq,oF.uniqBy=pC.uniqBy,oF.uniqWith=pC.uniqWith,oF.unset=pE.unset,oF.unzip=pC.unzip,oF.unzipWith=pC.unzipWith,oF.update=pE.update,oF.updateWith=pE.updateWith,oF.values=pE.values,oF.valuesIn=pE.valuesIn,oF.without=pC.without,oF.words=pT.words,oF.wrap=px.wrap,oF.xor=pC.xor,oF.xorBy=pC.xorBy,oF.xorWith=pC.xorWith,oF.zip=pC.zip,oF.zipObject=pC.zipObject,oF.zipObjectDeep=pC.zipObjectDeep,oF.zipWith=pC.zipWith,oF.entries=pE.toPairs,oF.entriesIn=pE.toPairsIn,oF.extend=pE.assignIn,oF.extendWith=pE.assignInWith,pz(oF,oF),oF.add=pb.add,oF.attempt=pM.attempt,oF.camelCase=pT.camelCase,oF.capitalize=pT.capitalize,oF.ceil=pb.ceil,oF.clamp=p_.clamp,oF.clone=pS.clone,oF.cloneDeep=pS.cloneDeep,oF.cloneDeepWith=pS.cloneDeepWith,oF.cloneWith=pS.cloneWith,oF.conformsTo=pS.conformsTo,oF.deburr=pT.deburr,oF.defaultTo=pM.defaultTo,oF.divide=pb.divide,oF.endsWith=pT.endsWith,oF.eq=pS.eq,oF.escape=pT.escape,oF.escapeRegExp=pT.escapeRegExp,oF.every=pw.every,oF.find=pw.find,oF.findIndex=pC.findIndex,oF.findKey=pE.findKey,oF.findLast=pw.findLast,oF.findLastIndex=pC.findLastIndex,oF.findLastKey=pE.findLastKey,oF.floor=pb.floor,oF.forEach=pw.forEach,oF.forEachRight=pw.forEachRight,oF.forIn=pE.forIn,oF.forInRight=pE.forInRight,oF.forOwn=pE.forOwn,oF.forOwnRight=pE.forOwnRight,oF.get=pE.get,oF.gt=pS.gt,oF.gte=pS.gte,oF.has=pE.has,oF.hasIn=pE.hasIn,oF.head=pC.head,oF.identity=oo,oF.includes=pw.includes,oF.indexOf=pC.indexOf,oF.inRange=p_.inRange,oF.invoke=pE.invoke,oF.isArguments=pS.isArguments,oF.isArray=iq,oF.isArrayBuffer=pS.isArrayBuffer,oF.isArrayLike=pS.isArrayLike,oF.isArrayLikeObject=pS.isArrayLikeObject,oF.isBoolean=pS.isBoolean,oF.isBuffer=pS.isBuffer,oF.isDate=pS.isDate,oF.isElement=pS.isElement,oF.isEmpty=pS.isEmpty,oF.isEqual=pS.isEqual,oF.isEqualWith=pS.isEqualWith,oF.isError=pS.isError,oF.isFinite=pS.isFinite,oF.isFunction=pS.isFunction,oF.isInteger=pS.isInteger,oF.isLength=pS.isLength,oF.isMap=pS.isMap,oF.isMatch=pS.isMatch,oF.isMatchWith=pS.isMatchWith,oF.isNaN=pS.isNaN,oF.isNative=pS.isNative,oF.isNil=pS.isNil,oF.isNull=pS.isNull,oF.isNumber=pS.isNumber,oF.isObject=i5,oF.isObjectLike=pS.isObjectLike,oF.isPlainObject=pS.isPlainObject,oF.isRegExp=pS.isRegExp,oF.isSafeInteger=pS.isSafeInteger,oF.isSet=pS.isSet,oF.isString=pS.isString,oF.isSymbol=pS.isSymbol,oF.isTypedArray=pS.isTypedArray,oF.isUndefined=pS.isUndefined,oF.isWeakMap=pS.isWeakMap,oF.isWeakSet=pS.isWeakSet,oF.join=pC.join,oF.kebabCase=pT.kebabCase,oF.last=hd,oF.lastIndexOf=pC.lastIndexOf,oF.lowerCase=pT.lowerCase,oF.lowerFirst=pT.lowerFirst,oF.lt=pS.lt,oF.lte=pS.lte,oF.max=pb.max,oF.maxBy=pb.maxBy,oF.mean=pb.mean,oF.meanBy=pb.meanBy,oF.min=pb.min,oF.minBy=pb.minBy,oF.stubArray=pM.stubArray,oF.stubFalse=pM.stubFalse,oF.stubObject=pM.stubObject,oF.stubString=pM.stubString,oF.stubTrue=pM.stubTrue,oF.multiply=pb.multiply,oF.nth=pC.nth,oF.noop=pM.noop,oF.now=u1,oF.pad=pT.pad,oF.padEnd=pT.padEnd,oF.padStart=pT.padStart,oF.parseInt=pT.parseInt,oF.random=p_.random,oF.reduce=pw.reduce,oF.reduceRight=pw.reduceRight,oF.repeat=pT.repeat,oF.replace=pT.replace,oF.result=pE.result,oF.round=pb.round,oF.sample=pw.sample,oF.size=pw.size,oF.snakeCase=pT.snakeCase,oF.some=pw.some,oF.sortedIndex=pC.sortedIndex,oF.sortedIndexBy=pC.sortedIndexBy,oF.sortedIndexOf=pC.sortedIndexOf,oF.sortedLastIndex=pC.sortedLastIndex,oF.sortedLastIndexBy=pC.sortedLastIndexBy,oF.sortedLastIndexOf=pC.sortedLastIndexOf,oF.startCase=pT.startCase,oF.startsWith=pT.startsWith,oF.subtract=pb.subtract,oF.sum=pb.sum,oF.sumBy=pb.sumBy,oF.template=pT.template,oF.times=pM.times,oF.toFinite=pS.toFinite,oF.toInteger=oi,oF.toLength=pS.toLength,oF.toLower=pT.toLower,oF.toNumber=pS.toNumber,oF.toSafeInteger=pS.toSafeInteger,oF.toString=pS.toString,oF.toUpper=pT.toUpper,oF.trim=pT.trim,oF.trimEnd=pT.trimEnd,oF.trimStart=pT.trimStart,oF.truncate=pT.truncate,oF.unescape=pT.unescape,oF.uniqueId=pM.uniqueId,oF.upperCase=pT.upperCase,oF.upperFirst=pT.upperFirst,oF.each=pw.forEach,oF.eachRight=pw.forEachRight,oF.first=pC.head,pz(oF,(Cb={},uj(oF,function(t,e){pB.call(oF.prototype,e)||(Cb[e]=t)}),Cb),{chain:!1}),oF.VERSION="4.17.21",(oF.templateSettings=pT.templateSettings).imports._=oF,o$(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){oF[t].placeholder=oF}),o$(["drop","take"],function(t,e){oI.prototype[t]=function(n){n=void 0===n?1:pD(oi(n),0);var r=this.__filtered__&&!e?new oI(this):this.clone();return r.__filtered__?r.__takeCount__=pk(n,r.__takeCount__):r.__views__.push({size:pk(n,4294967295),type:t+(r.__dir__<0?"Right":"")}),r},oI.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),o$(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;oI.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:uF(t),type:n}),e.__filtered__=e.__filtered__||r,e}}),o$(["head","last"],function(t,e){var n="take"+(e?"Right":"");oI.prototype[t]=function(){return this[n](1).value()[0]}}),o$(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");oI.prototype[t]=function(){return this.__filtered__?new oI(this):this[n](1)}}),oI.prototype.compact=function(){return this.filter(oo)},oI.prototype.find=function(t){return this.filter(t).head()},oI.prototype.findLast=function(t){return this.reverse().find(t)},oI.prototype.invokeMap=ap(function(t,e){return"function"==typeof t?new oI(this):this.map(function(n){return cR(n,t,e)})}),oI.prototype.reject=function(t){return this.filter(du(uF(t)))},oI.prototype.slice=function(t,e){t=oi(t);var n=this;return n.__filtered__&&(t>0||e<0)?new oI(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=oi(e))<0?n.dropRight(-e):n.take(e-t)),n)},oI.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},oI.prototype.toArray=function(){return this.take(4294967295)},uj(oI.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=oF[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(oF.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,s=e instanceof oI,l=a[0],u=s||iq(e),h=function(t){var e=i.apply(oF,sp([t],a));return r&&c?e[0]:e};u&&n&&"function"==typeof l&&1!=l.length&&(s=u=!1);var c=this.__chain__,d=!!this.__actions__.length,f=o&&!c,p=s&&!d;if(!o&&u){e=p?e:new oI(this);var v=t.apply(e,a);return v.__actions__.push({func:fK,args:[h],thisArg:void 0}),new ok(v,c)}return f&&p?t.apply(this,a):(v=this.thru(h),f?r?v.value()[0]:v.value():v)})}),o$(["pop","push","shift","sort","splice","unshift"],function(t){var e=pA[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);oF.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(iq(i)?i:[],t)}return this[n](function(n){return e.apply(iq(n)?n:[],t)})}}),uj(oI.prototype,function(t,e){var n=oF[e];if(n){var r=n.name+"";pB.call(oB,r)||(oB[r]=[]),oB[r].push({name:e,func:n})}}),oB[ae(void 0,2).name]=[{name:"wrapper",func:void 0}],oI.prototype.clone=function(){var t=new oI(this.__wrapped__);return t.__actions__=oz(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=oz(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=oz(this.__views__),t},oI.prototype.reverse=function(){if(this.__filtered__){var t=new oI(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},oI.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=iq(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=pI(e,t+a);break;case"takeRight":t=pR(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,h=this.__iteratees__,c=h.length,d=0,f=pO(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return f$(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var v=-1,g=t[u+=e];++v<c;){var y=h[v],m=y.iteratee,C=y.type,w=m(g);if(2==C)g=w;else if(!w){if(1==C)continue t;break t}}p[d++]=g}return p},oF.prototype.at=pL.at,oF.prototype.chain=pL.wrapperChain,oF.prototype.commit=pL.commit,oF.prototype.next=pL.next,oF.prototype.plant=pL.plant,oF.prototype.reverse=pL.reverse,oF.prototype.toJSON=oF.prototype.valueOf=oF.prototype.value=pL.value,oF.prototype.first=oF.prototype.head,pN&&(oF.prototype[pN]=pL.toIterator);var pH=/^\s+/,pF=/\s+$/;function pW(t,e){if(e=e||{},(t=t||"")instanceof pW)return t;if(!(this instanceof pW))return new pW(t,e);var n,r,i,o,a,s,l,u,h,c,d,f,p,v,g,y,m,C,w,x,S=(r={r:0,g:0,b:0},i=1,o=null,a=null,s=null,l=!1,u=!1,"string"==typeof(n=t)&&(n=function(t){t=t.replace(pH,"").replace(pF,"").toLowerCase();var e,n=!1;if(p3[t])t=p3[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=vr.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=vr.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=vr.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=vr.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=vr.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=vr.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=vr.hex8.exec(t))?{r:p9(e[1]),g:p9(e[2]),b:p9(e[3]),a:p9(e[4])/255,format:n?"name":"hex8"}:(e=vr.hex6.exec(t))?{r:p9(e[1]),g:p9(e[2]),b:p9(e[3]),format:n?"name":"hex"}:(e=vr.hex4.exec(t))?{r:p9(e[1]+""+e[1]),g:p9(e[2]+""+e[2]),b:p9(e[3]+""+e[3]),a:p9(e[4]+""+e[4])/255,format:n?"name":"hex8"}:!!(e=vr.hex3.exec(t))&&{r:p9(e[1]+""+e[1]),g:p9(e[2]+""+e[2]),b:p9(e[3]+""+e[3]),format:n?"name":"hex"}}(n)),"object"==pP(n)&&(vi(n.r)&&vi(n.g)&&vi(n.b)?(h=n.r,c=n.g,d=n.b,r={r:255*p6(h,255),g:255*p6(c,255),b:255*p6(d,255)},l=!0,u="%"===String(n.r).substr(-1)?"prgb":"rgb"):vi(n.h)&&vi(n.s)&&vi(n.v)?(o=ve(n.s),a=ve(n.v),f=n.h,p=o,v=a,f=6*p6(f,360),p=p6(p,100),v=p6(v,100),g=Math.floor(f),y=f-g,m=v*(1-p),C=v*(1-y*p),w=v*(1-(1-y)*p),r={r:255*[v,C,m,m,w,v][x=g%6],g:255*[w,v,v,C,m,m][x],b:255*[m,m,w,v,v,C][x]},l=!0,u="hsv"):vi(n.h)&&vi(n.s)&&vi(n.l)&&(o=ve(n.s),s=ve(n.l),r=function(t,e,n){var r,i,o;function a(t,e,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?t+(e-t)*6*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=p6(t,360),e=p6(e,100),n=p6(n,100),0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;r=a(l,s,t+1/3),i=a(l,s,t),o=a(l,s,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(n.h,o,s),l=!0,u="hsl"),n.hasOwnProperty("a")&&(i=n.a)),i=p8(i),{ok:l,format:n.format||u,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:i});this._originalInput=t,this._r=S.r,this._g=S.g,this._b=S.b,this._a=S.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||S.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=S.ok}function pG(t,e,n){var r,i,o=Math.max(t=p6(t,255),e=p6(e,255),n=p6(n,255)),a=Math.min(t,e,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4}r/=6}return{h:r,s:i,l:s}}function pV(t,e,n){var r,i=Math.max(t=p6(t,255),e=p6(e,255),n=p6(n,255)),o=Math.min(t,e,n),a=i-o;if(i==o)r=0;else{switch(i){case t:r=(e-n)/a+(e<n?6:0);break;case e:r=(n-t)/a+2;break;case n:r=(t-e)/a+4}r/=6}return{h:r,s:0===i?0:a/i,v:i}}function pY(t,e,n,r){var i=[vt(Math.round(t).toString(16)),vt(Math.round(e).toString(16)),vt(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function pU(t,e,n,r){return[vt(vn(r)),vt(Math.round(t).toString(16)),vt(Math.round(e).toString(16)),vt(Math.round(n).toString(16))].join("")}function pj(t,e){e=0===e?0:e||10;var n=pW(t).toHsl();return n.s-=e/100,n.s=p7(n.s),pW(n)}function pX(t,e){e=0===e?0:e||10;var n=pW(t).toHsl();return n.s+=e/100,n.s=p7(n.s),pW(n)}function pq(t){return pW(t).desaturate(100)}function pK(t,e){e=0===e?0:e||10;var n=pW(t).toHsl();return n.l+=e/100,n.l=p7(n.l),pW(n)}function pZ(t,e){e=0===e?0:e||10;var n=pW(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-(e/100*255)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-(e/100*255)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-(e/100*255)))),pW(n)}function p$(t,e){e=0===e?0:e||10;var n=pW(t).toHsl();return n.l-=e/100,n.l=p7(n.l),pW(n)}function pQ(t,e){var n=pW(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,pW(n)}function pJ(t){var e=pW(t).toHsl();return e.h=(e.h+180)%360,pW(e)}function p0(t,e){if(isNaN(e)||e<=0)throw Error("Argument to polyad must be a positive number");for(var n=pW(t).toHsl(),r=[pW(t)],i=360/e,o=1;o<e;o++)r.push(pW({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function p1(t){var e=pW(t).toHsl(),n=e.h;return[pW(t),pW({h:(n+72)%360,s:e.s,l:e.l}),pW({h:(n+216)%360,s:e.s,l:e.l})]}function p2(t,e,n){e=e||6,n=n||30;var r=pW(t).toHsl(),i=360/n,o=[pW(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(pW(r));return o}function p4(t,e){e=e||6;for(var n=pW(t).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/e;e--;)a.push(pW({h:r,s:i,v:o})),o=(o+s)%1;return a}pW.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return t=r.r/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*((e=r.g/255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*((n=r.b/255)<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=p8(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=pV(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=pV(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=pG(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=pG(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return pY(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){var e,n,r,i,o;return e=this._r,n=this._g,r=this._b,i=this._a,o=[vt(Math.round(e).toString(16)),vt(Math.round(n).toString(16)),vt(Math.round(r).toString(16)),vt(vn(i))],t&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*p6(this._r,255))+"%",g:Math.round(100*p6(this._g,255))+"%",b:Math.round(100*p6(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*p6(this._r,255))+"%, "+Math.round(100*p6(this._g,255))+"%, "+Math.round(100*p6(this._b,255))+"%)":"rgba("+Math.round(100*p6(this._r,255))+"%, "+Math.round(100*p6(this._g,255))+"%, "+Math.round(100*p6(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(p5[pY(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+pU(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=pW(t);n="#"+pU(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return!e&&r&&("hex"===t||"hex6"===t||"hex3"===t||"hex4"===t||"hex8"===t||"name"===t)?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return pW(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(pK,arguments)},brighten:function(){return this._applyModification(pZ,arguments)},darken:function(){return this._applyModification(p$,arguments)},desaturate:function(){return this._applyModification(pj,arguments)},saturate:function(){return this._applyModification(pX,arguments)},greyscale:function(){return this._applyModification(pq,arguments)},spin:function(){return this._applyModification(pQ,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(p2,arguments)},complement:function(){return this._applyCombination(pJ,arguments)},monochromatic:function(){return this._applyCombination(p4,arguments)},splitcomplement:function(){return this._applyCombination(p1,arguments)},triad:function(){return this._applyCombination(p0,[3])},tetrad:function(){return this._applyCombination(p0,[4])}},pW.fromRatio=function(t,e){if("object"==pP(t)){var n={};for(var r in t)t.hasOwnProperty(r)&&("a"===r?n[r]=t[r]:n[r]=ve(t[r]));t=n}return pW(t,e)},pW.equals=function(t,e){return!!t&&!!e&&pW(t).toRgbString()==pW(e).toRgbString()},pW.random=function(){return pW.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},pW.mix=function(t,e,n){n=0===n?0:n||50;var r=pW(t).toRgb(),i=pW(e).toRgb(),o=n/100;return pW({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},pW.readability=function(t,e){var n=pW(t),r=pW(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},pW.isReadable=function(t,e,n){var r,i,o,a,s,l=pW.readability(t,e);switch(s=!1,(i=((r=(r=n)||{level:"AA",size:"small"}).level||"AA").toUpperCase(),o=(r.size||"small").toLowerCase(),"AA"!==i&&"AAA"!==i&&(i="AA"),"small"!==o&&"large"!==o&&(o="small"),a={level:i,size:o}).level+a.size){case"AAsmall":case"AAAlarge":s=l>=4.5;break;case"AAlarge":s=l>=3;break;case"AAAsmall":s=l>=7}return s},pW.mostReadable=function(t,e,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var u=0;u<e.length;u++)(r=pW.readability(t,e[u]))>l&&(l=r,s=pW(e[u]));return pW.isReadable(t,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,pW.mostReadable(t,["#fff","#000"],n))};var p3=pW.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},p5=pW.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(p3);function p8(t){return(isNaN(t=parseFloat(t))||t<0||t>1)&&(t=1),t}function p6(t,e){"string"==typeof(n=t)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(t="100%");var n,r,i="string"==typeof(r=t)&&-1!=r.indexOf("%");return(t=Math.min(e,Math.max(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),1e-6>Math.abs(t-e))?1:t%e/parseFloat(e)}function p7(t){return Math.min(1,Math.max(0,t))}function p9(t){return parseInt(t,16)}function vt(t){return 1==t.length?"0"+t:""+t}function ve(t){return t<=1&&(t=100*t+"%"),t}function vn(t){return Math.round(255*parseFloat(t)).toString(16)}var vr=(CE="[\\s|\\(]+("+(C_="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+C_+")[,|\\s]+("+C_+")\\s*\\)?",CL="[\\s|\\(]+("+C_+")[,|\\s]+("+C_+")[,|\\s]+("+C_+")[,|\\s]+("+C_+")\\s*\\)?",{CSS_UNIT:new RegExp(C_),rgb:RegExp("rgb"+CE),rgba:RegExp("rgba"+CL),hsl:RegExp("hsl"+CE),hsla:RegExp("hsla"+CL),hsv:RegExp("hsv"+CE),hsva:RegExp("hsva"+CL),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function vi(t){return!!vr.CSS_UNIT.exec(t)}var vo=[95,85,75,30,15,0,15,30,45,60,80],va=function(t){return .5>=pW(t).getLuminance()},vs=[{fontColorIndex:0,bgColorIndex:3},{fontColorIndex:13,bgColorIndex:8},{fontColorIndex:14,bgColorIndex:1}],vl=function(t){for(var e=[],n=0;n<11;n++){var r=vo[n];e.push(0===r?fQ(t):fQ(pW.mix(t,n<5?"#FFFFFF":"#000000",r).toHexString()))}return e},vu=function(t){void 0===t&&(t={});var e=Array.from(Array(15)).fill(ib),n=t.basicColorRelations,r=vl(t.brandColor);return(void 0===n?[]:n).forEach(function(t){e[t.basicColorIndex]=r[t.standardColorIndex]}),vs.forEach(function(t){var n=t.fontColorIndex,r=t.bgColorIndex;e[n]=va(e[r])?ib:iS}),h(h({},t),{basicColors:e})},vh=vu({brandColor:"#3471F9",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:5},{basicColorIndex:4,standardColorIndex:6},{basicColorIndex:5,standardColorIndex:6},{basicColorIndex:6,standardColorIndex:6},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:4},{basicColorIndex:11,standardColorIndex:4},{basicColorIndex:12,standardColorIndex:5}]}),vc={default:vu({brandColor:"#326EF4",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:5},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:5},{basicColorIndex:12,standardColorIndex:5}]}),colorful:vh,gray:vu({brandColor:"#9DA7B6",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:8},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:3},{basicColorIndex:12,standardColorIndex:3}]})},vd="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif",vf="zh_CN",vp={zh_CN:{小计:"小计",总计:"总计",总和:"（总和）",项:"项",已选择:"已选择",序号:"序号",度量:"度量",数值:"数值",共计:"共计",条:"条",趋势:"趋势",隐藏:"隐藏",组内升序:"组内升序",升序:"升序",降序:"降序",组内降序:"组内降序",不排序:"不排序","，":"，"},en_US:{小计:"Total",总计:"Total",总和:"(SUM)",项:"items",已选择:"selected",序号:"Index",度量:"Measure",数值:"Measure",共计:"Total",条:"",隐藏:"Hide",趋势:"Trend",组内升序:"Group ASC",组内降序:"Group DESC",升序:"ASC",降序:"DESC",不排序:"No order","，":", "}},vv=function(){return vf},vg=function(t){vp=dr({},vp,t)},vy=function(t,e){return void 0===e&&(e=t),sd(vp,[vf,t],e)},vm="".concat(iC,"-tooltip"),vC="".concat(vm,"-container"),vw="".concat(vC,"-show"),vx="".concat(vC,"-hide");function vS(t){return"mobile"===t||/(iPhone|iPad|SymbianOS|Windows Phone|iPod|iOS|Android)/i.test(navigator.userAgent)}function vb(){return/windows/i.test(navigator.userAgent)}(CT=C0||(C0={}))[CT.ALL=0]="ALL",CT[CT.COL=1]="COL",CT[CT.ROW=2]="ROW",(CM=C1||(C1={})).All="all",CM.DetailOnly="detailOnly";var v_=function(t){var e,n,r,i,o,a=(null==t?void 0:t.palette)||vc[((null==t?void 0:t.name)||"default").toLowerCase()],s=a.basicColors,l=a.semanticColors,u=a.others,h=null===(e=null==t?void 0:t.spreadsheet)||void 0===e?void 0:e.isTableMode(),c=vb()?"bold":700,d=function(){var t,e;return{bolderText:{fontFamily:vd,fontSize:12,fontWeight:c,fill:s[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:s[6]},text:{fontFamily:vd,fontSize:12,fontWeight:"normal",fill:s[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:s[6]},cell:{crossBackgroundColor:s[1],backgroundColor:s[8],backgroundColorOpacity:1,horizontalBorderColor:s[9],horizontalBorderColorOpacity:1,verticalBorderColor:s[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:8,right:8,bottom:8,left:8},interactionState:{hover:{backgroundColor:s[2],backgroundOpacity:.6},hoverFocus:{backgroundColor:s[2],backgroundOpacity:.6,borderColor:s[14],borderWidth:1,borderOpacity:1},selected:{backgroundColor:s[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},searchResult:{backgroundColor:null!==(t=null==u?void 0:u.results)&&void 0!==t?t:s[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(e=null==u?void 0:u.highlight)&&void 0!==e?e:s[6],backgroundOpacity:1},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1}}},miniChart:{line:{point:{size:2.2,fill:s[6],opacity:1},linkLine:{size:1.5,fill:s[6],opacity:.6}},bar:{intervalPadding:4,fill:s[6],opacity:1},bullet:{progressBar:{widthPercent:.6,height:10,innerHeight:6},comparativeMeasure:{width:1,height:12,fill:s[13],opacity:.25},rangeColors:{good:null==l?void 0:l.green,satisfactory:l.yellow,bad:l.red},backgroundColor:"#E9E9E9"},interval:{height:12,fill:s[7]}},icon:{fill:s[13],downIconColor:l.red,upIconColor:l.green,size:10,margin:{right:4,left:4}}}};return{cornerCell:{bolderText:{fontFamily:vd,fontSize:12,fontWeight:c,fill:s[0],opacity:1,textAlign:h?"center":"left",textBaseline:"middle"},text:{fontFamily:vd,fontSize:12,fontWeight:c,fill:s[0],opacity:1,textAlign:"right",textBaseline:"middle"},cell:{backgroundColor:s[3],backgroundColorOpacity:1,horizontalBorderColor:s[10],horizontalBorderColorOpacity:1,verticalBorderColor:s[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:0,right:8,bottom:0,left:8}},icon:{fill:s[0],size:10,margin:{right:4,left:4}}},rowCell:{seriesText:{fontFamily:vd,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textBaseline:h?"middle":"top",textAlign:"center"},measureText:{fontFamily:vd,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textAlign:h?"center":"left",textBaseline:"top"},bolderText:{fontFamily:vd,fontSize:12,fontWeight:c,fill:s[14],linkTextFill:s[6],opacity:1,textAlign:h?"center":"left",textBaseline:"top"},text:{fontFamily:vd,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textBaseline:"top",textAlign:h?"center":"left"},cell:{backgroundColor:s[1],backgroundColorOpacity:1,horizontalBorderColor:s[9],horizontalBorderColorOpacity:1,verticalBorderColor:s[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:s[2],backgroundOpacity:.6},selected:{backgroundColor:s[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:null!==(n=null==u?void 0:u.results)&&void 0!==n?n:s[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(r=null==u?void 0:u.highlight)&&void 0!==r?r:s[6],backgroundOpacity:1}}},icon:{fill:s[14],size:10,margin:{right:4,left:4}},seriesNumberWidth:80},colCell:{measureText:{fontFamily:vd,fontSize:12,fontWeight:"normal",fill:s[0],opacity:1,textAlign:"right",textBaseline:"middle"},bolderText:{fontFamily:vd,fontSize:12,fontWeight:c,fill:s[0],opacity:1,textAlign:"center",textBaseline:"middle"},text:{fontFamily:vd,fontSize:12,fontWeight:"normal",fill:s[0],opacity:1,textAlign:"center",textBaseline:"middle"},cell:{backgroundColor:s[3],backgroundColorOpacity:1,horizontalBorderColor:s[10],horizontalBorderColorOpacity:1,verticalBorderColor:s[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:s[4],backgroundOpacity:.6},selected:{backgroundColor:s[4],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:null!==(i=null==u?void 0:u.results)&&void 0!==i?i:s[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(o=null==u?void 0:u.highlight)&&void 0!==o?o:s[6],backgroundOpacity:1}}},icon:{fill:s[0],size:10,margin:{top:6,right:4,bottom:6,left:4}}},dataCell:d(),mergedCell:d(),resizeArea:{size:3,background:s[7],backgroundOpacity:0,guideLineColor:s[7],guideLineDisableColor:"rgba(0,0,0,0.25)",guideLineDash:[3,3],interactionState:{hover:{backgroundColor:s[7],backgroundOpacity:1}}},scrollBar:{trackColor:"rgba(0,0,0,0.01)",thumbHoverColor:"rgba(0,0,0,0.25)",thumbColor:"rgba(0,0,0,0.15)",thumbHorizontalMinSize:32,thumbVerticalMinSize:32,size:vS()?3:6,hoverSize:vS()?4:8,lineCap:"round"},splitLine:{horizontalBorderColor:s[12],horizontalBorderColorOpacity:.2,horizontalBorderWidth:2,verticalBorderColor:s[11],verticalBorderColorOpacity:.25,verticalBorderWidth:2,showShadow:!0,shadowWidth:8,shadowColors:{left:"rgba(0,0,0,0.1)",right:"rgba(0,0,0,0)"},borderDash:[]},prepareSelectMask:{backgroundColor:s[5],backgroundOpacity:.3},background:{color:s[8],opacity:1}}},vE=function(){function t(t){this.x=0,this.y=0,this.width=0,this.height=0,this.colIndex=-1,this.level=0,this.isLeaf=!1,this.children=[],this.padding=0;var e=t.id,n=t.key,r=t.value,i=t.label,o=t.parent,a=t.level,s=t.rowIndex,l=t.isTotals,u=t.isGrandTotals,h=t.isSubTotals,c=t.isCollapsed,d=t.isTotalRoot,f=t.hierarchy,p=t.isPivotMode,v=t.seriesNumberWidth,g=t.field,y=t.spreadsheet,m=t.query,C=t.belongsCell,w=t.inCollapseNode,x=t.isTotalMeasure,S=t.isLeaf,b=t.extra;this.id=e,this.key=n,this.value=r,this.label=i||r,this.parent=o,this.level=a,this.rowIndex=s,this.isTotals=l,this.isCollapsed=c,this.hierarchy=f,this.isPivotMode=p,this.seriesNumberWidth=v,this.field=g,this.spreadsheet=y,this.query=m,this.belongsCell=C,this.inCollapseNode=w,this.isTotalMeasure=x,this.isLeaf=S,this.isGrandTotals=u,this.isSubTotals=h,this.isTotalRoot=d,this.extra=b}return t.getFieldPath=function(t,e){if(t&&!t.isTotals||t&&e){for(var n=t.parent,r=[t.field];n&&n.id!==ig;)r.push(n.field),n=n.parent;return r.reverse()}},t.getAllLeaveNodes=function(t){var e=[];if(t.isLeaf)return[t];for(var n=p([],f(t.children),!1),r=n.shift();r;)r.isLeaf?e.push(r):n.unshift.apply(n,p([],f(r.children),!1)),r=n.shift();return e},t.getAllChildrenNodes=function(t){var e=[];if(t.isLeaf)return[t];for(var n=p([],f(t.children||[]),!1),r=n.shift();r;)e.push(r),n.unshift.apply(n,p([],f(r.children),!1)),r=n.shift();return e},t.getAllBranch=function(t){for(var e=[],n=this.getAllLeaveNodes(t),r=n.shift(),i=[];r;){i.unshift(r);for(var o=r.parent;o&&!uR(o,t);)i.unshift(o),o=o.parent;e.push(i),r=n.shift(),i=[]}return e},t.blankNode=function(){return new t({id:"",key:"",value:""})},t.rootNode=function(){return new t({id:"root",key:"",value:""})},t.prototype.toJSON=function(){return dv(this,["config","hierarchy","parent","spreadsheet"])},t.prototype.getHeadLeafChild=function(){for(var t=this;!cP(t.children);)t=hX(t.children);return t},t.prototype.getTotalHeightForTreeHierarchy=function(){return 0===this.height||cP(this.children)?this.height:this.children.reduce(function(t,e){return t+e.getTotalHeightForTreeHierarchy()},this.height)},t}(),vL=function(){function t(){this.width=0,this.height=0,this.maxLevel=-1,this.sampleNodesForAllLevels=[],this.sampleNodeForLastLevel=null,this.allNodesWithoutRoot=[],this.indexNode=[]}return t.prototype.getLeaves=function(){return this.allNodesWithoutRoot.filter(function(t){return t.isLeaf})},t.prototype.getNodes=function(t){return void 0!==t?this.allNodesWithoutRoot.filter(function(e){return e.level===t}):this.allNodesWithoutRoot},t.prototype.getNodesLessThanLevel=function(t){return this.allNodesWithoutRoot.filter(function(e){return e.level<=t})},t.prototype.pushNode=function(t,e){void 0===e&&(e=-1),-1===e?this.allNodesWithoutRoot.push(t):this.allNodesWithoutRoot.splice(e,0,t)},t.prototype.pushIndexNode=function(t){this.indexNode.push(t)},t.prototype.getIndexNodes=function(){return this.indexNode},t}(),vT=function(t){var e=t.label,n=t.isSubTotals,r=t.isGrandTotals,i=t.isTotalRoot;this.label=e,this.isSubTotals=n,this.isGrandTotals=r,this.isTotalRoot=i},vM=function(t){var e,n,r,i=t.isFirstField,o=t.currentField,a=t.fieldValues,s=t.spreadsheet,l=t.lastField,u=s.getTotalsConfig(i?o:l);i?(null==u?void 0:u.showGrandTotals)&&(n=u.reverseLayout?"unshift":"push",r=new vT({label:u.label,isSubTotals:!1,isGrandTotals:!0,isTotalRoot:!0})):(null==u?void 0:u.showSubTotals)&&(oF.size(a)>1||!1!==oF.get(u,"showSubTotals.always"))&&o!==r5&&(n=u.reverseSubLayout?"unshift":"push",r=new vT({label:u.subLabel,isSubTotals:!0,isGrandTotals:!1,isTotalRoot:!0})),null===(e=a[n])||void 0===e||e.call(a,r)};function vR(t,e){for(var n={},r=t;r&&r.key;)(!r.isTotalRoot||e)&&r.value!==it&&(n[r.key]=r.value),r=r.parent;return n}var vI=function(){function t(){var t=this;this.debug=!1,this.debugCallback=function(e,n){if(t.debug){var r=performance.now();n();var i=performance.now();console.log(e,"".concat(i-r," ms"))}else n()},this.logger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.debug&&console.log.apply(console,p([e],f(n),!1))}}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.setDebug=function(t){this.debug=t},t}(),vO=Object.freeze({__proto__:null,ArrowDown:'\n<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">\n    <text id="↓" fill="#29A294">\n        <tspan x="-0.225097656" y="8.5">↓</tspan>\n    </text>\n</g>\n</svg>',ArrowUp:'<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">\n    <text id="↑" fill="#FF4D4F">\n        <tspan x="-0.225097656" y="8.5">↑</tspan>\n    </text>\n</g>\n</svg>\n',CellDown:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <!-- Generator: Sketch 58 (84663) - https://sketch.com -->\n    <title>down</title>\n    <desc>Created with Sketch.</desc>\n    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polygon id="down" fill="#58AE57" transform="translate(3.500000, 4.500000) scale(1, -1) translate(-3.500000, -4.500000) " points="3.5 0 7 9 0 9"></polygon>\n    </g>\n</svg>',CellUp:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <!-- Generator: Sketch 58 (84663) - https://sketch.com -->\n    <title>up</title>\n    <desc>Created with Sketch.</desc>\n    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polygon id="up" fill="#F46649" points="3.5 0 7 9 0 9"></polygon>\n    </g>\n</svg> ',GlobalAsc:'<svg t="1557124621626" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="17452"\nxmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n<defs>\n  <style type="text/css"></style>\n</defs>\n<path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 626.944h176c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8h-176A8 8 0 0 1 384 857.984v-56c0-4.416 3.584-8 8-8z m0-424h368c4.416 0 8 3.648 8 8v56a8 8 0 0 1-8 8h-368A8 8 0 0 1 384 433.984v-56c0-4.352 3.584-8 8-8z m528-139.968h-528A8 8 0 0 1 384 222.016v-56c0-4.416 3.584-8 8-8h528c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z m-256 424h-272A8 8 0 0 1 384 646.016v-56c0-4.416 3.584-8 8-8h272c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z" p-id="17453"></path>\n</svg>',GlobalDesc:'<svg t="1557124685600" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17561"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h176A8 8 0 0 0 576 222.016v-56a8 8 0 0 0-8-8h-176A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h368a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-368A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m-256-424h-272A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h272a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17562"></path>\n</svg>',GroupAsc:'<svg t="1557124695786" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17670"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 62.976h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17671"></path>\n</svg>',GroupDesc:'<svg t="1557124710652" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17779"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17780"></path>\n</svg>',GroupNone:'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="设计输出" stroke="none" stroke-width="1" fill-opacity="0.25" fill-rule="evenodd">\n    <g id="设计输出-移动端指标详情页-阅读端" transform="translate(-3275.000000, -724.000000)" fill-rule="nonzero">\n        <g id="编组-39" transform="translate(3064.500000, 667.000000)">\n            <g id="编组-36" transform="translate(80.500000, 44.000000)">\n                <g id="不排序" transform="translate(130.000000, 13.000000)">\n                    <path d="M12.0009375,12.40625 C12.0696875,12.40625 12.1259375,12.4625 12.1259375,12.53125 L12.1259375,12.53125 L12.1259375,13.40625 C12.1259375,13.475 12.0696875,13.53125 12.0009375,13.53125 L12.0009375,13.53125 L6.25093747,13.53125 C6.18218747,13.53125 6.12593747,13.475 6.12593747,13.40625 L6.12593747,13.40625 L6.12593747,12.53125 C6.12593747,12.4625 6.18218747,12.40625 6.25093747,12.40625 L6.25093747,12.40625 Z M2.93949997,2.5801875 L2.97437497,2.6109375 L4.72437497,4.828125 C4.78062497,4.89776786 4.74503823,4.99725765 4.66779698,5.02426203 L4.62593747,5.03125 L3.438,5.03089062 L3.43843747,10.9691406 L4.62593747,10.9691406 C4.73062497,10.9691406 4.78999997,11.0910156 4.72437497,11.1722656 L2.97437497,13.3894531 C2.92437497,13.4535156 2.82749997,13.4535156 2.77749997,13.3894531 L1.02749997,11.1722656 C0.961874969,11.0894531 1.02124997,10.9691406 1.12593747,10.9691406 L2.31343747,10.9691406 L2.313,5.03089062 L1.12593747,5.03125 C1.03620533,5.03125 0.979764,4.94285714 1.00679571,4.8654519 L1.02749997,4.828125 L2.77749997,2.6109375 C2.81749997,2.5596875 2.88749997,2.5494375 2.93949997,2.5801875 Z M10.5009375,9.09375 C10.5696875,9.09375 10.6259375,9.15 10.6259375,9.21875 L10.6259375,9.21875 L10.6259375,10.09375 C10.6259375,10.1625 10.5696875,10.21875 10.5009375,10.21875 L10.5009375,10.21875 L6.25093747,10.21875 C6.18218747,10.21875 6.12593747,10.1625 6.12593747,10.09375 L6.12593747,10.09375 L6.12593747,9.21875 C6.12593747,9.15 6.18218747,9.09375 6.25093747,9.09375 L6.25093747,9.09375 Z M14.5009375,5.78125 C14.5696875,5.78125 14.6259375,5.8375 14.6259375,5.90625 L14.6259375,5.90625 L14.6259375,6.78125 C14.6259375,6.85 14.5696875,6.90625 14.5009375,6.90625 L14.5009375,6.90625 L6.25093747,6.90625 C6.18218747,6.90625 6.12593747,6.85 6.12593747,6.78125 L6.12593747,6.78125 L6.12593747,5.90625 C6.12593747,5.8375 6.18218747,5.78125 6.25093747,5.78125 L6.25093747,5.78125 Z M9.00093747,2.46875 C9.06968747,2.46875 9.12593747,2.525 9.12593747,2.59375 L9.12593747,2.59375 L9.12593747,3.46875 C9.12593747,3.5375 9.06968747,3.59375 9.00093747,3.59375 L9.00093747,3.59375 L6.25093747,3.59375 C6.18218747,3.59375 6.12593747,3.5375 6.12593747,3.46875 L6.12593747,3.46875 L6.12593747,2.59375 C6.12593747,2.525 6.18218747,2.46875 6.25093747,2.46875 L6.25093747,2.46875 Z" id="形状结合"></path>\n                </g>\n            </g>\n        </g>\n    </g>q\n</g>\n</svg>',Minus:'<svg t="1557140120188" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="16909" xmlns:xlink="http://www.w3.org/1999/xlink"\nwidth="200" height="200">\n	<defs>\n		<style type="text/css">\n		</style>\n	</defs>\n	<path d="M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"\n	p-id="16910">\n	</path>\n	<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"\n	p-id="16911">\n	</path>\n</svg>',Plus:'<svg t="1557140186692" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="17025" xmlns:xlink="http://www.w3.org/1999/xlink"\nwidth="200" height="200">\n	<defs>\n		<style type="text/css">\n		</style>\n	</defs>\n	<path d="M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"\n	p-id="17026">\n	</path>\n	<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"\n	p-id="17027">\n	</path>\n</svg>',SortDown:'<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    fill-opacity="0.45"\n    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"\n    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>\n</svg>\n',SortUp:'<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    fill-opacity="0.45"\n    d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"\n    p-id="17621"></path>\n</svg>\n',SortDownSelected:'<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"\n    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>\n</svg>\n',SortUpSelected:'<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\np-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n<defs>\n<style type="text/css"></style>\n</defs>\n<path\nd="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"\np-id="17621"></path>\n</svg>\n',InfoCircle:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1590389330617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19656" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="" p-id="19657"></path><path d="M464 336c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48-48 21.5-48 48zM536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-272c0-4.4-3.6-8-8-8z" fill="" p-id="19658"></path></svg>',ExpandColIcon:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="23px" height="12px" viewBox="0 0 23 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>编组 8备份 3</title>\n    <g id="----隐藏列标注！" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="隐藏列标注" transform="translate(-275.000000, -824.000000)">\n            <rect fill="#FFFFFF" x="0" y="0" width="1333" height="1167"></rect>\n            <g id="编组-8备份-3" transform="translate(275.000000, 824.000000)">\n                <rect id="矩形" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="0.5" y="0.5" width="11" height="11"></rect>\n                <rect id="矩形备份-9" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="11.5" y="0.5" width="11" height="11"></rect>\n                <g id="7.Icon/arrow/15.down/fill" transform="translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) " fill="#000000" fill-rule="nonzero" opacity="0.65">\n                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>\n                </g>\n                <g id="7.Icon/arrow/15.down/fill" transform="translate(17.000000, 6.000000) rotate(270.000000) translate(-17.000000, -6.000000) translate(11.000000, 0.000000)" fill="#000000" fill-rule="nonzero" opacity="0.65">\n                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>\n                </g>\n            </g>\n            <line x1="286.5" y1="813" x2="286.5" y2="864.5" id="路径-2备份-3" stroke="#000000" opacity="0.25"></line>\n        </g>\n    </g>\n</svg>',Trend:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1596433821690" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20229" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6c-3.1-3.1-8.2-3.1-11.3 0l-230 229.9L461.4 404c-3.1-3.1-8.2-3.1-11.3 0L266.3 586.7c-3.1 3.1-3.1 8.2 0 11.3l39.5 39.7z" p-id="20230"></path></svg>',DrillDownIcon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1608030723688" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21482" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M547.648 696a32 32 0 0 1 31.488 26.24l0.512 5.76v151.68l145.216-144.512a32 32 0 0 1 40.832-3.648l4.416 3.712a32 32 0 0 1 3.584 40.832l-3.712 4.48-203.072 202.24a32 32 0 0 1-40.768 3.648l-4.416-3.712-202.24-202.24a32 32 0 0 1 40.832-48.96l4.416 3.712 150.912 150.912v-158.144a32 32 0 0 1 32-32z m194.56-529.28l4.928 3.072 233.792 180.224a32 32 0 0 1 1.728 49.28l-4.864 3.52-409.792 245.568a32 32 0 0 1-27.328 2.624l-5.184-2.432-422.4-245.568a32 32 0 0 1-7.552-49.28l4.544-4.032 242.816-180.288a32 32 0 0 1 42.432 47.552l-4.288 3.84-203.84 151.296 364.16 211.648 353.28-211.712-196.608-151.552a32 32 0 0 1-8.896-40l3.136-4.864a32 32 0 0 1 40-8.96zM547.712 28.672a32 32 0 0 1 31.488 26.24l0.512 5.76v396.992a32 32 0 0 1-63.488 5.76l-0.512-5.76V60.736a32 32 0 0 1 32-32z" p-id="21483" fill="currentColor"></path></svg>\n',EyeOutlined:'<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>'}),vA={},vB=function(t,e){vA[c0(t)]=e},vN=function(t){return vA[c0(t)]};aj(vO).forEach(function(t){vB(t,vO[t])});var vD="<svg",vk="data:image/svg+xml",vz={},vP=function(t){function e(e){var n=t.call(this,e)||this;return n.isOnlineLink=function(t){return/^(https?:)?(\/\/)/.test(t)},n.render(),n}return u(e,t),e.prototype.getImage=function(t,e,n){var r=this;return new Promise(function(i,o){var a=vN(t);if(a){var s=new Image;s.onload=function(){vz[e]=s,i(s)},s.onerror=o,a.includes(vk)||r.isOnlineLink(a)?(s.src=a,s.crossOrigin="anonymous"):(n&&(a=(a=a.replace(/fill=[\'\"]#?\w+[\'\"]/g,"")).replace(/fill>/g,">")),a=a.replace(vD,"".concat(vD,' fill="').concat(n,'"')),s.src="".concat(vk,";utf-8,").concat(encodeURIComponent(a)))}})},e.prototype.render=function(){var t=this.cfg,n=t.name,r=t.fill,i=ud(this.cfg),o=new rP({attrs:h(h({},dv(i,"fill")),{type:e.type})});this.iconImageShape=o,this.setImageAttrs({name:n,fill:r})},e.prototype.setImageAttrs=function(t){var e=this,n=t.name,r=t.fill,i=this.iconImageShape;n=n||i.attrs.name,r=r||i.attrs.fill;var o="".concat(n,"-").concat(r),a=vz[o];a?(i.attr("img",a),this.addShape("image",i)):this.getImage(n,o,r).then(function(t){var r,o,a,s=null===(a=null===(o=null===(r=e.getParent())||void 0===r?void 0:r.getMeta)||void 0===o?void 0:o.call(r).spreadsheet)||void 0===a?void 0:a.container;if(e.destroyed||s&&!s.get("refreshElements")){vI.getInstance().logger("GuiIcon ".concat(n," destroyed."));return}i.attr("img",t),e.addShape("image",i)}).catch(function(t){if(t instanceof TypeError){console.warn("GuiIcon ".concat(n," destroyed:"),t);return}console.error("GuiIcon ".concat(n," load failed:"),t)})},e.type="__GUI_ICON__",e}(rB);(CR=C2||(C2={})).TOP="TOP",CR.BOTTOM="BOTTOM",CR.LEFT="LEFT",CR.RIGHT="RIGHT",(CI=C4||(C4={})).SUM="SUM",CI.MIN="MIN",CI.MAX="MAX",CI.AVG="AVG",(CO=C3||(C3={})).Row="row",CO.Col="col",CO.Series="series";var vH=function(){function t(){this.store=new Map}return t.prototype.set=function(t,e){return this.store.set(t,e)},t.prototype.get=function(t,e){var n=this.store.get(t);return null!=n?n:e},t.prototype.clear=function(){this.store.clear()},t.prototype.size=function(){return this.store.size},t}(),vF=function(t){var e,n,r=t.facetCfg,i=t.level,o=t.fields,a=r.colCfg,s=r.spreadsheet,l=r.dataSet.moreThanOneValue(),u=null===(n=null===(e=s.dataCfg.fields)||void 0===e?void 0:e.valueInCols)||void 0===n||n,h=(null==a?void 0:a.hideMeasureColumn)&&u&&!l&&cd(o,r5);return i===o.length-(h?2:1)},vW=function(t,e,n,r){return e.layoutArrange?e.layoutArrange(e.spreadsheet,n,r,t):t},vG=function(t,e,n,r){if((null===(o=null===(i=t.spreadsheet)||void 0===i?void 0:i.facet)||void 0===o?void 0:o.getHiddenColumnsInfo(n))&&t.columns.find(function(t){return t===n.field}))return!1;var i,o,a=!0,s=function(t,n,i){void 0===n&&(n=-1),void 0===i&&(i=-1),-1===n?(e.children.push(t),r.pushNode(t)):(e.children.splice(n,0,t),r.pushNode(t,i))};if(t.layoutHierarchy){var l=t.layoutHierarchy(t.spreadsheet,n);if(l){var u=!!cN(null==l?void 0:l.delete)&&(null==l?void 0:l.delete);a=!u;var h=l.push,c=l.unshift,d=e.children.length,f=r.getNodes().length;cP(c)||(hm(c,function(t){s(t)}),d=e.children.length,f=r.getNodes().length),cP(h)||hm(h,function(t){s(t)}),u||s(n,d,f)}else s(n)}else s(n);return a},vV=function(t,e,n){(null==t?void 0:t.layoutCoordinate)&&((null==e?void 0:e.isLeaf)||(null==n?void 0:n.isLeaf))&&(null==t||t.layoutCoordinate(t.spreadsheet,e,n))},vY=function(t,e){var n=null==t?void 0:t.layoutDataPosition;if(n){var r=e.getCellMeta,i=n(t.spreadsheet,r);return h(h({},e),{getCellMeta:i})}return e},vU=function(t){this.label=t},vj=function(t){var e=t.addTotalMeasureInTotal,n=t.parentNode,r=t.currentField,i=t.fields,o=t.facetCfg,a=t.hierarchy,s=i.indexOf(r),l=o.dataSet,u=o.values,c=o.spreadsheet,d=[],v={},g=c.getTotalsConfig(r),y=n.isGrandTotals?g.totalsGroupDimensions:g.subTotalsGroupDimensions;if(null==y?void 0:y.includes(r)){v=vR(n);var m=l.getDimensionValues(r,v);d.push.apply(d,p([],f((m||[]).map(function(t){return new vT({label:t,isSubTotals:n.isSubTotals,isGrandTotals:n.isGrandTotals,isTotalRoot:!1})})),!1)),cP(d)&&r&&d.push(it)}else if(e&&r===r5)v=vR(n),d.push.apply(d,p([],f(u.map(function(t){return new vU(t)})),!1));else if(vF({facetCfg:o,level:s,fields:i})){n.isLeaf=!0,a.pushIndexNode(n),n.rowIndex=a.getIndexNodes().length-1;return}else{vj(h(h({},t),{currentField:i[s+1]}));return}var C=d.filter(function(t){return!cq(t)});vZ(h(h({},t),{fieldValues:C,level:s,parentNode:n,query:v}))},vX=function(t){var e,n=t.parentNode,r=t.currentField,i=t.fields,o=t.facetCfg,a=i.indexOf(r),s=o.dataSet,l=o.spreadsheet,u=[],c={};c=vR(n,!0);var d=vW(s.getDimensionValues(r,c),o,n,r);u.push.apply(u,p([],f(d||[]),!1)),cP(u)&&r&&(r===r5?u.push.apply(u,p([],f(null===(e=s.fields)||void 0===e?void 0:e.values),!1)):u.push(it)),vM({currentField:r,lastField:i[a-1],isFirstField:0===a,fieldValues:u,spreadsheet:l});var v=u.filter(function(t){return!cq(t)});vZ(h(h({},t),{fieldValues:v,level:a,parentNode:n,query:c}))},vq=function(t){t.parentNode.isTotals?vj(t):vX(t)},vK=function(t,e){return"".concat(t).concat("[&]").concat(e)},vZ=function(t){var e,n,r,i,o,a,s,l,u,c,p=t.currentField,v=t.fields,g=t.fieldValues,y=t.facetCfg,m=t.hierarchy,C=t.parentNode,w=t.level,x=t.query,S=t.addMeasureInTotalQuery,b=t.addTotalMeasureInTotal,_=y.spreadsheet,E=y.collapsedCols;try{for(var L=d(g.entries()),T=L.next();!T.done;T=L.next()){var M=f(T.value,2),R=M[0],I=M[1],O=I instanceof vT,A=I instanceof vU,B=void 0,N=void 0,D=!1,k=!1,z=!1,P=!1,H=p;O?(k=I.isGrandTotals,z=I.isSubTotals,P=I.isTotalRoot,B=vy(I.label),N=P?x:h(h({},x),((r={})[p]=B,r)),S&&(N[r5]=null===(s=null==_?void 0:_.dataSet)||void 0===s?void 0:s.fields.values[0]),D=vF({facetCfg:y,level:w,fields:v})):A?(B=vy(I.label),N=h(h({},x),((i={})[r5]=B,i)),H=r5,k=C.isGrandTotals,z=C.isSubTotals,D=vF({facetCfg:y,level:w,fields:v})):_.isTableMode()?(B=I,H=v[R],N=h(h({},x),((o={})[H]=B,o)),D=!0):(N=(B=I)===it?h({},x):h(h({},x),((a={})[p]=B,a)),D=vF({facetCfg:y,level:w,fields:v}));var F=vK(C.id,B);if(!F)return;var W=!!cN(null==E?void 0:E[F])&&(null==E?void 0:E[F]),G=new vE({id:F,key:H,value:B,level:w,field:H,parent:C,isTotals:O||A,isGrandTotals:k,isSubTotals:z,isTotalMeasure:A,isCollapsed:W,isTotalRoot:P,hierarchy:m,query:N,spreadsheet:_,isLeaf:D||W}),V=vG(y,C,G,m),Y=null===(l=null==_?void 0:_.facet)||void 0===l?void 0:l.getHiddenColumnsInfo(G);Y&&C&&(C.hiddenChildNodeInfo=Y),!(w>m.maxLevel)||k||C.isGrandTotals||C.isSubTotals||G.isSubTotals||(m.sampleNodesForAllLevels.push(G),m.maxLevel=w,m.sampleNodeForLastLevel=Y?(null===(u=null==Y?void 0:Y.displaySiblingNode)||void 0===u?void 0:u.next)||(null===(c=null==Y?void 0:Y.displaySiblingNode)||void 0===c?void 0:c.prev):G),D||W||!V?(G.isLeaf=!0,m.pushIndexNode(G),G.rowIndex=m.getIndexNodes().length-1):vq({addTotalMeasureInTotal:b,addMeasureInTotalQuery:S,parentNode:G,currentField:v[w+1],fields:v,facetCfg:y,hierarchy:m})}}catch(t){e={error:t}}finally{try{T&&!T.done&&(n=L.return)&&n.call(L)}finally{if(e)throw e.error}}},v$=function(t,e,n,r){var i=e.facetCfg,o=e.hierarchy,a=e.parentNode,s=i.dataSet;t.forEach(function(t,l){"string"==typeof t&&(t={key:t});var u=t.key,h=u===r9?vy("序号"):s.getFieldName(u),c=r||a;if(vZ({currentField:u,fields:[u],fieldValues:[h],facetCfg:i,hierarchy:o,parentNode:c,level:n,query:{},addMeasureInTotalQuery:!1,addTotalMeasureInTotal:!1}),t.children&&t.children.length){var d=c.children[l];d.isLeaf=!1,v$(t.children,e,n+1,d)}})},vQ=function(t,e){return e>0&&t<e},vJ=function(t,e,n){return e>0&&t>=n-e},v0=function(t,e,n){return n>0&&t<e+n},v1=function(t,e,n){return n>0&&t>=e+1-n},v2=function(t,e,n,r,i,o){var a=hF(n,function(e,r){var a=t-(cY(o)?0:o)+i.x;return a>=e&&a<n[r+1]},0),s=hF(n,function(e,r){var o=i.width+t+i.x;return o>=e&&o<n[r+1]},a=Math.max(a,0));s=Math.min(-1===s?1/0:s,n.length-2);var l=r.getIndexRange(e+i.y,i.height+e+i.y);return[a,s,l.start,l.end]},v4=function(t,e,n){var r=Math.abs(t/e);return[(r<=.5?0:t)*n.horizontal,(r>2?0:e)*n.vertical]},v3=function(t,e,n){var r,i,o=null==t?void 0:t.getMatrix(),a=null!==(r=null==o?void 0:o[6])&&void 0!==r?r:0,s=null!==(i=null==o?void 0:o[7])&&void 0!==i?i:0;null==t||t.translate(e-a,n-s)},v5=function(t,e){var n,r=null==t?void 0:t.getMatrix(),i=null!==(n=null==r?void 0:r[6])&&void 0!==n?n:0;null==t||t.translate(e-i,0)},v8=function(t,e){var n,r=null==t?void 0:t.getMatrix(),i=null!==(n=null==r?void 0:r[7])&&void 0!==n?n:0;null==t||t.translate(0,e-i)},v6=function(t,e,n,r){var i=e.frozenColCount,o=e.frozenRowCount,a=e.frozenTrailingColCount,s=e.frozenTrailingRowCount,l=t.colIndex,u=t.rowIndex;return v0(u,r.start,o)?CP.ROW:v1(u,r.end,s)?CP.TRAILING_ROW:vQ(l,i)?CP.COL:vJ(l,a,n)?CP.TRAILING_COL:CP.SCROLL},v7=function(t,e,n){for(var r,i=t.frozenColCount,o=t.frozenRowCount,a=t.frozenTrailingColCount,s=t.frozenTrailingRowCount,l=((r={})[CP.TOP]=[],r[CP.BOTTOM]=[],r),u=0;u<i;u++){for(var h=n.start;h<n.start+o;h++)l[CP.TOP].push({x:u,y:h});if(s>0)for(var h=0;h<s;h++){var c=n.end-h;l[CP.BOTTOM].push({x:u,y:c})}}for(var u=0;u<a;u++){for(var d=e-1-u,h=n.start;h<n.start+o;h++)l[CP.TOP].push({x:d,y:h});if(s>0)for(var h=0;h<s;h++){var c=n.end-h;l[CP.BOTTOM].push({x:d,y:c})}}return l},v9=function(t,e,n,r){var i=e.frozenColCount,o=e.frozenRowCount,a=e.frozenTrailingColCount,s=e.frozenTrailingRowCount,l=p([],f(t),!1);vQ(l[0],i)&&(l[0]=i),vJ(l[1],a,n)&&(l[1]=n-a-1),v0(l[2],r.start,o)&&(l[2]=r.start+o),v1(l[3],r.end,s)&&(l[3]=r.end-s);var u=p([],f(l),!1);u[2]=r.start,u[3]=r.start+o-1;var h=p([],f(l),!1);h[0]=0,h[1]=i-1;var c=p([],f(l),!1);c[2]=r.end+1-s,c[3]=r.end;var d=p([],f(l),!1);return d[0]=n-a,d[1]=n-1,{center:l,frozenRow:u,frozenCol:h,frozenTrailingCol:d,frozenTrailingRow:c}},gt=function(t,e){var n=0,r=t.getTotalLength()-1;if(e){var i=e.current,o=void 0===i?1:i,a=e.pageSize;n=Math.max((o-1)*a,0),r=Math.min(o*a-1,t.getTotalLength()-1)}return{start:n,end:r}},ge=function(t,e,n){var r=e,i=n,o=function(t){return t.isLeaf?1:t.children?t.children.reduce(function(t,e){return t+o(e)},0):0};return e&&(r=t.slice(0,e).reduce(function(t,e){return t+o(e)},0)),n&&(i=t.slice(t.length-n).reduce(function(t,e){return t+o(e)},0)),{colCount:r,trailingColCount:i}},gn=function(t,e){return t.reduce(function(t,n){"string"==typeof n&&(n={key:n});var r=h({},n);return r.children?(r.children=gn(r.children,e),t.push(r)):e[r.key]&&t.push(r),t},[])},gr=function(t){return"root"===t.parent.id},gi=function(t){for(;!gr(t);)t=t.parent;return t},go=function(t){var e=[],n=function(t){t.forEach(function(t){"string"!=typeof t&&t.children?n(t.children):e.push(t)})};return n(t),e},ga=function(t){return go(t).map(function(t){return"string"==typeof t?t:t.key})},gs=function(t){var e=t.children[0];return e?e.isLeaf?e:gs(e):t},gl=function(t,e){var n,r=t.pagination,i=t.frozenFirstRow,o=t.hierarchyType,a=t.showSeriesNumber,s=r&&r.pageSize,l=!1,u=null==e?void 0:e[0];!s&&i&&(l=(null===(n=null==u?void 0:u.children)||void 0===n?void 0:n.length)===0,"tree"!==o&&"customTree"!==o||l||(l=!a));var h=l&&!!u;return{frozenRowCount:h?1:0,frozenColCount:0,frozenTrailingColCount:0,frozenTrailingRowCount:0,enableFrozenFirstRow:l,frozenRowHeight:h?u.height:0}},gu=function(t){var e=t.facetCfg,n=e.columns,r=e.spreadsheet.store.get("hiddenColumnsDetail"),i=null==e?void 0:e.showSeriesNumber,o=p([],f(ga(n).filter(function(t){return!r||r.every(function(e){return e.hideColumnNodes.every(function(e){return e.field!==t})})})),!1),a=p([],f(n),!1),s={};i&&(a.unshift({key:r9}),s[r9]=!0),o.reduce(function(t,e){return t[e]=!0,t},s),v$(gn(a,s),t,0,null)},gh=function(t){return Number.parseFloat((oe(t)||0).toPrecision(16))},gc=function(t,e,n){if(void 0===n&&(n=0),!Object.values(t).find(function(t){return t>0}))return t;var r=h({},t);r.frozenColCount>=e&&(r.frozenColCount=e);var i=e-r.frozenColCount;r.frozenTrailingColCount>i&&(r.frozenTrailingColCount=i),r.frozenRowCount>=n&&(r.frozenRowCount=n);var o=n-r.frozenRowCount;return r.frozenTrailingRowCount>o&&(r.frozenTrailingRowCount=o),r};function gd(t,e,n){var r;return null===(r=null==t?void 0:t.addShape)||void 0===r?void 0:r.call(t,"rect",h({zIndex:1,attrs:e},n||{}))}function gf(t,e){var n;return null===(n=null==t?void 0:t.addShape)||void 0===n?void 0:n.call(t,"circle",{attrs:e})}function gp(t,e,n,r,i,o,a,s){var l;return!cP(e)&&t&&hm(e,function(e){t.contain(e)&&t.removeChild(e,!0)}),null===(l=null==t?void 0:t.addShape)||void 0===l?void 0:l.call(t,"text",{attrs:h(h({x:n,y:r,text:i,originalText:s},o),a)})}function gv(t,e,n){var r;return null===(r=null==t?void 0:t.addShape)||void 0===r?void 0:r.call(t,"line",{zIndex:100,attrs:h(h({},e),n)})}function gg(t,e,n){cP(t)||(iq(t)?t:[t]).forEach(function(t){fg(t,"attrs.".concat(e),n)})}function gy(t,e){var n=new vP(e);return null==t||t.add(n),n}function gm(t,e,n,r,i){var o=new vP(h(h({name:r?"Plus":"Minus"},e),{fill:n}));return oa(i)&&o.on("click",i),null==t||t.add(o),o}var gC="s2-offscreen-canvas",gw=function(){var t=document.getElementById(gC);return t||((t=document.createElement("canvas")).id=gC,t.style.display="none",document.body.appendChild(t)),t},gx=function(){var t;null===(t=document.getElementById(gC))||void 0===t||t.remove()},gS=function(t){var e;return null!==(e=null==t?void 0:t.position)&&void 0!==e?e:"right"},gb=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),t=gh(t),e=gh(e);var n=t>=0,r=e>=0&&t<=0,i=n?t:e,o=r?0:i,a=e-t;return function(e){return{zeroScale:r?lT(Math.abs(0-t)/a,0,1):n?0:1,scale:lT((e-o)/a,-1,1)}}},g_=function(t,e){var n,r,i,o=t.data,a=t.encode,s=t.type,l=e.getMeta(),u=l.x,h=l.y,c=l.height,d=l.width,f=e.getStyle(CG.DATA_CELL),p=f.cell,v=f.miniChart,g=[],y=hK(o,function(t){return g.push(null==t?void 0:t[a.y]),{x:t[a.x],y:t[a.y]}}),m=c7(g),C=ds(g),w=m-C,x=u+p.padding.left,S=u+d-p.padding.right,b=h+p.padding.top,_=h+c-p.padding.bottom,E=_-b,L=s===Ck.Bar?(S-x-(g.length-1)*(null===(n=null==v?void 0:v.bar)||void 0===n?void 0:n.intervalPadding))/g.length+(null===(r=null==v?void 0:v.bar)||void 0===r?void 0:r.intervalPadding):(S-x)/(g.length-1),T=[];return{points:hK(y,function(t,e){var n,r;if(r=0!==w?_-((null==t?void 0:t.y)-C)/w*E:C>0?b:_,s===Ck.Bar){var i=void 0,o=void 0;C<0&&m>0&&0!==w?(o=Math.abs(r-(i=_-(0-C)/w*E)),(null==t?void 0:t.y)<0&&(r=i)):(i=C<0?b:_,o=0===(w=c7([Math.abs(m),Math.abs(C)]))?E:Math.abs((null==t?void 0:t.y)-0)/w*E,r=i);var a=L-(null===(n=null==v?void 0:v.bar)||void 0===n?void 0:n.intervalPadding);T.push([a,o])}return[x+e*L,r]}),box:T}},gE=function(t,e){if(!(cP(null==t?void 0:t.data)||cP(e))){var n,r,i=e.getStyle(CG.DATA_CELL).miniChart.line,o=i.point,a=i.linkLine,s=g_(t,e).points;n={points:s,stroke:a.fill,lineWidth:a.size,opacity:a.opacity},null===(r=null==e?void 0:e.addShape)||void 0===r||r.call(e,"polyline",{attrs:n});for(var l=0;l<s.length;l++)gf(e,{x:s[l][0],y:s[l][1],r:o.size,fill:o.fill,fillOpacity:o.opacity})}},gL=function(t,e){if(!(cP(null==t?void 0:t.data)||cP(e)))for(var n=e.getStyle(CG.DATA_CELL).miniChart.bar,r=g_(t,e),i=r.points,o=r.box,a=0;a<i.length;a++)gd(e,{x:i[a][0],y:i[a][1],width:o[a][0],height:o[a][1],fill:n.fill,fillOpacity:n.opacity})},gT=function(t,e,n){var r=Number(e)-Number(t);return Number.isNaN(r)||0>Number(t)?n.bad:r<=.1?n.good:r>.1&&r<=.2?n.satisfactory:n.bad},gM=function(t,e){void 0===e&&(e={min:0,max:0});var n,r,i=Number(t);if(Number.isNaN(i))return t;var o=null!==(n=null==e?void 0:e.min)&&void 0!==n?n:e,a=null!==(r=null==e?void 0:e.max)&&void 0!==r?r:e;return new Intl.NumberFormat("en-US",{minimumFractionDigits:o,maximumFractionDigits:a,useGrouping:!1,style:"percent"}).format(i)},gR=function(t){if(!cP(t)){var e,n,r,i,o,a,s=t.getCellArea(),l=s.x,u=s.y,h=s.height,c=s.width,d=t.findFieldCondition(null===(e=t.cellConditions)||void 0===e?void 0:e.interval);if(d&&d.mapping){var f=t.mappingValue(d);if(!f)return;var p=f.isCompare?f:t.valueRangeByField,v=gh(p.minValue),g=gh(p.maxValue),y=cY(null==f?void 0:f.fieldValue)?gh(t.getMeta().fieldValue):gh(null==f?void 0:f.fieldValue);if(y<v||y>g)return;var m=null!==(r=null===(n=t.getStyle().miniChart.interval)||void 0===n?void 0:n.height)&&void 0!==r?r:t.getStyle().cell.miniBarChartHeight,C=null!==(o=null===(i=t.getStyle().miniChart.interval)||void 0===i?void 0:i.fill)&&void 0!==o?o:t.getStyle().cell.miniBarChartFillColor,w=gb(v,g)(y);return gd(t,{x:l+c*w.zeroScale,y:u+h/2-m/2,width:c*w.scale,height:m,fill:null!==(a=f.fill)&&void 0!==a?a:C})}}},gI=function(t,e){var n,r=e.getStyle(CG.DATA_CELL),i=e.getMeta(),o=i.x,a=i.y,s=i.height,l=i.width,u=i.spreadsheet;if(cP(t)){gp(e,[],o+l-r.cell.padding.right,a+s/2,gq(e,u.options.placeholder),r.text);return}var h=r.miniChart.bullet,c=h.progressBar,d=h.comparativeMeasure,f=h.rangeColors,p=h.backgroundColor,v=t.measure,g=t.target,y=Math.max(Number(v),0),m=Math.max(Number(g),0),C=gM(v,2),w=(null==c?void 0:c.widthPercent)>1?(null==c?void 0:c.widthPercent)/100:null==c?void 0:c.widthPercent,x=r.cell.padding,S=l-x.left-x.right,b=w*S,_=S-b,E=o+l-x.right-b,L=a+s/2-c.height/2;gd(e,{x:E,y:L,width:b,height:c.height,fill:p,textBaseline:r.text.textBaseline});var T=sd(e.getMeta(),"spreadsheet.options.bullet.getRangeColor"),M=Math.max(Math.min(b*y,b),0);gd(e,{x:E,y:L+(c.height-c.innerHeight)/2,width:M,height:c.innerHeight,fill:null!==(n=null==T?void 0:T(y,m))&&void 0!==n?n:gT(y,m,f)});var R=E+b*m;gv(e,{x1:R,y1:a+(s-d.height)/2,x2:R,y2:a+(s-d.height)/2+d.height},{stroke:(null==d?void 0:d.fill)||(null==d?void 0:d.color),lineWidth:d.width,opacity:null==d?void 0:d.opacity}),gp(e,[],E-x.right,a+s/2,gG({measureTextWidth:u.measureTextWidth,text:C,maxWidth:_-x.right,fontParam:r.text}),r.text)},gO=function(t,e){switch(null==e?void 0:e.type){case Ck.Line:gE(e,t);break;case Ck.Bar:gL(e,t);break;default:gI(e,t)}},gA=function(t,e){var n=t.x,r=t.y,i=t.width,o=t.height,a=i-(null==e?void 0:e.left)-(null==e?void 0:e.right),s=o-(null==e?void 0:e.top)-(null==e?void 0:e.bottom);return{x:n+(null==e?void 0:e.left),y:r+(null==e?void 0:e.top),width:a,height:s}},gB=function(t){return dr({size:0,position:"right",margin:{left:0,right:0}},t)},gN=function(t,e){return t-(e=gB(e)).size-e.margin.right-e.margin.left},gD=function(t,e,n){var r=t.y,i=t.height;void 0===n&&(n=0);var o=0;switch(e){case"top":o=r;break;case"middle":o=r+i/2-n/2;break;default:o=r+i-n}return o},gk=function(t,e,n,r,i){void 0===n&&(n=0),void 0===i&&(i=1);var o,a,s=t.x,l=t.width,u=e.textAlign,h=e.textBaseline,c=gB(r),d=c.size,f=c.margin,p=c.position,v=i*(d+f.left)+(i?f.right:0);switch(u){case"left":o=s+("left"===p?v:0),a=s+("left"===p?f.left:n+f.left);break;case"center":var g=s+l/2-(v-("left"===p?f.left:f.right)+n)/2;o=g+n/2+("left"===p?v-f.left:0),a=g+("left"===p?0:n+f.left);break;default:o=s+l-("right"===p?v:0),a=s+l-("right"===p?v-f.left:n+v-f.left)}return{text:{x:o,y:gD(t,h,0)},icon:{x:a,y:gD(t,h,d)}}},gz=function(t,e,n){var r,i,o=e.start+e.width,a=t.start+t.width;if(e.start<=t.start&&o>=a)r=t.start+t.width/2,i=t.width;else if(e.start<=t.start){var s=e.width-(t.start-e.start);r=s<n?o-n/2:o-s/2,i=s}else if(o>=a){var s=e.width-(o-a);r=s<n?e.start+n/2:e.start+s/2,i=s}else r=e.start+e.width/2,i=e.width;return{start:r,width:i}},gP=function(t,e,n){var r,i,o,a,s,l=e.x,u=e.y,h=e.width,c=e.height,d=n.horizontalBorderWidth,f=n.horizontalBorderColorOpacity,p=n.horizontalBorderColor,v=n.verticalBorderWidth,g=n.verticalBorderColor,y=n.verticalBorderColorOpacity,m=n.borderDash;if(t===C2.TOP||t===C2.BOTTOM){var C=u;i=C=t===C2.TOP?u+v/2:u+c-v/2,a=C,r=l,o=l+h,s={lineWidth:d,stroke:p,strokeOpacity:f,lineDash:m}}if(t===C2.LEFT||t===C2.RIGHT){var w=l;r=w=t===C2.LEFT?l+d/2:l+h-d/2,o=w,i=u,a=u+c,s={lineWidth:v,stroke:g,strokeOpacity:y,lineDash:m}}return{position:{x1:r,x2:o,y1:i,y2:a},style:s}},gH=function(t,e,n){void 0===n&&(n={left:0,right:0});var r=h({},t);return"left"===e?(r.start+=n.left,r.width-=n.left):"right"===e&&(r.width-=n.right),r},gF=function(t,e,n,r){var i=e+n,o=t.start;if("center"===r)return o-n/2;var a=t.width-i>0?t.width/2:i/2;return"left"===r?o-a:o+a-n};sr(function(t,e){if(void 0===t&&(t=""),!e)return 0;var n=gw().getContext("2d"),r=e.fontSize,i=e.fontFamily,o=e.fontWeight,a=e.fontStyle,s=e.fontVariant;return n.font=[a,s,o,"".concat(r,"px"),i].join(" ").trim(),n.measureText("".concat(t)).width},function(t,e){return p([t],f(ch(e)),!1).join("")});var gW=function(t,e,n,r){var i,o,a,s=t("...",r);i=cl(e)?e:ss(e);var l=n,u=[];if(t(e,r)<=n)return e;for(var h=!0;h;){if((a=t(o=i.substr(0,16),r))+s>l&&a>l){h=!1;break}if(u.push(o),l-=a,!(i=i.substr(16)))return u.join("")}for(var c=!0;c;){if((a=t(o=i.substr(0,1),r))+s>l){c=!1;break}if(u.push(o),l-=a,!(i=i.substr(1)))return u.join("")}return"".concat(u.join(""),"...")},gG=function(t){var e=t.measureTextWidth,n=t.text,r=t.maxWidth,i=t.fontParam,o=t.priorityParam,a=t.placeholder,s={},l=cY(n)||""===n||n===it?null!=a?a:"-":"".concat(n),u=o;if(i&&iq(i)?u=i:s=i||{},!u||!u.length)return gW(e,l,r,s);var h=[],c=[l];u.forEach(function(t){c.forEach(function(e,n){var r=-1,i=e.match(new RegExp(t));if(i){var o=i[0];r=i.index,h.push(o);var a=r+o.length,s=[e.slice(0,r),e.slice(a)].filter(function(t){return!!t});c.splice.apply(c,p([n,1],f(s),!1))}})}),c=h.concat(c);var d=l,v=e("...",s),g=r;return c.forEach(function(t){if(g<=0){var n=d.indexOf(t),r=d.slice(n-3,n);if(r&&"..."!==r){var i=e(t,s);d=d.replace(t,i>v?"...":t)}else d=d.replace(t,"");g-=v}else{var i=e(t,s);if(g<i&&i>v){var o=gW(e,t,g,s);d=d.replace(t,o),g=0}else g-=i}}),d},gV=function(t){return cW(t)?t>=0:!!t&&!f1(t).startsWith("-")},gY=function(t,e){return cY(t)||""===t||0===Number(String(t).replace(/[^0-9.]+/g,""))||t===e},gU=function(t,e,n,r){void 0===r&&(r="left");var i=e.right,o=e.left,a=n||0;return"left"===r?t+i/2+a:"right"===r?t-i/2-a:t+o/2+a},gj=function(t){var e,n,r=t.getMeta().isTotals,i=null===(e=t.isMeasureField)||void 0===e?void 0:e.call(t),o=t.getStyle(t.cellType||CG.DATA_CELL);return n=i?o.measureText:r?o.bolderText:o.text,{cellStyle:o,textStyle:n}},gX=function(t){var e=t.rowIndex,n=t.colIndex,r=t.meta,i=t.data,o=t.textStyle,a=t.textCondition,s=o.fill;return(null==a?void 0:a.mapping)&&(s=null==a?void 0:a.mapping(i,{rowIndex:e,colIndex:n,meta:r}).fill),h(h({},o),{fill:s})},gq=function(t,e){return oa(e)?e(t):e},gK=function(t,e,n){for(var r,i,o,a=t.x,s=t.y,l=t.width,u=t.height/fy(e),h=[],c=0,d=hK(n,function(t){return t>1?t/100:t}),f=0;f<fy(e);f++){i=s+u*f;var p=[];r=a,c=0;for(var v=0;v<fy(e[f]);v++)o=cP(d)?l/fy(e[0]):l*d[v],r=gU(a,{left:0,right:0},c,"left"),c+=o,p.push({x:r,y:i,width:o,height:u});h.push(p)}return h},gZ=function(t,e,n){void 0===n&&(n=!0);var r,i,o,a,s,l=t.getContentArea(),u=l.x,c=l.y,d=l.height,f=l.width,p=e||t.getMeta().fieldValue,v=p.values,g=t.getMeta().spreadsheet,y=g.options,m=g.measureTextWidth,C=y.style.cellCfg.valuesCfg,w=null===(i=null===(r=null==y?void 0:y.conditions)||void 0===r?void 0:r.text)||void 0===i?void 0:i[0],x=null===(a=null===(o=null==y?void 0:y.conditions)||void 0===o?void 0:o.icon)||void 0===a?void 0:a[0];if(!iq(v)){gO(t,v);return}var S=null==C?void 0:C.widthPercent,b=0;if(null==p?void 0:p.label){var _=t.getStyle(CG.DATA_CELL).bolderText,E=gp(t,[],u,c+(b=d/(v.length+1))/2,gG({measureTextWidth:m,text:p.label,maxWidth:f,fontParam:_}),_);t.addTextShape(E)}for(var L=gj(t),T=L.cellStyle,M=L.textStyle,R=null==T?void 0:T.icon,I=x&&x.mapping&&{size:null==R?void 0:R.size,margin:null==R?void 0:R.margin,position:null==x?void 0:x.position},O=gK({x:u,y:c+b,height:d-b,width:f},v,S),A=0;A<v.length;A++)for(var B=ud(v[A]),N=0;N<B.length;N++){s=B[N];var D=n?gX({rowIndex:A,colIndex:N,meta:null==t?void 0:t.getMeta(),data:s,textStyle:M,textCondition:w}):M,k=(null==t?void 0:t.getMeta().spreadsheet.options).placeholder,z=gq(null==t?void 0:t.getMeta(),k),P=gG({measureTextWidth:m,text:s,maxWidth:gN(O[A][N].width,R),fontParam:D,placeholder:z}),H=m(P,M),F=gk(O[A][N],M,H,I,x?1:0),E=gp(t,[],F.text.x,F.text.y,P,D,{},null==s?void 0:s.toString());if(t.addTextShape(E),x&&n){var W=null==x?void 0:x.mapping(s,{rowIndex:A,colIndex:N,meta:null==t?void 0:t.getMeta()});if(W){var G=gy(t,h(h({},F.icon),{name:W.icon,width:null==R?void 0:R.size,height:null==R?void 0:R.size,fill:W.fill}));t.addConditionIconShape(G)}}}},g$=function(t,e){return void 0===e&&(e=1),(null==t?void 0:t.width)*e},gQ=function(t){try{return JSON.parse(t)}catch(t){return null}},gJ=function(t,e){var n;return null===(n=null==t?void 0:t.filter(function(t){return!(null==e?void 0:e.includes(t))}))||void 0===n?void 0:n.concat(e)};function g0(t,e,n){return void 0===t&&(t={}),void 0===e&&(e=[]),void 0===n&&(n=r6),e.reduce(function(e,r){var i=t[r];return r in t?e.push(String(i)):e.push(n),e},[])}function g1(t,e){var n=e.filter(function(e){return e in t});return cP(n)&&n.push(ie),n}function g2(t,e,n){void 0===t&&(t={}),void 0===e&&(e=[]);var r=[];function i(t,e,n){return e.reduce(function(e,r){var i=t[r];return r in t?e.push(String(i)):r===r5&&n?e.push(n):e.push(r6),e},[])}return n?n.forEach(function(n){r.push(i(t,e,n))}):r.push(i(t,e)),r}function g4(t,e){return t.concat(e).filter(function(t){return t!==r5}).join("[&]")}function g3(t){var e=t.rowDimensionValues,n=t.colDimensionValues,r=t.isFirstCreate,i=t.onFirstCreate,o=t.rowFields,a=t.colFields,s=t.rowPivotMeta,l=t.colPivotMeta,u=t.prefix,h=function(t,e,n,o){for(var a=n,s=[],l=0;l<e.length;l++){var u=e[l];if(r&&a&&!(null==a?void 0:a.has(u))){var h=e.slice(0,l+1).map(function(t){return String(t)}),c=h.join("[&]"),d=void 0;d=u===r6?0:a.has(r6)?a.size:a.size+1,a.set(u,{id:c,dimensions:h,value:u,level:d,children:new Map}),null==i||i({dimension:null==t?void 0:t[l],dimensionPath:c,careRepeated:o})}var f=null==a?void 0:a.get(u);if(s.push(u===r7?u:null==f?void 0:f.level),f){var p=null==t?void 0:t[l+1];r&&f.childField!==p&&(f.childField=p),a=null==f?void 0:f.children}}return s},c=h(o,e,s,!1),d=h(a,n,l,!0);return p(p([void 0===u?"":u],f(c),!1),f(d),!1)}function g5(t,e){if(t&&e){var n=e.split("[&]"),r=hd(n),i=t;hm(n,function(t,e){var n=i.get(t);return n?(t===r?(n.children=new Map,n.childField=void 0):i=n.children,!0):0===e&&t===ig})}}function g8(t,e){return{isRowTotal:t.isGrandTotals,isRowSubTotal:t.isSubTotals,isColTotal:e.isGrandTotals,isColSubTotal:e.isSubTotals}}function g6(t){for(var e=t.pivotMeta,n=t.dimensionValues,r=t.fieldIdx,i=t.queryType,o=t.fields,a=t.sortedDimensionValues,s=[{children:e}],l=0;l<=r;l++)!function(t){var e=n[t],r=o[t];s=e===r7?function(t,e){var n,r=hZ(t,function(t){return p([],f(t.children.values()),!1).filter(function(t){return t.value!==ie&&(i===C1.All||t.value!==r6)})});if(t.length>1){var o=null!==(n=a[e])&&void 0!==n?n:[];return fx(r,function(t){return cp(o,t.id)})}return r}(s,r):s.map(function(t){return t.children.get(e)}).filter(Boolean)}(l);return s}function g7(t){var e=t.dimensionValues,n=t.pivotMeta,r=t.fields,i=t.sortedDimensionValues,o=t.queryType,a=void 0===o?C1.All:o;return!function(t){for(var e=null,n=0;n<t.length;n++)if(t[n]===r7)e=n;else if(!cU(e)&&e<n)return!0;return!1}(e)?[e]:g6({pivotMeta:n,dimensionValues:e,fieldIdx:e.length-1,queryType:a,fields:r,sortedDimensionValues:i}).map(function(t){return t.dimensions})}function g9(t,e){return!!t&&!!e&&String(t).toLowerCase()===String(e).toLowerCase()}var yt=function(t,e){var n=t.getColumnNodes().find(function(t){return t.id===e});return t.isPivotMode()?null==n?void 0:n.value:null==n?void 0:n.field},ye=function(t,e){var n=e.getColumnNodes().find(function(e){return e.colIndex===t});return yt(e,n.id)},yn=function(t,e){var n=t.rowIndex,r=t.colIndex;return[e.getRowNodes().find(function(t){return t.rowIndex===n}),e.getColumnNodes().find(function(t){return t.colIndex===r})]},yr=function(t,e){var n=e.getColumnNodes().find(function(e){return e.colIndex===t}),r=yt(e,n.id);return e.options.interaction.copyWithFormat?e.dataSet.getFieldFormatter(r):function(t){return t}},yi=function(t){var e,n,r,i;return(null===(i=null===(r=null===(n=t.options)||void 0===n?void 0:n.style)||void 0===r?void 0:r.colCfg)||void 0===i?void 0:i.hideMeasureColumn)&&t.isValueInCols()?((e={})[r5]=t.dataCfg.fields.values[0],e):{}},yo=function(t,e,n){if(n.isPivotMode()){var r,i,o=f(yn(t,n),2),a=o[0],s=o[1],l=yi(n),u=n.dataSet.getCellData({query:h(h(h({},a.query),s.query),l),rowNode:a,isTotals:a.isTotals||a.isTotalMeasure||s.isTotals||s.isTotalMeasure,totalStatus:g8(a,s)});return null!==(r=null==u?void 0:u[r3])&&void 0!==r?r:""}var c=ye(t.colIndex,n);return null===(i=e[t.rowIndex])||void 0===i?void 0:i[c]},ya=function(t,e,n){return yr(t.colIndex,n)(yo(t,e,n))},ys=function(t){return/\n/.test(t)?'"'+t.replace(/\r\n?/g,"\n")+'"':t},yl=function(t,e){var n=t.split("[&]");return e?n.slice(n.length-e):(n.shift(),n)},yu=function(t,e){return hK(t,function(t){return e.dataSet.getFieldName(t)})};(CA=C8||(C8={})).PLAIN="text/plain",CA.HTML="text/html";var yh=((C5={})[C8.PLAIN]=function(t){return{type:C8.PLAIN,content:hK(t,function(t){return t.join("	")}).join("\r\n")}},C5[C8.HTML]=function(t){return{type:C8.HTML,content:'<meta charset="utf-8"><table><tbody>'.concat(t.map(function(t){return"<".concat("tr",">").concat(t.map(function(t){return"<".concat("td",">").concat(hR(t),"</").concat("td",">")}).join(""),"</").concat("tr",">")}).join(""),"</tbody></table>")}},C5),yc=function(t,e,n){var r,i,o,a,s,l,u=null!==(i=null===(r=t[0])||void 0===r?void 0:r.length)&&void 0!==i?i:0,h=null!==(o=null==e?void 0:e.length)&&void 0!==o?o:0,c=null!==(s=null===(a=n[0])||void 0===a?void 0:a.length)&&void 0!==s?s:0,d=null!==(l=n.length)&&void 0!==l?l:0,f=u+c,p=h+d,v=Array.from(Array(p),function(){return Array(f)});return v=hK(v,function(r,i){return hK(r,function(r,o){return o>=0&&o<u&&i>=0&&i<h?"":o>=u&&o<=f&&i>=0&&i<h?e[i][o-u]:o>=0&&o<u&&i>=h&&i<p?t[i-h][o]:o>=u&&o<=f&&i>=h&&i<p?n[i-h][o-u]:void 0})}),[yh[C8.PLAIN](v),yh[C8.HTML](v)]},yd=function(t,e,n){var r=e.map(function(e){return e.map(function(e){return e?ys(ya(e,t,n)):""})});return[yh[C8.PLAIN](r),yh[C8.HTML](r)]},yf=function(t){if(!(null==t?void 0:t.length))return[];var e=f([{row:1/0,col:1/0},{row:0,col:0}],2),n=e[0],r=e[1];t.forEach(function(t){var e=t.rowIndex,i=t.colIndex;n.col=Math.min(i,n.col),n.row=Math.min(e,n.row),r.col=Math.max(i,r.col),r.row=Math.max(e,r.row)});var i=f([r.row-n.row+1,r.col-n.col+1],2),o=i[0],a=i[1],s=Array(o).fill("").map(function(){return Array(a).fill("")});return t.forEach(function(t){var e=t.rowIndex,r=t.colIndex,i=f([e-n.row,r-n.col],2),o=i[0],a=i[1];s[o][a]=t}),s},yp=function(t,e){var n=t.dataSet.getDisplayDataSet(),r=e.length?e.map(function(e){return{field:yt(t,e.id),formatter:yr(e.colIndex,t)}}):t.dataCfg.fields.columns.map(function(e){return t.getColumnNodes().find(function(t){return t.field===e})}).map(function(e){return{field:yt(t,e.id),formatter:yr(e.colIndex,t)}}),i=n.map(function(t){return r.map(function(e){var n=e.field;return ys((0,e.formatter)(t[n]))})});return[yh[C8.PLAIN](i),yh[C8.HTML](i)]},yv=function(t,e,n){return hK(t,function(t){return e.map(function(e){var r,i=n.dataSet.getCellData({query:h(h({},t.query),e.query),rowNode:t,isTotals:t.isTotals||t.isTotalMeasure||e.isTotals||e.isTotalMeasure,totalStatus:g8(t,e)});return yr(e.colIndex,n)(null!==(r=null==i?void 0:i[r3])&&void 0!==r?r:"")})})},yg=function(t,e,n){var r=yv(e,n,t);return[yh[C8.PLAIN](r),yh[C8.HTML](r)]};function yy(t,e,n){return t.options.interaction.copyWithHeader?yc(hK(e,function(t){return yl(t.id)}),pg.apply(void 0,p([],f(hK(n,function(t){return yl(t.id)})),!1)),yv(e,n,t)):yg(t,e,n)}var ym=function(t,e){var n=t.getRowNodes().filter(function(e){return e.isLeaf||t.isHierarchyTreeType()}),r=t.getColumnNodes().filter(function(t){return t.isLeaf});return yy(t,n,e.length?e.reduce(function(t,e){return t.push.apply(t,p([],f(r.filter(function(t){return t.id.startsWith(e.id)})),!1)),t},[]):r)},yC=function(t,e,n){return e.isPivotMode()?ym(e,n):yp(e,n)},yw=function(t,e){var n=t.dataSet.getDisplayDataSet().filter(function(t,n){return e.map(function(t){return t.rowIndex}).includes(n)}).map(function(e){var n=t.getColumnNodes().reduce(function(t,e,n){return t[e.field]=n,t},{});return Object.keys(e).sort(function(t,e){return n[t]-n[e]}).map(function(e){return t.getColumnNodes().find(function(t){return t.field===e})}).filter(Boolean).map(function(n){return ys(yr(n.colIndex,t)(e[n.field]))})});return[yh[C8.PLAIN](n),yh[C8.HTML](n)]},yx=function(t,e){var n=t.getRowNodes().filter(function(e){return e.isLeaf||t.isHierarchyTreeType()}),r=t.getColumnNodes().filter(function(t){return t.isLeaf});return yy(t,e.reduce(function(t,e){return t.push.apply(t,p([],f(n.filter(function(t){return t.id.startsWith(e.id)})),!1)),t},[]),r)},yS=function(t,e,n){var r=pg.apply(void 0,p([],f(hK(t[0],function(t){var e,r;return yu(yl(null!==(r=null===(e=t.id.split("-"))||void 0===e?void 0:e[1])&&void 0!==r?r:""),n)})),!1));return yc(hK(t,function(t){var e,r;return yu(yl(null!==(r=null===(e=t[0].id.split("-"))||void 0===e?void 0:e[0])&&void 0!==r?r:""),n)}),r,hK(t,function(t){return hK(t,function(t){return ya(t,e,n)})}))},yb=function(t,e){var n=t.options.placeholder,r=t.dataCfg.fields,i=r.rows,o=r.columns,a=r.values,s=gq(t,n),l=t.getColumnLeafNodes(),u=[];if(t.isTableMode()){var h=hz(l,function(t){return t.field!==r9});u=hK(e,function(t){return hK(h,function(e){var n;return null!==(n=null==t?void 0:t[e.field])&&void 0!==n?n:s})})}else if(t.isPivotMode()){var c=p(p(p([],f(i),!1),f(o),!1),f(a),!1);u=fu((iq(e)?hJ(e):[e]).filter(function(t){return p(p([],f(i),!1),f(o),!1).every(function(e){return!cY(t[e])})}),function(t,e){return p(p([],f(t),!1),[hK(c,function(t){var n;return null!==(n=e[t])&&void 0!==n?n:s})],!1)},[])}return[yh[C8.PLAIN](u),yh[C8.HTML](u)]},y_=function(t){var e,n,r,i,o,a,s,l,u,h,c,d=t.interaction,v=d.getState().cells||[],g=null!==(h=d.getInteractedCells())&&void 0!==h?h:[];return(c=!cP(g)&&hN(g,function(t){return t.cellType===CG.ROW_CELL||t.cellType===CG.COL_CELL})?(e=g,o=null!==(r=c7(Array.from(i=(n=new Set,hm(e,function(t){var e=t.getMeta().level;n.has(e)||n.add(e)}),n))))&&void 0!==r?r:0,a=hz(e,function(t){var e=t.getMeta(),n=e.level===o,r=e.isTotals&&cP(e.children);return n||r}),s=e[0].cellType===CG.COL_CELL,l=hK(a,function(t){var e=t.getMeta(),n=e.id,r=e.isTotals,a=e.spreadsheet;return yu(yl(r?function(t,e){for(var n=t,r={level:e},i=n.label;n.level>=0;){for(var o=r.level-n.level;o>0;)i="".concat(n.label).concat("[&]").concat(i),o--;r=n,n=n.parent}return i}(e,o):n,i.size),a)}),s&&(l=pg.apply(void 0,p([],f(l),!1))),[yh[C8.PLAIN](l),yh[C8.HTML](l)]):function(t,e){var n,r,i=e.filter(function(t){return t.type===CG.COL_CELL}),o=e.filter(function(t){return t.type===CG.ROW_CELL}),a=t.dataSet.getDisplayDataSet();if(t.interaction.getCurrentStateName()===CW.ALL_SELECTED)r=yC(a,t,[]);else if(i.length)r=yC(a,t,i);else if(o.length)r=t.isPivotMode()?yx(t,o):yw(t,o);else{if(!e.length)return;var s=yf(e);if(t.interaction.getSelectedCellHighlight().currentRow){var l=dx(e,"rowIndex","asc").map(function(e){return t.dataSet.getRowData(e)});r=yb(t,l)}else r=(null===(n=t.options.interaction)||void 0===n?void 0:n.copyWithHeader)?yS(s,a,t):yd(a,s,t)}return r}(t,v))&&yT(c),(void 0===(u=C8.PLAIN)&&(u=C8.PLAIN),Array.isArray(u))?[].concat(c).filter(function(t){return u.includes(t.type)}).map(function(t){return t.content}):[].concat(c).filter(function(t){return(null==t?void 0:t.type)===u}).map(function(t){return t.content})[0]||""};function yE(t){return t?"string"==typeof t?'"'.concat(t.replace(/"/g,'""'),'"'):'"'.concat(t,'"'):t}var yL=function(t){return new Promise(function(e,n){r=Array.isArray(t)?sd(t.filter(function(t){return t.type===C8.PLAIN}),"[0].content",""):t.content||"";var r,i=document.createElement("textarea");i.value=r,document.body.appendChild(i),i.focus({preventScroll:!0}),i.select();var o=document.execCommand("copy");document.body.removeChild(i),o?e():n()})},yT=function(t,e){var n;return(void 0===e&&(e=!1),n="string"==typeof t?{content:t,type:C8.PLAIN}:t,navigator.clipboard&&window.ClipboardItem&&!e)?navigator.clipboard.write([new ClipboardItem([].concat(n).reduce(function(t,e){var n,r=e.type,i=e.content.replace(/\x00/g,"");return h(h({},t),((n={})[r]=new Blob([i],{type:r}),n))},{}))]).catch(function(){return yL(n)}):yL(n)},yM=function(t,e){try{var n=document.createElement("a");n.download="".concat(e,".csv");var r=new Blob(["\uFEFF".concat(t)],{type:"text/csv;charset=utf-8"});n.href=URL.createObjectURL(r),n.click(),URL.revokeObjectURL(n.href)}catch(t){console.error(t)}},yR=function(t){var e=(null==t?void 0:t.label)?[null==t?void 0:t.label]:[],n=null==t?void 0:t.values;return cP(n)||hm(n,function(t){e.push(t.join(" "))}),e.join("$")},yI=function(t,e){var n,r,i,o;return e?null===(o=null==t?void 0:t.values)||void 0===o?void 0:o[0]:null!==(r=null===(n=null==t?void 0:t.originalValues)||void 0===n?void 0:n[0])&&void 0!==r?r:null===(i=null==t?void 0:t.values)||void 0===i?void 0:i[0]},yO=function(t,e,n){var r,i,o,a=t.dataSet.getDisplayDataSet(),s=ga((null===(o=t.dataCfg)||void 0===o?void 0:o.fields).columns||[]),l=[],u=function(r,i){var o=[];o=n?s.map(function(e){return yE(t.dataSet.getFieldFormatter(e)(i[e],i))}):s.map(function(t){return yE(i[t])}),t.options.showSeriesNumber&&(o=[yE(r+1)].concat(o)),l.push(o.join(e))};try{for(var h=d(a.entries()),c=h.next();!c.done;c=h.next()){var p=f(c.value,2),v=p[0],g=p[1];u(v,g)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return l},yA=function(t,e,n){if(!t)return"";var r=t.fieldValue,i=t.valueField,o=t.data;return i5(r)?yR(r):n?e.dataSet.getFieldFormatter(i)(r,o):"".concat(r)},yB=function(t,e,n,r){var i=[];if(t){var o=t.fieldValue,a=t.valueField,s=t.data;if(i5(o))return yI(o,r);if(cY(o)&&n.length>1)return i.push.apply(i,p([],f(n),!1)),i;if(r){var l=e.dataSet.getFieldFormatter(a);i.push(l(o,s))}else i.push(o)}else i.push.apply(i,p([],f(n),!1));return i.join("    ")},yN=function(t){var e=gQ(t);return iq(e)?e:t},yD=function(t,e,n){var r=yN(e.label),i=iq(r)?r.length:1,o=n.options.placeholder,a=oa(o)?o(t):o;return Array(i).fill(a)},yk=function(t){var e,n,r,i,o=null===(r=null===(n=null===(e=t.spreadsheet)||void 0===e?void 0:e.dataSet)||void 0===n?void 0:n.getFieldFormatter)||void 0===r?void 0:r.call(n,t.field);return null!==(i=null==o?void 0:o(t.label))&&void 0!==i?i:t.label},yz=function(t){var e=[],n=function(t){if(t.id!==ig){var r=yk(t);if(e.unshift(r),null==t?void 0:t.parent)return n(t.parent)}};return n(t),e},yP=function(t){var e,n;return"object"==typeof t?{isFormatHeader:null!==(e=t.isFormatHeader)&&void 0!==e&&e,isFormatData:null!==(n=t.isFormatData)&&void 0!==n&&n}:{isFormatHeader:null!=t&&t,isFormatData:null!=t&&t}},yH=function(t,e,n){var r,i,o,a,s,l=yP(n),u=l.isFormatHeader,h=l.isFormatData,c=null===(s=null==t?void 0:t.facet)||void 0===s?void 0:s.layoutResult,v=c.rowsHierarchy,g=c.rowLeafNodes,y=c.colLeafNodes,m=c.getCellMeta,C=v.maxLevel,w=t.dataCfg.fields.valueInCols,x=v.sampleNodesForAllLevels.map(function(e){return t.dataSet.getFieldName(e.key)}),S=g.reduce(function(t,e){var n,r=(null!==(n=e.level)&&void 0!==n?n:0)+1;return r>t?r:t},0),b=[],_=0;if(t.isPivotMode()){var E=g.filter(function(t){return 0!==t.height});try{for(var L=d(E),T=L.next();!T.done;T=L.next()){var M=T.value,R=[];u?R=yz(M):(M.label=f1(null==M?void 0:M.label),R=M.id.replace(iy,"").split("[&]"));var I=C+1-R.length;I>0&&R.push.apply(R,p([],f(Array(I)),!1));var O=t.dataSet.getFieldName(hd(R));R[R.length-1]=O;try{for(var A=(o=void 0,d(y)),B=A.next();!B.done;B=A.next()){var N=B.value;if(w){var D=m(M.rowIndex,N.colIndex);R.push(yA(D,t,h))}else{var D=m(M.rowIndex,N.colIndex),k=yD(D,N,t),z=yB(D,t,k,h);iq(z)?R=R.concat.apply(R,p([],f(z),!1)):R.push(z)}}}catch(t){o={error:t}}finally{try{B&&!B.done&&(a=A.return)&&a.call(A)}finally{if(o)throw o.error}}_=c7([R.length,_]);var P=R.map(function(t){return yE(t)}).join(e);b.push(P)}}catch(t){r={error:t}}finally{try{T&&!T.done&&(i=L.return)&&i.call(L)}finally{if(r)throw r.error}}}else b=yO(t,e,h);var H=[];if(cP(y)&&!t.isPivotMode())H=[x];else{var F=0,W=ud(y).map(function(e){for(var n=e,r=[];void 0!==n.level;){var i=yN(n.label);iq(i)?F=c7([F,fy(i)]):i=u&&t.isPivotMode()?yk(n):i,r.push(i),n=n.parent}return r});F>1&&(W=W.map(function(t){return t.map(function(e){return iq(e)?e:iq(t[0])?p([e],f(Array(t[0].length-1)),!1):e})}));for(var G=c7(W.map(function(t){return t.length})),V=[],Y=function(e){var n=W.map(function(t){return t.length<G?p(p([],f(Array(G-t.length)),!1),f(t),!1):t}).map(function(t){return t[e]}).map(function(e){return t.dataSet.getFieldName(e)});V.push(sm(n))},U=G-1;U>=0;U-=1)Y(U);H=V.map(function(e,n){if(t.isPivotMode()){var r,i,o=t.facet.cornerHeader.cfg,a=o.columns,s=o.rows,l=o.data.filter(function(t){return t.cornerType===C3.Col});if(n<V.length-1)return p(p(p([],f(Array(C).fill("")),!1),[(null===(i=l.find(function(t){return t.field===a[n]}))||void 0===i?void 0:i.label)||""],!1),f(e),!1);var u=s.slice(0,S);return u.length<S&&u.unshift.apply(u,p([],f(Array(S-u.length).fill("")),!1)),p(p([],f(u.map(function(e){return t.dataSet.getFieldName(e)||""})),!1),f(e),!1)}return n<V.length?(r=Array(S).fill("")).concat.apply(r,p([],f(e),!1)):x.concat.apply(x,p([],f(e),!1))})}return[H.map(function(t){var n=_-t.length;return n>0&&t.unshift.apply(t,p([],f(Array(n)),!1)),t.map(function(t){return yE(t)}).join(e)}).join("\r\n")].concat(b).join("\r\n")},yF=function(t){var e,n,r,i,o,a,s=null===(r=null===(n=null===(e=t.target)||void 0===e?void 0:e.attrs)||void 0===n?void 0:n.appendInfo)||void 0===r?void 0:r.cellData,l=null===(o=(i=t.target).get)||void 0===o?void 0:o.call(i,"parent"),u=(null===(a=null==l?void 0:l.getMeta)||void 0===a?void 0:a.call(l))||s;return{target:l,viewMeta:u,event:t}},yW=function(t,e,n){var r,i=t.split("[&]");if(n)r=[t];else{r=[vK(i[0],i[1])];for(var o=2;o<i.length;o+=1)r.push(vK(r[o-2],i[o]))}return hz(e,function(t){var e;return r.includes(null===(e=t.getMeta())||void 0===e?void 0:e.id)})},yG=function(t,e,n){t&&hm(yW(t,e),function(t){t.updateByState(n)})},yV=function(t){function e(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=t.call(this,{})||this;return o.textShapes=[],o.actualTextWidth=0,o.conditionIconShapes=[],o.stateShapes=new Map,o.meta=e,o.spreadsheet=n,o.theme=n.theme,o.conditions=o.spreadsheet.options.conditions,o.handleRestOptions.apply(o,p([],f(r),!1)),o.shouldInit()&&o.initCell(),o}return u(e,t),e.prototype.getMeta=function(){return this.meta},e.prototype.setMeta=function(t){this.meta=t},e.prototype.getIconStyle=function(){return this.theme[this.cellType].icon},e.prototype.getTextAndIconPosition=function(t){void 0===t&&(t=1);var e=this.getTextStyle(),n=this.getIconStyle();return gk(this.getContentArea(),e,this.actualTextWidth,n,t)},e.prototype.getActualText=function(){return this.actualText},e.prototype.isTextOverflowing=function(){var t=this.getActualText();return t?cd(t,"..."):t!==this.getFieldValue()},e.prototype.getFieldValue=function(){var t=this.getFormattedFieldValue().formattedValue;return t===it?this.getActualText():t},e.prototype.handleRestOptions=function(){},e.prototype.shouldInit=function(){var t=this.meta,e=t.width,n=t.height;return e>0&&n>0},e.prototype.getStyle=function(t){return sd(this.theme,t||this.cellType)},e.prototype.getResizeAreaStyle=function(){return this.getStyle("resizeArea")},e.prototype.shouldDrawResizeAreaByType=function(t,e){var n=this.spreadsheet.options.interaction.resize;return cN(n)?n:oa(n.visible)?n.visible(e):n[t]},e.prototype.getCellArea=function(){var t=this.meta;return{x:t.x,y:t.y,height:t.height,width:t.width}},e.prototype.getContentArea=function(){var t=this.getStyle()||this.theme.dataCell,e=(null==t?void 0:t.cell).padding;return gA(this.getCellArea(),e)},e.prototype.getIconPosition=function(t){return void 0===t&&(t=1),this.getTextAndIconPosition(t).icon},e.prototype.drawTextShape=function(){var t=this.getFormattedFieldValue().formattedValue,e=this.getMaxTextWidth(),n=this.getTextStyle(),r=this.spreadsheet,i=r.options.placeholder,o=r.measureTextWidth,a=gG({measureTextWidth:o,text:t,maxWidth:e,fontParam:n,placeholder:gq(this,i)});this.actualText=a,this.actualTextWidth=o(a,n);var s=this.getTextPosition();this.textShape=gp(this,[this.textShape],s.x,s.y,a,n),this.textShapes.push(this.textShape)},e.prototype.drawLinkFieldShape=function(t,e){if(t){if(!vS(this.spreadsheet.options.style.device)){var n=this.getTextStyle(),r=this.getTextPosition().x;"center"===n.textAlign?r-=this.actualTextWidth/2:"right"===n.textAlign&&(r-=this.actualTextWidth);var i=this.textShape.getBBox().maxY;this.linkFieldShape=gv(this,{x1:r,y1:i+1,x2:r+this.actualTextWidth,y2:i+1},{stroke:e,lineWidth:1})}this.textShape.attr({fill:e,cursor:"pointer",appendInfo:{isLinkFieldText:!0,cellData:this.meta}})}},e.prototype.getLinkFieldStyle=function(){return this.getTextStyle().linkTextFill},e.prototype.drawLinkField=function(t){var e,n=this.spreadsheet.options.interaction.linkFields,r=this.getLinkFieldStyle(),i="function"==typeof(e=void 0===n?[]:n)?e(t):e.some(function(e){return e===t.key||e===t.id||e===t.valueField});this.drawLinkFieldShape(i,r)},e.prototype.updateByState=function(t,e){var n=this;this.spreadsheet.interaction.setInteractedCells(e),hm(sd(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(t)),function(t,e){aj(dm(iT,function(t){return cd(t,e)})).forEach(function(r){var i=n.stateShapes.has(r),o=i?n.stateShapes.get(r):n[r],a=iq(o)?o:[o];i&&a.forEach(function(t){t.set("visible",!0)}),"interactiveBorderShape"===r&&"borderWidth"===e&&cW(t)&&hm(n.getInteractiveBorderShapeStyle(t),function(t,e){gg(a,e,t)}),gg(a,iL[e],t)})})},e.prototype.getInteractiveBorderShapeStyle=function(t){var e=this.getCellArea(),n=e.x,r=e.y,i=e.height,o=e.width,a=this.theme.dataCell.cell,s=a.horizontalBorderWidth,l=a.verticalBorderWidth;return{x:n+l/2+t/2,y:r+s/2+t/2,width:o-l-t,height:i-s-t}},e.prototype.hideInteractionShape=function(){this.stateShapes.forEach(function(t){gg(t,iL.backgroundOpacity,0),gg(t,iL.backgroundColor,"transparent"),gg(t,iL.borderOpacity,0),gg(t,iL.borderWidth,1),gg(t,iL.borderColor,"transparent")})},e.prototype.clearUnselectedState=function(){gg(this.backgroundShape,iL.backgroundOpacity,1),gg(this.textShapes,iL.textOpacity,1),gg(this.linkFieldShape,iL.opacity,1)},e.prototype.getTextShape=function(){return this.textShape},e.prototype.getTextShapes=function(){return this.textShapes||[this.textShape]},e.prototype.addTextShape=function(t){t&&this.textShapes.push(t)},e.prototype.getConditionIconShape=function(){return this.conditionIconShape},e.prototype.getConditionIconShapes=function(){return this.conditionIconShapes||[this.conditionIconShape]},e.prototype.addConditionIconShape=function(t){t&&this.conditionIconShapes.push(t)},e.prototype.resetTextAndConditionIconShapes=function(){this.textShapes=[],this.conditionIconShapes=[]},Object.defineProperty(e.prototype,"cellConditions",{get:function(){return this.conditions},enumerable:!1,configurable:!0}),e.prototype.drawConditionIconShapes=function(){var t,e=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.icon);if(e&&e.mapping){var n=this.mappingValue(e),r=this.getIconPosition(),i=this.theme.dataCell.icon.size;cP(null==n?void 0:n.icon)||(this.conditionIconShape=gy(this,h(h({},r),{name:n.icon,width:i,height:i,fill:n.fill})),this.addConditionIconShape(this.conditionIconShape))}},e.prototype.getTextConditionFill=function(t){var e,n,r=t.fill,i=this.findFieldCondition(null===(e=this.conditions)||void 0===e?void 0:e.text);return(null==i?void 0:i.mapping)&&(r=(null===(n=this.mappingValue(i))||void 0===n?void 0:n.fill)||t.fill),r},e.prototype.getCrossBackgroundColor=function(t){var e=this.getStyle().cell,n=e.crossBackgroundColor,r=e.backgroundColorOpacity;return n&&t%2==0?{backgroundColorOpacity:r,backgroundColor:n}:{backgroundColorOpacity:r,backgroundColor:this.getStyle().cell.backgroundColor}},e}(rB),yY=function(t,e){return e?e(t[r5],t[r3]):t[r3]},yU=function(t,e){var n=e.getMeta().id;return t.some(function(t){return uR(t.id,n)})},yj=function(t,e){return"".concat(t).concat("-").concat(e)},yX=function(t){var e=t.interaction.getSelectedCellHighlight(),n=e.currentRow,r=e.currentCol,i=e.rowHeader,o=e.colHeader;return n||r||i||o},yq=function(t){return t.type===CG.DATA_CELL},yK=function(t,e){hm(t,function(t){yq(t)&&t.rowIndex===e.getMeta().rowIndex&&e.updateByState(CW.SELECTED)})},yZ=function(t,e){hm(t,function(t){yq(t)&&t.colIndex===e.getMeta().colIndex&&e.updateByState(CW.SELECTED)})},y$=function(t,e){hm(t,function(t){yq(t)&&t.rowIndex===e.getMeta().rowIndex&&t.colIndex===e.getMeta().colIndex&&e.updateByState(CW.SELECTED)})},yQ=function(t,e,n){var r=n.interaction.getSelectedCellHighlight(),i=r.rowHeader,o=r.colHeader,a=r.currentRow,s=r.currentCol,l=e.cellType===CG.ROW_CELL,u=n.isTableMode()&&n.options.showSeriesNumber&&i&&l;(a||u)&&yK(t,e),s&&yZ(t,e),(i||o)&&y$(t,e)},yJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return CG.DATA_CELL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueRangeByField",{get:function(){return this.spreadsheet.dataSet.getValueRangeByField(this.meta.valueField)},enumerable:!1,configurable:!0}),e.prototype.handleByStateName=function(t,e){yU(t,this)&&this.updateByState(e)},e.prototype.handleSearchResult=function(t){yU(t,this)&&(hW(t,function(t){return null==t?void 0:t.isTarget}).id===this.getMeta().id?this.updateByState(CW.HIGHLIGHT):this.updateByState(CW.SEARCH_RESULT))},e.prototype.handleSelect=function(t){var e;switch(null===(e=null==t?void 0:t[0])||void 0===e?void 0:e.type){case CG.COL_CELL:this.changeRowColSelectState("colIndex");break;case CG.ROW_CELL:this.changeRowColSelectState("rowIndex");break;case CG.DATA_CELL:yX(this.spreadsheet)?yQ(t,this,this.spreadsheet):yU(t,this)?this.updateByState(CW.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight&&this.updateByState(CW.UNSELECTED)}},e.prototype.handleHover=function(t){var e=hX(t);if(e.type!==CG.DATA_CELL){this.hideInteractionShape();return}var n=this.spreadsheet.interaction.getHoverHighlight(),r=n.currentRow,i=n.currentCol;if(r||i){var o=this.meta.colIndex,a=this.meta.rowIndex;i&&o===(null==e?void 0:e.colIndex)||r&&a===(null==e?void 0:e.rowIndex)?this.updateByState(CW.HOVER):this.hideInteractionShape()}var s=this.getMeta(),l=s.id,u=s.rowIndex,h=s.colIndex;uR(e.id,l)&&uR(e.rowIndex,u)&&uR(e.colIndex,h)&&this.updateByState(CW.HOVER_FOCUS)},e.prototype.update=function(){var t=this.spreadsheet.interaction.getCurrentStateName(),e=this.spreadsheet.interaction.getCells();if(t===CW.ALL_SELECTED){this.updateByState(CW.SELECTED);return}if(!cP(e)&&t)switch(t){case CW.SELECTED:this.handleSelect(e);break;case CW.HOVER_FOCUS:case CW.HOVER:this.handleHover(e);break;case CW.SEARCH_RESULT:this.handleSearchResult(e);break;default:this.handleByStateName(e,t)}},e.prototype.setMeta=function(e){t.prototype.setMeta.call(this,e),this.initCell()},e.prototype.drawTextShape=function(){t.prototype.drawTextShape.call(this),this.drawLinkField(this.meta)},e.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.shouldHideRowSubtotalData()||(this.drawConditionIntervalShape(),this.drawTextShape(),this.drawConditionIconShapes()),this.drawInteractiveBorderShape(),this.meta.isFrozenCorner&&this.drawBorderShape(),this.update()},e.prototype.getDefaultTextFill=function(t){var e=t.fill,n=this.getBackgroundColor(),r=n.backgroundColor,i=n.intelligentReverseTextColor;return va(r)&&t.fill===iS&&i&&(e=ib),e},e.prototype.getTextStyle=function(){var t=this.meta.isTotals?this.theme.dataCell.bolderText:this.theme.dataCell.text,e=this.getTextConditionFill(h(h({},t),{fill:this.getDefaultTextFill(t)}));return h(h({},t),{fill:e})},e.prototype.getIconStyle=function(){var t,e=this.theme.dataCell.icon,n=e.size,r=e.margin,i=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.icon);return i&&i.mapping&&{size:n,margin:r,position:gS(i)}},e.prototype.drawConditionIntervalShape=function(){this.conditionIntervalShape=gR(this)},e.prototype.shouldHideRowSubtotalData=function(){var t,e=this.meta,n=e.rowId,r=e.rowIndex,i=this.spreadsheet.store.get("drillDownIdPathMap");if(null==i?void 0:i.has(n))return!1;var o=(null!==(t=this.spreadsheet.options.totals)&&void 0!==t?t:{}).row,a=this.spreadsheet.facet.layoutResult.rowLeafNodes[r],s=!(null==a?void 0:a.isGrandTotals)&&(null==a?void 0:a.isTotals);return"tree"===this.spreadsheet.options.hierarchyType&&!(void 0===o?{}:o).showSubTotals&&s},e.prototype.getFormattedFieldValue=function(){if(this.shouldHideRowSubtotalData())return{value:null,formattedValue:"-"};var t=this.meta,e=t.rowId,n=t.valueField,r=t.fieldValue,i=t.data,o=this.spreadsheet.dataSet.getFieldMeta(e)?e:n,a=this.spreadsheet.dataSet.getFieldFormatter(o)(r,i,this.meta);return{value:r,formattedValue:a}},e.prototype.getMaxTextWidth=function(){return gN(this.getContentArea().width,this.getIconStyle())},e.prototype.getTextPosition=function(){return this.getTextAndIconPosition().text},e.prototype.getBackgroundColor=function(){var t,e=this.getCrossBackgroundColor(this.meta.rowIndex),n=e.backgroundColor,r=e.backgroundColorOpacity;if(this.shouldHideRowSubtotalData())return{backgroundColor:n,backgroundColorOpacity:r};var i=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.background),o=!1;if(i&&i.mapping){var a=this.mappingValue(i);a&&(n=a.fill,o=a.intelligentReverseTextColor)}return{backgroundColor:n,backgroundColorOpacity:r,intelligentReverseTextColor:o}},e.prototype.drawBackgroundShape=function(){var t=this.getBackgroundColor(),e=t.backgroundColor,n=t.backgroundColorOpacity;this.backgroundShape=gd(this,h(h({},this.getCellArea()),{fill:e,fillOpacity:n}))},e.prototype.drawInteractiveBorderShape=function(){var t=this.getCellArea(),e=t.x,n=t.y,r=t.height,i=t.width;this.stateShapes.set("interactiveBorderShape",gd(this,{x:e+1,y:n+1,width:i-2,height:r-2},{capture:!1,visible:!1}))},e.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",gd(this,h({},this.getCellArea()),{visible:!1}))},e.prototype.changeRowColSelectState=function(t){var e=this.spreadsheet.interaction,n=sd(this.meta,t),r=e.getState(),i=r.nodes,o=void 0===i?[]:i,a=r.cells;(this.spreadsheet.isTableMode()&&o.length?o[0].hierarchy.getLeaves().some(function(t,e){return!!o.some(function(e){return e===t})&&e===n}):p(p([],f(o),!1),f(void 0===a?[]:a),!1).some(function(e){return sd(e,t)===n}))?this.updateByState(CW.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight?this.updateByState(CW.UNSELECTED):this.hideInteractionShape()},e.prototype.drawBorderShape=function(){var t=this;[C2.BOTTOM,C2.RIGHT].forEach(function(e){var n=gP(e,t.getCellArea(),t.getStyle().cell);gv(t,n.position,n.style)})},e.prototype.findFieldCondition=function(t){var e=this;return hj(t,function(t){return t.field instanceof RegExp?t.field.test(e.meta.valueField):t.field===e.meta.valueField})},e.prototype.mappingValue=function(t){var e=this.meta.fieldValue,n=this.spreadsheet.isTableMode()?this.spreadsheet.dataSet.getCellData({query:{rowIndex:this.meta.rowIndex}}):this.meta.data;return null==t?void 0:t.mapping(e,n)},e.prototype.updateByState=function(e){if(t.prototype.updateByState.call(this,e,this),e===CW.UNSELECTED){var n=sd(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(e));n&&this.toggleConditionIntervalShapeOpacity(n.opacity)}},e.prototype.clearUnselectedState=function(){t.prototype.clearUnselectedState.call(this),this.toggleConditionIntervalShapeOpacity(1)},e.prototype.toggleConditionIntervalShapeOpacity=function(t){gg(this.conditionIntervalShape,iL.backgroundOpacity,t),gg(this.conditionIconShapes,iL.opacity,t)},e.prototype.drawLeftBorder=function(){var t=gP(C2.LEFT,this.getCellArea(),this.getStyle().cell);gv(this,t.position,t.style)},e}(yV),y0=function(t){function e(e,n,r){return t.call(this,r,e,n)||this}return u(e,t),e.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=f(t,1)[0];this.cells=n},Object.defineProperty(e.prototype,"cellType",{get:function(){return CG.MERGED_CELL},enumerable:!1,configurable:!0}),e.prototype.update=function(){},e.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.conditions=this.spreadsheet.options.conditions,this.drawBackgroundShape(),this.drawTextShape()},e.prototype.drawBackgroundShape=function(){var t,e,n=y3(this.cells),r=this.theme.dataCell.cell;this.backgroundShape=(t={points:n,stroke:r.horizontalBorderColor,fill:r.backgroundColor,lineHeight:r.horizontalBorderWidth},null===(e=null==this?void 0:this.addShape)||void 0===e?void 0:e.call(this,"polygon",{attrs:t}))},e.prototype.drawTextShape=function(){cP(this.meta)||(i5(this.meta.fieldValue)?gZ(this):t.prototype.drawTextShape.call(this))},e}(yJ),y1=function(t,e,n,r){var i=[t,e],o=[t+n,e],a=[t+n,e+r],s=[t,e+r];return[[i,o],[o,a],[a,s],[s,i]]},y2=function(t){var e=[];return hm(t,function(n){var r=[n[1],n[0]];JSON.stringify(t).includes(JSON.stringify(r))||e.push(n)}),e},y4=function(t,e){return hW(e,function(e){return uR(e[0],t[1])})},y3=function(t){var e=[];t.forEach(function(t){var n=t.getMeta(),r=n.x,i=n.y,o=n.width,a=n.height;e=e.concat(y1(r,i,o,a))}),e=y2(e);for(var n=[],r=e[0],i=r,o=[];!uR(r,o);)n=n.concat(i),i=o=y4(i,e);return n},y5=function(t,e){var n,r=[];return hm(t,function(t){var i,o,a,s=null===(o=null===(i=null==e?void 0:e.facet)||void 0===i?void 0:i.layoutResult)||void 0===o?void 0:o.getCellMeta(t.rowIndex,t.colIndex);if(s){var l=null===(a=null==e?void 0:e.facet)||void 0===a?void 0:a.cfg.dataCell(s);n=(null==t?void 0:t.showText)?s:n,r.push(l)}}),{cells:r,cellsMeta:n}},y8=function(t,e){var n,r=[],i=[];return hm(t,function(t){var o=hW(e,function(e){var n,r=null===(n=null==e?void 0:e.getMeta)||void 0===n?void 0:n.call(e);if((null==r?void 0:r.colIndex)===(null==t?void 0:t.colIndex)&&(null==r?void 0:r.rowIndex)===(null==t?void 0:t.rowIndex))return e});o?(r.push(o),n=(null==t?void 0:t.showText)?null==o?void 0:o.getMeta():n):i.push(t)}),{cells:r,invisibleCellInfo:i,cellsMeta:n}},y6=function(t,e,n){void 0===n&&(n=[]);var r,i=y8(n,t),o=i.cellsMeta,a=i.cells,s=i.invisibleCellInfo,l=o,u=a;if((null==s?void 0:s.length)>0&&s.length<n.length){var h=y5(s,e),c=h.cells,d=h.cellsMeta;l=l||d,u=a.concat(c)}return cP(a)||l||(l=null===(r=u[0])||void 0===r?void 0:r.getMeta()),{cells:u,viewMeta:l}},y7=function(t){var e=t.interaction.getActiveCells(),n=[];return hm(e,function(t,e){var r=t.getMeta();n.push(h(h({},0===e?{showText:!0}:{}),{colIndex:null==r?void 0:r.colIndex,rowIndex:null==r?void 0:r.rowIndex}))}),n},y9=function(t,e,n){return t.options.mergedCell?t.options.mergedCell(t,e,n):new y0(t,e,n)},mt=function(t,e,n){var r,i=e||y7(t);if((null==i?void 0:i.length)<=1){console.error("then merged cells must be more than one");return}var o=y6(t.interaction.getPanelGroupAllDataCells(),t,i),a=o.cells,s=o.viewMeta;if(!cP(a)){var l=(null===(r=t.options)||void 0===r?void 0:r.mergedCellsInfo)||[];l.push(i),t.setOptions({mergedCellsInfo:l}),t.panelScrollGroup.addMergeCell(y9(t,a,n?void 0:s))}},me=function(t,e){var n=hK(t.cells,function(t){return{colIndex:t.getMeta().colIndex,rowIndex:t.getMeta().rowIndex}});return hz(e,function(t){return!uR(t.map(function(t){return t.showText?{colIndex:t.colIndex,rowIndex:t.rowIndex}:t}),n)})},mn=function(t,e){if(!e||e.cellType!==CG.MERGED_CELL){console.error("unmergeCell: the ".concat(e," is not a MergedCell"));return}var n,r,i,o=me(e,null===(n=t.options)||void 0===n?void 0:n.mergedCellsInfo);(null==o?void 0:o.length)!==(null===(i=null===(r=t.options)||void 0===r?void 0:r.mergedCellsInfo)||void 0===i?void 0:i.length)&&(t.setOptions({mergedCellsInfo:o}),e.remove(!0))},mr=function(t,e){return hp(t,e,function(t,e){return uR(t.viewMeta.id,e.viewMeta.id)})},mi=function(t,e){var n,r=null===(n=t.options)||void 0===n?void 0:n.mergedCellsInfo;if(!cP(r)){var i=t.interaction.getPanelGroupAllDataCells();if(!cP(i)){var o=[];r.forEach(function(e){var n=y6(i,t,e);n.cells.length>0&&o.push(n)});var a=e.getChildren(),s=hK(a,function(t){return{cells:t.cells,viewMeta:t.getMeta()}}),l=mr(s,o),u=mr(o,s);hm(l,function(t){var e=hW(a,function(e){return uR(e.getMeta().id,t.viewMeta.id)});null==e||e.remove(!0)}),hm(u,function(n){var r=n.cells,i=n.viewMeta;e.add(y9(t,r,i))})}}},mo=function(t){return t.includes("[&]")?"id":"field"},ma=function(t,e){void 0===e&&(e=[]);var n=t.getInitColumnLeafNodes();return up(e.map(function(t){var e=mo(t);return n.find(function(n){return n[e]===t})}))},ms=function(t,e){if(void 0===e&&(e=[]),cP(e))return{prev:null,next:null};var n=t.getInitColumnLeafNodes(),r=ma(t,e).map(function(t){return null==t?void 0:t.colIndex}),i=Math.max.apply(Math,p([],f(r),!1)),o=Math.min.apply(Math,p([],f(r),!1)),a=n.find(function(t){return t.colIndex===i+1});return{prev:n.find(function(t){return t.colIndex===o-1})||null,next:a||null}},ml=function(t,e){if(cP(e))return[];var n=Number.NEGATIVE_INFINITY;return t.reduce(function(t,r,i){return e.includes(r)&&(i===n+1?hd(t).push(r):t.push([r]),n=i),t},[])},mu=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=function(e,n){void 0===e&&(e=[]),void 0===n&&(n=[]),t.setOptions({interaction:{hiddenColumnFields:e}}),t.interaction.reset(),t.store.set("hiddenColumnsDetail",n),t.render(!1,{reBuildHiddenColumnsDetail:!1})};if(cP(e)&&n){r();return}var i=t.store.get("hiddenColumnsDetail",[]),o=t.options.interaction.hiddenColumnFields;if(!uR(e,o)||n){var a=pn(p(p([],f(e),!1),f(o),!1)),s=ma(t,a).every(function(t,e,n){var r=n[e+1];return!r||1===Math.abs(t.colIndex-r.colIndex)}),l=ms(t,s?a:e),u={hideColumnNodes:ma(t,e),displaySiblingNode:l},h=p(p([],f(i),!1),[u],!1);t.emit(CD.LAYOUT_COLS_HIDDEN,u,h),r(a,h)}},mh=function(t){var e=t.dataCfg.fields.columns;return t.isTableMode()?void 0===e?[]:e:t.getInitColumnLeafNodes().map(function(t){return t.id})},mc=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1),cP(e)&&n&&mu(t,e,!0),ml(ga(mh(t)),e).forEach(function(e){mu(t,e,n)})},md=function(t,e){var n=t.getColumnLeafNodes(),r=t.getInitColumnLeafNodes(),i=mo(e);return sd(hd(n),i)===e&&sd(hd(r),i)!==e},mf=function(t){var e=(null==t?void 0:t.next)||(null==t?void 0:t.prev);return null==e?void 0:e.id},mp=function(t,e){return mf(t)===e},mv=function(t){var e=t.type,n=t.id,r=t.theme,i=t.width,o=t.height,a=c(t,["type","id","theme","width","height"]),s=e===CZ.Horizontal?r.size:null,l=e===CZ.Vertical?r.size:null;return{fill:r.background,fillOpacity:r.backgroundOpacity,cursor:"".concat(e,"-resize"),width:s,height:l,appendInfo:h(h({},a),{isResizeArea:!0,type:e,id:n,width:i,height:o,size:r.size})}},mg=function(t,e){if(t.foregroundGroup)return t.foregroundGroup.findById(e)||t.foregroundGroup.addGroup({id:e,zIndex:5})},my=function(t,e,n){var r=null!=n?n:{},i=r.scrollX,o=void 0===i?0:i,a=r.scrollY,s=void 0===a?0:a,l=!(t.x-o>e.x+e.width||t.x+t.width-o<e.x),u=!(t.y-s>e.y+e.height||t.y+t.height-s<e.y);return l&&u},mm=function(t,e,n){if(!t)return!1;var r=t.iconNames,i=t.displayCondition,o=t.belongsCell;return!cP(r)&&o===n&&(!i||r.some(function(t){return i(e,t)}))},mC=function(t,e,n){var r=hW(t,function(t){return mm(t,e,n)});if(r){var i=r.iconNames;return r.displayCondition&&(i=i.filter(function(t){return r.displayCondition(e,t)})),h(h({},r),{iconNames:i})}},mw=function(t,e){var n=t.label;return uR(t.field,r5)?{formattedValue:e||n,value:n}:{formattedValue:n,value:n}},mx=function(t){return"ASC"===fQ(t)},mS=function(t){return"DESC"===fQ(t)},mb=function(t){return!cG(Number(t))},m_=function(t,e,n){var r=mx(e)?1:-1,i=["-",void 0];return null==t?void 0:t.sort(function(t,e){var o=t,a=e;if(n){if(o=t[n],a=e[n],mb(o)&&mb(a))return(Number(o)-Number(a))*r;if(o&&(null==i?void 0:i.includes(null==o?void 0:o.toString())))return-r;if(Number(o)&&(null==i?void 0:i.includes(null==a?void 0:a.toString())))return r}return cY(o)||cY(a)?o?r:-r:o.toString().localeCompare(a.toString(),"zh")*r})},mE=function(t,e,n){return n?gJ(e,pn(t)):p([],f(new Set(p(p([],f(t),!1),f(e),!1))),!1)},mL=function(t){var e,n=t.sortByValues,r=t.originValues,i=r.filter(function(t){return n.find(function(e){return hS(t,e)})}).map(function(t){var e=t.split("[&]");return e.length>1?[e.slice(0,e.length-1).join("[&]"),e[e.length-1]]:e}),o=Array.from(new Set(i.map(function(t){return t[0]})));i.sort(function(t,e){var r=t.slice(0,t.length-1),i=e.slice(0,e.length-1);return r.join()!==i.join()?o.indexOf(r[0])-o.indexOf(i[0]):n.indexOf(t[t.length-1])-n.indexOf(e[e.length-1])});var a=i.map(function(t){return t.join("[&]")});return r.sort(function(t,n){e&&(t=e(t),n=e(n));var r=a.indexOf(t),i=a.indexOf(n);return -1===r&&-1===i?0:-1===r?1:-1===i?-1:r-i})},mT=function(t){var e=t.originValues,n=t.measureValues,r=t.sortParam,i=t.dataSet,o=r.sortFunc,a=r.sortFieldId,s=r.sortMethod,l=o(h({data:n},r));return(null==l?void 0:l.length)?(i.fields.rows.indexOf(a)>0||i.fields.columns.indexOf(a)>0)&&!cd(l[0],"[&]")?mL({sortByValues:l,originValues:e}):mE(l,e,mx(s)):e},mM=function(t){var e,n=t.sortParam,r=t.measureValues,i=t.originValues,o=t.dataSet,a=n.sortByMeasure,s=n.query,l=n.sortFieldId,u=n.sortMethod,h=o.fields,c=h.rows,d=h.columns,f=c.includes(l);if(a){var p,v,g,y=m_(r,u,a===r6?s[r5]:a);g=(p=f?c:ga(d)).slice(0,p.indexOf(l)+1),e=null===(v=y.map(function(t){return g.map(function(e){return t[e]}).join("".concat("[&]"))}))||void 0===v?void 0:v.filter(function(t){return t})}else e=hK(m_(r,u));return mE(e,i,mx(u))},mR=function(t){var e=t.sortParam,n=t.originValues,r=t.measureValues,i=t.dataSet,o=e.sortFunc,a=e.sortMethod,s=e.sortBy,l=n,u={originValues:n,measureValues:r,sortParam:e,dataSet:i};return o?l=mT(u):s?l=mL({sortByValues:s,originValues:n}):(mx(a)||mS(a))&&(l=mM(u)),l},mI=function(t,e,n){var r,i={};if(cd(t,"[&]"))for(var o=fT(t,"[&]"),a=(null===(r=null==e?void 0:e.rows)||void 0===r?void 0:r.includes(n))?e.rows:ga(e.columns),s=0;s<=cp(a,n);s++)i[a[s]]=o[s];else i[n]=t;return i},mO=function(t){return t.filter(function(t){return t!==r5})},mA=function(t){var e=t.dataSet,n=t.sortParam,r=t.originValues,i=e.fields,o=n.sortByMeasure,a=n.query,s=n.sortFieldId;if(o!==r6)return e.getMultiData(a,{queryType:C1.DetailOnly});var l=e.getMultiData(a,{queryType:C1.All}),u=ga(i.columns),c=cd(i.rows,s),d=mO(c?i.rows:u),f=mO(c?u:i.rows),p=d[d.indexOf(s)+1],v=aj(a),g=f.filter(function(t){return!v.includes(t)}),y=l.filter(function(t){var e=new Set(Object.keys(t[r8]));return!(!e.has(s)||e.has(p))&&g.every(function(t){return!e.has(t)})});return cP(y)?up(hK(r,function(t){var n=mI(t,i,s);return e.getTotalValue(h(h({},a),n))})):y},mB=function(t){var e,n=t.dataSet,r=t.sortParam,i=t.originValues;return e=t.isSortByMeasure?mA(t):i,mR({sortParam:r,originValues:i,measureValues:e,dataSet:n})},mN=function(t,e){if(null==t?void 0:t.sortMethod){if(mx(null==t?void 0:t.sortMethod))return"groupAsc";if(mS(null==t?void 0:t.sortMethod))return"groupDesc"}if(e)return"SortDown"},mD=function(t){var e,n,r=t.pivotMeta,i=t.dimensions,o=t.sortedDimensionValues,a=t.sortFieldId,s={children:r},l=[s];try{for(var u=d(i),h=u.next();!h.done;h=u.next())if(h.value!==a)l=hZ(l,function(t){return p([],f(t.children.values()),!1)});else{l.forEach(function(t){var e=p([],f(t.children.values()),!1),n=fx(e,function(t){return cp(o,t.id)}).map(function(t){return[t.value,t]});t.children=new Map(n)});break}}catch(t){e={error:t}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s.children},mk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=f(t,1)[0];this.headerConfig=h({},n);var r=this.meta,i=r.value,o=r.query,a=this.spreadsheet.dataCfg.sortParams,s=this.isSortCell(),l=hW(p([],f(a),!1).reverse(),function(t){return s&&(null==t?void 0:t.sortByMeasure)===i&&uR(sd(t,"query"),o)}),u=mN(l,s);this.headerConfig.sortParam=h(h(h({},this.headerConfig.sortParam),l||{query:o}),{type:u})},e.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.actionIcons=[],this.hasDefaultHiddenIcon=!1},e.prototype.getTreeIcon=function(){return this.treeIcon},e.prototype.getInteractiveBorderShapeStyle=function(t){var e=this.getCellArea(),n=e.x,r=e.y,i=e.height;return{x:n+t,y:r+t,width:e.width-2*t,height:i-2*t}},e.prototype.getFormattedFieldValue=function(){var t=this.meta,e=t.label,n=t.isTotalRoot,r=t.isGrandTotals,i=this.spreadsheet.dataSet.getFieldFormatter(this.meta.field);return{formattedValue:this.spreadsheet.isTableMode()||(this.spreadsheet.isHierarchyTreeType()?r&&n:n)||!i?e:i(e,void 0,this.meta),value:e}},e.prototype.getActionIconCfg=function(){return mC(this.spreadsheet.options.headerActionIcons,this.meta,this.cellType)},e.prototype.showSortIcon=function(){var t=this.spreadsheet,e=t.options,n=cP(t.dataCfg.fields.values);if(e.showDefaultHeaderActionIcon&&!n){var r=this.headerConfig.sortParam,i=this.meta.query;return i&&uR(null==r?void 0:r.query,i)&&(null==r?void 0:r.type)&&(null==r?void 0:r.type)!=="none"}return!1},e.prototype.getActionIconsCount=function(){if(this.showSortIcon())return 1;var t=this.getActionIconCfg();return t?t.iconNames.length:0},e.prototype.getActionIconsWidth=function(){var t=this.getStyle().icon;return(t.size+t.margin.left)*this.getActionIconsCount()},e.prototype.drawSortIcons=function(){var t=this;if(this.showSortIcon()){var e=this.getStyle(),n=e.icon,r=e.text,i=this.getTextConditionFill(r),o=this.headerConfig.sortParam,a=this.getIconPosition(),s=new vP(h(h({name:sd(o,"type","none")},a),{width:n.size,height:n.size,fill:i}));s.on("click",function(e){t.spreadsheet.emit(CD.GLOBAL_ACTION_ICON_CLICK,e),t.spreadsheet.handleGroupSort(e,t.meta)}),this.add(s),this.actionIcons.push(s)}},e.prototype.hasDefaultHideActionIcon=function(){return this.hasDefaultHiddenIcon},e.prototype.addActionIcon=function(t){var e=this,n=t.x,r=t.y,i=t.iconName,o=t.defaultHide,a=t.action,s=t.onClick,l=t.onHover,u=this.getStyle(),h=u.icon,c=u.text,d=this.getTextConditionFill(c),f=(null==h?void 0:h.fill)||d,p=new vP({name:i,x:n,y:r,width:null==h?void 0:h.size,height:null==h?void 0:h.size,fill:f});p.set("visible",!o),p.on("mouseover",function(t){e.spreadsheet.emit(CD.GLOBAL_ACTION_ICON_HOVER,t),null==l||l({hovering:!0,iconName:i,meta:e.meta,event:t})}),p.on("mouseleave",function(t){e.spreadsheet.emit(CD.GLOBAL_ACTION_ICON_HOVER_OFF,t),null==l||l({hovering:!1,iconName:i,meta:e.meta,event:t})}),p.on("click",function(t){var n;e.spreadsheet.emit(CD.GLOBAL_ACTION_ICON_CLICK,t),null===(n=s||a)||void 0===n||n({iconName:i,meta:e.meta,event:t})}),this.actionIcons.push(p),this.add(p)},e.prototype.drawActionIcons=function(){var t=this;if(this.showSortIcon()){this.drawSortIcons();return}var e=this.getActionIconCfg();if(e){var n=e.iconNames,r=e.action,i=e.onClick,o=e.onHover,a=e.defaultHide,s=this.getIconPosition(n.length),l=this.getStyle().icon,u=l.size,h=l.margin;hm(n,function(e,n){var l=s.x+n*u+n*h.left,c=s.y,d="function"==typeof a?a(t.meta,e):a;d&&(t.hasDefaultHiddenIcon=!0),t.addActionIcon({iconName:e,x:l,y:c,defaultHide:d,action:r,onClick:i,onHover:o})})}},e.prototype.drawBackgroundShape=function(){var t=this.getBackgroundColor(),e=t.backgroundColor,n=t.backgroundColorOpacity;this.backgroundShape=gd(this,h(h({},this.getCellArea()),{fill:e,fillOpacity:n}))},e.prototype.isSortCell=function(){var t,e,n,r=null===(e=null===(t=this.meta.spreadsheet)||void 0===t?void 0:t.isValueInCols)||void 0===e?void 0:e.call(t),i=this.meta.level===(null===(n=this.meta.hierarchy)||void 0===n?void 0:n.maxLevel);return r?i&&this.cellType===CG.COL_CELL:i&&this.cellType===CG.ROW_CELL},e.prototype.handleByStateName=function(t,e){yU(t,this)&&this.updateByState(e)},e.prototype.handleSearchResult=function(t){yU(t,this)&&(hW(t,function(t){return null==t?void 0:t.isTarget}).id===this.getMeta().id?this.updateByState(CW.HIGHLIGHT):this.updateByState(CW.SEARCH_RESULT))},e.prototype.handleHover=function(t){var e;yU(t,this)&&(this.updateByState(CW.HOVER),this.hasDefaultHideActionIcon()&&this.toggleActionIcon(null===(e=null==t?void 0:t[0])||void 0===e?void 0:e.id))},e.prototype.handleSelect=function(t,e){yU(t,this)&&this.updateByState(CW.SELECTED),cd(hK(e,"id"),this.meta.id)&&this.updateByState(CW.SELECTED)},e.prototype.getTextStyle=function(){var t,e=this.getStyle(),n=e.text,r=e.bolderText,i=e.measureText;t=this.isMeasureField()?i||n:this.isBolderText()?r:n;var o=this.getTextConditionFill(t);return h(h({},t),{fill:o})},e.prototype.getBackgroundColor=function(){var t,e=(null===(t=this.getStyle())||void 0===t?void 0:t.cell)||{},n=e.backgroundColor,r=e.backgroundColorOpacity;return this.getBackgroundColorByCondition(n,r)},e.prototype.getBackgroundColorByCondition=function(t,e){var n,r=t,i=this.findFieldCondition(null===(n=this.conditions)||void 0===n?void 0:n.background);if(i&&i.mapping){var o=this.mappingValue(i);o&&(r=o.fill)}return{backgroundColor:r,backgroundColorOpacity:e}},e.prototype.toggleActionIcon=function(t){if(this.getMeta().id===t){var e=[];hm(this.actionIcons,function(t){t.get("visible")||(t.set("visible",!0),e.push(t))}),this.spreadsheet.store.set("visibleActionIcons",e)}},e.prototype.update=function(){var t=this.spreadsheet.interaction,e=null==t?void 0:t.getState(),n=null==t?void 0:t.getCells([CG.CORNER_CELL,CG.COL_CELL,CG.ROW_CELL]);if(hX(n))switch(null==e?void 0:e.stateName){case CW.SELECTED:case CW.BRUSH_SELECTED:this.handleSelect(n,null==e?void 0:e.nodes);break;case CW.HOVER_FOCUS:case CW.HOVER:this.handleHover(n);break;case CW.SEARCH_RESULT:this.handleSearchResult(n);break;default:this.handleByStateName(n,null==e?void 0:e.stateName)}},e.prototype.updateByState=function(e){t.prototype.updateByState.call(this,e,this)},e.prototype.hideInteractionShape=function(){t.prototype.hideInteractionShape.call(this)},e.prototype.isMeasureField=function(){return[r5,"$$extra_column$$"].includes(this.meta.field)},e.prototype.mappingValue=function(t){var e=this.getMeta().label;return null==t?void 0:t.mapping(e,this.meta)},e.prototype.findFieldCondition=function(t){var e=this;return hj(t,function(t){return t.field instanceof RegExp?t.field.test(e.meta.field):t.field===e.meta.field})},e}(yV),mz=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return CG.COL_CELL},enumerable:!1,configurable:!0}),e.prototype.initCell=function(){t.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorders(),this.drawResizeArea(),this.addExpandColumnIconShapes(),this.update()},e.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",gd(this,h({},this.getCellArea()),{visible:!1}))},e.prototype.drawInteractiveBorderShape=function(){this.stateShapes.set("interactiveBorderShape",gd(this,this.getInteractiveBorderShapeStyle(2),{visible:!1}))},e.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getActionIconsWidth()},e.prototype.getIconPosition=function(){if(this.meta.isLeaf)return t.prototype.getIconPosition.call(this,this.getActionIconsCount());var e=this.getIconStyle(),n=e.margin.left,r=this.getTextStyle(),i=this.textPosition,o=i.x,a=i.y-e.size/2;return"left"===r.textAlign?{x:o+this.actualTextWidth+n,y:a}:"right"===r.textAlign?{x:o+n,y:a}:{x:o+this.actualTextWidth/2+n,y:a}},e.prototype.isBolderText=function(){var t=this.meta,e=t.isLeaf;return!!t.isTotals||!e},e.prototype.getTextPosition=function(){var t,e=this.meta.isLeaf,n=this.headerConfig,r=n.width,i=n.scrollContainsRowHeader,o=n.cornerWidth,a=n.scrollX,s=this.getTextStyle(),l=this.getContentArea(),u=this.getIconStyle();if(e)return gk(l,s,this.actualTextWidth,u,this.getActionIconsCount()).text;var h=this.getTextStyle().textAlign,c=gH({start:a-(i?o:0),width:r+(i?o:0)},h,null===(t=this.getStyle().cell)||void 0===t?void 0:t.padding),d=this.getActionIconsWidth(),f=this.actualTextWidth+d,p=gF(gz(c,{start:l.x,width:l.width},f),this.actualTextWidth,d,h),v=l.y+l.height/2;return this.textPosition={x:p,y:v},this.textPosition},e.prototype.getActionIconsWidth=function(){var t=this.getStyle().icon,e=t.size,n=t.margin,r=this.getActionIconsCount();return(e+n.left)*r+(r>0?n.right:0)},e.prototype.getColResizeAreaKey=function(){return this.meta.key},e.prototype.getColResizeArea=function(){return mg(this.spreadsheet,ic)},e.prototype.getHorizontalResizeAreaName=function(){return"".concat(iv).concat(this.meta.key)},e.prototype.drawHorizontalResizeArea=function(){if((null===(e=null===(t=this.spreadsheet.options.style)||void 0===t?void 0:t.colCfg)||void 0===e?void 0:e.height)!==0&&this.shouldDrawResizeAreaByType("colCellVertical",this)){var t,e,n=this.headerConfig,r=n.cornerWidth,i=n.viewportWidth,o=this.meta,a=o.y,s=o.height,l=this.getResizeAreaStyle(),u=this.getColResizeArea(),c=this.getHorizontalResizeAreaName();if(!u.find(function(t){return t.attrs.name===c})){var d=r+i;u.addShape("rect",{attrs:h(h({},mv({theme:l,type:CZ.Vertical,id:this.getColResizeAreaKey(),effect:C$.Field,offsetX:0,offsetY:a,width:d,height:s,meta:this.meta})),{name:c,x:0,y:a+s-l.size/2,width:d})})}}},e.prototype.shouldAddVerticalResizeArea=function(){var t=this.meta,e=t.x,n=t.y,r=t.width,i=t.height,o=this.headerConfig,a=o.scrollX,s=o.scrollY,l=o.scrollContainsRowHeader,u=o.cornerWidth,h=o.height,c=o.width,d=this.getResizeAreaStyle();return my({x:e+r-d.size/2,y:n,width:d.size,height:i},{x:l?-u:0,y:0,width:l?u+c:c,height:h},{scrollX:a,scrollY:s})},e.prototype.getVerticalResizeAreaOffset=function(){var t=this.meta,e=t.x,n=t.y,r=this.headerConfig,i=r.scrollX,o=r.position;return{x:o.x+e-i,y:o.y+n}},e.prototype.drawVerticalResizeArea=function(){if(this.meta.isLeaf&&this.shouldDrawResizeAreaByType("colCellHorizontal",this)){var t=this.meta,e=t.label,n=t.width,r=t.height,i=this.getResizeAreaStyle(),o=this.getColResizeArea();if(this.shouldAddVerticalResizeArea()){var a=this.getVerticalResizeAreaOffset(),s=a.x,l=a.y;o.addShape("rect",{attrs:h(h({},mv({theme:i,type:CZ.Horizontal,effect:C$.Cell,id:e,offsetX:s,offsetY:l,width:n,height:r,meta:this.meta})),{x:s+n-i.size/2,y:l,height:r})})}}},e.prototype.drawResizeArea=function(){this.drawHorizontalResizeArea(),this.drawVerticalResizeArea()},e.prototype.drawHorizontalBorder=function(){var t=gP(C2.TOP,this.meta,this.theme.colCell.cell);gv(this,t.position,t.style)},e.prototype.drawVerticalBorder=function(t){var e=gP(t,this.meta,this.theme.colCell.cell);gv(this,e.position,e.style)},e.prototype.drawBorders=function(){var t=this.spreadsheet,e=t.options,n=t.isTableMode;0===this.meta.colIndex&&n()&&!e.showSeriesNumber&&this.drawVerticalBorder(C2.LEFT),this.drawHorizontalBorder(),this.drawVerticalBorder(C2.RIGHT)},e.prototype.hasHiddenColumnCell=function(){var t=this,e=this.spreadsheet.options,n=e.interaction.hiddenColumnFields,r=e.tooltip.operation,i=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return!(cP(i)||cP(void 0===n?[]:n))&&!!r.hiddenColumns&&!!i.find(function(e){return mp(null==e?void 0:e.displaySiblingNode,t.meta.id)})},e.prototype.getExpandIconTheme=function(){return this.getStyle().icon},e.prototype.addExpandColumnSplitLine=function(){var t=this.meta,e=t.x,n=t.y,r=t.width,i=t.height,o=this.theme.splitLine,a=o.horizontalBorderColor,s=o.horizontalBorderWidth,l=o.horizontalBorderColorOpacity,u=o.borderDash,h=this.isLastColumn()?e+r-s:e;gv(this,{x1:h,y1:n,x2:h,y2:n+i},{stroke:a,lineWidth:s,strokeOpacity:l,lineDash:u})},e.prototype.addExpandColumnIconShapes=function(){this.hasHiddenColumnCell()&&(this.addExpandColumnSplitLine(),this.addExpandColumnIcons())},e.prototype.addExpandColumnIcons=function(){var t=this.isLastColumn();this.addExpandColumnIcon(t),this.isAllDisplaySiblingNodeHidden()&&t&&this.addExpandColumnIcon(!1)},e.prototype.addExpandColumnIcon=function(t){var e=this,n=this.getExpandColumnIconConfig(t);gy(this,h(h({},n),{name:"ExpandColIcon",cursor:"pointer"})).on("click",function(){e.spreadsheet.emit(CD.LAYOUT_COLS_EXPANDED,e.meta)})},e.prototype.getExpandColumnIconConfig=function(t){var e=this.getExpandIconTheme().size,n=this.getCellArea(),r=n.x,i=n.y,o=n.width,a=n.height,s=r-e;return{x:t?s+o:s,y:i+a/2-e/2,width:2*e,height:e}},e.prototype.isLastColumn=function(){return md(this.spreadsheet,this.meta.id)},e.prototype.isAllDisplaySiblingNodeHidden=function(){var t=this.meta.id,e=this.spreadsheet.store.get("hiddenColumnsDetail",[]),n=e.find(function(e){var n,r=e.displaySiblingNode;return(null===(n=null==r?void 0:r.next)||void 0===n?void 0:n.id)===t});return e.find(function(e){var n,r=e.displaySiblingNode;return(null===(n=null==r?void 0:r.prev)||void 0===n?void 0:n.id)===t})&&n},e}(mk),mP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.isBolderText=function(){return this.meta.cornerType===C3.Col},Object.defineProperty(e.prototype,"cellType",{get:function(){return CG.CORNER_CELL},enumerable:!1,configurable:!0}),e.prototype.initCell=function(){t.prototype.initCell.call(this),this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawTreeIcon(),this.drawCellText(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorderShape(),this.drawResizeArea(),this.update()},e.prototype.drawCellText=function(){this.drawTextShape()},e.prototype.drawTextShape=function(){var t=this.getContentArea().x,e=this.getCellArea(),n=e.y,r=e.height,i=this.getTextStyle(),o=this.getCornerText(),a=this.getMaxTextWidth(),s=gq(this.meta,this.spreadsheet.options.placeholder),l=this.spreadsheet.measureTextWidth,u=gG({measureTextWidth:l,text:o,maxWidth:a,fontParam:i,placeholder:s});this.actualText=u;var h=u.indexOf("..."),c=u,d="";if(-1!==h&&this.spreadsheet.isHierarchyTreeType()){var f=h+(/iPhone/gi.test(navigator.userAgent)&&812===window.screen.height&&375===window.screen.width?1:0);c=o.substr(0,f),d=gG({measureTextWidth:l,text:d=o.slice(f),maxWidth:a,fontParam:i})}var p=gk({x:t+this.getTreeIconWidth(),y:n,width:a,height:r},i).text.x,v=n+(cP(d)?r/2:r/4);this.addTextShape(gp(this,[this.textShapes[0]],p,v,c,i)),cP(d)||this.addTextShape(gp(this,[this.textShapes[1]],p,n+.75*r,d,i)),this.actualTextWidth=c7([l(c,i),l(d,i)])},e.prototype.drawTreeIcon=function(){var t=this;if(this.showTreeIcon()&&this.meta.cornerType!==C3.Col){var e=this.headerConfig.hierarchyCollapse,n=this.getStyle().icon.size,r=this.getTextStyle(),i=r.textBaseline,o=r.fill,a=this.getContentArea();this.treeIcon=gm(this,{x:a.x,y:gD(a,i,n),width:n,height:n},o,e,function(){t.headerConfig.spreadsheet.store.set("scrollY",0),t.headerConfig.spreadsheet.emit(CD.LAYOUT_TREE_ROWS_COLLAPSE_ALL,e)})}},e.prototype.drawBorderShape=function(){var t=this;[C2.TOP,C2.LEFT].forEach(function(e){var n=gP(e,t.getCellArea(),t.getStyle().cell);gv(t,n.position,n.style)})},e.prototype.isLastRowCornerCell=function(){var t=this.meta,e=t.cornerType,n=t.field,r=this.headerConfig.rows;return e===C3.Row&&(this.spreadsheet.isHierarchyTreeType()||hd(r)===n)},e.prototype.getResizeAreaEffect=function(){return this.meta.cornerType===C3.Series?C$.Series:this.isLastRowCornerCell()&&this.spreadsheet.isHierarchyTreeType()?C$.Tree:C$.Field},e.prototype.drawResizeArea=function(){if(this.shouldDrawResizeAreaByType("cornerCellHorizontal",this)){var t=this.getResizeAreaStyle(),e=mg(this.spreadsheet,ih),n=this.headerConfig,r=n.position,i=n.scrollX,o=n.scrollY,a=n.width,s=n.height,l=this.meta,u=l.x,c=l.y,d=l.width,f=l.height,p=l.field,v=l.cornerType,g={x:u+d-t.size/2,y:c,width:t.size,height:f};if(v!==C3.Col&&my(g,{x:0,y:0,width:a,height:s},{scrollX:i,scrollY:o})){var y=r.x+u-i,m=r.y+(this.isLastRowCornerCell()?0:c);e.addShape("rect",{attrs:h(h({},mv({theme:t,id:p,type:CZ.Horizontal,effect:this.getResizeAreaEffect(),offsetX:y,offsetY:m,width:d,height:f,meta:this.meta})),{x:y+d-t.size/2,y:m,height:this.isLastRowCornerCell()?s:f})})}}},e.prototype.showTreeIcon=function(){var t;return this.spreadsheet.isHierarchyTreeType()&&(null===(t=this.meta)||void 0===t?void 0:t.x)===0},e.prototype.getIconPosition=function(){var t,e,n=null===(e=null===(t=this.textShapes)||void 0===t?void 0:t[0])||void 0===e?void 0:e.cfg.attrs,r=this.getTextStyle(),i=r.textBaseline,o=r.textAlign,a=this.getStyle().icon,s=a.size,l=a.margin;return{x:(null==n?void 0:n.x)+uW([[c8("center"),oq(this.actualTextWidth/2)],[c8("right"),oq(0)],[fI,oq(this.actualTextWidth)]])(o)+l.left,y:gD(this.getContentArea(),i,s)}},e.prototype.getTreeIconWidth=function(){var t=this.getStyle().icon,e=t.size,n=t.margin;return this.showTreeIcon()?e+n.right:0},e.prototype.getTextStyle=function(){var t=this.getStyle(),e=t.text,n=t.bolderText,r=this.isBolderText()?e:n,i=this.getTextConditionFill(r);return h(h({},r),{fill:i})},e.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getTreeIconWidth()-this.getActionIconsWidth()},e.prototype.getTextPosition=function(){return{x:0,y:0}},e.prototype.getFormattedFieldValue=function(){return mw(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},e.prototype.getCornerText=function(){return this.getFormattedFieldValue().formattedValue},e}(mk),mH=function(t,e,n,r){var i,o,a=sd(r,"size"),s=sd(r,"margin"),l=0;return(l=t.options.showDefaultHeaderActionIcon?1:null!==(o=null===(i=mC(t.options.headerActionIcons,e,n))||void 0===i?void 0:i.iconNames.length)&&void 0!==o?o:0)*(a+s.left)+(l>0?s.right:0)},mF=function(t,e,n){var r,i,o=(null===(r=n.icon.margin)||void 0===r?void 0:r.left)||0,a=(null===(i=n.icon.margin)||void 0===i?void 0:i.right)||0,s=t.store.get("hiddenColumnsDetail",[]),l=!1,u=!1;s.forEach(function(t){var n,r,i,o;(null===(r=null===(n=null==t?void 0:t.displaySiblingNode)||void 0===n?void 0:n.prev)||void 0===r?void 0:r.field)===e&&(l=!0),(null===(o=null===(i=null==t?void 0:t.displaySiblingNode)||void 0===i?void 0:i.next)||void 0===o?void 0:o.field)===e&&(u=!0)});var h=sd(n,"icon.size");return{left:u?h+a:0,right:l?h+o:0}},mW=function(t,e,n){var r=sd(n,"cell.padding"),i=mF(t,e.field,n);return r.left+r.right+mH(t,e,CG.COL_CELL,sd(n,"icon"))+i.left+i.right},mG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=f(t,1)[0];this.headerConfig=h({},n);var r=this.meta.field,i=hW(this.spreadsheet.dataCfg.sortParams,function(t){return(null==t?void 0:t.sortFieldId)===r}),o=mN(i,!0);this.headerConfig.sortParam=h(h(h({},this.headerConfig.sortParam),i||{}),{type:o})},e.prototype.isFrozenCell=function(){var t=this.spreadsheet.options,e=t.frozenColCount,n=t.frozenTrailingColCount,r=this.spreadsheet.facet.layoutResult.colNodes.filter(function(t){return gr(t)}),i=gi(this.meta).colIndex;return vQ(i,e)||vJ(i,n,r.length)},e.prototype.getFormattedFieldValue=function(){return mw(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},e.prototype.shouldAddVerticalResizeArea=function(){return!!this.isFrozenCell()||t.prototype.shouldAddVerticalResizeArea.call(this)},e.prototype.getVerticalResizeAreaOffset=function(){var t=this.meta,e=t.x,n=t.y,r=this.headerConfig,i=r.scrollX,o=r.position;return this.isFrozenCell()?{x:e,y:n}:{x:o.x+e-i,y:o.y+n}},e.prototype.getColResizeArea=function(){return this.isFrozenCell()?mg(this.spreadsheet,id):t.prototype.getColResizeArea.call(this)},e.prototype.isSortCell=function(){return!0},e.prototype.showSortIcon=function(){return this.spreadsheet.options.showDefaultHeaderActionIcon},e.prototype.getTextStyle=function(){var t=this.getStyle();return null==t?void 0:t.bolderText},e.prototype.getContentArea=function(){var t,e=((null===(t=this.getStyle())||void 0===t?void 0:t.cell)||this.theme.dataCell.cell).padding,n=h({},e),r=mF(this.spreadsheet,this.meta.field,this.getStyle());return r.left&&(n.left=(n.left||0)+r.left),r.right&&(n.right=(n.right||0)+r.right),gA(this.getCellArea(),n)},e.prototype.getHorizontalResizeAreaName=function(){return"".concat(iv).concat("table-col-cell")},e.prototype.drawBackgroundShape=function(){var t=this.getStyle().cell.backgroundColor;this.backgroundShape=gd(this,h(h({},this.getCellArea()),{fill:t}))},e}(mz),mV=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getStyle=function(t){return t?this.theme[t]:sd(this,"theme.cornerCell")},e.prototype.showSortIcon=function(){return!1},e.prototype.drawLeftBorder=function(){var t=gP(C2.LEFT,this.getCellArea(),this.getStyle().cell);gv(this,t.position,t.style)},e.prototype.drawBorders=function(){t.prototype.drawBorders.call(this),0===this.meta.colIndex&&this.drawLeftBorder()},e}(mG),mY=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getLinkFieldStyle=function(){return this.theme.rowCell.text.linkTextFill},e.prototype.drawBorderShape=function(){t.prototype.drawBorderShape.call(this),0===this.meta.colIndex&&this.drawLeftBorder()},e.prototype.shouldDrawResizeArea=function(){return 0===this.meta.colIndex},e.prototype.drawResizeArea=function(){if(this.shouldDrawResizeArea()){var t=this.getCellArea(),e=t.x,n=t.y,r=t.width,i=t.height,o=this.meta.rowIndex,a=this.getResizeAreaStyle(),s=this.spreadsheet.options,l=s.frozenRowCount,u=s.frozenTrailingRowCount,c=this.spreadsheet.facet.getCellRange(),d=v0(o,c.start,l),f=v1(o,c.end,u),p=mg(this.spreadsheet,d||f?is:ia),v=this.spreadsheet.facet.layoutResult.colsHierarchy.height,g=this.spreadsheet.facet.getScrollOffset().scrollY,y=this.spreadsheet.facet.getPaginationScrollY(),m=n+(f?0:v);f||(m-=d?y:g+y),p.addShape("rect",{attrs:h(h({},mv({id:String(this.meta.rowIndex),theme:a,type:CZ.Vertical,effect:C$.Cell,offsetX:e,offsetY:m,width:r,height:i,meta:this.meta})),{x:e,y:m+i-a.size/2,width:r})})}},e}(yJ),mU=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return CG.ROW_CELL},enumerable:!1,configurable:!0}),e.prototype.getTextStyle=function(){return this.theme.rowCell.seriesText},e}(mY),mj=function(){function t(t){this.EVENT="gesture",this.gm=t}return t.prototype.do=function(t){switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onTouchEnd(t);break;case"touchcancel":this.onTouchCancel(t);break;default:return}},t.prototype.emit=function(t){this.gm.emit(this.EVENT,t)},t}(),mX=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EVENT="pan",e}return u(e,t),e.prototype.onTouchCancel=function(t){},e.prototype.onTouchEnd=function(t){},e.prototype.onTouchMove=function(t){var e=t.x,n=t.y,r=e-this.preX,i=n-this.preY;this.preX=e,this.preY=n,this.emit({x:e,y:n,deltaX:r,deltaY:i,event:t})},e.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.preX=e,this.preY=n},e}(mj),mq="object"==typeof performance&&performance.now?performance:Date,mK={Pan:mX,Press:function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EVENT="press",e}return u(e,t),e.prototype.onTouchCancel=function(t){this.clearTimeout()},e.prototype.onTouchEnd=function(t){this.clearTimeout()},e.prototype.onTouchMove=function(t){var e=t.x,n=t.y;(e-this.touchStartX>10||n-this.touchStartY>10)&&this.clearTimeout()},e.prototype.onTouchStart=function(t){var e=this;this.clearTimeout();var n=t.x,r=t.y;this.touchStartTime=mq.now(),this.touchStartX=n,this.touchStartY=r,this.pressTimeout=window.setTimeout(function(){e.emit({x:n,y:r,event:t})},300)},e.prototype.clearTimeout=function(){window.clearTimeout(this.pressTimeout)},e}(mj),Swipe:function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EVENT="swipe",e.latestMoveTime=0,e.ms=0,e.speedX=0,e.speedY=0,e.preX=0,e.preY=0,e}return u(e,t),e.prototype.onTouchCancel=function(t){},e.prototype.onTouchEnd=function(t){var e=this.speedX,n=this.speedY;if(mq.now()-this.latestMoveTime<100){var r=t.x,i=t.y;this.emit({x:r,y:i,speedX:e,speedY:n,event:t})}},e.prototype.onTouchMove=function(t){var e=t.x,n=t.y,r=mq.now(),i=e-this.preX,o=n-this.preY,a=r-this.ms;this.speedX=i/a,this.speedY=o/a,this.latestMoveTime=r},e.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.speedX=this.speedY=0,this.preX=e,this.preY=n,this.ms=mq.now()},e}(mj),Tap:function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EVENT="tap",e}return u(e,t),e.prototype.onTouchCancel=function(t){},e.prototype.onTouchEnd=function(t){var e=t.x,n=t.y;e-this.touchStartX<2&&n-this.touchStartY<2&&mq.now()-this.touchStartTime<300&&this.emit({x:e,y:n,event:t})},e.prototype.onTouchMove=function(t){},e.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.touchStartTime=mq.now(),this.touchStartX=e,this.touchStartY=n},e}(mj)},mZ=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.onTouchStart=function(t){r.preventEvent(t),r.element.on("touchmove",r.onTouchMove),r.element.on("touchend",r.onTouchEnd),r.element.on("touchcancel",r.onTouchCancel),r.emit("touchdown",t),r.doGestures(t)},r.onTouchMove=function(t){r.preventEvent(t),r.emit("touchmove",t),r.doGestures(t)},r.onTouchEnd=function(t){r.preventEvent(t),r.emit("touchend",t),r.element.off("touchmove",r.onTouchMove),r.element.off("touchend",r.onTouchEnd),r.element.off("touchcancel",r.onTouchCancel),r.doGestures(t)},r.onTouchCancel=function(t){r.preventEvent(t),r.emit("touchcancel",t),r.element.off("touchmove",r.onTouchMove),r.element.off("touchend",r.onTouchEnd),r.element.off("touchcancel",r.onTouchCancel),r.doGestures(t)},r.element=e,r.options=n,r.initialGestures(),r.bindTouchStart(),r}return u(e,t),e.prototype.destroy=function(){this.element.off("touchstart",this.onTouchStart),this.off()},e.prototype.initialGestures=function(){var t=this,e=this.options.gestures||["Pan","Press","Swipe","Tap"];this.gestures=e.map(function(e){return new mK[e](t)})},e.prototype.bindTouchStart=function(){this.element.on("touchstart",this.onTouchStart)},e.prototype.preventEvent=function(t){var e=t.type;(this.options.prevents||[]).includes(e)&&t.preventDefault()},e.prototype.doGestures=function(t){this.gestures.forEach(function(e){e.do(t)})},e}(ty),m$="wheel",mQ=function(t){function e(e){var n=t.call(this)||this;return n.rafMs=0,n.onPan=function(t){n.raf&&cancelAnimationFrame(n.raf);var e=t.deltaX,r=t.deltaY,i=n.getWrapperEvent(t,e,r);n.emit(m$,i)},n.onSwipe=function(t){var e=t.speedX,r=t.speedY;n.rafMs=mq.now(),n.ms=n.rafMs,(0!==e||0!==r)&&n.rafInertia(t)},n.element=e,n.gm=new mZ(e,{gestures:["Pan","Swipe"]}),n.gm.on("swipe",n.onSwipe),n.gm.on("pan",n.onPan),n}return u(e,t),e.prototype.destroy=function(){window.cancelAnimationFrame(this.raf),this.gm.destroy(),this.off()},e.prototype.rafInertia=function(t){var e=this,n=t.speedX,r=t.speedY;this.raf=window.requestAnimationFrame(function(){var i=mq.now(),o=(i-e.ms)/800;if(o<1){o=eV(1-o);var a=i-e.rafMs,s=n*o*a,l=r*o*a,u=e.getWrapperEvent(t,s,l);e.emit(m$,u),e.rafMs=i,e.rafInertia(t)}})},e.prototype.getWrapperEvent=function(t,e,n){return h(h({},t),{deltaX:-e,deltaY:-n})},e}(ty),mJ=function(t){var e=0,n=t.children;return null==n||n.forEach(function(t){e+=t.height||0}),e},m0=function(t,e,n,r,i){var o=n+r;return t+i>=o?t:o<t+(e+i)/2?n+r-i:n>t+(e-i)/2?t+e-n>i?n:t+e-i:t+(e-i)/2},m1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=f(e),i=r[0],o=r.slice(1);t.prototype.handleRestOptions.call(this,i,o),this.frozenRowCell=o[0]},e.prototype.getAdjustTextAreaHeight=function(t,e,n){var r=t.y-this.getFrozenFirstRowHeight(),i=t.height;return!this.spreadsheet.facet.vScrollBar&&r+t.height>e+n&&(i=e+n-r),i},e.prototype.calculateTextY=function(t){var e=t.textArea,n=t.adjustTextAreaHeight,r=this.headerConfig,i=r.scrollY,o=r.viewportHeight,a=this.getTextStyle().fontSize;return m0(e.y,n,i+this.getFrozenFirstRowHeight(),o,a)},e.prototype.getResizeClipAreaBBox=function(){return h(h({},t.prototype.getResizeClipAreaBBox.call(this)),{y:this.getFrozenFirstRowHeight()})},e.prototype.getFrozenFirstRowHeight=function(){if(this.frozenRowCell)return 0;var t,e=this.headerConfig.spreadsheet,n=e.facet;return gl(e.options,null===(t=null==n?void 0:n.layoutResult)||void 0===t?void 0:t.rowNodes).frozenRowHeight},e}(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return CG.ROW_CELL},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e;t.prototype.destroy.call(this),null===(e=this.gm)||void 0===e||e.destroy()},e.prototype.initCell=function(){t.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawTreeIcon(),this.drawTreeLeafNodeAlignDot(),this.drawRectBorder(),this.drawResizeAreaInLeaf(),this.drawActionIcons(),this.update()},e.prototype.getBackgroundColor=function(){var t=this.getCrossBackgroundColor(this.meta.rowIndex),e=t.backgroundColor,n=t.backgroundColorOpacity;return this.getBackgroundColorByCondition(e,n)},e.prototype.drawInteractiveBorderShape=function(){this.stateShapes.set("interactiveBorderShape",gd(this,this.getInteractiveBorderShapeStyle(2),{visible:!1}))},e.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",gd(this,h({},this.getCellArea()),{visible:!1}))},e.prototype.showTreeIcon=function(){return this.spreadsheet.isHierarchyTreeType()&&!this.meta.isLeaf},e.prototype.showTreeLeafNodeAlignDot=function(){var t;return(null===(t=this.spreadsheet.options.style)||void 0===t?void 0:t.showTreeLeafNodeAlignDot)&&this.spreadsheet.isHierarchyTreeType()},e.prototype.getParentTreeIconCfg=function(){if(this.showTreeLeafNodeAlignDot()&&this.spreadsheet.isHierarchyTreeType()&&this.meta.isLeaf)return sd(this.meta,"parent.belongsCell.treeIcon.cfg")},e.prototype.drawTreeIcon=function(){var t=this;if(this.showTreeIcon()){var e=this.meta,n=e.isCollapsed,r=e.id,i=e.hierarchy,o=this.getContentArea().x,a=this.getTextStyle().fill,s=this.getStyle().icon.size,l=this.getContentIndent(),u=this.getIconYPosition();this.treeIcon=gm(this,{x:o+l,y:u,width:s,height:s},a,n,function(){if(!vS()){if(!n){var e=t.spreadsheet.store.get("scrollY"),o=t.headerConfig.viewportHeight||0,a=mJ(t.meta),s=i.height-a;if(e>0&&e+o>s){var l=s-o;t.spreadsheet.store.set("scrollY",l>0?l:0)}}t.spreadsheet.emit(CD.ROW_CELL_COLLAPSE_TREE_ROWS,{id:r,isCollapsed:!n,node:t.meta})}}),vS()&&(this.gm=new mZ(this,{gestures:["Tap"]}),this.gm.on("tap",function(){t.spreadsheet.emit(CD.ROW_CELL_COLLAPSE_TREE_ROWS,{id:r,isCollapsed:!n,node:t.meta})}))}},e.prototype.drawTreeLeafNodeAlignDot=function(){var t=this.getParentTreeIconCfg();if(t){var e=this.getStyle().icon,n=e.size,r=e.margin,i=t.x+n+r.right,o=this.getTextPosition().y,a=this.getTextStyle(),s=a.fill,l=a.fontSize,u=n/5;this.treeLeafNodeAlignDot=gf(this,{x:i+n/2,y:o+(l-u)/2,r:u,fill:s,fillOpacity:.3})}},e.prototype.isBolderText=function(){var t=this.meta,e=t.isLeaf,n=t.isTotals,r=t.level;return!e&&0===r||n},e.prototype.drawTextShape=function(){t.prototype.drawTextShape.call(this),this.drawLinkField(this.meta)},e.prototype.drawRectBorder=function(){var t=this,e=this.getCellArea().x,n=this.getContentIndent(),r=this.spreadsheet.isHierarchyTreeType()?e:e+n;[C2.BOTTOM,C2.LEFT].forEach(function(e){var n=gP(e,h(h({},t.getCellArea()),{x:r}),t.getStyle().cell);gv(t,n.position,n.style)})},e.prototype.getResizeClipAreaBBox=function(){var t=this.headerConfig;return{x:0,y:0,width:t.width,height:t.viewportHeight}},e.prototype.drawResizeAreaInLeaf=function(){if(this.meta.isLeaf&&this.shouldDrawResizeAreaByType("rowCellVertical",this)){var t=this.getCellArea(),e=t.x,n=t.y,r=t.width,i=t.height,o=this.getResizeAreaStyle(),a=mg(this.spreadsheet,ia),s=this.headerConfig,l=s.position,u=s.seriesNumberWidth,c=s.width,d=s.scrollX,f=s.scrollY;if(my({x:e+u,y:n+i-o.size/2,width:r,height:o.size},this.getResizeClipAreaBBox(),{scrollX:d,scrollY:f})){var p=(null==l?void 0:l.x)+e-d+u,v=(null==l?void 0:l.y)+n-f,g=this.spreadsheet.isFrozenRowHeader()?c-u-(e-d):r;a.addShape("rect",{attrs:h(h({},mv({id:this.meta.id,theme:o,type:CZ.Vertical,effect:C$.Cell,offsetX:p,offsetY:v,width:r,height:i,meta:this.meta})),{x:p,y:v+i-o.size/2,width:g})})}}},e.prototype.getContentIndent=function(){if(!this.spreadsheet.isHierarchyTreeType())return 0;for(var t=this.getStyle(),e=t.icon,n=t.cell,r=e.size+e.margin.right,i=this.meta.parent,o=0;i;)0!==i.height&&(o+=r),i=i.parent;return this.showTreeLeafNodeAlignDot()&&(o+=this.isTreeLevel()?0:n.padding.right+e.margin.right),o},e.prototype.getTextIndent=function(){var t=this.getStyle().icon,e=t.size,n=t.margin;return this.getContentIndent()+(this.showTreeIcon()||this.isTreeLevel()&&this.showTreeLeafNodeAlignDot()?e+n.right:0)},e.prototype.isTreeLevel=function(){return hW(sd(this.meta,"parent.children"),function(t){return!t.isLeaf})},e.prototype.getIconPosition=function(){var t=this.textShape.cfg.attrs,e=t.x,n=t.y,r=t.textAlign,i=this.getStyle().icon.margin.left;return"left"===r?{x:e+this.actualTextWidth+i,y:n}:"right"===r?{x:e+i,y:n}:{x:e+this.actualTextWidth/2+i,y:n}},e.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getTextIndent()-this.getActionIconsWidth()},e.prototype.getTextArea=function(){var t=this.getContentArea(),e=this.getTextIndent();return h(h({},t),{x:t.x+e,width:t.width-e})},e.prototype.getAdjustTextAreaHeight=function(t,e,n){var r=t.height;return!this.spreadsheet.facet.vScrollBar&&t.y+t.height>e+n&&(r=e+n-t.y),r},e.prototype.calculateTextY=function(t){var e=t.textArea,n=t.adjustTextAreaHeight,r=this.headerConfig,i=r.scrollY,o=r.viewportHeight,a=this.getTextStyle().fontSize;return m0(e.y,n,i,o,a)},e.prototype.getTextPosition=function(){var t=this.getTextArea(),e=this.headerConfig,n=e.scrollY,r=e.viewportHeight,i=this.getAdjustTextAreaHeight(t,n,r),o=this.calculateTextY({textArea:t,adjustTextAreaHeight:i});return{x:gk(t,this.getTextStyle(),0,this.getIconStyle(),this.getActionIconsCount()).text.x,y:o}},e.prototype.getIconYPosition=function(){var t=this.getTextPosition().y,e=this.getStyle().icon.size;return t+(this.getTextStyle().fontSize-e)/2},e}(mk)),m2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.initCell=function(){this.drawBackgroundShape(),this.drawRectBorder(),this.drawTextShape()},e.prototype.getTextStyle=function(){var t;return null===(t=this.getStyle())||void 0===t?void 0:t.seriesText},e.prototype.getTextPosition=function(){return t.prototype.getTextPosition.call(this)},e.prototype.getActionIconsCount=function(){return 0},e.prototype.getIconStyle=function(){},e.prototype.drawResizeAreaInLeaf=function(){},e.prototype.update=function(){},e.prototype.findFieldCondition=function(){},e.prototype.mappingValue=function(){},e}(m1),m4=function(t){return[CY.META,CY.CONTROL].includes(t.key)},m3=function(t){return t.ctrlKey||t.metaKey},m5=function(t){var e=t.getMeta()||{},n=e.id,r=e.colIndex,i=e.rowIndex,o=e.rowQuery;return{id:n,colIndex:r,rowIndex:i,type:t.cellType,rowQuery:o}},m8=function(t,e){var n=t.interaction;n.changeState({stateName:CW.SELECTED,cells:e}),t.emit(CD.GLOBAL_SELECTED,n.getActiveCells())};function m6(t,e){var n=Math.min(t.rowIndex,e.rowIndex),r=Math.max(t.rowIndex,e.rowIndex);return{start:{rowIndex:n,colIndex:Math.min(t.colIndex,e.colIndex)},end:{rowIndex:r,colIndex:Math.max(t.colIndex,e.colIndex)}}}var m7,m9,Ct,Ce,Cn,Cr,Ci,Co,Ca,Cs,Cl,Cu,Ch,Cc,Cd,Cf,Cp,Cv,Cg,Cy,Cm,CC,Cw,Cx,CS,Cb,C_,CE,CL,CT,CM,CR,CI,CO,CA,CB,CN,CD,Ck,Cz,CP,CH,CF,CW,CG,CV,CY,CU,Cj,CX,Cq,CK,CZ,C$,CQ,CJ,C0,C1,C2,C4,C3,C5,C8,C6,C7,C9=function(t,e){var n=t.getSelectedCellHighlight(),r=n.colHeader,i=n.rowHeader;r&&t.updateCells(t.getAllColHeaderCells()),i&&t.updateCells(t.getAllRowHeaderCells()),e()},wt=function(t){var e=t.store.get("visibleActionIcons"),n=t.interaction.getInteractedCells(),r=t.interaction.getState().cells;return!(cP(n)&&cP(r)&&cP(e))&&(hm(e,function(t){t.set("visible",!1)}),t.store.set("visibleActionIcons",[]),hm(n,function(t){t.hideInteractionShape()}),t.interaction.resetState(),t.options.interaction.selectedCellsSpotlight&&hm(t.interaction.getPanelGroupAllUnSelectedDataCells()||[],function(t){t.clearUnselectedState()}),!0)},we=function(t,e){var n=null==e?void 0:e.stateName;t.interaction.isEqualStateName(n)||(wt(t),t.hideTooltip(),t.store.set(iM,e))},wn=function(t,e,n){var r,i,o=n.facet,a=o.panelBBox.width,s=null==o?void 0:o.frozenGroupInfo,l=null!==(r=null==s?void 0:s.frozenCol.width)&&void 0!==r?r:0,u=null!==(i=null==s?void 0:s.frozenTrailingCol.width)&&void 0!==i?i:0,h=o.layoutResult.colLeafNodes[t];return e===Cq.SCROLL_UP?h.x-l:h.x+h.width-(a-u)},wr=function(t,e,n){var r,i,o=n.facet,a=o.viewCellHeights.getCellOffsetY,s=o.panelBBox.height,l=a(t+1);if(cY(l))return 0;var u=null==o?void 0:o.frozenGroupInfo,h=null!==(r=null==u?void 0:u.frozenRow.height)&&void 0!==r?r:0,c=null!==(i=null==u?void 0:u.frozenTrailingRow.height)&&void 0!==i?i:0;return e===Cq.SCROLL_UP?a(t)-h:l-(s-c)},wi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=p(p([],f(t),!1),[function(t,e){if(iq(t)&&iq(e))return e}],!1);return hi.apply(void 0,p([{}],f(n),!1))},wo=function(t){var e=["rows","columns","values"].reduce(function(e,n){var r=t[n],i=pn(r);return uR(i,r)||console.warn("fields.".concat(n,":[").concat(r,"] should be unique")),e[n]=i,e},{});return h(h({},t),e)},wa=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=wi.apply(void 0,p([i_],f(t),!1));return n.fields=wo(n.fields),(!cP(n.fields.customTreeItems)||cP(n.fields.values))&&(n.fields.valueInCols=!1),n},ws=function(t){return wi(iO,t)},wl="0123456789abcdef",wu="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",wh="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",wc={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:9e15,crypto:!1},wd=!0,wf="[DecimalError] ",wp=wf+"Invalid argument: ",wv=wf+"Precision limit exceeded",wg=wf+"crypto unavailable",wy="[object Decimal]",wm=Math.floor,wC=Math.pow,ww=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,wx=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,wS=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,wb=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,w_=wu.length-1,wE=wh.length-1,wL={toStringTag:wy};function wT(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)(n=7-(r=t[e]+"").length)&&(o+=wP(n)),o+=r;(n=7-(r=(a=t[e])+"").length)&&(o+=wP(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function wM(t,e,n){if(t!==~~t||t<e||t>n)throw Error(wp+t)}function wR(t,e,n,r){var i,o,a,s;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=7,i=0):(i=Math.ceil((e+1)/7),e%=7),o=wC(10,7-e),s=t[i]%o|0,null==r?e<3?(0==e?s=s/100|0:1==e&&(s=s/10|0),a=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(n<4&&s+1==o||n>3&&s+1==o/2)&&(t[i+1]/o/100|0)==wC(10,e-2)-1||(s==o/2||0==s)&&(t[i+1]/o/100|0)==0:e<4?(0==e?s=s/1e3|0:1==e?s=s/100|0:2==e&&(s=s/10|0),a=(r||n<4)&&9999==s||!r&&n>3&&4999==s):a=((r||n<4)&&s+1==o||!r&&n>3&&s+1==o/2)&&(t[i+1]/o/1e3|0)==wC(10,e-3)-1,a}function wI(t,e,n){for(var r,i,o=[0],a=0,s=t.length;a<s;){for(i=o.length;i--;)o[i]*=e;for(o[0]+=wl.indexOf(t.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}wL.absoluteValue=wL.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),wA(t)},wL.ceil=function(){return wA(new this.constructor(this),this.e+1,2)},wL.clampedTo=wL.clamp=function(t,e){var n=this.constructor;if(t=new n(t),e=new n(e),!t.s||!e.s)return new n(NaN);if(t.gt(e))throw Error(wp+e);return 0>this.cmp(t)?t:this.cmp(e)>0?e:new n(this)},wL.comparedTo=wL.cmp=function(t){var e,n,r,i,o=this.d,a=(t=new this.constructor(t)).d,s=this.s,l=t.s;if(!o||!a)return s&&l?s!==l?s:o===a?0:!o^s<0?1:-1:NaN;if(!o[0]||!a[0])return o[0]?s:a[0]?-l:0;if(s!==l)return s;if(this.e!==t.e)return this.e>t.e^s<0?1:-1;for(e=0,n=(r=o.length)<(i=a.length)?r:i;e<n;++e)if(o[e]!==a[e])return o[e]>a[e]^s<0?1:-1;return r===i?0:r>i^s<0?1:-1},wL.cosine=wL.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(t,e){var n,r,i;if(e.isZero())return e;(r=e.d.length)<32?i=(1/wX(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=wj(t,1,e.times(i),new t(1));for(var o=n;o--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}(r,wq(r,n)),r.precision=t,r.rounding=e,wA(2==C7||3==C7?n.neg():n,t,e,!0)):new r(1):new r(NaN)},wL.cubeRoot=wL.cbrt=function(){var t,e,n,r,i,o,a,s,l,u,h=this.constructor;if(!this.isFinite()||this.isZero())return new h(this);for(wd=!1,(o=this.s*wC(this.s*this,1/3))&&Math.abs(o)!=1/0?r=new h(o.toString()):(n=wT(this.d),(o=((t=this.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=wC(n,1/3),t=wm((t+1)/3)-(t%3==(t<0?-1:2)),(r=new h(n=o==1/0?"5e"+t:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=this.s),a=(t=h.precision)+3;;)if(r=wO((u=(l=(s=r).times(s).times(s)).plus(this)).plus(this).times(s),u.plus(l),a+2,1),wT(s.d).slice(0,a)===(n=wT(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(wA(r,t+1,1),e=!r.times(r).times(r).eq(this));break}if(!i&&(wA(s,t+1,0),s.times(s).times(s).eq(this))){r=s;break}a+=4,i=1}return wd=!0,wA(r,t,h.rounding,e)},wL.decimalPlaces=wL.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=((t=e.length-1)-wm(this.e/7))*7,t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},wL.dividedBy=wL.div=function(t){return wO(this,new this.constructor(t))},wL.dividedToIntegerBy=wL.divToInt=function(t){var e=this.constructor;return wA(wO(this,new e(t),0,1,1),e.precision,e.rounding)},wL.equals=wL.eq=function(t){return 0===this.cmp(t)},wL.floor=function(){return wA(new this.constructor(this),this.e+1,3)},wL.greaterThan=wL.gt=function(t){return this.cmp(t)>0},wL.greaterThanOrEqualTo=wL.gte=function(t){var e=this.cmp(t);return 1==e||0===e},wL.hyperbolicCosine=wL.cosh=function(){var t,e,n,r,i,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;n=a.precision,r=a.rounding,a.precision=n+Math.max(o.e,o.sd())+4,a.rounding=1,(i=o.d.length)<32?e=(1/wX(4,t=Math.ceil(i/3))).toString():(t=16,e="2.3283064365386962890625e-10"),o=wj(a,1,o.times(e),new a(1),!0);for(var l,u=t,h=new a(8);u--;)l=o.times(o),o=s.minus(l.times(h.minus(l.times(h))));return wA(o,a.precision=n,a.rounding=r,!0)},wL.hyperbolicSine=wL.sinh=function(){var t,e,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=wj(o,2,i,i,!0);else{t=(t=1.4*Math.sqrt(r))>16?16:0|t,i=wj(o,2,i=i.times(1/wX(5,t)),i,!0);for(var a,s=new o(5),l=new o(16),u=new o(20);t--;)a=i.times(i),i=i.times(s.plus(a.times(l.times(a).plus(u))))}return o.precision=e,o.rounding=n,wA(i,e,n,!0)},wL.hyperbolicTangent=wL.tanh=function(){var t,e,n=this.constructor;return this.isFinite()?this.isZero()?new n(this):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,wO(this.sinh(),this.cosh(),n.precision=t,n.rounding=e)):new n(this.s)},wL.inverseCosine=wL.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),i=n.precision,o=n.rounding;return -1!==r?0===r?e.isNeg()?wk(n,i,o):new n(0):new n(NaN):e.isZero()?wk(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,e=e.asin(),t=wk(n,i+4,o).times(.5),n.precision=i,n.rounding=o,t.minus(e))},wL.inverseHyperbolicCosine=wL.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,wd=!1,n=n.times(n).minus(1).sqrt().plus(n),wd=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)},wL.inverseHyperbolicSine=wL.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,wd=!1,n=n.times(n).plus(1).sqrt().plus(n),wd=!0,r.precision=t,r.rounding=e,n.ln())},wL.inverseHyperbolicTangent=wL.atanh=function(){var t,e,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,e=o.rounding,Math.max(r=i.sd(),t)<-(2*i.e)-1)?wA(new o(i),t,e,!0):(o.precision=n=r-i.e,i=wO(i.plus(1),new o(1).minus(i),n+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=e,i.times(.5)):new o(NaN)},wL.inverseSine=wL.asin=function(){var t,e,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==e)?0===e?((t=wk(o,n+4,r).times(.5)).s=i.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2))},wL.inverseTangent=wL.atan=function(){var t,e,n,r,i,o,a,s,l,u=this,h=u.constructor,c=h.precision,d=h.rounding;if(u.isFinite()){if(u.isZero())return new h(u);if(u.abs().eq(1)&&c+4<=wE)return(a=wk(h,c+4,d).times(.25)).s=u.s,a}else{if(!u.s)return new h(NaN);if(c+4<=wE)return(a=wk(h,c+4,d).times(.5)).s=u.s,a}for(h.precision=s=c+10,h.rounding=1,t=n=Math.min(28,s/7+2|0);t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(wd=!1,e=Math.ceil(s/7),r=1,l=u.times(u),a=new h(u),i=u;-1!==t;)if(i=i.times(l),o=a.minus(i.div(r+=2)),i=i.times(l),void 0!==(a=o.plus(i.div(r+=2))).d[e])for(t=e;a.d[t]===o.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),wd=!0,wA(a,h.precision=c,h.rounding=d,!0)},wL.isFinite=function(){return!!this.d},wL.isInteger=wL.isInt=function(){return!!this.d&&wm(this.e/7)>this.d.length-2},wL.isNaN=function(){return!this.s},wL.isNegative=wL.isNeg=function(){return this.s<0},wL.isPositive=wL.isPos=function(){return this.s>0},wL.isZero=function(){return!!this.d&&0===this.d[0]},wL.lessThan=wL.lt=function(t){return 0>this.cmp(t)},wL.lessThanOrEqualTo=wL.lte=function(t){return 1>this.cmp(t)},wL.logarithm=wL.log=function(t){var e,n,r,i,o,a,s,l=this.constructor,u=l.precision,h=l.rounding;if(null==t)t=new l(10),e=!0;else{if(n=(t=new l(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new l(NaN);e=t.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new l(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(e){if(n.length>1)i=!0;else{for(r=n[0];r%10==0;)r/=10;i=1!==r}}if(wd=!1,wR((s=wO(wV(this,a=u+5),e?wD(l,a+10):wV(t,a),a,1)).d,r=u,h))do if(a+=10,s=wO(wV(this,a),e?wD(l,a+10):wV(t,a),a,1),!i){+wT(s.d).slice(r+1,r+15)+1==1e14&&(s=wA(s,u+1,0));break}while(wR(s.d,r+=10,h));return wd=!0,wA(s,u,h)},wL.minus=wL.sub=function(t){var e,n,r,i,o,a,s,l,u,h,c,d,f=this.constructor;if(t=new f(t),!this.d||!t.d)return this.s&&t.s?this.d?t.s=-t.s:t=new f(t.d||this.s!==t.s?this:NaN):t=new f(NaN),t;if(this.s!=t.s)return t.s=-t.s,this.plus(t);if(u=this.d,d=t.d,s=f.precision,l=f.rounding,!u[0]||!d[0]){if(d[0])t.s=-t.s;else{if(!u[0])return new f(3===l?-0:0);t=new f(this)}return wd?wA(t,s,l):t}if(n=wm(t.e/7),h=wm(this.e/7),u=u.slice(),o=h-n){for((c=o<0)?(e=u,o=-o,a=d.length):(e=d,n=h,a=u.length),o>(r=Math.max(Math.ceil(s/7),a)+2)&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for((c=(r=u.length)<(a=d.length))&&(a=r),r=0;r<a;r++)if(u[r]!=d[r]){c=u[r]<d[r];break}o=0}for(c&&(e=u,u=d,d=e,t.s=-t.s),a=u.length,r=d.length-a;r>0;--r)u[a++]=0;for(r=d.length;r>o;){if(u[--r]<d[r]){for(i=r;i&&0===u[--i];)u[i]=1e7-1;--u[i],u[r]+=1e7}u[r]-=d[r]}for(;0===u[--a];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(t.d=u,t.e=wN(u,n),wd?wA(t,s,l):t):new f(3===l?-0:0)},wL.modulo=wL.mod=function(t){var e,n=this.constructor;return(t=new n(t),this.d&&t.s&&(!t.d||t.d[0]))?t.d&&(!this.d||this.d[0])?(wd=!1,9==n.modulo?(e=wO(this,t.abs(),0,3,1),e.s*=t.s):e=wO(this,t,0,n.modulo,1),e=e.times(t),wd=!0,this.minus(e)):wA(new n(this),n.precision,n.rounding):new n(NaN)},wL.naturalExponential=wL.exp=function(){return wG(this)},wL.naturalLogarithm=wL.ln=function(){return wV(this)},wL.negated=wL.neg=function(){var t=new this.constructor(this);return t.s=-t.s,wA(t)},wL.plus=wL.add=function(t){var e,n,r,i,o,a,s,l,u,h,c=this.constructor;if(t=new c(t),!this.d||!t.d)return this.s&&t.s?this.d||(t=new c(t.d||this.s===t.s?this:NaN)):t=new c(NaN),t;if(this.s!=t.s)return t.s=-t.s,this.minus(t);if(u=this.d,h=t.d,s=c.precision,l=c.rounding,!u[0]||!h[0])return h[0]||(t=new c(this)),wd?wA(t,s,l):t;if(o=wm(this.e/7),r=wm(t.e/7),u=u.slice(),i=o-r){for(i<0?(n=u,i=-i,a=h.length):(n=h,r=o,a=u.length),i>(a=(o=Math.ceil(s/7))>a?o+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=u.length)-(i=h.length)<0&&(i=a,n=h,h=u,u=n),e=0;i;)e=(u[--i]=u[i]+h[i]+e)/1e7|0,u[i]%=1e7;for(e&&(u.unshift(e),++r),a=u.length;0==u[--a];)u.pop();return t.d=u,t.e=wN(u,r),wd?wA(t,s,l):t},wL.precision=wL.sd=function(t){var e;if(void 0!==t&&!!t!==t&&1!==t&&0!==t)throw Error(wp+t);return this.d?(e=wz(this.d),t&&this.e+1>e&&(e=this.e+1)):e=NaN,e},wL.round=function(){var t=this.constructor;return wA(new t(this),this.e+1,t.rounding)},wL.sine=wL.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:wj(t,2,e,e);n=(n=1.4*Math.sqrt(r))>16?16:0|n,e=wj(t,2,e=e.times(1/wX(5,n)),e);for(var i,o=new t(5),a=new t(16),s=new t(20);n--;)i=e.times(e),e=e.times(o.plus(i.times(a.times(i).minus(s))));return e}(r,wq(r,n)),r.precision=t,r.rounding=e,wA(C7>2?n.neg():n,t,e,!0)):new r(NaN)},wL.squareRoot=wL.sqrt=function(){var t,e,n,r,i,o,a=this.d,s=this.e,l=this.s,u=this.constructor;if(1!==l||!a||!a[0])return new u(!l||l<0&&(!a||a[0])?NaN:a?this:1/0);for(wd=!1,0==(l=Math.sqrt(+this))||l==1/0?(((e=wT(a)).length+s)%2==0&&(e+="0"),l=Math.sqrt(e),s=wm((s+1)/2)-(s<0||s%2),r=new u(e=l==1/0?"5e"+s:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+s)):r=new u(l.toString()),n=(s=u.precision)+3;;)if(r=(o=r).plus(wO(this,o,n+2,1)).times(.5),wT(o.d).slice(0,n)===(e=wT(r.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(wA(r,s+1,1),t=!r.times(r).eq(this));break}if(!i&&(wA(o,s+1,0),o.times(o).eq(this))){r=o;break}n+=4,i=1}return wd=!0,wA(r,s,u.rounding,t)},wL.tangent=wL.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,(n=n.sin()).s=1,n=wO(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,wA(2==C7||4==C7?n.neg():n,t,e,!0)):new r(NaN)},wL.times=wL.mul=function(t){var e,n,r,i,o,a,s,l,u,h=this.constructor,c=this.d,d=(t=new h(t)).d;if(t.s*=this.s,!c||!c[0]||!d||!d[0])return new h(t.s&&(!c||c[0]||d)&&(!d||d[0]||c)?c&&d?0*t.s:t.s/0:NaN);for(n=wm(this.e/7)+wm(t.e/7),(l=c.length)<(u=d.length)&&(o=c,c=d,d=o,a=l,l=u,u=a),o=[],r=a=l+u;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+d[r]*c[i-r-1]+e,o[i--]=s%1e7|0,e=s/1e7|0;o[i]=(o[i]+e)%1e7|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=wN(o,n),wd?wA(t,h.precision,h.rounding):t},wL.toBinary=function(t,e){return wK(this,2,t,e)},wL.toDecimalPlaces=wL.toDP=function(t,e){var n=this,r=n.constructor;return(n=new r(n),void 0===t)?n:(wM(t,0,1e9),void 0===e?e=r.rounding:wM(e,0,8),wA(n,t+n.e+1,e))},wL.toExponential=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=wB(r,!0):(wM(t,0,1e9),void 0===e?e=i.rounding:wM(e,0,8),n=wB(r=wA(new i(r),t+1,e),!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n},wL.toFixed=function(t,e){var n,r,i=this.constructor;return void 0===t?n=wB(this):(wM(t,0,1e9),void 0===e?e=i.rounding:wM(e,0,8),n=wB(r=wA(new i(this),t+this.e+1,e),!1,t+r.e+1)),this.isNeg()&&!this.isZero()?"-"+n:n},wL.toFraction=function(t){var e,n,r,i,o,a,s,l,u,h,c,d,f=this.d,p=this.constructor;if(!f)return new p(this);if(u=n=new p(1),r=l=new p(0),a=(o=(e=new p(r)).e=wz(f)-this.e-1)%7,e.d[0]=wC(10,a<0?7+a:a),null==t)t=o>0?e:u;else{if(!(s=new p(t)).isInt()||s.lt(u))throw Error(wp+s);t=s.gt(e)?o>0?e:u:s}for(wd=!1,s=new p(wT(f)),h=p.precision,p.precision=o=14*f.length;c=wO(s,e,0,1,1),1!=(i=n.plus(c.times(r))).cmp(t);)n=r,r=i,i=u,u=l.plus(c.times(i)),l=i,i=e,e=s.minus(c.times(i)),s=i;return i=wO(t.minus(n),r,0,1,1),l=l.plus(i.times(u)),n=n.plus(i.times(r)),l.s=u.s=this.s,d=1>wO(u,r,o,1).minus(this).abs().cmp(wO(l,n,o,1).minus(this).abs())?[u,r]:[l,n],p.precision=h,wd=!0,d},wL.toHexadecimal=wL.toHex=function(t,e){return wK(this,16,t,e)},wL.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),null==t){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),void 0===e?e=r.rounding:wM(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(wd=!1,n=wO(n,t,0,e,1).times(t),wd=!0,wA(n)):(t.s=n.s,n=t),n},wL.toNumber=function(){return+this},wL.toOctal=function(t,e){return wK(this,8,t,e)},wL.toPower=wL.pow=function(t){var e,n,r,i,o,a,s=this,l=s.constructor,u=+(t=new l(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new l(wC(+s,u));if((s=new l(s)).eq(1))return s;if(r=l.precision,o=l.rounding,t.eq(1))return wA(s,r,o);if((e=wm(t.e/7))>=t.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return i=wH(l,s,n,r),t.s<0?new l(1).div(i):wA(i,r,o);if((a=s.s)<0){if(e<t.d.length-1)return new l(NaN);if((1&t.d[e])==0&&(a=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=a,s}return(e=0!=(n=wC(+s,u))&&isFinite(n)?new l(n+"").e:wm(u*(Math.log("0."+wT(s.d))/Math.LN10+s.e+1)))>l.maxE+1||e<l.minE-1?new l(e>0?a/0:0):(wd=!1,l.rounding=s.s=1,n=Math.min(12,(e+"").length),(i=wG(t.times(wV(s,r+n)),r)).d&&wR((i=wA(i,r+5,1)).d,r,o)&&(e=r+10,+wT((i=wA(wG(t.times(wV(s,e+n)),e),e+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=wA(i,r+1,0))),i.s=a,wd=!0,l.rounding=o,wA(i,r,o))},wL.toPrecision=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=wB(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(wM(t,1,1e9),void 0===e?e=i.rounding:wM(e,0,8),n=wB(r=wA(new i(r),t,e),t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n},wL.toSignificantDigits=wL.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(wM(t,1,1e9),void 0===e?e=n.rounding:wM(e,0,8)),wA(new n(this),t,e)},wL.toString=function(){var t=this.constructor,e=wB(this,this.e<=t.toExpNeg||this.e>=t.toExpPos);return this.isNeg()&&!this.isZero()?"-"+e:e},wL.truncated=wL.trunc=function(){return wA(new this.constructor(this),this.e+1,1)},wL.valueOf=wL.toJSON=function(){var t=this.constructor,e=wB(this,this.e<=t.toExpNeg||this.e>=t.toExpPos);return this.isNeg()?"-"+e:e};var wO=function(){function t(t,e,n){var r,i=0,o=t.length;for(t=t.slice();o--;)r=t[o]*e+i,t[o]=r%n|0,i=r/n|0;return i&&t.unshift(i),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(r,i,o,a,s,l){var u,h,c,d,f,p,v,g,y,m,C,w,x,S,b,_,E,L,T,M,R=r.constructor,I=r.s==i.s?1:-1,O=r.d,A=i.d;if(!O||!O[0]||!A||!A[0])return new R(r.s&&i.s&&(O?!A||O[0]!=A[0]:A)?O&&0==O[0]||!A?0*I:I/0:NaN);for(l?(f=1,h=r.e-i.e):(l=1e7,f=7,h=wm(r.e/f)-wm(i.e/f)),T=A.length,E=O.length,m=(y=new R(I)).d=[],c=0;A[c]==(O[c]||0);c++);if(A[c]>(O[c]||0)&&h--,null==o?(S=o=R.precision,a=R.rounding):S=s?o+(r.e-i.e)+1:o,S<0)m.push(1),p=!0;else{if(S=S/f+2|0,c=0,1==T){for(d=0,A=A[0],S++;(c<E||d)&&S--;c++)b=d*l+(O[c]||0),m[c]=b/A|0,d=b%A|0;p=d||c<E}else{for((d=l/(A[0]+1)|0)>1&&(A=t(A,d,l),O=t(O,d,l),T=A.length,E=O.length),_=T,w=(C=O.slice(0,T)).length;w<T;)C[w++]=0;(M=A.slice()).unshift(0),L=A[0],A[1]>=l/2&&++L;do d=0,(u=e(A,C,T,w))<0?(x=C[0],T!=w&&(x=x*l+(C[1]||0)),(d=x/L|0)>1?(d>=l&&(d=l-1),g=(v=t(A,d,l)).length,w=C.length,1==(u=e(v,C,g,w))&&(d--,n(v,T<g?M:A,g,l))):(0==d&&(u=d=1),v=A.slice()),(g=v.length)<w&&v.unshift(0),n(C,v,w,l),-1==u&&(w=C.length,(u=e(A,C,T,w))<1&&(d++,n(C,T<w?M:A,w,l))),w=C.length):0===u&&(d++,C=[0]),m[c++]=d,u&&C[0]?C[w++]=O[_]||0:(C=[O[_]],w=1);while((_++<E||void 0!==C[0])&&S--);p=void 0!==C[0]}m[0]||m.shift()}if(1==f)y.e=h,C6=p;else{for(c=1,d=m[0];d>=10;d/=10)c++;y.e=c+h*f-1,wA(y,s?o+y.e+1:o,a,p)}return y}}();function wA(t,e,n,r){var i,o,a,s,l,u,h,c,d,f=t.constructor;e:if(null!=e){if(!(c=t.d))return t;for(i=1,s=c[0];s>=10;s/=10)i++;if((o=e-i)<0)o+=7,a=e,l=(h=c[d=0])/wC(10,i-a-1)%10|0;else if((d=Math.ceil((o+1)/7))>=(s=c.length)){if(r){for(;s++<=d;)c.push(0);h=l=0,i=1,o%=7,a=o-7+1}else break e}else{for(i=1,h=s=c[d];s>=10;s/=10)i++;o%=7,l=(a=o-7+i)<0?0:h/wC(10,i-a-1)%10|0}if(r=r||e<0||void 0!==c[d+1]||(a<0?h:h%wC(10,i-a-1)),u=n<4?(l||r)&&(0==n||n==(t.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(o>0?a>0?h/wC(10,i-a):0:c[d-1])%10&1||n==(t.s<0?8:7)),e<1||!c[0])return c.length=0,u?(e-=t.e+1,c[0]=wC(10,(7-e%7)%7),t.e=-e||0):c[0]=t.e=0,t;if(0==o?(c.length=d,s=1,d--):(c.length=d+1,s=wC(10,7-o),c[d]=a>0?(h/wC(10,i-a)%wC(10,a)|0)*s:0),u)for(;;){if(0==d){for(o=1,a=c[0];a>=10;a/=10)o++;for(a=c[0]+=s,s=1;a>=10;a/=10)s++;o!=s&&(t.e++,1e7==c[0]&&(c[0]=1));break}if(c[d]+=s,1e7!=c[d])break;c[d--]=0,s=1}for(o=c.length;0===c[--o];)c.pop()}return wd&&(t.e>f.maxE?(t.d=null,t.e=NaN):t.e<f.minE&&(t.e=0,t.d=[0])),t}function wB(t,e,n){if(!t.isFinite())return wY(t);var r,i=t.e,o=wT(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+wP(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+wP(-i-1)+o,n&&(r=n-a)>0&&(o+=wP(r))):i>=a?(o+=wP(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+wP(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=wP(r))),o}function wN(t,e){var n=t[0];for(e*=7;n>=10;n/=10)e++;return e}function wD(t,e,n){if(e>w_)throw wd=!0,n&&(t.precision=n),Error(wv);return wA(new t(wu),e,1,!0)}function wk(t,e,n){if(e>wE)throw Error(wv);return wA(new t(wh),e,n,!0)}function wz(t){var e=t.length-1,n=7*e+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function wP(t){for(var e="";t--;)e+="0";return e}function wH(t,e,n,r){var i,o=new t(1),a=Math.ceil(r/7+4);for(wd=!1;;){if(n%2&&wZ((o=o.times(e)).d,a)&&(i=!0),0===(n=wm(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}wZ((e=e.times(e)).d,a)}return wd=!0,o}function wF(t){return 1&t.d[t.d.length-1]}function wW(t,e,n){for(var r,i=new t(e[0]),o=0;++o<e.length;)if((r=new t(e[o])).s)i[n](r)&&(i=r);else{i=r;break}return i}function wG(t,e){var n,r,i,o,a,s,l,u=0,h=0,c=0,d=t.constructor,f=d.rounding,p=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(null==e?(wd=!1,l=p):l=e,s=new d(.03125);t.e>-2;)t=t.times(s),c+=5;for(l+=r=Math.log(wC(2,c))/Math.LN10*2+5|0,n=o=a=new d(1),d.precision=l;;){if(o=wA(o.times(t),l,1),n=n.times(++h),wT((s=a.plus(wO(o,n,l,1))).d).slice(0,l)===wT(a.d).slice(0,l)){for(i=c;i--;)a=wA(a.times(a),l,1);if(null!=e)return d.precision=p,a;if(!(u<3&&wR(a.d,l-r,f,u)))return wA(a,d.precision=p,f,wd=!0);d.precision=l+=10,n=o=s=new d(1),h=0,u++}a=s}}function wV(t,e){var n,r,i,o,a,s,l,u,h,c,d,f=1,p=t,v=p.d,g=p.constructor,y=g.rounding,m=g.precision;if(p.s<0||!v||!v[0]||!p.e&&1==v[0]&&1==v.length)return new g(v&&!v[0]?-1/0:1!=p.s?NaN:v?0:p);if(null==e?(wd=!1,h=m):h=e,g.precision=h+=10,r=(n=wT(v)).charAt(0),!(15e14>Math.abs(o=p.e)))return u=wD(g,h+2,m).times(o+""),p=wV(new g(r+"."+n.slice(1)),h-10).plus(u),g.precision=m,null==e?wA(p,m,y,wd=!0):p;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=wT((p=p.times(t)).d)).charAt(0),f++;for(o=p.e,r>1?(p=new g("0."+n),o++):p=new g(r+"."+n.slice(1)),c=p,l=a=p=wO(p.minus(1),p.plus(1),h,1),d=wA(p.times(p),h,1),i=3;;){if(a=wA(a.times(d),h,1),wT((u=l.plus(wO(a,new g(i),h,1))).d).slice(0,h)===wT(l.d).slice(0,h)){if(l=l.times(2),0!==o&&(l=l.plus(wD(g,h+2,m).times(o+""))),l=wO(l,new g(f),h,1),null!=e)return g.precision=m,l;if(!wR(l.d,h-10,y,s))return wA(l,g.precision=m,y,wd=!0);g.precision=h+=10,u=a=p=wO(c.minus(1),c.plus(1),h,1),d=wA(p.times(p),h,1),i=s=1}l=u,i+=2}}function wY(t){return String(t.s*t.s/0)}function wU(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;48===e.charCodeAt(r);r++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(r,i)){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=7;r<i;)t.d.push(+e.slice(r,r+=7));r=7-(e=e.slice(r)).length}else r-=i;for(;r--;)e+="0";t.d.push(+e),wd&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function wj(t,e,n,r,i){var o,a,s,l,u=t.precision,h=Math.ceil(u/7);for(wd=!1,l=n.times(n),s=new t(r);;){if(a=wO(s.times(l),new t(e++*e++),u,1),s=i?r.plus(a):r.minus(a),r=wO(a.times(l),new t(e++*e++),u,1),void 0!==(a=s.plus(r)).d[h]){for(o=h;a.d[o]===s.d[o]&&o--;);if(-1==o)break}o=s,s=r,r=a,a=o}return wd=!0,a.d.length=h+1,a}function wX(t,e){for(var n=t;--e;)n*=t;return n}function wq(t,e){var n,r=e.s<0,i=wk(t,t.precision,1),o=i.times(.5);if((e=e.abs()).lte(o))return C7=r?4:1,e;if((n=e.divToInt(i)).isZero())C7=r?3:2;else{if((e=e.minus(n.times(i))).lte(o))return C7=wF(n)?r?2:3:r?4:1,e;C7=wF(n)?r?1:4:r?3:2}return e.minus(i).abs()}function wK(t,e,n,r){var i,o,a,s,l,u,h,c,d,f=t.constructor,p=void 0!==n;if(p?(wM(n,1,1e9),void 0===r?r=f.rounding:wM(r,0,8)):(n=f.precision,r=f.rounding),t.isFinite()){for(a=(h=wB(t)).indexOf("."),p?(i=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):i=e,a>=0&&(h=h.replace(".",""),(d=new f(1)).e=h.length-a,d.d=wI(wB(d),10,i),d.e=d.d.length),o=l=(c=wI(h,10,i)).length;0==c[--l];)c.pop();if(c[0]){if(a<0?o--:((t=new f(t)).d=c,t.e=o,c=(t=wO(t,d,n,r,0,i)).d,o=t.e,u=C6),a=c[n],s=i/2,u=u||void 0!==c[n+1],u=r<4?(void 0!==a||u)&&(0===r||r===(t.s<0?3:2)):a>s||a===s&&(4===r||u||6===r&&1&c[n-1]||r===(t.s<0?8:7)),c.length=n,u)for(;++c[--n]>i-1;)c[n]=0,n||(++o,c.unshift(1));for(l=c.length;!c[l-1];--l);for(a=0,h="";a<l;a++)h+=wl.charAt(c[a]);if(p){if(l>1){if(16==e||8==e){for(a=16==e?4:3,--l;l%a;l++)h+="0";for(l=(c=wI(h,i,e)).length;!c[l-1];--l);for(a=1,h="1.";a<l;a++)h+=wl.charAt(c[a])}else h=h.charAt(0)+"."+h.slice(1)}h=h+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)h="0"+h;h="0."+h}else if(++o>l)for(o-=l;o--;)h+="0";else o<l&&(h=h.slice(0,o)+"."+h.slice(o))}else h=p?"0p+0":"0";h=(16==e?"0x":2==e?"0b":8==e?"0o":"")+h}else h=wY(t);return t.s<0?"-"+h:h}function wZ(t,e){if(t.length>e)return t.length=e,!0}function w$(t){return new this(t).abs()}function wQ(t){return new this(t).acos()}function wJ(t){return new this(t).acosh()}function w0(t,e){return new this(t).plus(e)}function w1(t){return new this(t).asin()}function w2(t){return new this(t).asinh()}function w4(t){return new this(t).atan()}function w3(t){return new this(t).atanh()}function w5(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,o=r+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?wk(this,r,i):new this(0)).s=t.s:!t.d||e.isZero()?(n=wk(this,o,1).times(.5)).s=t.s:e.s<0?(this.precision=o,this.rounding=1,n=this.atan(wO(t,e,o,1)),e=wk(this,o,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(wO(t,e,o,1)):(n=wk(this,o,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function w8(t){return new this(t).cbrt()}function w6(t){return wA(t=new this(t),t.e+1,2)}function w7(t,e,n){return new this(t).clamp(e,n)}function w9(t){if(!t||"object"!=typeof t)throw Error(wf+"Object expected");var e,n,r,i=!0===t.defaults,o=["precision",1,1e9,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,9e15,"maxE",0,9e15,"minE",-9e15,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],i&&(this[n]=wc[n]),void 0!==(r=t[n])){if(wm(r)===r&&r>=o[e+1]&&r<=o[e+2])this[n]=r;else throw Error(wp+n+": "+r)}if(n="crypto",i&&(this[n]=wc[n]),void 0!==(r=t[n])){if(!0===r||!1===r||0===r||1===r){if(r){if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(wg)}else this[n]=!1}else throw Error(wp+n+": "+r)}return this}function xt(t){return new this(t).cos()}function xe(t){return new this(t).cosh()}function xn(t,e){return new this(t).div(e)}function xr(t){return new this(t).exp()}function xi(t){return wA(t=new this(t),t.e+1,3)}function xo(){var t,e,n=new this(0);for(t=0,wd=!1;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return wd=!0,new this(1/0);n=e}return wd=!0,n.sqrt()}function xa(t){return t instanceof xT||t&&t.toStringTag===wy||!1}function xs(t){return new this(t).ln()}function xl(t,e){return new this(t).log(e)}function xu(t){return new this(t).log(2)}function xh(t){return new this(t).log(10)}function xc(){return wW(this,arguments,"lt")}function xd(){return wW(this,arguments,"gt")}function xf(t,e){return new this(t).mod(e)}function xp(t,e){return new this(t).mul(e)}function xv(t,e){return new this(t).pow(e)}function xg(t){var e,n,r,i,o=0,a=new this(1),s=[];if(void 0===t?t=this.precision:wM(t,1,1e9),r=Math.ceil(t/7),this.crypto){if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=e[o])>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:s[o++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);o<r;)(i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((127&e[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,o):(s.push(i%1e7),o+=4);o=r/4}else throw Error(wg)}else for(;o<r;)s[o++]=1e7*Math.random()|0;for(r=s[--o],t%=7,r&&t&&(i=wC(10,7-t),s[o]=(r/i|0)*i);0===s[o];o--)s.pop();if(o<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=7)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return a.e=n,a.d=s,a}function xy(t){return wA(t=new this(t),t.e+1,this.rounding)}function xm(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function xC(t){return new this(t).sin()}function xw(t){return new this(t).sinh()}function xx(t){return new this(t).sqrt()}function xS(t,e){return new this(t).sub(e)}function xb(){var t=0,e=arguments,n=new this(e[t]);for(wd=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return wd=!0,wA(n,this.precision,this.rounding)}function x_(t){return new this(t).tan()}function xE(t){return new this(t).tanh()}function xL(t){return wA(t=new this(t),t.e+1,1)}wL[Symbol.for("nodejs.util.inspect.custom")]=wL.toString,wL[Symbol.toStringTag]="Decimal";var xT=wL.constructor=function t(e){var n,r,i;function o(t){var e,n,r;if(!(this instanceof o))return new o(t);if(this.constructor=o,xa(t)){this.s=t.s,wd?!t.d||t.e>o.maxE?(this.e=NaN,this.d=null):t.e<o.minE?(this.e=0,this.d=[0]):(this.e=t.e,this.d=t.d.slice()):(this.e=t.e,this.d=t.d?t.d.slice():t.d);return}if("number"==(r=typeof t)){if(0===t){this.s=1/t<0?-1:1,this.e=0,this.d=[0];return}if(t<0?(t=-t,this.s=-1):this.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;wd?e>o.maxE?(this.e=NaN,this.d=null):e<o.minE?(this.e=0,this.d=[0]):(this.e=e,this.d=[t]):(this.e=e,this.d=[t]);return}if(0*t!=0){t||(this.s=NaN),this.e=NaN,this.d=null;return}return wU(this,t.toString())}if("string"!==r)throw Error(wp+t);return 45===(n=t.charCodeAt(0))?(t=t.slice(1),this.s=-1):(43===n&&(t=t.slice(1)),this.s=1),wb.test(t)?wU(this,t):function(t,e){var n,r,i,o,a,s,l,u,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),wb.test(e))return wU(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(wx.test(e))n=16,e=e.toLowerCase();else if(ww.test(e))n=2;else if(wS.test(e))n=8;else throw Error(wp+e);for((o=e.search(/p/i))>0?(l=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),a=(o=e.indexOf("."))>=0,r=t.constructor,a&&(o=(s=(e=e.replace(".","")).length)-o,i=wH(r,new r(n),o,2*o)),o=h=(u=wI(e,n,1e7)).length-1;0===u[o];--o)u.pop();return o<0?new r(0*t.s):(t.e=wN(u,h),t.d=u,wd=!1,a&&(t=wO(t,i,4*s)),l&&(t=t.times(54>Math.abs(l)?wC(2,l):xT.pow(2,l))),wd=!0,t)}(this,t)}if(o.prototype=wL,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=w9,o.clone=t,o.isDecimal=xa,o.abs=w$,o.acos=wQ,o.acosh=wJ,o.add=w0,o.asin=w1,o.asinh=w2,o.atan=w4,o.atanh=w3,o.atan2=w5,o.cbrt=w8,o.ceil=w6,o.clamp=w7,o.cos=xt,o.cosh=xe,o.div=xn,o.exp=xr,o.floor=xi,o.hypot=xo,o.ln=xs,o.log=xl,o.log10=xh,o.log2=xu,o.max=xc,o.min=xd,o.mod=xf,o.mul=xp,o.pow=xv,o.random=xg,o.round=xy,o.sign=xm,o.sin=xC,o.sinh=xw,o.sqrt=xx,o.sub=xS,o.sum=xb,o.tan=x_,o.tanh=xE,o.trunc=xL,void 0===e&&(e={}),e&&!0!==e.defaults)for(n=0,i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"];n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return o.config(e),o}(wc);wu=new xT(wu),wh=new xT(wh);var xM=function(t){return"number"==typeof t?Number.isNaN(t):!t||"string"!=typeof t||Number.isNaN(Number(t))},xR=function(t,e,n){return(void 0===n&&(n=!1),null==t?void 0:t.length)?t.reduce(function(t,r){var i=sd(r,e),o=xM(i);if(n&&o)return t;var a=o?0:i;return t.push(new xT(a)),t},[]):[]},xI=function(t,e){var n=xR(t,e);return n.length?xT.sum.apply(xT,p([],f(n),!1)).toNumber():0},xO=function(t,e,n){var r=xR(e,n,!0);if(null==r?void 0:r.length)return xT[t].apply(xT,p([],f(r),!1)).toNumber()},xA=((i={})[C4.SUM]=xI,i[C4.MIN]=function(t,e){return xO("min",t,e)},i[C4.MAX]=function(t,e){return xO("max",t,e)},i[C4.AVG]=function(t,e){var n=xR(t,e);return(null==n?void 0:n.length)?xT.sum.apply(xT,p([],f(n),!1)).dividedBy(n.length).toNumber():0},i),xB=function(t){var e=t.spreadsheet,n=t.position,r=t.tooltipContainer,i=t.autoAdjustBoundary,o=e.getCanvasElement(),a=n.x+15,s=n.y+10;if(!i||!o)return{x:a,y:s};var l="body"===i,u=e.facet.panelBBox,h=u.maxX,c=u.maxY,d=e.options,f=d.width,p=d.height,v=o.getBoundingClientRect(),g=v.top,y=v.left,m=r.getBoundingClientRect(),C=m.width,w=m.height,x=document.body.getBoundingClientRect(),S=x.width,b=x.height,_=l?S:Math.min(f,h)+y,E=l?b:Math.min(p,c)+g;return a+C>=_&&(a=_-C),s+w>=E&&(s=E-w),{x:a,y:s}},xN=function(t){return h({operator:{onClick:oO,menus:[]},enterable:!0,enableFormat:!0},t)},xD=function(t){return h(h({},null==t?void 0:t.colQuery),null==t?void 0:t.rowQuery)},xk=function(t,e){if(t){var n,r=e.style,i=e.className,o=void 0===i?[]:i,a=e.visible;if(r&&Object.assign(t.style,r),o.length){var s=o.filter(Boolean);(n=t.classList).add.apply(n,p([],f(s),!1))}t.classList.toggle(vw,a),t.classList.toggle(vx,!a)}},xz=function(t){var e=cW(t)&&Number.isNaN(t),n=""===t;return cY(t)||e||n?"-":t},xP=function(t,e){var n,r=null===(n=null==t?void 0:t.dataSet)||void 0===n?void 0:n.getFieldFormatter(e);return function(t,e){return xz(r(t,e))}},xH=function(t,e){var n,r=e.data,i=e.field,o=e.valueField,a=e.useCompleteDataForFormatter,s=null===(n=null==t?void 0:t.dataSet)||void 0===n?void 0:n.getFieldName(i),l=xP(t,i),u=i5(r[i])?JSON.stringify(r[i]):r[i];return{name:s,value:l(o||u,void 0===a||a?r:void 0)}},xF=function(t,e,n){return hK(hz(uv([],e),function(t){return t!==r5&&n[t]}),function(e){return xH(t,{data:n,field:e,useCompleteDataForFormatter:!1})})},xW=function(t,e,n){var r,i,o,a,s=(n||{}).isTotals,l=[],u=[];if(e){var h=null===(i=null===(r=null==t?void 0:t.dataSet)||void 0===r?void 0:r.fields)||void 0===i?void 0:i.columns,c=null===(a=null===(o=null==t?void 0:t.dataSet)||void 0===o?void 0:o.fields)||void 0===a?void 0:a.rows;l=xF(t,ga(h||[]),e),u=xF(t,c,e)}return cP(l)&&cP(u)&&s&&(l=[{value:vy("总计")}]),{cols:l,rows:u}},xG=function(t,e,n){if(e){var r=n.isTotals,i=e[r5],o=e[i],a=[];if(r)a.push(xH(t,{data:e,field:i,valueField:sd(e,r3)}));else if(i5(o)&&"values"in o&&t.getTooltipDataItemMappingCallback()){var s=yY(e,t.getTooltipDataItemMappingCallback());hm(s,function(e,n){a.push(xH(t,{data:s,field:n}))})}else a.push(xH(t,{data:e,field:i}));return a}},xV=function(t,e,n){if(n)return vy("总计");var r,i=null===(r=null==t?void 0:t.dataSet)||void 0===r?void 0:r.getFieldName(e);return i&&"undefined"!==i?i:""},xY=function(t,e,n){void 0===n&&(n=!0);var r=[];return hm(e,function(e,i){hm(t,function(t){n||-1===t.colIndex?n&&-1!==t.rowIndex&&r.push([t.rowIndex,i]):r.push([i,t.colIndex])})}),r},xU=function(t,e){var n,r=e.rowLeafNodes,i=e.colLeafNodes,o=t.interaction.getState(),a=o.nodes,s=void 0===a?[]:a,l=o.cells,u=void 0===l?[]:l,h=null===(n=null==u?void 0:u[0])||void 0===n?void 0:n.type;return h===CG.COL_CELL?xY(s,r,!1):h===CG.ROW_CELL?xY(s,i):[]},xj=function(t,e,n){var r,i=null===(r=t.facet)||void 0===r?void 0:r.layoutResult,o=function(t){var n=null==e?void 0:e.getMeta(),r=null==n?void 0:n.isTotals,o=(null==e?void 0:e.cellType)===CG.COL_CELL,a=(null==e?void 0:e.cellType)===CG.ROW_CELL;if(!o&&!a)return!1;var s=i.colNodes.find(function(e){return e.colIndex===t.colIndex}),l=i.rowNodes.find(function(e){return e.rowIndex===t.rowIndex}),u=o?null==l?void 0:l.isTotals:null==s?void 0:s.isTotals;return!r&&(null==t?void 0:t.isTotals)||r&&u};return n?up(hK(xU(t,i),function(t){var e=f(t,2),n=e[0],r=e[1],a=i.getCellMeta(n,r);if(!o(a))return(null==a?void 0:a.data)||xD(a)})):t.interaction.getCells().filter(function(t){return!o(i.getCellMeta(t.rowIndex,t.colIndex))}).map(function(t){var e=i.getCellMeta(t.rowIndex,t.colIndex);return(null==e?void 0:e.data)||xD(e)})},xX=function(t){var e=t.spreadsheet,n=t.targetCell,r=t.options,i=void 0===r?{}:r,o=[],a={};if(e.isTableMode()&&(null==i?void 0:i.showSingleTips)){var s=n.getMeta();return[{selectedData:(null==s?void 0:s.field)?e.dataSet.getMultiData({field:s.field}):[e.dataSet.getRowData(s)],name:"",value:""}]}return hm(xj(e,n,i.showSingleTips),function(t){var e;a[null==t?void 0:t[r5]]?null===(e=a[null==t?void 0:t[r5]])||void 0===e||e.push(t):a[null==t?void 0:t[r5]]=[t]}),c5(a,function(t,n){var r,s=xV(e,n,null==i?void 0:i.isTotals),l="",u="";if(hN(t,function(t){return xM(sd(t,r3))})){var h=gq(a,e.options.placeholder);l=h,u=h}else{var c=xP(e,n),d=xI(t,r3);u=d,l=null!==(r=null==c?void 0:c(d,t))&&void 0!==r?r:parseFloat(d.toPrecision(16))}o.push({selectedData:t,name:s,value:l,originValue:u})}),o},xq=function(t){if(t){var e=t.getMeta();if(!e.isTotals){var n=hW(e.spreadsheet.dataCfg.meta,{field:e.field||e.value||e.valueField}),r=null==n?void 0:n.field;return e.spreadsheet.dataSet.getFieldDescription(r)}}},xK=function(t){var e=t.spreadsheet,n=t.cellInfos,r=t.options,i=void 0===r?{}:r,o=t.targetCell,a=null,s=null,l=null,u=xq(o),h=(void 0===n?[]:n)[0]||{};if(null==i?void 0:i.hideSummary){if(i.showSingleTips){var c=xP(e,h.valueField)(h.value),d=i.enableFormat?e.dataSet.getFieldName(h.value)||c:e.dataSet.getFieldName(h.valueField);h.name=d||""}else s=xW(e,h,i),l=xG(e,h,i)}else a=xX({spreadsheet:e,options:i,targetCell:o});var f=h||{};return{summaries:a,interpretation:f.interpretation,infos:f.infos,tips:f.tips,name:f.name,headInfo:s,details:l,description:u}},xZ=function(t){if(!t.interaction.isSelectedState())return[];var e=t.dataCfg.fields.valueInCols;return t.interaction.getCells().reduce(function(n,r){var i=t.facet.layoutResult.getCellMeta(null==r?void 0:r.rowIndex,null==r?void 0:r.colIndex),o=xD(i);if(cP(i)||cP(o))return[];var a=h(h({},o),{colIndex:e?i.colIndex:null,rowIndex:e?null:i.rowIndex});return n.find(function(t){return uR(a,t)})||n.push(a),n},[])},x$=function(t,e){void 0===t&&(t={});var n=function(e){return wi(t,e)},r=t.col,i=t.row,o=t.data,a=t.corner;return e===CG.COL_CELL?n(r):e===CG.ROW_CELL?n(i):e===CG.DATA_CELL?n(o):e===CG.CORNER_CELL?n(a):h({},t)},xQ=function(t,e){if(e&&t){var n,r=null===(n=t.getCellType)||void 0===n?void 0:n.call(t,null==e?void 0:e.target);return x$(t.options.tooltip,r)}},xJ=function(t,e){var n=e.defaultMenus,r=e.cell,i=function(t){return void 0===t&&(t=[]),t.filter(function(t){var e;return oa(t.visible)?t.visible(r):null===(e=t.visible)||void 0===e||e}).map(function(t){return t.children&&(t.children=i(t.children)),t})},o=i(t.menus);return{onClick:t.onClick,menus:up(p(p([],f(void 0===n?[]:n),!1),f(o),!1))}},x0=function(t,e){for(var n=!1,r=e;r&&r!==document.body;){if(t===r){n=!0;break}r=r.parentElement}return n},x1=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"".concat(iC,"-").concat(t.join("-"))},x2=function(t){t.store.set(iw,ix)},x4=function(t,e){var n=t.store.get(iw,ix);t.store.set(iw,h(h({},n),e))},x3=function(){function t(t){var e=this;this.getFieldMeta=sr(function(t,n){return hW(e.meta||n,function(e){return e.field===t})}),this.spreadsheet=t}return t.prototype.getFieldName=function(t){return sd(this.getFieldMeta(t,this.meta),"name",t)},t.prototype.getFieldFormatter=function(t){return sd(this.getFieldMeta(t,this.meta),"formatter",oo)},t.prototype.getFieldDescription=function(t){return sd(this.getFieldMeta(t,this.meta),"description")},t.prototype.setDataCfg=function(t){this.getFieldMeta.cache.clear();var e=this.processDataCfg(t),n=e.fields,r=e.meta,i=e.data,o=e.totalData,a=e.sortParams,s=e.filterParams;this.fields=n,this.meta=r,this.originData=i,this.totalData=o,this.sortParams=a,this.filterParams=s,this.displayData=this.originData,this.indexesData={}},t.prototype.processMeta=function(t,e){var n,r,i;return void 0===t&&(t=[]),p(p([],f(t),!1),[(i=t,{field:r5,name:(null===(r=null===(n=this.spreadsheet)||void 0===n?void 0:n.options)||void 0===r?void 0:r.cornerExtraFieldText)||e,formatter:function(t){return sd(hW(i,function(e){return e.field===t}),"name",t)}})],!1)},t.prototype.getDisplayDataSet=function(){return this.displayData},t.prototype.isEmpty=function(){return cP(this.getDisplayDataSet())},t.prototype.getEmptyViewIndexes=function(){return[]},t.prototype.getValueRangeByField=function(t){var e,n=this.spreadsheet.store.get(iw,ix)[t];if(n)return n;var r=up(hK(this.originData,function(e){var n=e[t];return cY(n)?null:Number.parseFloat(n)})),i={maxValue:c7(r),minValue:ds(r)};return x4(this.spreadsheet,((e={})[t]=i,e)),i},t.prototype.moreThanOneValue=function(){var t,e;return(null===(e=null===(t=this.fields)||void 0===t?void 0:t.values)||void 0===e?void 0:e.length)>1},t}(),x5=function(){function t(t){this.extraField=t}return t.createProxyData=function(e,n){return new Proxy(e,new t(n))},t.createProxyDataList=function(e,n){return n.map(function(n){return t.createProxyData(e,n)})},t.prototype.get=function(t,e){return e===r8?t:e===r5?this.extraField:e===r3?t[this.extraField]:t[e]},t.prototype.has=function(t,e){return e===r5||e===r3||e in t},t.prototype.ownKeys=function(t){return Object.keys(t).concat(r5,r3)},t.prototype.getOwnPropertyDescriptor=function(t,e){return e===r5||e===r3?{configurable:!0,enumerable:!0}:Object.getOwnPropertyDescriptor(t,e)},t}(),x8=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleDimensionValuesSort=function(){hm(e.sortParams,function(t){var n=t.sortFieldId,r=t.sortByMeasure;if(n){var i=p([],f(e.sortedDimensionValues[n]||[]),!1),o=mB({dataSet:e,sortParam:t,originValues:i,isSortByMeasure:!cP(r)});e.sortedDimensionValues[n]=o,e.handlePivotMetaSort(n,o)}})},e.getTotalStatus=function(t){var n=e.fields,r=n.columns,i=n.rows,o=function(e,n){if(n){var r=hW(e,function(e){return!ci(t,e)});return r&&r!==hX(e)}return hN(e,function(e){return!ci(t,e)})},a=function(t,e){return e?t.filter(function(t){return t!==r5}):t};return{isRowTotal:o(a(i,!e.spreadsheet.isValueInCols())),isRowSubTotal:o(i,!0),isColTotal:o(a(r,e.spreadsheet.isValueInCols())),isColSubTotal:o(r,!0)}},e}return u(e,t),e.prototype.getExistValuesByDataItem=function(t,e){return g1(t,e)},e.prototype.setDataCfg=function(e){t.prototype.setDataCfg.call(this,e);var n=this.fields.rows;this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map,this.transformIndexesData(this.originData.concat(this.totalData),n),this.handleDimensionValuesSort()},e.prototype.transformIndexesData=function(t,e){var n,r=this,i=this.fields,o=i.columns,a=i.values,s=i.valueInCols;return vI.getInstance().debugCallback("Transform Data",function(){var i,l,u,h,c,f,p,v,g,y,m,C,w,x,S,b;l=(i={rows:e,columns:o,values:a,valueInCols:s,data:t,indexesData:r.indexesData,sortedDimensionValues:r.sortedDimensionValues,rowPivotMeta:r.rowPivotMeta,colPivotMeta:r.colPivotMeta,getExistValuesByDataItem:r.getExistValuesByDataItem}).rows,u=i.columns,h=i.values,c=i.valueInCols,f=i.data,v=void 0===(p=i.indexesData)?{}:p,g=i.sortedDimensionValues,y=i.rowPivotMeta,m=i.colPivotMeta,C=i.getExistValuesByDataItem,w=[],x=new Set(cm(l,u)),S=function(t){var e=t.dimension,n=t.dimensionPath,r=t.careRepeated;(void 0===r||r)&&x.has(e)||(g[e]||(g[e]=[])).push(n)},b=g4(l,u),(void 0===f?[]:f).forEach(function(t){if(!(!t||cP(t))){var e,n,r,i,o=C?C(t,h):g1(t,h),a=g2(t,l,c?null:o),s=g2(t,u,c?o:null);try{for(var f=d(a),p=f.next();!p.done;p=f.next()){var g=p.value;try{for(var x=(r=void 0,d(s)),_=x.next();!_.done;_=x.next()){var E=_.value,L=g3({rowDimensionValues:g,colDimensionValues:E,rowPivotMeta:y,colPivotMeta:m,rowFields:l,colFields:u,isFirstCreate:!0,onFirstCreate:S,prefix:b});w.push(L),fg(v,L,t)}}catch(t){r={error:t}}finally{try{_&&!_.done&&(i=x.return)&&i.call(x)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}}}),n={paths:w,indexesData:v,rowPivotMeta:y,colPivotMeta:m,sortedDimensionValues:g},r.indexesData=n.indexesData,r.rowPivotMeta=n.rowPivotMeta,r.colPivotMeta=n.colPivotMeta,r.sortedDimensionValues=n.sortedDimensionValues}),n},e.prototype.transformDrillDownData=function(t,e,n){var r,i=this,o=p(p([],f(vE.getFieldPath(n,!0)),!1),[t],!1),a=this.spreadsheet.store,s=null==n?void 0:n.id,l=null!==(r=a.get("drillDownIdPathMap"))&&void 0!==r?r:new Map;l.has(s)&&(hm(l.get(s),function(t){pi(i.indexesData,t)}),g5(this.rowPivotMeta,s));var u=this.transformIndexesData(e,o).paths;l.set(s,u),a.set("drillDownIdPathMap",l)},e.prototype.clearDrillDownData=function(t){var e=this,n=this.spreadsheet.store,r=n.get("drillDownIdPathMap");if(!r)return!1;var i=n.get("drillDownDataCache",[]);if(t){var o=r.get(t);o&&hm(o,function(t){pi(e.indexesData,t)}),g5(this.rowPivotMeta,t),r.delete(t);var a=hz(i,function(t){return r.has(null==t?void 0:t.rowId)});n.set("drillDownDataCache",a);var s=a.map(function(t){return null==t?void 0:t.drillLevel}),l=n.get("drillDownFieldInLevel",[]).filter(function(t){return cd(s,null==t?void 0:t.drillLevel)});n.set("drillDownFieldInLevel",l)}else{r.clear();var u=this.spreadsheet.store.get("originalDataCfg");cP(u)||this.spreadsheet.setDataCfg(u),this.spreadsheet.store.set("drillItemsNum",-1),this.spreadsheet.store.set("drillDownDataCache",[]),this.spreadsheet.store.set("drillDownFieldInLevel",[])}return n.set("drillDownIdPathMap",r),!0},e.prototype.handlePivotMetaSort=function(t,e){var n=this.fields,r=n.rows,i=n.columns;cd(r,t)?this.rowPivotMeta=mD({pivotMeta:this.rowPivotMeta,dimensions:r,sortFieldId:t,sortedDimensionValues:e}):cd(i,t)&&(this.colPivotMeta=mD({pivotMeta:this.colPivotMeta,dimensions:i,sortFieldId:t,sortedDimensionValues:e}))},e.prototype.processDataCfg=function(t){var e=t.data,n=t.meta,r=t.fields,i=t.sortParams,o=t.totalData,a=r.columns,s=r.rows,l=r.values,u=r.valueInCols,c=r.customValueOrder,d=a,v=s;return u?d=this.isCustomMeasuresPosition(c)?this.handleCustomMeasuresOrder(c,d):pn(p(p([],f(a),!1),[r5],!1)):v=this.isCustomMeasuresPosition(c)?this.handleCustomMeasuresOrder(c,v):pn(p(p([],f(s),!1),[r5],!1)),{data:e,totalData:o,meta:this.processMeta(void 0===n?[]:n,vy("数值")),fields:h(h({},r),{rows:v,columns:d,values:l}),sortParams:void 0===i?[]:i}},e.prototype.getFieldsAndPivotMetaByField=function(t){var e=this.fields||{},n=e.rows,r=void 0===n?[]:n,i=e.columns,o=void 0===i?[]:i;return r.includes(t)?{dimensions:r,pivotMeta:this.rowPivotMeta}:o.includes(t)?{dimensions:o,pivotMeta:this.colPivotMeta}:{}},e.prototype.getDimensionValues=function(t,e){void 0===e&&(e={});var n=this.getFieldsAndPivotMetaByField(t),r=n.pivotMeta,i=n.dimensions;return r&&i?pn(g6({pivotMeta:r,dimensionValues:g0(e,i,r7),fields:i,fieldIdx:cp(i,t),queryType:C1.DetailOnly,sortedDimensionValues:this.sortedDimensionValues}).map(function(t){return t.value})):[]},e.prototype.getTotalValue=function(t,e){var n,r,i,o,a,s,l,u,c,d,f,p,v,g,y,m,C,w,x=(i=fw(e)?e:this.getTotalStatus(t),o=null===(r=this.spreadsheet.options)||void 0===r?void 0:r.totals,a=i.isRowTotal,s=i.isRowSubTotal,l=i.isColTotal,u=i.isColSubTotal,d=(c=o||{}).row,f=c.col,v=(p=d||{}).calcTotals,g=p.calcSubTotals,m=(y=f||{}).calcTotals,C=y.calcSubTotals,(w=function(t,e){if((t.aggregation||t.calcFunc)&&e)return{aggregation:t.aggregation,calcFunc:t.calcFunc}})(void 0===m?{}:m,l)||w(void 0===C?{}:C,u)||w(void 0===v?{}:v,a)||w(void 0===g?{}:g,s)||{}),S=x.aggregation,b=x.calcFunc,_=xA[S];if(_||b){var E=this.getMultiData(t,{queryType:C1.DetailOnly}),L=void 0;return b?L=b(t,E):_&&(L=_(E,r3)),h(h({},t),((n={})[r3]=L,n[t[r5]]=L,n))}},e.prototype.getCellData=function(t){var e,n,r,i=t||{},o=i.query,a=void 0===o?{}:o,s=i.rowNode,l=i.isTotals,u=i.totalStatus,h=this.fields,c=h.rows,d=h.columns,f=c,p=null===(e=this.spreadsheet)||void 0===e?void 0:e.store.get("drillDownIdPathMap"),v=Array.from(null!==(n=null==p?void 0:p.keys())&&void 0!==n?n:[]).some(function(t){return null==s?void 0:s.id.startsWith(t)});s&&v&&(f=null!==(r=vE.getFieldPath(s,v))&&void 0!==r?r:c);var g=g3({rowDimensionValues:g0(a,f),colDimensionValues:g0(a,d),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:f,colFields:d,prefix:g4(f,d)}),y=sd(this.indexesData,g);return y?x5.createProxyData(y,a[r5]):void 0!==l&&l?this.getTotalValue(a,u):void 0},e.prototype.getQueryExtraFields=function(t){var e=this.fields.values,n=t[r5];return n?cd(e,n)?[n]:[]:e},e.prototype.getMultiData=function(t,e,n,r,i){void 0===t&&(t={}),void 0===r&&(r=[]),void 0===i&&(i=!0),cP(t)&&console.warn("query: ".concat(t," shouldn't be empty, you can get all data from dataCfg if you're intended.\n you should use { EXTRA_FIELD: xxx} as least if you want query all specific value data"));var o=i5(e)?e:{queryType:i?C1.All:C1.DetailOnly,drillDownFields:r},a=o.drillDownFields,s=void 0===a?[]:a,l=o.queryType,u=void 0===l?C1.All:l,h=this.fields,c=h.rows,v=h.columns,g=cP(s)?c:c.concat(s),y=(M=(T={rowDimensionValues:g0(t,g,r7),colDimensionValues:g0(t,v,r7),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:g,colFields:v,sortedDimensionValues:this.sortedDimensionValues,queryType:u}).rowFields,R=T.rowDimensionValues,I=T.rowPivotMeta,O=T.colFields,A=T.colDimensionValues,B=T.colPivotMeta,N=T.queryType,{rowQueries:g7({dimensionValues:R,pivotMeta:I,fields:M,sortedDimensionValues:D=T.sortedDimensionValues,queryType:N}),colQueries:g7({dimensionValues:A,pivotMeta:B,fields:O,sortedDimensionValues:D,queryType:N})}),m=y.rowQueries,C=y.colQueries,w=g4(g,v),x=[];try{for(var S=d(m),b=S.next();!b.done;b=S.next()){var _=b.value;try{for(var E=(P=void 0,d(C)),L=E.next();!L.done;L=E.next()){for(var T,M,R,I,O,A,B,N,D,k,z,P,H,F,W=L.value,G=g3({rowDimensionValues:_,colDimensionValues:W,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:g,colFields:v,prefix:w}),V=!1,Y=this.indexesData,U=0;U<G.length;U++)(function(t){var e=G[t];V?Y=e===r7?function(t,e){return t?iq(t)?hZ(t,function(t){if(!iq(t))return up([t]);var n=e===C1.DetailOnly?1:0;return up(t.slice(n))}):up([t]):[]}(Y,u):up(hK(Y,function(t){return null==t?void 0:t[e]})):e===r7?(V=!0,Y=up([Y]),t--):Y=null==Y?void 0:Y[e],F=t})(U),U=F;iq(Y)?x.push.apply(x,p([],f(Y),!1)):Y&&x.push(Y)}}catch(t){P={error:t}}finally{try{L&&!L.done&&(H=E.return)&&H.call(E)}finally{if(P)throw P.error}}}}catch(t){k={error:t}}finally{try{b&&!b.done&&(z=S.return)&&z.call(S)}finally{if(k)throw k.error}}var j=this.getQueryExtraFields(t);return hZ(pn(x),function(t){return t?x5.createProxyDataList(t,j):[]})},e.prototype.getFieldFormatter=function(e,n){return e===r6?this.getFieldFormatterForTotalValue(n):t.prototype.getFieldFormatter.call(this,e)},e.prototype.getFieldFormatterForTotalValue=function(e){var n;return!this.spreadsheet.isValueInCols()&&e&&(n=sd(e.rowQuery,r5)),n=null!=n?n:sd(this.fields.values,0),t.prototype.getFieldFormatter.call(this,n)},e.prototype.handleCustomMeasuresOrder=function(t,e){var n=pn(p([],f(e),!1));return e.length>=t?(n.splice(t,0,r5),n):p(p([],f(n),!1),[r5],!1)},e.prototype.isCustomMeasuresPosition=function(t){return cW(t)},e.prototype.getRowData=function(t){return this.getMultiData(t.rowQuery)},e}(x3),x6=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getCellData=function(t){var e=t.query,n=this.fields,r=n.rows,i=n.columns,o=g3({rowDimensionValues:g0(e,r),colDimensionValues:g0(e,i),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:r,colFields:i,prefix:g4(r,i)}),a=sd(this.indexesData,o);return a?x5.createProxyData(a,e[r5]):a},e.prototype.processDataCfg=function(t){var e=t.meta,n=this.processMeta(e,vy("指标"));return h(h({},t),{meta:n,fields:h(h({},t.fields),{rows:[r5],valueInCols:!1})})},e}(x8),x7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleDimensionValueFilter=function(){hm(e.filterParams,function(t){var n=t.filterKey,r=t.filteredValues,i=t.customFilter,o=new Set(r),a=function(t){return!o.has(t[n])},s=hz(e.displayData,function(t){return i?i(t)&&a(t):a(t)});e.displayData=e.getDisplayData(s)})},e.handleDimensionValuesSort=function(){hm(e.sortParams,function(t){var n=t.sortFieldId,r=t.sortBy,i=t.sortFunc,o=t.sortMethod,a=t.query;if(n){var s=e.displayData,l=[];if(a){var u=[];s.forEach(function(t){for(var e=Object.keys(a),n=!0,r=0;r<e.length;r++){var i=e[r];if(t[i]!==a[i]){n=!1,l.push(t);break}}n&&u.push(t)}),s=u}var c=s;if(i)c=i(h(h({},t),{data:s}));else if(r&&!oa(r)){var d=p([],f(r),!1).reverse();c=s.sort(function(t,e){var r=d.indexOf(t[n]);return d.indexOf(e[n])-r})}else(mx(o)||mS(o))&&(c=dx(s,[(oa(r)?r:null)||n],[o.toLocaleLowerCase()]));l.length&&(c=p(p([],f(c),!1),f(l),!1)),e.displayData=e.getDisplayData(c)}})},e}return u(e,t),e.prototype.processDataCfg=function(t){return t},e.prototype.setDataCfg=function(e){t.prototype.setDataCfg.call(this,e),this.handleDimensionValueFilter(),this.handleDimensionValuesSort()},e.prototype.getStartFrozenRows=function(t){var e=(this.spreadsheet.options||{}).frozenRowCount;return e?t.slice(0,e):[]},e.prototype.getEndFrozenRows=function(t){var e=(this.spreadsheet.options||{}).frozenTrailingRowCount;return e?t.slice(-e):[]},e.prototype.getDisplayData=function(t){var e=this.getStartFrozenRows(t),n=this.getEndFrozenRows(t),r=t.slice(e.length||0,-n.length||void 0);return p(p(p([],f(e),!1),f(r),!1),f(n),!1)},e.prototype.getDimensionValues=function(){return[]},e.prototype.getCellData=function(t){var e=t.query;if(0!==this.displayData.length||0!==e.rowIndex){var n=this.displayData[e.rowIndex];return uk(e,"field")&&i5(n)?n[e.field]:n}},e.prototype.getMultiData=function(t){if(!t)return this.displayData;var e=this.displayData[t.rowIndex]?[this.displayData[t.rowIndex]]:this.displayData;return uk(t,"field")?e.map(function(e){return e[t.field]}):e},e.prototype.getRowData=function(t){return this.getCellData({query:{rowIndex:t.rowIndex}})},e}(x3);function x9(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function St(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Se(){}var Sn="\\s*([+-]?\\d+)\\s*",Sr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Si="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",So=/^#([0-9a-f]{3,8})$/,Sa=RegExp("^rgb\\("+[Sn,Sn,Sn]+"\\)$"),Ss=RegExp("^rgb\\("+[Si,Si,Si]+"\\)$"),Sl=RegExp("^rgba\\("+[Sn,Sn,Sn,Sr]+"\\)$"),Su=RegExp("^rgba\\("+[Si,Si,Si,Sr]+"\\)$"),Sh=RegExp("^hsl\\("+[Sr,Si,Si]+"\\)$"),Sc=RegExp("^hsla\\("+[Sr,Si,Si,Sr]+"\\)$"),Sd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Sf(){return this.rgb().formatHex()}function Sp(){return this.rgb().formatRgb()}function Sv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=So.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Sg(e):3===n?new SC(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Sy(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Sy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sa.exec(t))?new SC(e[1],e[2],e[3],1):(e=Ss.exec(t))?new SC(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Sl.exec(t))?Sy(e[1],e[2],e[3],e[4]):(e=Su.exec(t))?Sy(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Sh.exec(t))?Sb(e[1],e[2]/100,e[3]/100,1):(e=Sc.exec(t))?Sb(e[1],e[2]/100,e[3]/100,e[4]):Sd.hasOwnProperty(t)?Sg(Sd[t]):"transparent"===t?new SC(NaN,NaN,NaN,0):null}function Sg(t){return new SC(t>>16&255,t>>8&255,255&t,1)}function Sy(t,e,n,r){return r<=0&&(t=e=n=NaN),new SC(t,e,n,r)}function Sm(t,e,n,r){var i;return 1==arguments.length?((i=t)instanceof Se||(i=Sv(i)),i)?new SC((i=i.rgb()).r,i.g,i.b,i.opacity):new SC:new SC(t,e,n,null==r?1:r)}function SC(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Sw(){return"#"+SS(this.r)+SS(this.g)+SS(this.b)}function Sx(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function SS(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Sb(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new SE(t,e,n,r)}function S_(t){if(t instanceof SE)return new SE(t.h,t.s,t.l,t.opacity);if(t instanceof Se||(t=Sv(t)),!t)return new SE;if(t instanceof SE)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+(n<r)*6:n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new SE(a,s,l,t.opacity)}function SE(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function SL(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function ST(t){return function(){return t}}function SM(t,e){var n=e-t;return n?function(e){return t+e*n}:ST(isNaN(t)?e:t)}x9(Se,Sv,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Sf,formatHex:Sf,formatHsl:function(){return S_(this).formatHsl()},formatRgb:Sp,toString:Sp}),x9(SC,Sm,St(Se,{brighter:function(t){return t=null==t?1.4285714285714286:Math.pow(1.4285714285714286,t),new SC(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new SC(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sw,formatHex:Sw,formatRgb:Sx,toString:Sx})),x9(SE,function(t,e,n,r){return 1==arguments.length?S_(t):new SE(t,e,n,null==r?1:r)},St(Se,{brighter:function(t){return t=null==t?1.4285714285714286:Math.pow(1.4285714285714286,t),new SE(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new SE(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new SC(SL(t>=240?t-240:t+120,i,r),SL(t,i,r),SL(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var SR=function t(e){var n,r=1==(n=+(n=e))?SM:function(t,e){var r,i,o;return e-t?(r=t,i=e,r=Math.pow(r,o=n),i=Math.pow(i,o)-r,o=1/o,function(t){return Math.pow(r+t*i,o)}):ST(isNaN(t)?e:t)};function i(t,e){var n=r((t=Sm(t)).r,(e=Sm(e)).r),i=r(t.g,e.g),o=r(t.b,e.b),a=SM(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function SI(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function SO(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function SA(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var SB=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SN=RegExp(SB.source,"g");(r=o||(o={})).ScrollChange="scroll-change",r.ScrollEnd="scroll-end";var SD=function(t){function e(e){var n=t.call(this,e)||this;n.isMobile=!1,n.eventHandlers=[],n.scrollFrameId=null,n.getCoordinatesName=function(){return{from:n.isHorizontal?"x1":"y1",to:n.isHorizontal?"x2":"y2"}},n.getCoordinatesWithBBoxExtraPadding=function(){var t=n.theme.size,e=n.isHorizontal?0:t/2,r=n.isHorizontal?t:t/2;return{start:n.thumbOffset+e,end:n.thumbOffset+n.thumbLen-r}},n.current=function(){var t=n.thumbLen/n.trackLen;return n.thumbOffset/n.trackLen/(1-t)},n.updateThumbLen=function(t){if(n.thumbLen!==t){n.thumbLen=t;var e=n.getCoordinatesName();n.thumbShape.attr(e.to,n.thumbOffset+t),n.emitScrollChange(n.thumbOffset/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.updateThumbOffset=function(t,e){void 0===e&&(e=!0);var r,i=n.validateRange(t);if(n.thumbOffset!==i||0===i){n.thumbOffset=i;var o=n.getCoordinatesName(),a=o.from,s=o.to,l=n.getCoordinatesWithBBoxExtraPadding(),u=l.start,h=l.end;n.thumbShape.attr(((r={})[a]=u,r[s]=h,r)),e&&n.emitScrollChange(i/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.onlyUpdateThumbOffset=function(t){var e;n.updateThumbOffset(t,!1),null===(e=n.get("canvas"))||void 0===e||e.draw()},n.emitScrollChange=function(t,e){void 0===e&&(e=!0),cancelAnimationFrame(n.scrollFrameId),n.scrollFrameId=requestAnimationFrame(function(){n.emit(o.ScrollChange,{offset:t,updateThumbOffset:e})})},n.addEventListener=function(t,e,n){return null==t||t.addEventListener(e,n,!1),{remove:function(){null==t||t.removeEventListener(e,n,!1)}}},n.addEvent=function(t,e,r){t.on(e,r),n.eventHandlers.push({target:t,type:e,handler:r})},n.initScrollBar=function(){n.scrollBarGroup=n.createScrollBarGroup(),n.scrollBarGroup.move(n.position.x,n.position.y),n.bindEvents()},n.createScrollBarGroup=function(){var t=n.addGroup({className:n.isHorizontal?"horizontalBar":"verticalBar"});return n.trackShape=n.createTrackShape(t),n.thumbShape=n.createThumbShape(t),t},n.createTrackShape=function(t){var e=n.theme,r=e.lineCap,i=e.trackColor,o=e.size,a={lineWidth:o,stroke:i,lineCap:void 0===r?"round":r};return n.isHorizontal?t.addShape("line",{attrs:h(h({},a),{x1:0,y1:o/2,x2:n.trackLen,y2:o/2})}):t.addShape("line",{attrs:h(h({},a),{x1:o/2,y1:0,x2:o/2,y2:n.trackLen})})},n.createThumbShape=function(t){var e=n.theme,r=e.size,i=e.lineCap,o={lineWidth:r,stroke:e.thumbColor,lineCap:void 0===i?"round":i,cursor:"default"},a=n.getCoordinatesWithBBoxExtraPadding(),s=a.start,l=a.end;return n.isHorizontal?t.addShape("line",{attrs:h(h({},o),{x1:s,y1:r/2,x2:l,y2:r/2})}):t.addShape("line",{attrs:h(h({},o),{x1:r/2,y1:s,x2:r/2,y2:l})})},n.bindEvents=function(){n.on("mousedown",n.onStartEvent(!1)),n.on("mouseup",n.onMouseUp),n.on("touchstart",n.onStartEvent(!0)),n.on("touchend",n.onMouseUp),n.trackShape.on("click",n.onTrackClick),n.thumbShape.on("mouseover",n.onTrackMouseOver),n.thumbShape.on("mouseout",n.onTrackMouseOut)},n.onStartEvent=function(t){return function(e){e.preventDefault(),n.isMobile=t;var r=n.isMobile?sd(e,"touches.0",e):e,i=r.clientX,o=r.clientY;n.startPos=n.isHorizontal?i:o,n.bindLaterEvent()}},n.bindLaterEvent=function(){var t=n.get("canvas"),e=document.body,r=[];n.isMobile?(r=[n.addEventListener(e,"touchmove",n.onMouseMove),n.addEventListener(e,"touchend",n.onMouseUp),n.addEventListener(e,"touchcancel",n.onMouseUp)],n.addEvent(t,"touchend",n.onMouseUp),n.addEvent(t,"touchcancel",n.onMouseUp)):(r=[n.addEventListener(e,"mousemove",n.onMouseMove),n.addEventListener(e,"mouseup",n.onMouseUp),n.addEventListener(e,"mouseleave",n.onMouseUp)],n.addEvent(t,"mouseup",n.onMouseUp)),n.clearEvents=function(){r.forEach(function(t){null==t||t.remove()}),hm(n.eventHandlers,function(t){var e;null===(e=t.target)||void 0===e||e.off(t.type,t.handler)}),n.eventHandlers.length=0}},n.onTrackClick=function(t){var e=n.isHorizontal?t.x-n.position.x-n.thumbLen/2:t.y-n.position.y-n.thumbLen/2,r=n.validateRange(e);n.updateThumbOffset(r)},n.onMouseMove=function(t){t.preventDefault();var e=n.isMobile?sd(t,"touches.0",t):t,r=e.clientX,i=e.clientY,o=n.isHorizontal?r:i,a=o-n.startPos;n.startPos=o,n.updateThumbOffset(n.thumbOffset+a)},n.onMouseUp=function(t){var e;n.emit(o.ScrollEnd,{}),t.preventDefault(),null===(e=n.clearEvents)||void 0===e||e.call(n)},n.onTrackMouseOver=function(){var t=n.theme,e=t.thumbHoverColor,r=t.hoverSize;n.thumbShape.attr("stroke",e),n.thumbShape.attr("lineWidth",r)},n.onTrackMouseOut=function(){var t=n.theme,e=t.thumbColor,r=t.size;n.thumbShape.attr("stroke",e),n.thumbShape.attr("lineWidth",r)},n.validateRange=function(t){var e=t;return t+n.thumbLen>n.trackLen?e=n.trackLen-n.thumbLen:t+n.thumbLen<n.thumbLen&&(e=0),e};var r=e.isHorizontal,i=e.trackLen,a=e.thumbLen,s=e.position,l=e.thumbOffset,u=e.theme,c=e.scrollTargetMaxOffset;return n.isHorizontal=void 0!==r&&r,n.thumbOffset=void 0===l?0:l,n.trackLen=i,n.thumbLen=a,n.position=s,n.theme=u,n.scrollTargetMaxOffset=c,n.initScrollBar(),n}return u(e,t),e}(rB),Sk=function(t,e,n){if(n<=0)return{start:0,end:0};var r=hF(t,function(n,r){return e>=n&&e<t[r+1]},0);r=Math.max(r,0);var i=n===e?r:hF(t,function(e,r){return n>e&&n<=t[r+1]},r);return{start:r,end:i=Math.min(-1===i?1/0:i,t.length-2)}},Sz=function(t,e){var n=e.width,r=Math.min(e.originalWidth-n,t);return r<0?0:r},SP=function(t,e,n){var r=Math.min(e-n,t);return r<0?0:r},SH=function(t,e){if(void 0===t&&(t=[]),cP(t))return[];var n=[];return t.forEach(function(t){t instanceof e&&n.push(t),t instanceof rB&&t.getChildren().forEach(function(t){t instanceof e&&n.push(t)})}),n},SF=function(t,e,n){return n.slice(t,e+1).map(function(t){return t.x+t.width})},SW=function(t,e,n){for(var r=[],i=t;i<e+1;i++)r.push(n.getCellOffsetY(i+1));return r},SG=function(t,e,n,r){var i=SW(t,e,r),o=r.getCellOffsetY(t);return i.map(function(t){return t-o+n})},SV=function(t,e,n){var r=f(n,4),i=r[0],o=r[1],a=r[2],s=r[3];return t>=i&&t<=o&&e>=a&&e<=s},SY=function(t){for(var e=f(t,4),n=e[0],r=e[1],i=e[2],o=e[3],a=[],s=n;s<=r;s+=1)for(var l=i;l<=o;l+=1)a.push([s,l]);return a},SU=function(t,e){var n=[],r=[];if(cP(t))return cP(e)?{add:n,remove:r}:{add:SY(e),remove:r};if(cP(e))return{add:n,remove:SY(t)};for(var i=f(t,4),o=i[0],a=i[1],s=i[2],l=i[3],u=f(e,4),h=u[0],c=u[1],d=u[2],p=u[3],v=o;v<=a;v++)for(var g=s;g<=l;g++)SV(v,g,e)||r.push([v,g]);for(var v=h;v<=c;v+=1)for(var g=d;g<=p;g+=1)SV(v,g,t)||n.push([v,g]);return{add:n,remove:r}},Sj=function(t,e){var n=[],r=[];return Object.keys(e).forEach(function(i){var o=SU((null==t?void 0:t[i])||[],e[i]),a=o.add,s=o.remove;n.push.apply(n,p([],f(a),!1)),r.push.apply(r,p([],f(s),!1))}),{add:n,remove:r}},SX=function(t,e){void 0===e&&(e=!1),this.x=0,this.y=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.originalWidth=0,this.originalHeight=0,this.viewportHeight=0,this.viewportWidth=0,this.facet=t,this.spreadsheet=t.spreadsheet,this.layoutResult=t.layoutResult,e&&this.calculateBBox()},Sq=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.calculateBBox=function(){var t=this.getCornerBBoxWidth(),e=this.getCornerBBoxHeight();this.width=t,this.height=e,this.maxX=t,this.maxY=e},e.prototype.getCornerBBoxOriginalHeight=function(){var t=this.layoutResult.colsHierarchy,e=this.spreadsheet.options.style.colCfg;return t.sampleNodeForLastLevel?Math.floor(t.height):null==e?void 0:e.height},e.prototype.getCornerBBoxHeight=function(){return this.originalHeight=this.getCornerBBoxOriginalHeight(),this.originalHeight},e.prototype.getCornerBBoxWidth=function(){var t=this.layoutResult.rowsHierarchy;return(this.originalWidth=Math.floor(t.width+this.facet.getSeriesNumberWidth()),this.spreadsheet.isScrollContainsRowHeader())?this.originalWidth:this.adjustCornerBBoxWidth()},e.prototype.adjustCornerBBoxWidth=function(){var t=this.layoutResult.colsHierarchy,e=this.spreadsheet.options.width,n=.5*e,r=null==t?void 0:t.width,i=e-this.originalWidth;return this.originalWidth<=n||r<=i?this.originalWidth:Math.floor(r<=e-n?this.originalWidth-(r-i):n)},e}(SX),SK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.calculateBBox=function(){this.originalWidth=this.facet.getRealWidth(),this.originalHeight=this.facet.getRealHeight();var t=this.facet.cornerBBox,e={x:Math.floor(t.maxX),y:Math.floor(t.maxY)},n=this.spreadsheet.theme.scrollBar.size,r=this.spreadsheet.options,i=r.width,o=r.height,a=Math.max(0,i-e.x),s=Math.max(0,o-e.y-n);this.x=e.x,this.y=e.y,this.width=a,this.height=s,this.viewportHeight=Math.abs(Math.floor(Math.min(s,this.originalHeight))),this.viewportWidth=Math.abs(Math.floor(Math.min(a,this.originalWidth))),this.maxX=e.x+this.viewportWidth,this.maxY=e.y+this.viewportHeight,this.minX=e.x,this.minY=e.y;var l=this.spreadsheet.options,u=l.frozenTrailingColCount,h=l.frozenTrailingRowCount;u>0&&(this.viewportWidth=this.width,this.maxX=e.x+this.width),h>0&&(this.viewportHeight=this.height,this.maxY=e.y+this.height)},e}(SX),SZ=function(t){function e(e){var n=t.call(this,e)||this;return n.isHeaderCellInViewport=function(t,e,n,r){return t+e>=n&&n+r>=t},n.headerConfig=e,n}return u(e,t),e.prototype.getConfig=function(){return this.headerConfig},e.prototype.clearResizeAreaGroup=function(t){var e=this.get("parent"),n=null==e?void 0:e.findById(t);null==n||n.clear()},e.prototype.render=function(t){this.clearResizeAreaGroup(t),this.clear(),this.layout(),this.offset(),this.clip()},e.prototype.onScrollXY=function(t,e,n){this.headerConfig.scrollX=t,this.headerConfig.scrollY=e,this.render(n)},e.prototype.onRowScrollX=function(t,e){this.headerConfig.scrollX=t,this.render(e)},e.prototype.clear=function(){t.prototype.clear.call(this)},e}(rB),S$=function(t){function e(e){var n=t.call(this,e)||this;return n.scrollGroup=n.addGroup({name:"colScrollGroup",zIndex:3}),n}return u(e,t),e.prototype.onColScroll=function(t,e){this.headerConfig.scrollX!==t&&(this.headerConfig.scrollX=t,this.render(e))},e.prototype.clip=function(){var t=this.headerConfig,e=t.width,n=t.height,r=t.scrollX,i=t.spreadsheet.isFrozenRowHeader();this.scrollGroup.setClip({type:"rect",attrs:{x:i?r:0,y:0,width:i?e:e+r,height:n}})},e.prototype.clear=function(){var t,e;null===(t=this.scrollGroup)||void 0===t||t.clear(),null===(e=this.background)||void 0===e||e.remove(!0)},e.prototype.getCellInstance=function(t,e,n){return new mz(t,e,n)},e.prototype.getCellGroup=function(t){return this.scrollGroup},e.prototype.isColCellInRect=function(t){var e=this.headerConfig,n=e.spreadsheet,r=e.cornerWidth,i=e.width,o=e.scrollX;return i+o>t.x&&o-(n.isFrozenRowHeader()?0:r)<t.x+t.width},e.prototype.layout=function(){var t=this,e=this.headerConfig,n=e.data,r=e.spreadsheet,i=r.options.colCell;hm(n,function(e){if(t.isColCellInRect(e)){var n=(null==i?void 0:i(e,r,t.headerConfig))||t.getCellInstance(e,r,t.headerConfig);e.belongsCell=n,t.getCellGroup(e).add(n)}})},e.prototype.offset=function(){var t=this.headerConfig,e=t.position,n=t.scrollX;v5(this.scrollGroup,e.x-n)},e}(SZ),SQ=function(t){function e(e){return t.call(this,e)||this}return u(e,t),e.getCornerHeader=function(t,n,r,i,o,a){var s=t.width,l=t.height,u=n.originalWidth,h=n.originalHeight,c=n.width,d=n.height;return new e({data:this.getCornerNodes({x:n.x,y:n.y},u,h,i.rows,i.columns,o.rowsHierarchy,o.colsHierarchy,i.dataSet,r,a),position:{x:n.x,y:n.y},width:c,height:d,originalHeight:h,originalWidth:u,viewportWidth:s,viewportHeight:l,hierarchyType:i.hierarchyType,hierarchyCollapse:i.hierarchyCollapse,rows:i.rows,columns:i.columns,seriesNumberWidth:r,spreadsheet:a})},e.getCornerNodes=function(t,e,n,r,i,o,a,s,l,u){var h,c,d,f=[],p=u.options.style.colCfg,v=null==a?void 0:a.sampleNodeForLastLevel,g=null!==(h=null==v?void 0:v.y)&&void 0!==h?h:0,y=null!==(d=null!==(c=null==v?void 0:v.height)&&void 0!==c?c:null==p?void 0:p.height)&&void 0!==d?d:0;if(l){var m=new vE({id:"",key:"series-number-node",value:vy("序号")});m.x=null==t?void 0:t.x,m.y=g,m.width=l,m.height=y,m.isPivotMode=!0,m.spreadsheet=u,m.cornerType=C3.Series,f.push(m)}if(u.isHierarchyTreeType()){var C=this.getTreeCornerText(u),w=new vE({key:"",id:C,value:C});w.x=t.x+l,w.y=g,w.width=e-l,w.height=y,w.seriesNumberWidth=l,w.isPivotMode=!0,w.spreadsheet=u,w.cornerType=C3.Row,f.push(w)}else o.sampleNodesForAllLevels.forEach(function(t){var e=r[t.level],n=new vE({key:e,id:e,value:s.getFieldName(e)});n.x=t.x+l,n.y=g,n.width=t.width,n.height=y,n.field=e,n.isPivotMode=!0,n.cornerType=C3.Row,n.spreadsheet=u,f.push(n)});return a.sampleNodesForAllLevels.forEach(function(n){if(n.level<a.maxLevel){var r=i[n.level],o=new vE({key:r,id:r,value:s.getFieldName(r)});o.x=t.x,o.y=n.y,o.width=e,o.height=n.height,o.field=r,o.isPivotMode=!0,o.cornerType=C3.Col,o.spreadsheet=u,f.push(o)}}),f},e.getTreeCornerText=function(t){var e=t.dataSet.fields.rows,n=t.options.cornerText;if(n)return n;var r=t.store.get("drillDownFieldInLevel",[]).map(function(t){return t.drillField});return(void 0===e?[]:e).filter(function(t){return!cd(r,t)}).map(function(e){return t.dataSet.getFieldName(e)}).join("/")},e.prototype.onCorScroll=function(t,e){this.headerConfig.scrollX=t,this.render(e)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.layout=function(){this.renderCells()},e.prototype.renderCells=function(){var t,e,n,r,i=this,o=this.headerConfig,a=o.data,s=o.spreadsheet,l=null===(e=null===(t=null==s?void 0:s.facet)||void 0===t?void 0:t.cfg)||void 0===e?void 0:e.cornerHeader,u=null===(r=null===(n=null==s?void 0:s.facet)||void 0===n?void 0:n.cfg)||void 0===r?void 0:r.cornerCell;if(l){l(this,s,this.headerConfig);return}a.forEach(function(t){var e;u&&(e=u(t,i.headerConfig.spreadsheet,i.headerConfig)),cP(e)&&(e=new mP(t,i.headerConfig.spreadsheet,i.headerConfig)),i.add(e)})},e.prototype.offset=function(){v5(this,-this.headerConfig.scrollX)},e.prototype.clip=function(){var t=this.headerConfig,e=t.width,n=t.height,r=t.scrollX;this.setClip({type:"rect",attrs:{x:r,y:0,width:e,height:n}})},e.prototype.getNodes=function(){return this.headerConfig.data||[]},e}(SZ),SJ=function(t){function e(e){var n=t.call(this,e)||this;return n.render(),n}return u(e,t),e.prototype.layout=function(){this.addCornerBottomBorder(),this.addCornerRightBorder(),this.addSplitLineShadow()},e.prototype.render=function(){this.clear(),this.layout()},e.prototype.onBorderScroll=function(t){this.cfg.scrollX=t,v3(this,this.cfg.position.x-t,0),this.render()},e.prototype.onChangeShadowVisibility=function(t,e){this.cfg.showViewportLeftShadow=t>0,this.cfg.showViewportRightShadow=Math.floor(t)<Math.floor(e),this.render()},e.prototype.addCornerRightBorder=function(){var t,e=this.cfg;if(e.isPivotMode){var n=e.width,r=e.height,i=e.viewportHeight,o=e.position,a=null===(t=e.spreadsheet.theme)||void 0===t?void 0:t.splitLine,s=o.x+n,l=o.y,u=o.y+r+i;this.addShape("line",{attrs:{x1:s,y1:l,x2:s,y2:u,stroke:a.verticalBorderColor,lineWidth:a.verticalBorderWidth,opacity:a.verticalBorderColorOpacity,lineDash:a.borderDash}})}},e.prototype.addCornerBottomBorder=function(){var t,e=this.cfg,n=e.width,r=e.height,i=e.viewportWidth,o=e.position,a=e.scrollX,s=e.scrollContainsRowHeader,l=null===(t=e.spreadsheet.theme)||void 0===t?void 0:t.splitLine,u=o.x,h=o.y+r-1;this.addShape("line",{attrs:{x1:u,y1:h,x2:u+n+i+(s?a:0),y2:h,stroke:l.horizontalBorderColor,lineWidth:l.horizontalBorderWidth,opacity:l.horizontalBorderColorOpacity,lineDash:l.borderDash}})},e.prototype.addSplitLineShadow=function(){var t,e=this.cfg,n=e.isPivotMode,r=e.spreadsheet,i=null===(t=r.theme)||void 0===t?void 0:t.splitLine;n&&i.showShadow&&r.isFrozenRowHeader()&&(this.addSplitLineLeftShadow(),this.addSplitLineRightShadow())},e.prototype.addSplitLineLeftShadow=function(){if(this.cfg.showViewportLeftShadow){var t,e,n,r=this.cfg,i=r.width,o=r.height,a=r.viewportHeight,s=r.position,l=null===(t=r.spreadsheet.theme)||void 0===t?void 0:t.splitLine,u=s.x+i,h=s.y;this.addShape("rect",{attrs:{x:u,y:h,width:l.shadowWidth,height:a+o,fill:"l (0) 0:".concat(null===(e=l.shadowColors)||void 0===e?void 0:e.left," 1:").concat(null===(n=l.shadowColors)||void 0===n?void 0:n.right)}})}},e.prototype.addSplitLineRightShadow=function(){if(this.cfg.showViewportRightShadow){var t,e,n,r=this.cfg,i=r.width,o=r.height,a=r.viewportHeight,s=r.viewportWidth,l=r.position,u=null===(t=r.spreadsheet.theme)||void 0===t?void 0:t.splitLine,h=l.x+i+s-u.shadowWidth,c=l.y;this.addShape("rect",{attrs:{x:h,y:c,width:u.shadowWidth,height:a+o,fill:"l (0) 0:".concat(null===(e=u.shadowColors)||void 0===e?void 0:e.right," 1:").concat(null===(n=u.shadowColors)||void 0===n?void 0:n.left)}})}},e}(rB),S0=function(t){function e(e){return t.call(this,e)||this}return u(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gm&&this.gm.destroy()},e.prototype.rowCellInRect=function(t){var e=this.headerConfig,n=e.width,r=e.viewportHeight,i=e.seriesNumberWidth,o=e.scrollY,a=e.scrollX;return r+o>t.y&&o<t.y+t.height&&n-i+a>t.x&&a-i<t.x+t.width},e.prototype.createCellInstance=function(t){return new m1(t,this.headerConfig.spreadsheet,this.headerConfig)},e.prototype.getCellGroup=function(t){return this},e.prototype.getCustomRowCell=function(){var t,e,n=this.headerConfig.spreadsheet;return null===(e=null===(t=null==n?void 0:n.facet)||void 0===t?void 0:t.cfg)||void 0===e?void 0:e.rowCell},e.prototype.layout=function(){var t=this,e=this.headerConfig,n=e.data,r=e.spreadsheet,i=this.getCustomRowCell();hm(n,function(e){if(t.rowCellInRect(e)&&0!==e.height){var n=void 0;i&&(n=i(e,r,t.headerConfig)),cP(n)&&r.isPivotMode()&&(n=t.createCellInstance(e)),e.belongsCell=n,t.getCellGroup(e).add(n)}})},e.prototype.offset=function(){var t=this.headerConfig,e=t.scrollX,n=t.scrollY,r=t.position,i=t.seriesNumberWidth;v3(this,r.x-e+i,r.y-n)},e.prototype.clip=function(){var t=this.headerConfig,e=t.width,n=t.viewportHeight,r=t.scrollX,i=t.scrollY,o=t.seriesNumberWidth;this.setClip({type:"rect",attrs:{x:r-o,y:i,width:e,height:n}})},e}(SZ),S1=function(t){function e(e){var n=t.call(this,e)||this;n.scrollGroup=n.addGroup({name:"rowScrollGroup",zIndex:3}),n.frozenHeadGroup=n.addGroup({name:"rowHeaderFrozenGroup",zIndex:4});var r=n.headerConfig,i=r.position,o=r.seriesNumberWidth;return v3(n.frozenHeadGroup,i.x+o,i.y),n}return u(e,t),e.prototype.rowCellInRectXDir=function(t){var e=this.headerConfig,n=e.width,r=e.scrollX,i=e.seriesNumberWidth,o=t.x+i;return n+r>o&&r<o+t.width},e.prototype.rowCellInRectYDir=function(t){var e=this.headerConfig,n=e.viewportHeight,r=e.scrollY,i=t.y-this.getFrozenFirstRowHeight();return n+r>i&&r<i+t.height},e.prototype.rowCellInRect=function(t){var e=this.rowCellInRectXDir(t);return this.isFrozenRow(t)?e:e&&this.rowCellInRectYDir(t)},e.prototype.getCellGroup=function(t){return this.isFrozenRow(t)?this.frozenHeadGroup:this.scrollGroup},e.prototype.offset=function(){var t=this.headerConfig,e=t.scrollX,n=t.scrollY,r=t.position,i=t.seriesNumberWidth,o=r.x-e+i;v3(this.scrollGroup,o,r.y-n),v5(this.frozenHeadGroup,o)},e.prototype.clip=function(){var t=this.headerConfig,e=t.width,n=t.viewportHeight,r=t.scrollX,i=t.scrollY,o=r-t.seriesNumberWidth;this.scrollGroup.setClip({type:"rect",attrs:{x:o,y:i+this.getFrozenFirstRowHeight(),width:e,height:n}}),this.frozenHeadGroup.setClip({type:"rect",attrs:{x:o,y:0,width:this.headerConfig.width,height:this.getFrozenFirstRowHeight()}})},e.prototype.isFrozenRow=function(t){var e,n=this.headerConfig.spreadsheet,r=n.facet,i=gl(n.options,null===(e=r.layoutResult)||void 0===e?void 0:e.rowNodes).frozenRowCount;return i>0&&t.rowIndex>=0&&t.rowIndex<i},e.prototype.getFrozenFirstRowHeight=function(){var t,e=this.headerConfig.spreadsheet,n=e.facet;return gl(e.options,null===(t=n.layoutResult)||void 0===t?void 0:t.rowNodes).frozenRowHeight},e.prototype.clear=function(){this.frozenHeadGroup.clear(),this.scrollGroup.clear()},e}(S0),S2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.getSeriesNumberHeader=function(t){var n,r=t.viewportBBox,i=t.seriesNumberWidth,o=t.leafNodes,a=t.spreadsheet,s=t.cornerWidth,l=r.height,u=r.viewportHeight,h=[],c=a.isHierarchyTreeType();o.forEach(function(t){var e=new vE({id:"",key:"",value:"".concat(h.length+1)});e.x=t.x,e.y=t.y,e.height=c?t.getTotalHeightForTreeHierarchy():t.height,e.width=i,e.rowIndex=t.rowIndex,e.spreadsheet=a,e.isLeaf=!0,h.push(e)});var d=a.facet,f=gl(a.options,null===(n=d.layoutResult)||void 0===n?void 0:n.rowNodes),p=f.frozenRowCount,v=f.frozenRowHeight;return new e({width:s,height:l,viewportWidth:s,viewportHeight:p?u-v:u,position:{x:0,y:r.y},data:h,spreadsheet:a,seriesNumberWidth:0,hierarchyType:a.options.hierarchyType,linkFields:[]})},e.prototype.createCellInstance=function(t){var e=this.isFrozenRow(t);return new m2(t,this.headerConfig.spreadsheet,h(h({},this.headerConfig),{scrollY:e?0:this.headerConfig.scrollY}),e)},e.prototype.getCustomRowCell=function(){return null},e}(S1),S4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.createCellInstance=function(t){var e=this.headerConfig,n=e.spreadsheet,r=e.scrollY,i=this.isFrozenRow(t);return new m1(t,n,h(h({},this.headerConfig),{scrollY:i?0:r}),i)},e}(S1),S3=function(t){function e(e){var n,r=t.call(this,e)||this;return r.frozenGroupInfo=((n={})[CH.FROZEN_COL]={width:0},n[CH.FROZEN_ROW]={height:0},n[CH.FROZEN_TRAILING_ROW]={height:0},n[CH.FROZEN_TRAILING_COL]={width:0},n),r.panelScrollGroupIndexes=[],r.initFrozenGroupPosition=function(){var t=r.getScrollOffset(),e=t.scrollY,n=t.scrollX,i=r.getPaginationScrollY();v3(r.spreadsheet.frozenRowGroup,r.cornerBBox.width-n,r.cornerBBox.height-i),v3(r.spreadsheet.frozenColGroup,r.cornerBBox.width,r.cornerBBox.height-e-i),v3(r.spreadsheet.frozenTrailingColGroup,r.cornerBBox.width,r.cornerBBox.height-e-i),v3(r.spreadsheet.frozenTopGroup,r.cornerBBox.width,r.cornerBBox.height-i)},r.addCell=function(t){var e=r.getBizRevisedFrozenOptions(),n=e.frozenRowCount,i=e.frozenColCount,o=e.frozenTrailingRowCount,a=e.frozenTrailingColCount,s=r.layoutResult.colsHierarchy.getLeaves().length,l=r.getCellRange(),u=r.getRealFrozenColumns(i,a),h=u.colCount,c=u.trailingColCount,d=iE[v6(t.getMeta(),{frozenRowCount:n,frozenColCount:h,frozenTrailingRowCount:o,frozenTrailingColCount:c},s,l)];d&&r.spreadsheet[d]&&r.spreadsheet[d].add(t)},r.renderFrozenGroupSplitLine=function(t,e){var n,i,o,a=r.panelBBox,s=a.width,l=a.height,u=a.viewportWidth,c=a.viewportHeight,d=r.cornerBBox.height,f=r.layoutResult.colNodes.filter(function(t){return gr(t)}),p=r.getCellRange(),v=p.end-p.start,g=gc(r.getBizRevisedFrozenOptions(),f.length,v),y=g.frozenRowCount,m=void 0===y?0:y,C=g.frozenColCount,w=void 0===C?0:C,x=g.frozenTrailingColCount,S=void 0===x?0:x,b=g.frozenTrailingRowCount,_=void 0===b?0:b,E=Math.floor(e-r.getPaginationScrollY()),L=Math.max(0,(null!==(n=hd(r.viewCellWidths))&&void 0!==n?n:0)-u),T=Math.max(0,r.viewCellHeights.getCellOffsetY(p.end+1)-r.viewCellHeights.getCellOffsetY(p.start)-c);null===(i=r.foregroundGroup.findById(il))||void 0===i||i.remove();var M=sd(r.cfg,"spreadsheet.theme.splitLine"),R=r.foregroundGroup.addGroup({id:il,zIndex:4}),I={lineWidth:null==M?void 0:M.verticalBorderWidth,stroke:null==M?void 0:M.verticalBorderColor,opacity:null==M?void 0:M.verticalBorderColorOpacity,lineDash:null==M?void 0:M.borderDash},O={lineWidth:null==M?void 0:M.horizontalBorderWidth,stroke:null==M?void 0:M.horizontalBorderColor,opacity:null==M?void 0:M.horizontalBorderColorOpacity,lineDash:null==M?void 0:M.borderDash};if(w>0){var A=f.reduce(function(t,e,n){return n<w?t+e.width:t},0),B=_>0?l:c;gv(R,{x1:A,x2:A,y1:d,y2:d+B},h({},I)),M.showShadow&&t>0&&R.addShape("rect",{attrs:{x:A,y:d,width:M.shadowWidth,height:B,fill:r.getShadowFill(0)}})}if(m>0){var N=d+r.getTotalHeightForRange(p.start,p.start+m-1),D=S>0?s:u;gv(R,{x1:0,x2:D,y1:N,y2:N},h({},O)),M.showShadow&&E>0&&R.addShape("rect",{attrs:{x:0,y:N,width:D,height:M.shadowWidth,fill:r.getShadowFill(90)}})}if(S>0){var A=f[f.length-S].x,B=_?l:c;gv(R,{x1:A,x2:A,y1:d,y2:d+B},h({},I)),M.showShadow&&Math.floor(t)<Math.floor(L)&&R.addShape("rect",{attrs:{x:A-(null!==(o=M.shadowWidth)&&void 0!==o?o:0),y:d,width:M.shadowWidth,height:B,fill:r.getShadowFill(180)}})}if(_>0){var N=r.panelBBox.maxY-r.getTotalHeightForRange(p.end-_+1,p.end),D=S>0?s:u;gv(R,{x1:0,x2:D,y1:N,y2:N},h({},O)),M.showShadow&&E<Math.floor(T)&&R.addShape("rect",{attrs:{x:0,y:N-M.shadowWidth,width:D,height:M.shadowWidth,fill:r.getShadowFill(270)}})}r.foregroundGroup.sort()},r.getRealFrozenColumns=function(t,e){var n,i=t,o=e;if(t||e){var a=r.layoutResult.colsHierarchy.getNodes();i=(n=ge(a=a.filter(function(t){return gr(t)}),t,e)).colCount,o=n.trailingColCount}return{colCount:i,trailingColCount:o}},r.getTotalHeightForRange=function(t,e){if(t<0||e<0)return 0;if(r.rowOffsets)return r.rowOffsets[e+1]-r.rowOffsets[t];for(var n=0,i=t;i<e+1;i++)n+=r.getDefaultCellHeight();return n},r.getShadowFill=function(t){var e,n,i=sd(r.cfg,"spreadsheet.theme.splitLine");return"l (".concat(t,") 0:").concat(null===(e=i.shadowColors)||void 0===e?void 0:e.left," 1:").concat(null===(n=i.shadowColors)||void 0===n?void 0:n.right)},r}return u(e,t),e.prototype.calculateFrozenGroupInfo=function(){var t=this.getFrozenOptionsDirectly(),e=t.frozenColCount,n=t.frozenRowCount,r=t.frozenTrailingColCount,i=t.frozenTrailingRowCount,o=this.layoutResult.colNodes.filter(function(t){return gr(t)}),a=this.viewCellHeights,s=this.getCellRange(),l=this.frozenGroupInfo,u=l.frozenCol,h=l.frozenTrailingCol,c=l.frozenRow,d=l.frozenTrailingRow;e>0&&(u.width=o[e-1].x+o[e-1].width-0,u.range=[0,e-1]),n>0&&(c.height=a.getCellOffsetY(s.start+n)-a.getCellOffsetY(s.start),c.range=[s.start,s.start+n-1]),r>0&&(h.width=o[o.length-1].x-o[o.length-r].x+o[o.length-1].width,h.range=[o.length-r,o.length-1]),i>0&&(d.height=a.getCellOffsetY(s.end+1)-a.getCellOffsetY(s.end+1-i),d.range=[s.end-i+1,s.end])},e.prototype.calculateXYIndexes=function(t,e){var n,r,i,o=this.layoutResult.colLeafNodes.length,a=this.getCellRange(),s=this.panelBBox,l=s.viewportHeight,u=s.viewportWidth,h=this.getFrozenOptionsDirectly(),c=h.frozenColCount,d=void 0===c?0:c,f=h.frozenRowCount,p=void 0===f?0:f,v=h.frozenTrailingColCount,g=void 0===v?0:v,y=h.frozenTrailingRowCount,m=void 0===y?0:y,C={width:u,height:l,x:0,y:0};if(g>0||d>0){var w=this.frozenGroupInfo,x=w.frozenTrailingCol,S=w.frozenCol;C.width-=x.width+S.width,C.x+=null!==(n=S.width)&&void 0!==n?n:0}if(m>0||p>0){var b=this.frozenGroupInfo,_=b.frozenRow,E=b.frozenTrailingRow;C.height<_.height+E.height?(C.height=0,C.y=0):(C.height-=_.height+E.height,C.y+=_.height)}var L=this.spreadsheet.isTableMode()&&(null===(i=null===(r=this.spreadsheet.dataSet)||void 0===r?void 0:r.isEmpty)||void 0===i?void 0:i.call(r))?this.spreadsheet.dataSet.getEmptyViewIndexes():v2(t,e,this.viewCellWidths,this.viewCellHeights,C,this.getRealScrollX(this.cornerBBox.width));this.panelScrollGroupIndexes=L;var T=this.getRealFrozenColumns(d,g);return v9(L,{frozenColCount:T.colCount,frozenRowCount:p,frozenTrailingColCount:T.trailingColCount,frozenTrailingRowCount:m},o,a)},e.prototype.updateFrozenGroupGrid=function(){var t=this;[CH.FROZEN_COL,CH.FROZEN_ROW,CH.FROZEN_TRAILING_COL,CH.FROZEN_TRAILING_ROW].forEach(function(e){if(t.frozenGroupInfo[e].range){var n=[],r=[];if(e.toLowerCase().includes("row")){var i=f(t.frozenGroupInfo[e].range,2),o=i[0],a=i[1];n=t.gridInfo.cols,r=SW(o,a,t.viewCellHeights),e===CH.FROZEN_TRAILING_ROW&&(r=SG(o,a,Math.ceil(t.spreadsheet.frozenTrailingRowGroup.getBBox().minY),t.viewCellHeights))}else{var s=f(t.frozenGroupInfo[e].range,2);n=SF(s[0],s[1],t.layoutResult.colNodes.filter(function(t){return gr(t)})),r=t.gridInfo.rows}t.spreadsheet["".concat(e,"Group")].updateGrid({cols:n,rows:r},"".concat(e,"Group"))}})},e.prototype.updatePanelScrollGroup=function(){t.prototype.updatePanelScrollGroup.call(this),this.updateFrozenGroupGrid()},e.prototype.translateRelatedGroups=function(e,n,r){var i=this,o=this.spreadsheet,a=o.frozenColGroup,s=o.frozenTrailingColGroup;[o.frozenRowGroup,o.frozenTrailingRowGroup].forEach(function(t){v5(t,i.cornerBBox.width-e)}),[a,s].forEach(function(t){v8(t,i.cornerBBox.height-n)}),t.prototype.translateRelatedGroups.call(this,e,n,r),this.updateRowResizeArea(),this.renderFrozenGroupSplitLine(e,n)},e.prototype.updateRowResizeArea=function(){},e.prototype.clip=function(t,e){var n,r,i,o,a=this.getPaginationScrollY(),s=this.spreadsheet,l=s.frozenRowGroup,u=s.frozenColGroup,c=s.frozenTrailingColGroup,d=s.frozenTrailingRowGroup,f=s.panelScrollGroup,p=0,v=0,g=0;u&&(p=u.getBBox().width),l&&(v=l.getBBox().height),c&&(o=c.getBBox()),d&&(g=d.getBBox().height);var y=this.panelBBox.width-p-(null!==(n=null==o?void 0:o.width)&&void 0!==n?n:0),m=this.panelBBox.height-v-g;f.setClip({type:"rect",attrs:{x:t+p,y:e+v,width:y,height:m}}),l.setClip({type:"rect",attrs:{x:t+p,y:a,width:y,height:v}}),null==d||d.setClip({type:"rect",attrs:{x:t+p,y:d.getBBox().minY,width:y,height:g}});var C={y:e+v,height:m};null==u||u.setClip({type:"rect",attrs:h(h({},C),{x:0,width:p})}),null==c||c.setClip({type:"rect",attrs:h(h({},C),{x:null!==(r=null==o?void 0:o.minX)&&void 0!==r?r:0,width:null!==(i=null==o?void 0:o.width)&&void 0!==i?i:0})})},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.render=function(){this.calculateFrozenGroupInfo(),t.prototype.render.call(this),this.initFrozenGroupPosition()},e.prototype.getFrozenOptionsDirectly=function(){var t=this.layoutResult.colLeafNodes.length,e=this.getCellRange();return gc(this.getBizRevisedFrozenOptions(),t,e.end-e.start+1)},e.prototype.getBizRevisedFrozenOptions=function(){var t=this.cfg;return{frozenColCount:t.frozenColCount,frozenRowCount:t.frozenRowCount,frozenTrailingColCount:t.frozenTrailingColCount,frozenTrailingRowCount:t.frozenTrailingRowCount}},e.prototype.getDefaultCellHeight=function(){var t,e=this.cfg.cellCfg;return null!==(t=null==e?void 0:e.height)&&void 0!==t?t:0},e}(function(){function t(t){var e=this;this.scrollFrameId=null,this.hideScrollBar=function(){var t,n,r;null===(t=e.hRowScrollBar)||void 0===t||t.hide(),null===(n=e.hScrollBar)||void 0===n||n.hide(),null===(r=e.vScrollBar)||void 0===r||r.hide()},this.delayHideScrollBar=u3(this.hideScrollBar,1e3),this.delayHideScrollbarOnMobile=function(){vS()&&e.delayHideScrollBar()},this.showVerticalScrollBar=function(){var t;null===(t=e.vScrollBar)||void 0===t||t.show()},this.showHorizontalScrollBar=function(){var t,n;null===(t=e.hRowScrollBar)||void 0===t||t.show(),null===(n=e.hScrollBar)||void 0===n||n.show()},this.onContainerWheel=function(){e.onContainerWheelForPc(),e.onContainerWheelForMobile()},this.onContainerWheelForPc=function(){var t=e.spreadsheet.getCanvasElement();null==t||t.addEventListener("wheel",e.onWheel)},this.onContainerWheelForMobile=function(){e.mobileWheel=new mQ(e.spreadsheet.container),e.mobileWheel.on("wheel",function(t){e.spreadsheet.hideTooltip();var n=t.event,r=t.deltaX,i=t.deltaY,o=t.x,a=t.y;e.onWheel(h(h({},n),{deltaX:r,deltaY:i,offsetX:o,offsetY:a}))})},this.bindEvents=function(){e.onContainerWheel(),e.emitPaginationEvent()},this.setScrollOffset=function(t){Object.keys(t).forEach(function(n){var r=t[n];cq(r)||e.spreadsheet.store.set(n,Math.floor(r))})},this.getScrollOffset=function(){var t=e.spreadsheet.store;return{scrollX:t.get("scrollX",0),scrollY:t.get("scrollY",0),rowHeaderScrollX:t.get("rowHeaderScrollX",0)}},this.emitPaginationEvent=function(){var t=e.cfg.pagination;if(t){var n=t.current,r=t.pageSize,i=e.viewCellHeights.getTotalLength(),o=Math.floor((i-1)/r)+1;e.cfg.spreadsheet.emit(CD.LAYOUT_PAGINATION,{pageSize:r,pageCount:o,total:i,current:void 0===n?1:n})}},this.unbindEvents=function(){var t=e.spreadsheet.getCanvasElement();null==t||t.removeEventListener("wheel",e.onWheel),e.mobileWheel.destroy()},this.clipPanelGroup=function(){e.foregroundGroup=e.spreadsheet.foregroundGroup,e.backgroundGroup=e.spreadsheet.backgroundGroup,e.panelGroup=e.spreadsheet.panelGroup;var t,n=e.panelBBox,r=n.width,i=n.height;null===(t=e.spreadsheet.panelScrollGroup)||void 0===t||t.setClip({type:"rect",attrs:{x:0,y:e.cornerBBox.height,width:r,height:i}})},this.calculateCellWidthHeight=function(){var t=fu(e.layoutResult.colLeafNodes,function(t,e){return t.push(hd(t)+e.width),t},[0]);e.viewCellWidths=t,e.viewCellHeights=e.getViewCellHeights(e.layoutResult)},this.getRealScrollX=function(t,n){return void 0===n&&(n=0),e.cfg.spreadsheet.isScrollContainsRowHeader()?t:n},this.calculatePanelBBox=function(){e.panelBBox=new SK(e,!0)},this.getRealWidth=function(){return hd(e.viewCellWidths)},this.getRealHeight=function(){var t=e.cfg.pagination,n=e.viewCellHeights;if(t){var r=e.getCellRange(),i=r.start,o=r.end;return n.getCellOffsetY(o+1)-n.getCellOffsetY(i)}return n.getTotalHeight()},this.clearAllGroup=function(){for(var t=e.panelGroup.getChildren()||[],n=t.length-1;n>=0;n--){var r=t[n];r instanceof rB?r.set("children",[]):t[n].remove()}e.foregroundGroup.set("children",[]),e.backgroundGroup.set("children",[])},this.scrollWithAnimation=function(t,n,r){void 0===t&&(t={}),void 0===n&&(n=200);var i,o,a,s,l,u=e.getAdjustedScrollOffset({scrollX:(null===(o=t.offsetX)||void 0===o?void 0:o.value)||0,scrollY:(null===(a=t.offsetY)||void 0===a?void 0:a.value)||0,rowHeaderScrollX:(null===(s=t.rowHeaderOffsetX)||void 0===s?void 0:s.value)||0}),h=u.scrollX,c=u.scrollY,d=u.rowHeaderScrollX;null===(l=e.timer)||void 0===l||l.stop();var p=e.getScrollOffset(),v=[null!=h?h:p.scrollX,null!=c?c:p.scrollY,null!=d?d:p.rowHeaderScrollX],g=(i=Object.values(p),(SO(v)?SI:function t(e,n){var r,i=n?n.length:0,o=e?Math.min(i,e.length):0,a=Array(o),s=Array(i);for(r=0;r<o;++r)a[r]=function e(n,r){var i,o=typeof r;return null==r||"boolean"===o?ST(r):("number"===o?SA:"string"===o?(i=Sv(r))?(r=i,SR):function(t,e){var n,r,i,o,a,s=SB.lastIndex=SN.lastIndex=0,l=-1,u=[],h=[];for(t+="",e+="";(i=SB.exec(t))&&(o=SN.exec(e));)(a=o.index)>s&&(a=e.slice(s,a),u[l]?u[l]+=a:u[++l]=a),(i=i[0])===(o=o[0])?u[l]?u[l]+=o:u[++l]=o:(u[++l]=null,h.push({i:l,x:SA(i,o)})),s=SN.lastIndex;return s<e.length&&(a=e.slice(s),u[l]?u[l]+=a:u[++l]=a),u.length<2?h[0]?(n=h[0].x,function(t){return n(t)+""}):(r=e,function(){return r}):(e=h.length,function(t){for(var n,r=0;r<e;++r)u[(n=h[r]).i]=n.x(t);return u.join("")})}:r instanceof Sv?SR:r instanceof Date?function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}:SO(r)?SI:Array.isArray(r)?t:"function"!=typeof r.valueOf&&"function"!=typeof r.toString||isNaN(r)?function(t,n){var r,i={},o={};for(r in(null===t||"object"!=typeof t)&&(t={}),(null===n||"object"!=typeof n)&&(n={}),n)r in t?i[r]=e(t[r],n[r]):o[r]=n[r];return function(t){for(r in i)o[r]=i[r](t);return o}}:SA)(n,r)}(e[r],n[r]);for(;r<i;++r)s[r]=n[r];return function(t){for(r=0;r<o;++r)s[r]=a[r](t);return s}})(i,v));e.timer=t8(function(t){try{var i=Math.min(t/n,1),o=f(g(i),3),a=o[0],s=o[1],l=o[2];e.setScrollOffset({rowHeaderScrollX:l,scrollX:a,scrollY:s}),e.startScroll(),t>n&&(e.timer.stop(),null==r||r())}catch(t){console.error(t),e.timer.stop()}})},this.scrollImmediately=function(t){void 0===t&&(t={});var n,r,i,o=e.getAdjustedScrollOffset({scrollX:(null===(n=t.offsetX)||void 0===n?void 0:n.value)||0,scrollY:(null===(r=t.offsetY)||void 0===r?void 0:r.value)||0,rowHeaderScrollX:(null===(i=t.rowHeaderOffsetX)||void 0===i?void 0:i.value)||0}),a=o.scrollX,s=o.scrollY,l=o.rowHeaderScrollX;e.setScrollOffset({scrollX:a,scrollY:s,rowHeaderScrollX:l}),e.startScroll()},this.startScroll=function(t){void 0===t&&(t=!1);var n,r,i,o=e.getScrollOffset(),a=o.rowHeaderScrollX,s=o.scrollX,l=o.scrollY;null===(n=e.hRowScrollBar)||void 0===n||n.onlyUpdateThumbOffset(e.getScrollBarOffset(a,e.hRowScrollBar)),null===(r=e.hScrollBar)||void 0===r||r.onlyUpdateThumbOffset(e.getScrollBarOffset(s,e.hScrollBar)),null===(i=e.vScrollBar)||void 0===i||i.onlyUpdateThumbOffset(e.getScrollBarOffset(l,e.vScrollBar)),e.dynamicRenderCell(t)},this.getRendererHeight=function(){var t=e.getCellRange(),n=t.start,r=t.end;return e.viewCellHeights.getCellOffsetY(r+1)-e.viewCellHeights.getCellOffsetY(n)},this.getAdjustedScrollOffset=function(t){var n=t.scrollX,r=t.scrollY,i=t.rowHeaderScrollX;return{scrollX:SP(n,e.layoutResult.colsHierarchy.width,e.panelBBox.width),scrollY:SP(r,e.getRendererHeight(),e.panelBBox.height),rowHeaderScrollX:Sz(i,e.cornerBBox)}},this.renderRowScrollBar=function(t){if(!e.cfg.spreadsheet.isScrollContainsRowHeader()&&e.cornerBBox.width<e.cornerBBox.originalWidth){var n=e.cornerBBox.originalWidth-e.cornerBBox.width,r=e.getScrollbarPosition().maxY,i=e.spreadsheet.theme,a=i.splitLine,s=i.scrollBar,l=Math.max(e.cornerBBox.width*e.cornerBBox.width/e.cornerBBox.originalWidth,null==s?void 0:s.thumbHorizontalMinSize),u=l-(null==a?void 0:a.verticalBorderWidth);e.hRowScrollBar=new SD({isHorizontal:!0,trackLen:e.cornerBBox.width,thumbLen:u,position:{x:e.cornerBBox.minX+e.scrollBarSize/2,y:r},thumbOffset:t*(e.cornerBBox.width-l)/n,theme:e.scrollBarTheme,scrollTargetMaxOffset:n}),e.hRowScrollBar.on(o.ScrollChange,function(t){var r,i,o=t.offset,a=Math.floor(e.getValidScrollBarOffset(o,n));e.setScrollOffset({rowHeaderScrollX:a}),null===(r=e.rowHeader)||void 0===r||r.onRowScrollX(a,ia),null===(i=e.rowIndexHeader)||void 0===i||i.onRowScrollX(a,iu),e.cornerHeader.onRowScrollX(a,ih);var s=e.getScrollBarOffset(a,e.hRowScrollBar),l=e.getScrollOffset(),u={scrollX:l.scrollX,scrollY:l.scrollY,rowHeaderScrollX:s};e.hRowScrollBar.updateThumbOffset(s,!1),e.spreadsheet.emit(CD.ROW_CELL_SCROLL,u),e.spreadsheet.emit(CD.GLOBAL_SCROLL,u)}),e.foregroundGroup.add(e.hRowScrollBar)}},this.getValidScrollBarOffset=function(t,e){return lT(t,0,e)},this.renderHScrollBar=function(t,n,r){if(Math.floor(t)<Math.floor(n)){var i=e.scrollBarSize/2,a=e.getScrollbarPosition().maxY,s=t+(e.cfg.spreadsheet.isScrollContainsRowHeader()?Math.min(e.cornerBBox.width,e.getCanvasHW().width):0),l={x:e.panelBBox.minX+(e.cfg.spreadsheet.isScrollContainsRowHeader()?-e.cornerBBox.width+i:i),y:a},u=n+(e.cfg.spreadsheet.isScrollContainsRowHeader()?e.cornerBBox.width:0),h=e.spreadsheet.theme.scrollBar,c=u-s,d=Math.max(s/u*s,null==h?void 0:h.thumbHorizontalMinSize);e.hScrollBar=new SD({isHorizontal:!0,trackLen:s,thumbLen:d,position:l,thumbOffset:r*(s-d)/c,theme:e.scrollBarTheme,scrollTargetMaxOffset:c}),e.hScrollBar.on(o.ScrollChange,function(t){var n=t.offset,r=t.updateThumbOffset,i=e.getValidScrollBarOffset(n,c);r&&e.hScrollBar.updateThumbOffset(e.getScrollBarOffset(i,e.hScrollBar),!1),e.setScrollOffset({scrollX:i}),e.dynamicRenderCell()}),e.foregroundGroup.add(e.hScrollBar)}},this.getScrollbarPosition=function(){var t=e.panelBBox,n=t.maxX,r=t.maxY,i=e.getCanvasHW(),o=i.width,a=i.height,s=e.spreadsheet.options.interaction.scrollbarPosition===CX.CONTENT;return{maxX:(s?n:o)-e.scrollBarSize,maxY:s?r:a-e.scrollBarSize}},this.renderVScrollBar=function(t,n,r){if(t<n){var i=e.spreadsheet.theme.scrollBar,a=Math.max(t/n*t,null==i?void 0:i.thumbVerticalMinSize),s=n-t,l=e.getScrollbarPosition().maxX;e.vScrollBar=new SD({isHorizontal:!1,trackLen:t,thumbLen:a,thumbOffset:r*(t-a)/s,position:{x:l,y:e.panelBBox.minY},theme:e.scrollBarTheme,scrollTargetMaxOffset:s}),e.vScrollBar.on(o.ScrollChange,function(t){var n=t.offset,r=t.updateThumbOffset,i=e.getValidScrollBarOffset(n,s);r&&e.vScrollBar.updateThumbOffset(e.getScrollBarOffset(i,e.vScrollBar),!1),e.setScrollOffset({scrollY:i}),e.dynamicRenderCell()}),e.foregroundGroup.add(e.vScrollBar)}},this.getScrollBarOffset=function(t,e){return t*(e.trackLen-e.thumbLen)/e.scrollTargetMaxOffset},this.isScrollOverThePanelArea=function(t){var n=t.offsetX,r=t.offsetY;return n>e.panelBBox.minX&&n<e.panelBBox.maxX&&r>e.panelBBox.minY&&r<e.panelBBox.maxY},this.isScrollOverTheCornerArea=function(t){var n=t.offsetX,r=t.offsetY;return n>e.cornerBBox.minX&&n<e.cornerBBox.maxX&&r>e.cornerBBox.minY&&r<e.cornerBBox.maxY+e.panelBBox.height},this.updateHorizontalRowScrollOffset=function(t){var n,r=t.offset,i=t.offsetX,o=t.offsetY;e.isScrollOverTheCornerArea({offsetX:i,offsetY:o})&&(null===(n=e.hRowScrollBar)||void 0===n||n.emitScrollChange(r))},this.updateHorizontalScrollOffset=function(t){var n,r=t.offset,i=t.offsetX,o=t.offsetY;(!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetX:i,offsetY:o}))&&(null===(n=e.hScrollBar)||void 0===n||n.emitScrollChange(r))},this.isScrollToLeft=function(t){var n=t.deltaX,r=t.offsetX,i=t.offsetY;if(!e.hScrollBar&&!e.hRowScrollBar)return!0;var o=!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetY:i,offsetX:r})||e.hRowScrollBar.thumbOffset<=0,a=!e.hScrollBar||e.hScrollBar.thumbOffset<=0;return n<=0&&a&&o},this.isScrollToRight=function(t){var n,r,i,o,a,s,l=t.deltaX,u=t.offsetX,h=t.offsetY;if(!e.hScrollBar&&!e.hRowScrollBar)return!0;var c=e.spreadsheet.isFrozenRowHeader()?null===(n=e.panelBBox)||void 0===n?void 0:n.width:null===(r=e.panelBBox)||void 0===r?void 0:r.maxX,d=!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetY:h,offsetX:u})||(null===(i=e.hRowScrollBar)||void 0===i?void 0:i.thumbOffset)+(null===(o=e.hRowScrollBar)||void 0===o?void 0:o.thumbLen)>=e.cornerBBox.width,f=e.hRowScrollBar&&e.isScrollOverTheCornerArea({offsetX:u,offsetY:h})||(null===(a=e.hScrollBar)||void 0===a?void 0:a.thumbOffset)+(null===(s=e.hScrollBar)||void 0===s?void 0:s.thumbLen)>=c;return l>=0&&f&&d},this.isScrollToTop=function(t){var n;return!e.vScrollBar||t<=0&&(null===(n=e.vScrollBar)||void 0===n?void 0:n.thumbOffset)<=0},this.isScrollToBottom=function(t){var n,r,i;return!e.vScrollBar||t>=0&&(null===(n=e.vScrollBar)||void 0===n?void 0:n.thumbOffset)+(null===(r=e.vScrollBar)||void 0===r?void 0:r.thumbLen)>=(null===(i=e.panelBBox)||void 0===i?void 0:i.height)},this.isVerticalScrollOverTheViewport=function(t){return!e.isScrollToTop(t)&&!e.isScrollToBottom(t)},this.isHorizontalScrollOverTheViewport=function(t){return!e.isScrollToLeft(t)&&!e.isScrollToRight(t)},this.isScrollOverTheViewport=function(t){var n=t.deltaY,r=t.deltaX;return!(t.offsetY<=e.cornerBBox.maxY)&&(0!==n?e.isVerticalScrollOverTheViewport(n):0!==r&&e.isHorizontalScrollOverTheViewport(t))},this.cancelScrollFrame=function(){return(!vS()||!e.scrollFrameId)&&(cancelAnimationFrame(e.scrollFrameId),!0)},this.clearScrollFrameIdOnMobile=function(){vS()&&(e.scrollFrameId=null)},this.stopScrollChainingIfNeeded=function(t){"auto"!==e.spreadsheet.options.interaction.overscrollBehavior&&e.stopScrollChaining(t)},this.stopScrollChaining=function(t){(null==t?void 0:t.cancelable)&&(null===(e=null==t?void 0:t.preventDefault)||void 0===e||e.call(t));var e,n,r=null==t?void 0:t.originalEvent;(null==r?void 0:r.cancelable)&&(null===(n=null==r?void 0:r.preventDefault)||void 0===n||n.call(r))},this.onWheel=function(t){var n=e.spreadsheet.options.interaction,r=t.deltaX,i=t.deltaY,o=t.offsetX,a=t.offsetY;t.shiftKey&&vb()&&(o=o-r+i,r=i,a-=i,i=0);var s=f(v4(r,i,n.scrollSpeedRatio),2),l=s[0],u=s[1];if(e.spreadsheet.hideTooltip(),e.spreadsheet.interaction.clearHoverTimer(),!e.isScrollOverTheViewport({deltaX:l,deltaY:u,offsetX:o,offsetY:a})){e.stopScrollChainingIfNeeded(t);return}e.stopScrollChaining(t),e.spreadsheet.interaction.addIntercepts([Cj.HOVER]),e.cancelScrollFrame()&&(e.scrollFrameId=requestAnimationFrame(function(){var t,n=e.getScrollOffset(),r=n.scrollX,i=n.scrollY,s=n.rowHeaderScrollX;0!==l&&(e.showHorizontalScrollBar(),e.updateHorizontalRowScrollOffset({offsetX:o,offsetY:a,offset:l+s}),e.updateHorizontalScrollOffset({offsetX:o,offsetY:a,offset:l+r})),0!==u&&(e.showVerticalScrollBar(),null===(t=e.vScrollBar)||void 0===t||t.emitScrollChange(u+i)),e.delayHideScrollbarOnMobile(),e.clearScrollFrameIdOnMobile()}))},this.addCell=function(t){var n=e.spreadsheet.panelScrollGroup;null==n||n.add(t)},this.realCellRender=function(t,n){var r=e.calculateXYIndexes(t,n);vI.getInstance().logger("renderIndex:",e.preCellIndexes,r);var i=Sj(e.preCellIndexes,r),o=i.add,a=i.remove;vI.getInstance().debugCallback("Data Cell Render",function(){hm(o,function(t){var n=f(t,2),r=n[0],i=n[1],o=e.layoutResult.getCellMeta(i,r);if(o){var a=e.cfg.dataCell(o);a.set("name","".concat(r,"-").concat(i)),e.addCell(a)}});var t=SH(e.panelGroup.getChildren(),yJ);hm(a,function(e){var n=f(e,2),r=n[0],i=n[1],o=hW(t,function(t){return t.get("name")==="".concat(r,"-").concat(i)});null==o||o.remove(!0)}),vI.getInstance().logger("Render Cell Panel: ".concat(null==t?void 0:t.length,", Add: ").concat(null==o?void 0:o.length,", Remove: ").concat(null==a?void 0:a.length))}),e.preCellIndexes=r,e.spreadsheet.emit(CD.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,{add:o,remove:a,spreadsheet:e.spreadsheet})},this.getGridInfo=function(){var t=f(e.preCellIndexes.center,4),n=t[0],r=t[1],i=t[2],o=t[3];return{cols:SF(n,r,e.layoutResult.colLeafNodes),rows:SW(i,o,e.viewCellHeights)}},this.onAfterScroll=u3(function(){var t=e.spreadsheet,n=t.interaction,r=t.container;if(!n.isSelectedState()&&(n.removeIntercepts([Cj.HOVER]),n.getHoverAfterScroll())){var i=n.eventController.canvasMousemoveEvent;if(i){var o=i.x,a=i.y,s=r.getShape(o,a);s&&r.emit(CN.MOUSE_MOVE,h(h({},i),{shape:s,target:s,timestamp:performance.now()}))}}},300),this.cfg=t,this.spreadsheet=t.spreadsheet,this.init()}return Object.defineProperty(t.prototype,"scrollBarTheme",{get:function(){return this.spreadsheet.theme.scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollBarSize",{get:function(){return this.scrollBarTheme.size},enumerable:!1,configurable:!0}),t.prototype.getCellCustomWidth=function(t,e){return oa(e)?null==e?void 0:e(t):e},t.prototype.getCellDraggedWidth=function(t){var e=this.cfg.colCfg;return sd(null==e?void 0:e.widthByFieldValue,"".concat(t.value))},t.prototype.render=function(){var t;cP((t=this.spreadsheet.dataCfg.fields).rows)&&cP(t.columns)&&cP(t.values)&&cP(t.customTreeItems)||(this.adjustScrollOffset(),this.renderHeaders(),this.renderScrollBars(),this.renderBackground(),this.dynamicRenderCell())},t.prototype.adjustScrollOffset=function(){var t=this.getAdjustedScrollOffset(this.getScrollOffset());this.setScrollOffset(t)},t.prototype.getSeriesNumberWidth=function(){return this.cfg.showSeriesNumber?this.spreadsheet.theme.rowCell.seriesNumberWidth:0},t.prototype.getCanvasHW=function(){return{width:this.cfg.width,height:this.cfg.height}},t.prototype.updateScrollOffset=function(t){var e,n,r,i,o,a;if((null===(e=t.rowHeaderOffsetX)||void 0===e?void 0:e.value)!==void 0){(null===(n=t.rowHeaderOffsetX)||void 0===n?void 0:n.animate)?this.scrollWithAnimation(t):this.scrollImmediately(t);return}if((null===(r=t.offsetX)||void 0===r?void 0:r.value)!==void 0){(null===(i=t.offsetX)||void 0===i?void 0:i.animate)?this.scrollWithAnimation(t):this.scrollImmediately(t);return}(null===(o=t.offsetY)||void 0===o?void 0:o.value)!==void 0&&((null===(a=t.offsetY)||void 0===a?void 0:a.animate)?this.scrollWithAnimation(t):this.scrollImmediately(t))},t.prototype.getPaginationScrollY=function(){var t=this.cfg.pagination;if(t){var e=t.current,n=t.pageSize,r=this.viewCellHeights,i=Math.max(((void 0===e?1:e)-1)*n,0);return r.getCellOffsetY(i)}return 0},t.prototype.destroy=function(){this.unbindEvents(),this.clearAllGroup(),this.preCellIndexes=null,cancelAnimationFrame(this.scrollFrameId)},t.prototype.calculateXYIndexes=function(t,e){var n=this.panelBBox,r=n.viewportHeight,i=n.viewportWidth;return{center:v2(t,e,this.viewCellWidths,this.viewCellHeights,{width:i,height:r,x:0,y:0},this.getRealScrollX(this.cornerBBox.width))}},t.prototype.calculateCornerBBox=function(){this.cornerBBox=new Sq(this,!0)},t.prototype.getCellRange=function(){var t=this.cfg.pagination;return gt(this.viewCellHeights,t)},t.prototype.panelScrollGroupClip=function(t,e){var n,r=this.spreadsheet.isFrozenRowHeader();null===(n=this.spreadsheet.panelScrollGroup)||void 0===n||n.setClip({type:"rect",attrs:{x:r?t:0,y:e,width:this.panelBBox.width+(r?0:t),height:this.panelBBox.height}})},t.prototype.clip=function(t,e){this.panelScrollGroupClip(t,e)},t.prototype.translateRelatedGroups=function(t,e,n){var r,i,o,a,s,l;v3(this.spreadsheet.panelScrollGroup,this.cornerBBox.width-t,this.cornerBBox.height-e),null===(r=this.rowHeader)||void 0===r||r.onScrollXY(this.getRealScrollX(t,n),e,ia),null===(i=this.rowIndexHeader)||void 0===i||i.onScrollXY(this.getRealScrollX(t,n),e,iu),null===(o=this.cornerHeader)||void 0===o||o.onCorScroll(this.getRealScrollX(t,n),ih),null===(a=this.centerFrame)||void 0===a||a.onChangeShadowVisibility(t,this.getRealWidth()-this.panelBBox.width),null===(s=this.centerFrame)||void 0===s||s.onBorderScroll(this.getRealScrollX(t)),null===(l=this.columnHeader)||void 0===l||l.onColScroll(t,ic)},t.prototype.init=function(){var t=this;vI.getInstance().debugCallback("Header Layout",function(){t.layoutResult=t.doLayout(),t.saveInitColumnLeafNodes(t.layoutResult.colLeafNodes),t.spreadsheet.emit(CD.LAYOUT_AFTER_HEADER_LAYOUT,t.layoutResult)}),this.calculateCellWidthHeight(),this.calculateCornerBBox(),this.calculatePanelBBox(),this.clipPanelGroup(),this.bindEvents()},t.prototype.renderBackground=function(){var t=this.getCanvasHW(),e=t.width,n=t.height,r=this.spreadsheet.theme.background,i=r.color,o=r.opacity;this.backgroundGroup.addShape("rect",{attrs:{fill:i,opacity:o,x:0,y:0,width:e,height:n}})},t.prototype.renderScrollBars=function(){var t=this.getScrollOffset(),e=t.scrollX,n=t.scrollY,r=t.rowHeaderScrollX,i=this.panelBBox,o=i.width,a=i.height,s=this.layoutResult.colsHierarchy.width,l=this.getRealHeight();this.renderRowScrollBar(r),this.renderHScrollBar(o,s,e),this.renderVScrollBar(a,l,n)},t.prototype.renderHeaders=function(){var t=this.getSeriesNumberWidth();this.rowHeader=this.getRowHeader(),this.columnHeader=this.getColHeader(),t>0&&!this.rowIndexHeader&&(this.rowIndexHeader=this.getSeriesNumberHeader()),this.cornerHeader=this.getCornerHeader(),this.centerFrame=this.getCenterFrame(),this.rowIndexHeader&&this.foregroundGroup.add(this.rowIndexHeader),this.rowHeader&&this.foregroundGroup.add(this.rowHeader),this.foregroundGroup.add(this.columnHeader),this.foregroundGroup.add(this.cornerHeader),this.foregroundGroup.add(this.centerFrame)},t.prototype.getRowHeaderCfg=function(){var t,e,n,r=this.panelBBox,i=r.y,o=r.viewportHeight,a=r.viewportWidth,s=r.height,l=this.getSeriesNumberWidth();return{width:this.cornerBBox.width,height:s,viewportWidth:a,viewportHeight:o,position:{x:0,y:i},data:this.layoutResult.rowNodes,hierarchyType:this.cfg.hierarchyType,linkFields:null!==(n=null===(e=null===(t=this.cfg.spreadsheet.options)||void 0===t?void 0:t.interaction)||void 0===e?void 0:e.linkFields)&&void 0!==n?n:[],seriesNumberWidth:l,spreadsheet:this.spreadsheet}},t.prototype.getRowHeader=function(){return this.rowHeader?this.rowHeader:new S0(this.getRowHeaderCfg())},t.prototype.getColHeader=function(){if(!this.columnHeader){var t=this.panelBBox,e=t.x,n=t.width,r=t.viewportHeight,i=t.viewportWidth;return new S$({width:n,cornerWidth:this.cornerBBox.width,height:this.cornerBBox.height,viewportWidth:i,viewportHeight:r,position:{x:e,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},t.prototype.getCornerHeader=function(){return this.cornerHeader?this.cornerHeader:SQ.getCornerHeader(this.panelBBox,this.cornerBBox,this.getSeriesNumberWidth(),this.cfg,this.layoutResult,this.spreadsheet)},t.prototype.getSeriesNumberHeader=function(){return S2.getSeriesNumberHeader({viewportBBox:this.panelBBox,seriesNumberWidth:this.getSeriesNumberWidth(),leafNodes:this.layoutResult.rowsHierarchy.getNodes(0),spreadsheet:this.spreadsheet,cornerWidth:this.cornerBBox.width})},t.prototype.getCenterFrame=function(){var t;if(!this.centerFrame){var e=this.panelBBox,n=e.viewportWidth,r=e.viewportHeight,i=this.cornerBBox.width,o=this.cornerBBox.height,a=null===(t=this.cfg)||void 0===t?void 0:t.frame,s={position:{x:this.cornerBBox.x,y:this.cornerBBox.y},width:i,height:o,viewportWidth:n,viewportHeight:r,showViewportLeftShadow:!1,showViewportRightShadow:!1,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),isPivotMode:this.cfg.spreadsheet.isPivotMode(),spreadsheet:this.cfg.spreadsheet};return a?a(s):new SJ(s)}return this.centerFrame},t.prototype.updatePanelScrollGroup=function(){this.gridInfo=this.getGridInfo(),this.spreadsheet.panelScrollGroup.update(this.gridInfo)},t.prototype.dynamicRenderCell=function(t){var e=this.getScrollOffset(),n=e.scrollX,r=e.scrollY,i=e.rowHeaderScrollX,o=SP(r+this.getPaginationScrollY(),this.viewCellHeights.getTotalHeight(),this.panelBBox.viewportHeight);this.spreadsheet.hideTooltip(),this.spreadsheet.interaction.clearHoverTimer(),this.realCellRender(n,o),this.updatePanelScrollGroup(),this.translateRelatedGroups(n,o,i),this.clip(n,o),t||this.emitScrollEvent({scrollX:n,scrollY:o,rowHeaderScrollX:i}),this.onAfterScroll()},t.prototype.emitScrollEvent=function(t){this.spreadsheet.emit(CD.LAYOUT_CELL_SCROLL,t),this.spreadsheet.emit(CD.GLOBAL_SCROLL,t)},t.prototype.saveInitColumnLeafNodes=function(t){void 0===t&&(t=[]);var e=this.spreadsheet,n=e.store,r=e.options.interaction.hiddenColumnFields;t.length+r.length!==n.get("initColumnLeafNodes",[]).length&&n.set("initColumnLeafNodes",t)},t.prototype.getHiddenColumnsInfo=function(t){var e=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return cP(e)?null:e.find(function(e){var n;return null===(n=null==e?void 0:e.hideColumnNodes)||void 0===n?void 0:n.some(function(e){return e.id===t.id})})},t.prototype.getCornerNodes=function(){var t;return(null===(t=this.cornerHeader)||void 0===t?void 0:t.getNodes())||[]},t}()),S5=function(t){var e,n,r,i=t.facetCfg,o=t.customTreeItems,a=t.level,s=t.parentNode,l=t.hierarchy,u=i.spreadsheet,h=i.collapsedRows,f=i.hierarchyCollapse;try{for(var p=d(void 0===o?[]:o),v=p.next();!v.done;v=p.next()){var g=v.value,y=g.key,m=g.title,C=g.collapsed,w=g.children,x=c(g,["key","title","collapsed","children"]),S=((r={})[r5]=y,r),b=vK(s.id,m),_=null!=C&&C,E=sd(h,b),L=null!=E?E:f||_,T=new vE({id:b,key:y,label:m,value:m,level:a,parent:s,field:y,isTotals:!1,isCollapsed:L,hierarchy:l,query:S,spreadsheet:u,extra:x});a>l.maxLevel&&(l.maxLevel=a),cP(w)&&(T.isLeaf=!0);var M=vG(i,s,T,l);cP(w)||L||!M||S5({facetCfg:i,parentNode:T,level:a+1,hierarchy:l,customTreeItems:w})}}catch(t){e={error:t}}finally{try{v&&!v.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}},S8=function(t,e,n){var r=t.getTotalsConfig(e);r.showGrandTotals&&n[r.reverseLayout?"unshift":"push"](new vT({label:r.label,isSubTotals:!1,isGrandTotals:!0}))},S6=function(t){var e,n,r,i,o,a,s,l=t.parentNode,u=t.currentField,c=t.level,f=t.facetCfg,p=t.hierarchy,v=t.pivotMeta,g=f.spreadsheet,y=f.collapsedRows,m=f.hierarchyCollapse,C=f.rowExpandDepth,w=l.query,x=l.id,S=(null===(o=g.dataCfg.fields.rows)||void 0===o?void 0:o.length)<=c,b=vW((void 0===(e=Array.from(v.keys()))&&(e=[]),e.filter(function(t){return t!==r6&&t!==ie})),f,l,u),_=g.store.get("drillItemsNum");S&&_>0&&(b=b.slice(0,_)),0===c&&S8(g,u,b);try{for(var E=d(b),L=E.next();!L.done;L=E.next()){var T=L.value,M=T instanceof vT,R=M?null:v.get(T),I=void 0,O=w,A=!1,B=!1;M?(A=T.isGrandTotals,B=T.isSubTotals,I=vy(T.label),O=w):(I=T,O=h(h({},w),((i={})[u]=I,i)));var N=vK(x,I),D=null==y?void 0:y[N],k=cW(C)?c>C:null,z=null!==(a=null!=D?D:k)&&void 0!==a?a:m,P=new vE({id:N,key:u,label:I,value:I,level:c,parent:l,field:u,isTotals:M,isGrandTotals:A,isSubTotals:B,isCollapsed:z,hierarchy:p,query:O,spreadsheet:g});c>p.maxLevel&&(p.maxLevel=c);var H=!(null===(s=null==R?void 0:R.children)||void 0===s?void 0:s.size);(H||M)&&(P.isLeaf=!0),H||(P.isTotals=!0);var F=vG(f,l,P,p);H||z||M||!F||S6({level:c+1,currentField:R.childField,pivotMeta:R.children,facetCfg:f,parentNode:P,hierarchy:p})}}catch(t){n={error:t}}finally{try{L&&!L.done&&(r=E.return)&&r.call(E)}finally{if(n)throw n.error}}},S7=function(t){var e,n,r=t.isValueInCols,i=t.moreThanOneValue,o=t.rootNode,a=t.facetCfg,s=t.hierarchy,l=t.fields;t.isRowHeader?(e=!r&&i,n=!r&&!i):(e=r&&i,n=r&&!i),vq({addTotalMeasureInTotal:e,addMeasureInTotalQuery:n,parentNode:o,currentField:l[0],fields:l,facetCfg:a,hierarchy:s})},S9=function(t){var e=t.facetCfg,n=t.rootNode,r=t.hierarchy;S5({customTreeItems:e.dataSet.fields.customTreeItems,facetCfg:e,level:0,parentNode:n,hierarchy:r})},bt=function(t){var e=t.facetCfg,n=t.rootNode,r=t.hierarchy,i=e.hierarchyType,o=e.rows,a=e.dataSet;"tree"===i?S6({level:0,currentField:o[0],pivotMeta:a.rowPivotMeta,facetCfg:e,parentNode:n,hierarchy:r}):S9(t)},be=function(t){t.spreadsheet.isHierarchyTreeType()?bt(t):S7(t)},bn=function(t){var e=t.isPivotMode,n=t.hierarchy,r=t.rootNode,i=t.facetCfg;e?S7(t):gu({parentNode:r,hierarchy:n,facetCfg:i})},br=function(t){var e=t.isRowHeader,n=t.facetCfg,r=n.spreadsheet,i=n.rows,o=n.columns,a=r.dataCfg.fields.valueInCols,s=r.isPivotMode(),l=n.dataSet.moreThanOneValue(),u=vE.rootNode(),h=new vL,c={isValueInCols:a,isPivotMode:s,moreThanOneValue:l,rootNode:u,hierarchy:h,spreadsheet:r,facetCfg:n,fields:e?void 0===i?[]:i:void 0===o?[]:o,isRowHeader:e};return e?be(c):bn(c),{hierarchy:h,leafNodes:e&&r.isHierarchyTreeType()?h.getNodes():h.getLeaves()}},bi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderFrozenGroupSplitLine=function(t,n){var r;if(null===(r=e.foregroundGroup.findById(il))||void 0===r||r.remove(),e.enableFrozenFirstRow()){var i=Math.floor(n-e.getPaginationScrollY()),o=e.foregroundGroup.addGroup({id:il,zIndex:4}),a=sd(e.cfg,"spreadsheet.theme.splitLine"),s={lineWidth:null==a?void 0:a.horizontalBorderWidth,stroke:null==a?void 0:a.horizontalBorderColor,opacity:null==a?void 0:a.horizontalBorderColorOpacity},l=e.cornerBBox.height,u=e.getCellRange(),c=l+e.getTotalHeightForRange(u.start,u.start),d=e.panelBBox.viewportWidth+e.layoutResult.rowsHierarchy.width+e.getSeriesNumberWidth();gv(o,{x1:0,x2:d,y1:c,y2:c},h({},s)),a.showShadow&&i>0&&o.addShape("rect",{attrs:{x:0,y:c,width:d,height:a.shadowWidth,fill:e.getShadowFill(90)}})}},e}return u(e,t),e.prototype.updateFrozenGroupGrid=function(){var t=this;[CH.FROZEN_ROW].forEach(function(e){if(t.frozenGroupInfo[e].range){var n=[],r=[];if(e.toLowerCase().includes("row")){var i=f(t.frozenGroupInfo[e].range,2),o=i[0],a=i[1];n=t.gridInfo.cols,r=SW(o,a,t.viewCellHeights)}t.spreadsheet["".concat(e,"Group")].updateGrid({cols:n,rows:r},"".concat(e,"Group"))}})},e.prototype.getBizRevisedFrozenOptions=function(){return gl(this.cfg,this.layoutResult.rowNodes)},e.prototype.clip=function(e,n){var r=this.spreadsheet,i=r.isFrozenRowHeader,o=r.frozenRowGroup;if(!i.call(this.spreadsheet)){if(this.panelScrollGroupClip(e,n),this.enableFrozenFirstRow()){var a=this.getPaginationScrollY();o.setClip({type:"rect",attrs:{x:0,y:a,width:this.panelBBox.width+e,height:o.getBBox().height}})}return}t.prototype.clip.call(this,e,n)},Object.defineProperty(e.prototype,"rowCellTheme",{get:function(){return this.spreadsheet.theme.rowCell.cell},enumerable:!1,configurable:!0}),e.prototype.getContentHeight=function(){var t=this.layoutResult,e=t.rowsHierarchy,n=t.colsHierarchy;return e.height+n.height},e.prototype.doLayout=function(){var t=br({isRowHeader:!0,facetCfg:this.cfg}),e=t.leafNodes,n=t.hierarchy,r=br({isRowHeader:!1,facetCfg:this.cfg}),i=r.leafNodes,o=r.hierarchy;this.calculateNodesCoordinate(e,n,i,o);var a=this.cfg,s=a.dataSet,l=a.spreadsheet,u={colNodes:o.getNodes(),colsHierarchy:o,rowNodes:n.getNodes(),rowsHierarchy:n,rowLeafNodes:e,colLeafNodes:i,getCellMeta:function(t,n){var r,o,a,u=t||0,h=n||0,c=e[u],d=i[h];if(!c||!d)return null;var f=c.query,p=d.query,v=c.isTotals||c.isTotalMeasure||d.isTotals||d.isTotalMeasure,g=l.options.hierarchyType,y=dr({},f,p,null!==(o=sd(l,"facet.cfg.colCfg.hideMeasureColumn"))&&void 0!==o&&o&&"customTree"!==g?((r={})[r5]=null===(a=s.fields.values)||void 0===a?void 0:a[0],r):{}),m=g8(c,d),C=s.getCellData({query:y,rowNode:c,isTotals:v,totalStatus:m}),w=y[r5],x=sd(C,r3,null);return{spreadsheet:l,x:d.x,y:c.y,width:d.width,height:c.height,data:C,rowIndex:u,colIndex:h,isTotals:v,valueField:w,fieldValue:x,rowQuery:f,colQuery:p,rowId:c.id,colId:d.id,id:yj(c.id,d.id)}},spreadsheet:l};return vY(this.cfg,u)},e.prototype.calculateNodesCoordinate=function(t,e,n,r){this.calculateRowNodesCoordinate(t,e,n),this.calculateColNodesCoordinate(n,r,t,e.width)},e.prototype.calculateColNodesCoordinate=function(t,e,n,r){for(var i,o,a,s=vE.blankNode(),l=e.getNodes(),u=e.sampleNodesForAllLevels,h=0;h<u.length;h++){var c=u[h];if(c.height=this.getColNodeHeight(c),e.height+=c.height,0===c.level)c.y=0;else{var d=u[h-1];c.y=null!==(i=(null==d?void 0:d.y)+(null==d?void 0:d.height))&&void 0!==i?i:0}}for(var f=0,p=this,v=0;v<l.length;v++)!function(i){var a=l[i];if(a.isLeaf&&(a.colIndex=f,f+=1,a.x=s.x+s.width,a.width=p.calculateColLeafNodesWidth(a,t,n,r),e.width+=a.width,s=a),0===a.level)a.y=0;else{var u=e.sampleNodesForAllLevels.find(function(t){return t.level===a.level-1});a.y=null!==(o=(null==u?void 0:u.y)+(null==u?void 0:u.height))&&void 0!==o?o:0}a.height=p.getColNodeHeight(a),vV(p.cfg,null,a)}(v);this.autoCalculateColNodeWidthAndX(t),cP(null===(a=this.spreadsheet.options.totals)||void 0===a?void 0:a.col)||(this.adjustTotalNodesCoordinate({hierarchy:e,isRowHeader:!1,isSubTotal:!0}),this.adjustTotalNodesCoordinate({hierarchy:e,isRowHeader:!1,isSubTotal:!1}))},e.prototype.autoCalculateColNodeWidthAndX=function(t){for(var e,n=null,r=0,i=t.slice(0);r<i.length;){var o=i[r++].parent;if(n!==o&&o){i.push(o);var a=null===(e=o.children)||void 0===e?void 0:e.find(function(t){return t.width}),s=null==a?void 0:a.x,l=fA(o.children,"width");o.x=s,o.width=l,n=o}}},e.prototype.calculateColLeafNodesWidth=function(t,e,n,r){var i,o,a,s,l,u=this.cfg,c=u.colCfg,d=u.dataSet,f=u.filterDisplayDataItem,p=this.getCellDraggedWidth(t);if(cW(p))return p;var v=this.getCellCustomWidth(t,null==c?void 0:c.width);if(cW(v))return v;if(this.spreadsheet.getLayoutWidthType()===CJ.Compact){for(var g=this.spreadsheet.theme.colCell,y=g.bolderText,m=g.cell,C=g.icon,w=this.spreadsheet.theme.dataCell.text,x=this.spreadsheet.dataSet.getFieldFormatter(t.field),S=null!==(i=null==x?void 0:x(t.value))&&void 0!==i?i:t.label,b=this.getExpectedCellIconWidth(CG.COL_CELL,this.spreadsheet.isValueInCols()&&this.spreadsheet.options.showDefaultHeaderActionIcon,C),_=this.spreadsheet.measureTextWidthRoughly(S,y)+b,E=void 0,L=0,T=0;T<50;T++){var M=n[T];if(M){var R=d.getCellData({query:h(h({},t.query),M.query),rowNode:M,isTotals:t.isTotals||t.isTotalMeasure||M.isTotals||M.isTotalMeasure,totalStatus:g8(M,t)});if(R){var I=yY(R,f),O=null!==(a=null===(o=this.spreadsheet.dataSet.getFieldFormatter(R[r5]))||void 0===o?void 0:o(I))&&void 0!==a?a:I,A="".concat(O),B=this.spreadsheet.measureTextWidthRoughly(A,w);B>L&&(E=A,L=B)}}}var N=_>L,D=N?S:E;return vI.getInstance().logger("Max Label In Col:",t.field,D,L),this.spreadsheet.measureTextWidth(D,h(h({},y),{fontSize:Math.max(w.fontSize,y.fontSize)}))+(null===(s=m.padding)||void 0===s?void 0:s.left)+(null===(l=m.padding)||void 0===l?void 0:l.right)+(N?b:0)}return this.spreadsheet.isHierarchyTreeType()?this.getAdaptTreeColWidth(t,e,n):this.getAdaptGridColWidth(e,r)},e.prototype.getColNodeHeight=function(t){var e=this.cfg.colCfg,n=sd(e,["heightByField",t.key]);return null!=n?n:null==e?void 0:e.height},e.prototype.getExpectedCellIconWidth=function(t,e,n){var r,i=0;if(e)i=1;else{var o=mC(hK(this.spreadsheet.options.headerActionIcons,function(t){return h(h({},t),{displayCondition:function(){return!0}})}),null,t);i=null!==(r=null==o?void 0:o.iconNames.length)&&void 0!==r?r:0}return i?i*(n.size+n.margin.left)+n.margin.right:0},e.prototype.calculateRowNodesCoordinate=function(t,e,n){var r,i,o,a,s,l,u,h,c,f,p=this.cfg,v=p.cellCfg,g=p.spreadsheet,y=g.isHierarchyTreeType(),m=sd(g,"options.style.rowCfg.heightByField",{}),C=null!==(o=e.sampleNodesForAllLevels)&&void 0!==o?o:[];if(y)e.width=this.getTreeRowHeaderWidth();else try{for(var w=d(e.sampleNodesForAllLevels),x=w.next();!x.done;x=w.next()){var S=x.value;S.width=this.calculateGridRowNodesWidth(S,n),e.width+=S.width;var b=null!==(a=C[S.level-1])&&void 0!==a?a:{x:0,width:0};S.x=(null==b?void 0:b.x)+(null==b?void 0:b.width)}}catch(t){r={error:t}}finally{try{x&&!x.done&&(i=w.return)&&i.call(w)}finally{if(r)throw r.error}}for(var _=vE.blankNode(),E=e.getNodes(),L=0;L<E.length;L++){var T=E[L];if((y||!y&&T.isLeaf)&&(null!==(s=T.rowIndex)&&void 0!==s||(T.rowIndex=L),null!==(l=T.colIndex)&&void 0!==l||(T.colIndex=L),T.y=_.y+_.height,T.height=(null!==(u=null==m?void 0:m[T.id])&&void 0!==u?u:null==v?void 0:v.height)+(null===(h=this.rowCellTheme.padding)||void 0===h?void 0:h.top)+(null===(c=this.rowCellTheme.padding)||void 0===c?void 0:c.bottom),_=T,e.height+=T.height),y||0===T.level)T.x=0;else{var b=C[T.level-1];T.x=(null==b?void 0:b.x)+(null==b?void 0:b.width)}if(y)T.width=this.getTreeRowHeaderWidth();else{var M=C[T.level];T.width=null==M?void 0:M.width}vV(this.cfg,T,null)}y||(this.autoCalculateRowNodeHeightAndY(t),cP(null===(f=g.options.totals)||void 0===f?void 0:f.row)||(this.adjustTotalNodesCoordinate({hierarchy:e,isRowHeader:!0,isSubTotal:!1}),this.adjustTotalNodesCoordinate({hierarchy:e,isRowHeader:!0,isSubTotal:!0})))},e.prototype.autoCalculateRowNodeHeightAndY=function(t){for(var e=null,n=0,r=t.slice(0);n<r.length;){var i=r[n++].parent;e!==i&&i&&(r.push(i),i.y=i.children[0].y,i.height=i.children.reduce(function(t,e){return t+e.height},0),e=i)}},e.prototype.getMultipleMap=function(t,e,n){for(var r=t.maxLevel,i=this.cfg,o=i.totals,a=i.dataSet,s=a.moreThanOneValue(),l=a.fields,u=l.rows,h=l.columns,c=e?u:h,d=e?o.row:o.col,f=n?d.subTotalsGroupDimensions||[]:d.totalsGroupDimensions||[],p=Array.from({length:r+1},function(){return 1}),v=r;v>0;v--){var g=c[v],y=g===r5&&s;f.includes(g)||y||(p[v-1]+=p[v],p[v]=0)}return p},e.prototype.adjustTotalNodesCoordinate=function(t){var e=t.hierarchy,n=t.isRowHeader,r=t.isSubTotal,i=this.getMultipleMap(e,n,r),o=hz(e.getNodes(),function(t){return r?t.isSubTotals:t.isGrandTotals}),a=n?"width":"height";hm(o,function(t){var n=i[t.level];if(!n&&r)for(var o=1;n<1;)n=i[t.level-o]-o,o++;for(var s=0,l=function(n){s+=e.sampleNodesForAllLevels.find(function(e){return e.level===t.level+n})[a]},u=0;u<n;u++)l(u);t[a]=s})},e.prototype.calculateGridRowNodesWidth=function(t,e){var n=this.cfg,r=n.rowCfg,i=n.spreadsheet,o=sd(r,["widthByField",t.key]);if(cW(o))return o;var a=this.getCellCustomWidth(t,null==r?void 0:r.width);return cW(a)?a:i.getLayoutWidthType()!==CJ.Adaptive?this.getCompactGridRowWidth(t):this.getAdaptGridColWidth(e)},e.prototype.getAdaptTreeColWidth=function(t,e,n){var r=this.getCanvasHW().width-this.getSeriesNumberWidth(),i=Math.min(r/2,this.getTreeRowHeaderWidth()),o=Math.max(1,e.length);return Math.max(g$(this.cfg.cellCfg,this.getColLabelLength(t,n)),(r-i)/o)},e.prototype.getColLabelLength=function(t,e){var n,r=gQ(null==t?void 0:t.value);if(iq(r))return r.length;for(var i=1,o=0;o<50;o++){var a=e[o];if(!a)break;for(var s=this.cfg.dataSet.getCellData({query:h(h({},t.query),a.query),rowNode:a,isTotals:t.isTotals||t.isTotalMeasure||a.isTotals||a.isTotalMeasure,totalStatus:g8(a,t)}),l=aj(null==s?void 0:s[r8]),u=0;u<l.length;u++){var c=s[l[u]],d=fy(null===(n=null==c?void 0:c.values)||void 0===n?void 0:n[0]);d>i&&(i=d)}}return i},e.prototype.getAdaptGridColWidth=function(t,e){var n=this.cfg,r=n.rows,i=n.cellCfg,o=r.length,a=t.length,s=this.getCanvasHW().width-this.getSeriesNumberWidth(),l=Math.max(1,o+a);return e?Math.max(g$(i),(s-e)/a):Math.max(g$(i),s/l)},e.prototype.getTreeRowHeaderWidth=function(){var t,e,n,r,i=this.cfg,o=i.rows,a=i.dataSet,s=i.rowCfg,l=i.treeRowsWidth,u=null!=l?l:null==s?void 0:s.treeRowsWidth;if(cW(u))return u;var h=this.getCellCustomWidth(null,null==s?void 0:s.width);if(cW(h))return h;var c=o.map(function(t){return a.getFieldName(t)}).join("/"),d=this.spreadsheet.theme.cornerCell,f=d.bolderText,p=d.icon,v=Math.max(null!=u?u:120,1+this.spreadsheet.measureTextWidth(c,f)+2*p.size+(null===(t=p.margin)||void 0===t?void 0:t.left)+(null===(e=p.margin)||void 0===e?void 0:e.right)+(null===(n=this.rowCellTheme.padding)||void 0===n?void 0:n.left)+(null===(r=this.rowCellTheme.padding)||void 0===r?void 0:r.right));return Number.isNaN(v)?120:v},e.prototype.getCompactGridRowWidth=function(t){var e,n=this,r=this.cfg,i=r.dataSet,o=r.spreadsheet,a=o.theme.rowCell,s=a.bolderText,l=a.icon,u=a.cell,h=o.theme.cornerCell,c=h.bolderText,d=h.icon,f=h.cell,p=t.field,v=t.isLeaf,g=this.getExpectedCellIconWidth(CG.ROW_CELL,!o.isValueInCols()&&v&&o.options.showDefaultHeaderActionIcon,l),y=c9(null===(e=i.getDimensionValues(p))||void 0===e?void 0:e.slice(0,50).map(function(t){var e,r;return null!==(r=null===(e=n.spreadsheet.dataSet.getFieldFormatter(p))||void 0===e?void 0:e(t))&&void 0!==r?r:t}),function(t){return"".concat(t).length}),m=o.measureTextWidth(y,s)+g+u.padding.left+u.padding.right,C=i.getFieldName(p),w=this.getExpectedCellIconWidth(CG.CORNER_CELL,!1,d),x=o.measureTextWidth(C,c)+w+f.padding.left+f.padding.right;return vI.getInstance().logger("Max Label In Row:",p,m>x?y:C),Math.max(m,x)},e.prototype.getViewCellHeights=function(t){var e=fu(t.rowLeafNodes,function(t,e){return t.push(hd(t)+e.height),t},[0]);return{getTotalHeight:function(){return hd(e)},getCellOffsetY:function(t){return e[t]},getTotalLength:function(){return e.length-1},getIndexRange:function(t,n){return Sk(e,t,n)}}},e.prototype.getRowHeader=function(){if(!this.rowHeader){var t=this.getRowHeaderCfg(),e=t.viewportHeight,n=c(t,["viewportHeight"]),r=gl(this.cfg,this.layoutResult.rowNodes).frozenRowHeight;return new S4(h(h({},n),{viewportHeight:e-r}))}},e.prototype.enableFrozenFirstRow=function(){return!!this.getBizRevisedFrozenOptions().frozenRowCount},e}(S3),bo=function(t){function e(e){var n,r=this;(r=t.call(this,e)||this).getScrollGroupClipBBox=function(){var t,e=r.headerConfig,n=e.width,i=e.height,o=e.scrollX,a=e.spreadsheet,s=a.options;if(!s.frozenColCount&&!s.frozenTrailingColCount)return{x:o,y:0,width:n,height:i};for(var l=null===(t=a.facet)||void 0===t?void 0:t.layoutResult.colLeafNodes,u=gc(a.options,l.length),h=u.frozenColCount,c=u.frozenTrailingColCount,d=0,f=0,p=0;p<h;p++)d+=l[p].width;for(var p=0;p<c;p++)f+=l[l.length-1-p].width;var v=n-d-f;return{x:o+d,y:0,width:v,height:i}};var i=null===(n=r.headerConfig.spreadsheet)||void 0===n?void 0:n.options,o=i.frozenColCount,a=i.frozenTrailingColCount;return o&&(r.frozenColGroup=r.addGroup({name:"colFrozenGroup",zIndex:4})),a&&(r.frozenTrailingColGroup=r.addGroup({name:"colFrozenTrailingGroup",zIndex:4})),r}return u(e,t),e.prototype.isFrozenCell=function(t){var e=this.headerConfig.spreadsheet,n=null==e?void 0:e.options,r=n.frozenColCount,i=n.frozenTrailingColCount,o=t.colIndex,a=null==e?void 0:e.facet.layoutResult.colLeafNodes;return vQ(o,r)||vJ(o,i,a.length)},e.prototype.clear=function(){var e,n,r=this.headerConfig.spreadsheet;t.prototype.clear.call(this),null===(e=this.frozenTrailingColGroup)||void 0===e||e.clear(),null===(n=this.frozenColGroup)||void 0===n||n.clear();var i=null==r?void 0:r.foregroundGroup.findById(id);null==i||i.clear()},e.prototype.getCellInstance=function(t,e,n){return t.field===r9?new mV(t,e,n):new mG(t,e,n)},e.prototype.getCellGroup=function(t){var e,n,r=this.headerConfig.spreadsheet,i=null==r?void 0:r.options,o=i.frozenColCount,a=i.frozenTrailingColCount,s=ge(null===(e=null==r?void 0:r.facet)||void 0===e?void 0:e.layoutResult.colNodes.filter(function(t){return gr(t)}),o,a),l=s.colCount,u=s.trailingColCount;return vQ(gs(t).colIndex,l)?this.frozenColGroup:vJ(gs(t).colIndex,u,null===(n=null==r?void 0:r.facet)||void 0===n?void 0:n.layoutResult.colLeafNodes.length)?this.frozenTrailingColGroup:this.scrollGroup},e.prototype.isColCellInRect=function(e){var n,r,i=this.headerConfig.spreadsheet,o=null==i?void 0:i.options,a=o.frozenColCount,s=o.frozenTrailingColCount,l=null===(n=null==i?void 0:i.facet)||void 0===n?void 0:n.layoutResult.colLeafNodes.length,u=ge(null===(r=null==i?void 0:i.facet)||void 0===r?void 0:r.layoutResult.colNodes.filter(function(t){return gr(t)}),a,s),h=u.colCount,c=u.trailingColCount;return!!(vQ(gs(e).colIndex,h)||vJ(gs(e).colIndex,c,l))||t.prototype.isColCellInRect.call(this,e)},e.prototype.clip=function(){this.scrollGroup.setClip({type:"rect",attrs:this.getScrollGroupClipBBox()})},e}(S$),ba=function(t){function e(e){var n=t.call(this,e)||this;n.onSortHandler=function(t){var e=n.spreadsheet,r=t;Array.isArray(t)||(r=[t]);var i=e.dataCfg.sortParams||[];r=r.map(function(t){var e,n,r=h(h({},t),{sortFieldId:null!==(e=t.sortKey)&&void 0!==e?e:t.sortFieldId}),o=null!==(n=i.find(function(t){return t.sortFieldId===r.sortFieldId}))&&void 0!==n?n:{};return h(h({},o),r)});var o=i.filter(function(t){return!r.find(function(e){return e.sortFieldId===t.sortFieldId})});fg(e.dataCfg,"sortParams",p(p([],f(o),!1),f(r),!1)),e.setDataCfg(e.dataCfg),e.render(!0),e.emit(CD.RANGE_SORTED,e.dataSet.getDisplayDataSet())},n.onFilterHandler=function(t){var e=n.spreadsheet,r=!t.filteredValues||0===t.filteredValues.length,i=e.dataCfg.filterParams||[],o=i.findIndex(function(e){return e.filterKey===t.filterKey});-1!==o?r?i.splice(o,1):i[o]=t:i.push(t),fg(e.dataCfg,"filterParams",i),e.render(!0),e.emit(CD.RANGE_FILTERED,e.dataSet.getDisplayDataSet())},n.renderFrozenPanelCornerGroup=function(){var t=n.layoutResult.colNodes.filter(function(t){return gr(t)}),e=n.getCellRange(),r=gc(n.spreadsheet.options,t.length,e.end-e.start+1),i=r.frozenRowCount,o=r.frozenColCount,a=r.frozenTrailingRowCount,s=ge(t,o,r.frozenTrailingColCount),l=v7({frozenRowCount:i,frozenColCount:s.colCount,frozenTrailingRowCount:a,frozenTrailingColCount:s.trailingColCount},n.layoutResult.colLeafNodes.length,e);Object.keys(l).forEach(function(t){var e=l[t],r=n.spreadsheet[iE[t]];r&&e.forEach(function(t){n.addFrozenCell(t.x,t.y,r)})})},n.addFrozenCell=function(t,e,r){var i=n.layoutResult.getCellMeta(e,t);if(i.isFrozenCorner=!0,i){var o=n.cfg.dataCell(i);r.add(o)}};var r=n.spreadsheet;return r.on(CD.RANGE_SORT,n.onSortHandler),r.on(CD.RANGE_FILTER,n.onFilterHandler),n}return u(e,t),e.prototype.updateRowResizeArea=function(){var t=this.spreadsheet,e=t.foregroundGroup,n=sd(t.options,"interaction.resize");if(cN(n)?n:null==n?void 0:n.rowCellVertical){var r=e.findById(ia),i=e.findById(is);r&&r.set("children",[]),i&&i.set("children",[]);var o=SH(this.panelGroup.getChildren(),mY).filter(function(t){return t.shouldDrawResizeArea()});null==o||o.forEach(function(t){t.drawResizeArea()})}},e.prototype.clip=function(e,n){t.prototype.clip.call(this,e,n),this.clipResizeAreaGroup()},e.prototype.clipResizeAreaGroup=function(){var t,e,n=this.spreadsheet.foregroundGroup.findById(ia);if(n){var r=this.layoutResult.colLeafNodes,i=this.spreadsheet,o=i.frozenRowGroup,a=i.frozenTrailingRowGroup,s=0,l=0;o&&(s=o.getBBox().height),a&&(l=a.getBBox().height);var u=this.panelBBox.height-s-l;n.setClip({type:"rect",attrs:{x:0,y:s+this.cornerBBox.height,width:null!==(e=null===(t=null==r?void 0:r[0])||void 0===t?void 0:t.width)&&void 0!==e?e:0,height:u}})}},e.prototype.getContentHeight=function(){var t=this.getViewCellHeights().getTotalHeight,e=this.layoutResult.colsHierarchy;return t()+e.height},Object.defineProperty(e.prototype,"dataCellTheme",{get:function(){return this.spreadsheet.theme.dataCell.cell},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e=this.spreadsheet;e.off(CD.RANGE_SORT,this.onSortHandler),e.off(CD.RANGE_FILTER,this.onFilterHandler),t.prototype.destroy.call(this)},e.prototype.calculateCornerBBox=function(){var t=Math.floor(this.layoutResult.colsHierarchy.height);this.cornerBBox=new Sq(this),this.cornerBBox.height=t,this.cornerBBox.maxY=t},e.prototype.doLayout=function(){var t=this,e=this.cfg,n=e.dataSet,r=e.spreadsheet,i=new vL,o=br({isRowHeader:!1,facetCfg:this.cfg}),a=o.leafNodes,s=o.hierarchy;return this.calculateColNodesCoordinate(a,s),{colNodes:s.getNodes(),colsHierarchy:s,rowNodes:i.getNodes(),rowsHierarchy:i,rowLeafNodes:i.getLeaves(),colLeafNodes:a,getCellMeta:function(e,i){var o,s,l=t.cfg.showSeriesNumber,u=a[i],h=t.getCellHeight(e),c=t.getCellRange(),d=gc(t.cfg,a.length,c.end-c.start+1).frozenTrailingRowCount,f=u.x,p=t.viewCellHeights.getCellOffsetY(e);return v1(e,c.end,d)&&(p=t.panelBBox.maxY-t.getTotalHeightForRange(e,c.end)),s=l&&u.field===r9?"".concat(e+1):n.getCellData({query:{field:u.field,rowIndex:e}}),{spreadsheet:r,x:f,y:p,width:u.width,height:h,data:((o={})[u.field]=s,o),rowIndex:e,colIndex:i,isTotals:!1,colId:u.id,rowId:String(e),valueField:u.field,fieldValue:s,id:yj(String(e),u.id)}},spreadsheet:r}},e.prototype.getAdaptiveColWidth=function(t){var e=this.cfg.cellCfg,n=this.cfg.showSeriesNumber;if(this.spreadsheet.getLayoutWidthType()!==CJ.Compact){var r=this.getSeriesNumberWidth(),i=t.length-(n?1:0),o=this.getCanvasHW().width-r;return Math.max(null==e?void 0:e.width,o/Math.max(1,i))}return null==e?void 0:e.width},e.prototype.getColNodeHeight=function(t,e){var n=this.cfg.colCfg,r=ch(null==n?void 0:n.heightByField)[0]||(null==n?void 0:n.height);if(!e||t.children&&t.children.length)return r;for(;t.parent;)e-=gr(t)?0:r,t=t.parent;return e},e.prototype.calculateColNodesCoordinate=function(t,e){var n,r,i,o,a,s,l=vE.blankNode(),u=e.getNodes();try{for(var h=d(e.sampleNodesForAllLevels),c=h.next();!c.done;c=h.next()){var f=c.value;f.height=this.getColNodeHeight(f),e.height+=f.height}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}for(var p=this.getAdaptiveColWidth(t),v=0,g=0;g<u.length;g++){var y=u[g];y.isLeaf&&(y.colIndex=v,v+=1,y.x=l.x+l.width,y.width=this.calculateColLeafNodesWidth(y,p),vV(this.cfg,null,y),e.width+=y.width,l=y),0===y.level?y.y=0:y.y=null!==(a=(null===(i=y.parent)||void 0===i?void 0:i.y)+(null===(o=y.parent)||void 0===o?void 0:o.height))&&void 0!==a?a:0,y.height=this.getColNodeHeight(y,e.height)}var m=u.filter(function(t){return gr(t)}),C=gc(null===(s=this.spreadsheet)||void 0===s?void 0:s.options,m.length).frozenTrailingColCount;l=vE.blankNode();var w=this.getCanvasHW().width;if(C>0)for(var x=ge(m,0,C).trailingColCount,S=u.filter(function(t){return t.isLeaf}),g=1;g<=x;g++){var y=S[S.length-g];1===g?y.x=w-y.width:y.x=l.x-y.width,l=y}this.autoCalculateColNodeWidthAndX(t)},e.prototype.autoCalculateColNodeWidthAndX=function(t){for(var e=null,n=t.slice(0);n.length;){var r=n.shift().parent;e!==r&&r&&(n.push(r),r.x=r.children[0].x,r.width=r.children.map(function(t){return t.width}).reduce(function(t,e){return t+e},0),e=r)}},e.prototype.calculateColLeafNodesWidth=function(t,e){var n,r=this.cfg,i=r.colCfg,o=r.dataSet,a=r.spreadsheet,s=this.spreadsheet.getLayoutWidthType(),l=this.getCellDraggedWidth(t);if(cW(l))return l;var u=this.getCellCustomWidth(t,null==i?void 0:i.width);if(cW(u))return u;if(s===CJ.Compact){var h=o.getDisplayDataSet(),c=o.getFieldFormatter(t.field),d=c9(null==h?void 0:h.slice(0,50).map(function(e){var n;return"".concat(null!==(n=null==c?void 0:c(e[t.field]))&&void 0!==n?n:e[t.field])}),function(t){return a.measureTextWidthRoughly(t)});vI.getInstance().logger("Max Label In Col:",t.field,d);var f=a.theme.colCell.bolderText,p=a.theme.dataCell,v=p.text,g=p.cell,y=a.measureTextWidth(d,v)+g.padding.left+g.padding.right+1;n=Math.max(a.measureTextWidth(t.label,f)+mW(this.spreadsheet,t,a.theme.colCell),y)}else n=e;return t.field===r9&&(n=this.getSeriesNumberWidth()),n},e.prototype.initRowOffsets=function(){var t,e=this,n=this.cfg.dataSet,r=((null===(t=this.spreadsheet.options.style)||void 0===t?void 0:t.rowCfg)||{}).heightByField,i=void 0===r?{}:r;if(Object.keys(i).length){var o=n.getDisplayDataSet();this.rowOffsets=[0];var a=0;o.forEach(function(t,n){var r,o=null!==(r=null==i?void 0:i[String(n)])&&void 0!==r?r:e.getDefaultCellHeight(),s=a+o;e.rowOffsets.push(s),a=s})}},e.prototype.getCellHeight=function(t){var e;if(this.rowOffsets){var n=((null===(e=this.spreadsheet.options.style)||void 0===e?void 0:e.rowCfg)||{}).heightByField,r=void 0===n?{}:n,i=null==r?void 0:r[String(t)];if(cW(i))return i}return this.getDefaultCellHeight()},e.prototype.getViewCellHeights=function(){var t=this,e=this.cfg.dataSet,n=this.getDefaultCellHeight();return{getTotalHeight:function(){return t.rowOffsets?hd(t.rowOffsets):n*e.getDisplayDataSet().length},getCellOffsetY:function(e){if(e<=0)return 0;if(t.rowOffsets)return t.rowOffsets[e];for(var r=0,i=0;i<e;i++)r+=n;return r},getTotalLength:function(){return e.getDisplayDataSet().length},getIndexRange:function(e,r){return t.rowOffsets?Sk(t.rowOffsets,e,r):{start:Math.max(0,Math.floor(e/n)),end:Math.max(0,r%n==0?r/n-1:Math.floor(r/n))}}}},e.prototype.init=function(){this.initRowOffsets(),t.prototype.init.call(this);var e=this.panelBBox,n=e.width,r=e.height;this.spreadsheet.panelGroup.setClip({type:"rect",attrs:{x:0,y:this.cornerBBox.height,width:n,height:r}})},e.prototype.getColHeader=function(){if(!this.columnHeader){var t=this.panelBBox,e=t.x,n=t.width,r=t.viewportHeight,i=t.viewportWidth;return new bo({width:n,height:this.cornerBBox.height,viewportWidth:i,viewportHeight:r,cornerWidth:this.cornerBBox.width,position:{x:e,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},e.prototype.render=function(){this.renderFrozenPanelCornerGroup(),t.prototype.render.call(this)},e.prototype.getRowHeader=function(){return null},e.prototype.getSeriesNumberHeader=function(){return null},e}(S3),bs=function(t){function e(e){var n=t.call(this,e)||this;return n.gridInfo={cols:[],rows:[]},n.updateGrid=function(t,e){void 0===e&&(e=ip);var r=n.getBBox(),i=n.s2,o=i.theme,a=i.isTableMode,s=o.dataCell.cell,l=a()&&(e===ip||e===io);n.gridGroup&&n.findById(e)||(n.gridGroup=n.addGroup({id:e})),n.gridGroup.clear(),n.gridInfo=t,l&&n.gridInfo.cols.unshift(0);var u=s.verticalBorderWidth,h=s.verticalBorderWidth/2;n.gridInfo.cols.forEach(function(t){gv(n.gridGroup,{x1:t,x2:t,y1:Math.ceil(r.minY+h),y2:Math.floor(r.maxY-h)},{stroke:s.verticalBorderColor,strokeOpacity:s.verticalBorderColorOpacity,lineWidth:u,lineCap:im,lineDash:s.borderDash})});var c=s.horizontalBorderWidth,d=s.horizontalBorderWidth/2;n.gridInfo.rows.forEach(function(t){gv(n.gridGroup,{x1:Math.ceil(r.minX+d),x2:Math.floor(r.maxX-d),y1:t,y2:t},{stroke:s.horizontalBorderColor,strokeOpacity:s.horizontalBorderColorOpacity,lineWidth:c,lineCap:im,lineDash:s.borderDash})}),n.gridGroup.toFront()},n.s2=e.s2,n}return u(e,t),e}(rB),bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e}(bs),bu=function(t){function e(e){var n=t.call(this,e)||this;return n.initMergedCellsGroup(),n}return u(e,t),e.prototype.initMergedCellsGroup=function(){this.mergedCellsGroup&&this.findById(ir)||(this.mergedCellsGroup=this.addGroup({id:ir}))},e.prototype.updateMergedCells=function(){this.initMergedCellsGroup(),mi(this.s2,this.mergedCellsGroup),this.mergedCellsGroup.toFront()},e.prototype.addMergeCell=function(t){var e;null===(e=this.mergedCellsGroup)||void 0===e||e.add(t)},e.prototype.update=function(t){this.updateGrid(t),this.updateMergedCells()},e}(bs),bh=function(){function t(t){var e=this;this.isLinkFieldText=function(t){var n=e.getCellAppendInfo(t);return null==n?void 0:n.isLinkFieldText},this.spreadsheet=t,this.bindEvents()}return t.prototype.getCellAppendInfo=function(t){var e,n;return(null===(e=null==t?void 0:t.attr)||void 0===e?void 0:e.call(t,"appendInfo"))||(null===(n=null==t?void 0:t.attrs)||void 0===n?void 0:n.appendInfo)||{}},t.prototype.reset=function(){},t}(),bc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.bindEvents=function(){this.bindDataCellClick()},e.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(CD.DATA_CELL_CLICK,function(e){e.stopPropagation();var n,r=t.spreadsheet.interaction;if(r.clearHoverTimer(),!r.hasIntercepts([Cj.CLICK])){if(t.isLinkFieldText(e.target)){t.emitLinkFieldClickEvent(e);return}var i=t.spreadsheet.getCell(e.target),o=i.getMeta();if(o){if(r.addIntercepts([Cj.HOVER]),r.isSelectedCell(i)){(null===(n=e.originalEvent)||void 0===n?void 0:n.detail)===1&&(r.reset(),t.spreadsheet.emit(CD.GLOBAL_SELECTED,r.getActiveCells()));return}r.changeState({cells:[m5(i)],stateName:CW.SELECTED,onUpdateCells:C9}),t.spreadsheet.emit(CD.GLOBAL_SELECTED,[i]),t.showTooltip(e,o);var a=o.rowId,s=o.colId,l=o.spreadsheet,u=r.getSelectedCellHighlight(),h=u.colHeader,c=u.rowHeader;h&&yG(s,r.getAllColHeaderCells(),CW.SELECTED),c&&a&&hm(function(t,e){var n=e.interaction,r=e.facet,i=e.options;if(e.isTableMode()){if(!i.showSeriesNumber)return[];var o=r.layoutResult.colLeafNodes[0].id,a=yj(String(t.rowIndex),o),s=[],l=n.getAllCells().find(function(t){return t.getMeta().id===a});return l&&l instanceof mU&&s.push(l),s}return yW(t.rowId,n.getAllRowHeaderCells(),e.isHierarchyTreeType())}(o,l),function(t){t.updateByState(CW.SELECTED)})}}})},e.prototype.getTooltipOperator=function(t,e){var n=this,r={key:"trend",text:vy("趋势"),icon:"Trend"},i=this.spreadsheet.getCell(t.target),o=xQ(this.spreadsheet,t).operation,a=o.trend&&h(h({},r),{onClick:function(){n.spreadsheet.emit(CD.DATA_CELL_TREND_ICON_CLICK,h(h({},e),{record:n.spreadsheet.isTableMode()?n.spreadsheet.dataSet.getCellData({query:{rowIndex:e.rowIndex}}):void 0})),n.spreadsheet.hideTooltip()}});return xJ(o,{defaultMenus:[a],cell:i})},e.prototype.showTooltip=function(t,e){var n=e.data,r=e.isTotals,i=e.value,o=e.fieldValue,a=e.field,s=e.valueField,l=this.spreadsheet.isTableMode(),u=[(l?h(h({},n),{value:i||o,valueField:a||s}):n)||h(h({},e.rowQuery),e.colQuery)],c=this.getTooltipOperator(t,e);this.spreadsheet.showTooltipWithInfo(t,u,{isTotals:void 0!==r&&r,operator:c,enterable:!0,hideSummary:!0,showSingleTips:l})},e.prototype.emitLinkFieldClickEvent=function(t){var e=this.getCellAppendInfo(t.target).cellData,n=e.valueField,r=e.data;this.spreadsheet.emit(CD.GLOBAL_LINK_FIELD_JUMP,{key:n,cellData:e,record:Object.assign({rowIndex:e.rowIndex},r)})},e}(bh),bd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.bindEvents=function(){this.bindDataCellClick()},e.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(CD.MERGED_CELLS_CLICK,function(e){e.stopPropagation();var n=t.spreadsheet.interaction;n.hasIntercepts([Cj.CLICK])||n.addIntercepts([Cj.HOVER])})},e}(bh),bf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMultiSelection=!1,e.handleRowColClick=function(t){if(t.stopPropagation(),!e.isLinkFieldText(t.target)){var n=e.spreadsheet,r=n.interaction,i=n.options,o=e.spreadsheet.getCell(t.target),a=!!(i.interaction.multiSelection&&e.isMultiSelection);r.selectHeaderCell({cell:o,isMultiSelection:a})&&e.showTooltip(t)}},e.getHideColumnField=function(t){return e.spreadsheet.isTableMode()?t.field:t.id},e}return u(e,t),e.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindKeyboardUp(),this.bindColCellClick(),this.bindRowCellClick(),this.bindTableColExpand(),this.bindMouseMove()},e.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Cj.CLICK])},e.prototype.bindKeyboardDown=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_KEYBOARD_DOWN,function(e){m4(e)&&(t.isMultiSelection=!0)})},e.prototype.bindKeyboardUp=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_KEYBOARD_UP,function(e){m4(e)&&t.reset()})},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_MOUSE_MOVE,function(e){t.isMultiSelection&&!m3(e)&&t.reset()})},e.prototype.bindRowCellClick=function(){var t=this;this.spreadsheet.on(CD.ROW_CELL_CLICK,function(e){t.handleRowColClick(e)})},e.prototype.bindColCellClick=function(){var t=this;this.spreadsheet.on(CD.COL_CELL_CLICK,function(e){t.handleRowColClick(e)})},e.prototype.showTooltip=function(t){var e=xQ(this.spreadsheet,t),n=e.operation;if(e.showTooltip){var r=this.spreadsheet.interaction,i=r.isSelectedState()?hK(r.getActiveCells(),function(t){var e=t.getMeta();return aq({},e.query||{},d$(e,["colIndex","rowIndex"]))}):[],o=this.getTooltipOperator(t,n);this.spreadsheet.showTooltipWithInfo(t,i,{showSingleTips:!0,operator:o})}},e.prototype.getTooltipOperator=function(t,e){var n=this,r=this.spreadsheet.getCell(t.target),i=r.getMeta(),o=r.cellType===CG.COL_CELL,a=1===this.spreadsheet.getColumnLeafNodes().length,s={key:"hiddenColumns",text:vy("隐藏"),icon:"EyeOutlined"},l=o&&!a&&i.isLeaf&&e.hiddenColumns&&h(h({},s),{onClick:function(){n.hideSelectedColumns()}});return xJ(e,{defaultMenus:[l],cell:r})},e.prototype.bindTableColExpand=function(){var t=this;this.spreadsheet.on(CD.LAYOUT_COLS_EXPANDED,function(e){t.handleExpandIconClick(e)})},e.prototype.hideSelectedColumns=function(){var t=this.spreadsheet.interaction.getActiveCells().map(function(t){return t.getMeta()}).map(this.getHideColumnField);mc(this.spreadsheet,t,!0)},e.prototype.handleExpandIconClick=function(t){var e=this.spreadsheet.store.get("hiddenColumnsDetail",[]),n=(hj(e,function(e){return mp(e.displaySiblingNode,t.id)})||{}).hideColumnNodes,r=hc(this.spreadsheet.options.interaction.hiddenColumnFields,(void 0===n?[]:n).map(this.getHideColumnField)),i=e.filter(function(e){return!mp(e.displaySiblingNode,t.id)});this.spreadsheet.setOptions({interaction:{hiddenColumnFields:r}}),this.spreadsheet.store.set("hiddenColumnsDetail",i),this.spreadsheet.interaction.reset(),this.spreadsheet.render(!1)},e}(bh),bp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getRowData=function(t){var n,r=t.getHeadLeafChild(),i=e.spreadsheet.dataSet.getMultiData(null==r?void 0:r.query)[0];return h(h({},i),{rowIndex:null!==(n=t.rowIndex)&&void 0!==n?n:r.rowIndex})},e}return u(e,t),e.prototype.bindEvents=function(){this.bindRowCellClick()},e.prototype.bindRowCellClick=function(){var t=this;this.spreadsheet.on(CD.ROW_CELL_CLICK,function(e){if(!t.spreadsheet.interaction.hasIntercepts([Cj.CLICK])&&t.isLinkFieldText(e.target)){var n=t.getCellAppendInfo(e.target).cellData,r=n.key,i=t.getRowData(n);t.spreadsheet.emit(CD.GLOBAL_LINK_FIELD_JUMP,{key:r,cellData:n,record:i})}})},e}(bh),bv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.bindEvents=function(){this.bindCornerCellClick()},e.prototype.bindCornerCellClick=function(){var t=this;this.spreadsheet.on(CD.CORNER_CELL_CLICK,function(e){var n,r=t.spreadsheet.interaction,i=t.spreadsheet.getCell(e.target);if(i){var o=i.getMeta(),a=t.getRowNodesByField(null==o?void 0:o.field),s=null===(n=a[0])||void 0===n?void 0:n.belongsCell,l=t.getRowCells(a);if(s&&r.isSelectedCell(s)){r.reset(),t.spreadsheet.emit(CD.GLOBAL_SELECTED,r.getActiveCells());return}cP(a)||cP(l)||(r.addIntercepts([Cj.HOVER]),r.changeState({cells:l,stateName:CW.SELECTED}),r.highlightNodes(a),t.showTooltip(e),t.spreadsheet.emit(CD.GLOBAL_SELECTED,r.getActiveCells()))}})},e.prototype.getRowNodesByField=function(t){return this.spreadsheet.getRowNodes().filter(function(e){return e.field===t})},e.prototype.getRowCells=function(t){return t.map(function(t){return{id:t.id,colIndex:-1,rowIndex:-1,type:CG.ROW_CELL}})},e.prototype.showTooltip=function(t){var e=this.spreadsheet.interaction.getActiveCells();this.spreadsheet.showTooltipWithInfo(t,[],{data:{summaries:[{selectedData:e,name:"",value:null}]}})},e}(bh),bg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.bindEvents=function(){this.bindCornerCellHover(),this.bindDataCellHover(),this.bindRowCellHover(),this.bindColCellHover()},e.prototype.updateRowColCells=function(t){var e=t.rowId,n=t.colId,r=this.spreadsheet.interaction,i=r.getHoverHighlight(),o=i.rowHeader;i.colHeader&&yG(n,r.getAllColHeaderCells(),CW.HOVER),o&&e&&hm(yW(e,r.getAllRowHeaderCells(),this.spreadsheet.isHierarchyTreeType()),function(t){t.updateByState(CW.HOVER)})},e.prototype.changeStateToHoverFocus=function(t,e,n){var r,i=this,o=this.spreadsheet.interaction,a=this.spreadsheet.options.interaction.hoverFocus;o.clearHoverTimer();var s=function(){if(!o.hasIntercepts([Cj.HOVER])){o.changeState({cells:[m5(t)],stateName:CW.HOVER_FOCUS});var r=i.spreadsheet.isTableMode(),a={isTotals:n.isTotals,enterable:!0,hideSummary:!0,showSingleTips:r},s=o.getHoverHighlight(),l=s.rowHeader,u=s.colHeader;(l||u)&&i.updateRowColCells(n);var h=i.getCellData(n,r);i.spreadsheet.showTooltipWithInfo(e,h,a)}},l=800;if(cN(a)||(l=null!==(r=null==a?void 0:a.duration)&&void 0!==r?r:800),0===l)s();else{var u=window.setTimeout(function(){return s()},l);o.setHoverTimer(u)}},e.prototype.handleHeaderHover=function(t){var e=this.spreadsheet.getCell(t.target);if(!cP(e)){var n=this.spreadsheet.interaction;n.clearHoverTimer(),n.isActiveCell(e)||(n.changeState({cells:[m5(e)],stateName:CW.HOVER}),e.update(),this.showEllipsisTooltip(t,e))}},e.prototype.showEllipsisTooltip=function(t,e){if(!e||!e.isTextOverflowing()){this.spreadsheet.hideTooltip();return}var n=e.getMeta(),r={isTotals:n.isTotals,enterable:!0,hideSummary:!0,showSingleTips:!0,enableFormat:!0},i=this.getCellData(n,!0);this.spreadsheet.showTooltipWithInfo(t,i,r)},e.prototype.getCellData=function(t,e){void 0===t&&(t={});var n=t.data,r=t.query,i=t.value,o=t.field,a=t.fieldValue,s=t.valueField,l=t.rowQuery,u=t.colQuery;return e?[h(h({},r),{value:i||a,valueField:o||s})]:[n||h(h({},l),u)]},e.prototype.bindDataCellHover=function(){var t=this;this.spreadsheet.on(CD.DATA_CELL_HOVER,function(e){var n=t.spreadsheet.getCell(e.target);if(!cP(n)){var r=t.spreadsheet,i=r.interaction,o=r.options.interaction,a=null==n?void 0:n.getMeta();if(!i.isActiveCell(n)){i.changeState({cells:[m5(n)],stateName:CW.HOVER});var s=i.getHoverHighlight(),l=s.rowHeader,u=s.colHeader;(l||u)&&t.updateRowColCells(a),o.hoverFocus&&t.changeStateToHoverFocus(n,e,a)}}})},e.prototype.bindRowCellHover=function(){var t=this;this.spreadsheet.on(CD.ROW_CELL_HOVER,function(e){t.handleHeaderHover(e)})},e.prototype.bindColCellHover=function(){var t=this;this.spreadsheet.on(CD.COL_CELL_HOVER,function(e){t.handleHeaderHover(e)})},e.prototype.bindCornerCellHover=function(){var t=this;this.spreadsheet.on(CD.CORNER_CELL_HOVER,function(e){t.handleHeaderHover(e)})},e}(bh),by=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.brushSelectionStage=CV.UN_DRAGGED,e.brushSelectionMinimumMoveDistance=5,e.scrollAnimationComplete=!0,e.mouseMoveDistanceFromCanvas=0,e.setMoveDistanceFromCanvas=function(t,n,r){var i=0;if(n&&(i=t.x),r){var o=t.y;i=n?Math.max(o,i):o}e.mouseMoveDistanceFromCanvas=Math.abs(i)},e.formatBrushPointForScroll=function(t,n){void 0===n&&(n=!1);var r,i,o,a,s=t.x,l=t.y,u=e.spreadsheet.facet,h=n?u.cornerBBox:u.panelBBox,c=h.minX,d=h.maxX,f=u.panelBBox,p=f.minY,v=f.maxY,g=(null===(r=e.endBrushPoint)||void 0===r?void 0:r.x)+s,y=(null===(i=e.endBrushPoint)||void 0===i?void 0:i.y)+l,m=!0,C=!0,w=null===(a=null===(o=u.vScrollBar)||void 0===o?void 0:o.getBBox())||void 0===a?void 0:a.width;return g>d?g=d-w-2:g<c?g=c+2:m=!1,y>v?y=v-2:y<=p?y=p+2:C=!1,{x:{value:g,needScroll:m},y:{value:y,needScroll:C}}},e.rectanglesIntersect=function(t,e){return t.maxX>e.minX&&t.minX<e.maxX&&t.minY<e.maxY&&t.maxY>e.minY},e.autoScrollIntervalId=null,e.autoScrollConfig=uf(iR),e.validateYIndex=function(t){var n,r,i=e.spreadsheet.facet,o=i.frozenGroupInfo,a=0,s=null===(n=null==o?void 0:o.frozenRow)||void 0===n?void 0:n.range;if(s&&(a=s[1]+1),t<a)return null;var l=i.getCellRange().end,u=null===(r=null==o?void 0:o.frozenTrailingRow)||void 0===r?void 0:r.range;return(u&&(l=u[0]-1),t>l)?null:t},e.validateXIndex=function(t){var n,r,i=e.spreadsheet.facet,o=i.frozenGroupInfo,a=0,s=null===(n=null==o?void 0:o.frozenCol)||void 0===n?void 0:n.range;if(s&&(a=s[1]+1),t<a)return null;var l=i.layoutResult.colLeafNodes.length-1,u=null===(r=null==o?void 0:o.frozenTrailingCol)||void 0===r?void 0:r.range;return(u&&(l=u[0]-1),t>l)?null:t},e.adjustNextColIndexWithFrozen=function(t,n){var r=e.spreadsheet,i=r.facet,o=r.dataSet,a=r.options,s=o.getDisplayDataSet().length,l=i.layoutResult.colLeafNodes.length,u=gc(a,l,s),h=u.frozenTrailingColCount,c=u.frozenColCount,d=i.panelScrollGroupIndexes;return h>0&&n===Cq.SCROLL_DOWN&&vJ(t,h,l)?d[1]:c>0&&n===Cq.SCROLL_UP&&vQ(t,c)?d[0]:t},e.adjustNextRowIndexWithFrozen=function(t,n){var r=e.spreadsheet,i=r.facet,o=r.dataSet,a=r.options,s=o.getDisplayDataSet().length,l=i.layoutResult.colLeafNodes.length,u=i.getCellRange(),h=gc(a,l,s),c=h.frozenTrailingRowCount,d=h.frozenRowCount,f=i.panelScrollGroupIndexes;return c>0&&n===Cq.SCROLL_DOWN&&v1(t,u.end,c)?f[3]:d>0&&n===Cq.SCROLL_UP&&v0(t,u.start,d)?f[2]:t},e.getWillScrollRowIndexDiff=function(t){return t===Cq.SCROLL_DOWN?CK.SCROLL_DOWN:CK.SCROLL_UP},e.getDefaultWillScrollToRowIndex=function(t){var n=e.adjustNextRowIndexWithFrozen(e.endBrushPoint.rowIndex,t)+e.getWillScrollRowIndexDiff(t);return e.validateYIndex(n)},e.getWillScrollToRowIndex=function(t){return e.getDefaultWillScrollToRowIndex(t)},e.getNextScrollDelta=function(t){var n=e.spreadsheet.facet.getScrollOffset(),r=n.scrollX,i=n.scrollY,o=0,a=0;if(t.y.scroll){var s=t.y.value>0?Cq.SCROLL_DOWN:Cq.SCROLL_UP,l=e.getWillScrollToRowIndex(s),u=wr(l,s,e.spreadsheet)-i;a=cY(l)||cY(u)||Number.isNaN(u)?0:u}if(t.x.scroll){var s=t.x.value>0?Cq.SCROLL_DOWN:Cq.SCROLL_UP,h=e.adjustNextColIndexWithFrozen(e.endBrushPoint.colIndex,s),c=e.validateXIndex(h+(t.x.value>0?1:-1));o=cY(c)?0:wn(c,s,e.spreadsheet)-r}return{x:o,y:a}},e.onScrollAnimationComplete=function(){e.scrollAnimationComplete=!0,e.brushSelectionStage!==CV.UN_DRAGGED&&e.renderPrepareSelected(e.endBrushPoint)},e.autoScroll=function(t){if(void 0===t&&(t=!1),e.brushSelectionStage!==CV.UN_DRAGGED&&e.scrollAnimationComplete){var n=e.autoScrollConfig,r=e.spreadsheet.facet.getScrollOffset(),i=t?"rowHeaderOffsetX":"offsetX",o={rowHeaderOffsetX:{value:r.rowHeaderScrollX,animate:!0},offsetX:{value:r.scrollX,animate:!0},offsetY:{value:r.scrollY,animate:!0}},a=e.getNextScrollDelta(n),s=a.x,l=a.y;if(0===l&&0===s){e.clearAutoScroll();return}if(n.y.scroll&&(o.offsetY.value+=l),n.x.scroll){var u=o[i];u.value+=s,u.value<0&&(u.value=0)}e.scrollAnimationComplete=!1;var h=n.x.scroll?1:3,c=Math.max(16,300-e.mouseMoveDistanceFromCanvas*h);e.spreadsheet.facet.scrollWithAnimation(o,c,e.onScrollAnimationComplete)}},e.handleScroll=fq(function(t,n,r){if(void 0===r&&(r=!1),e.brushSelectionStage!==CV.UN_DRAGGED){var i=e.formatBrushPointForScroll({x:t,y:n},r),o=i.x,a=o.value,s=o.needScroll,l=i.y,u=l.value,h=l.needScroll,c=e.autoScrollConfig;h&&(c.y.value=n,c.y.scroll=!0),s&&(c.x.value=t,c.x.scroll=!0),e.setMoveDistanceFromCanvas({x:t,y:n},s,h),e.renderPrepareSelected({x:a,y:u}),(h||s)&&(e.clearAutoScroll(),e.autoScroll(r),e.autoScrollIntervalId=setInterval(function(){e.autoScroll(r)},16))}},30),e.clearAutoScroll=function(){e.autoScrollIntervalId&&(clearInterval(e.autoScrollIntervalId),e.autoScrollIntervalId=null,e.resetScrollDelta())},e.onUpdateCells=function(t,e){return e()},e.showPrepareSelectedCells=function(){e.brushRangeCells=e.getBrushRangeCells(),e.spreadsheet.interaction.changeState({cells:hK(e.brushRangeCells,function(t){return m5(t)}),stateName:CW.PREPARE_SELECT,force:!0,onUpdateCells:e.onUpdateCells})},e.renderPrepareSelected=function(t){var n=t.x,r=t.y,i=e.spreadsheet.container.getShape(n,r),o=e.spreadsheet.getCell(i),a=o instanceof yJ||o instanceof m1||o instanceof mz;if(o&&a){var s=o.getMeta(),l=s.rowIndex,u=s.colIndex;e.endBrushPoint={x:n,y:r,rowIndex:l,colIndex:u};var h=e.spreadsheet.interaction;h.addIntercepts([Cj.HOVER]),h.clearStyleIndependent(),e.isValidBrushSelection()&&(e.showPrepareSelectedCells(),e.updatePrepareSelectMask())}},e}return u(e,t),e.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},e.prototype.getPrepareSelectMaskTheme=function(){var t;return null===(t=this.spreadsheet.theme)||void 0===t?void 0:t.prepareSelectMask},e.prototype.initPrepareSelectMaskShape=function(){var t=this.spreadsheet.foregroundGroup;if(t){t.removeChild(this.prepareSelectMaskShape);var e=this.getPrepareSelectMaskTheme();this.prepareSelectMaskShape=t.addShape("rect",{visible:!1,attrs:{width:0,height:0,x:0,y:0,fill:null==e?void 0:e.backgroundColor,fillOpacity:null==e?void 0:e.backgroundOpacity,zIndex:5},capture:!1})}},e.prototype.setBrushSelectionStage=function(t){this.brushSelectionStage=t},e.prototype.isPointInCanvas=function(t){var e=this.spreadsheet.facet.getCanvasHW(),n=e.height,r=e.width,i=this.spreadsheet.facet.panelBBox,o=i.minX,a=i.minY;return t.x>o&&t.x<r&&t.y>a&&t.y<n},e.prototype.resetDrag=function(){this.hidePrepareSelectMaskShape(),this.setBrushSelectionStage(CV.UN_DRAGGED)},e.prototype.isValidBrushSelection=function(){var t=this.getBrushRange(),e=t.start,n=t.end;return n.x-e.x>this.brushSelectionMinimumMoveDistance||n.y-e.y>this.brushSelectionMinimumMoveDistance},e.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getPanelGroupAllDataCells()},e.prototype.updatePrepareSelectMask=function(){var t=this.getBrushRange(),e=this.getPrepareSelectMaskPosition(t),n=e.x,r=e.y;this.prepareSelectMaskShape.attr({x:n,y:r,width:t.width,height:t.height}),this.prepareSelectMaskShape.show()},e.prototype.hidePrepareSelectMaskShape=function(){var t;null===(t=this.prepareSelectMaskShape)||void 0===t||t.hide()},e.prototype.resetScrollDelta=function(){this.autoScrollConfig=uf(iR)},e.prototype.getBrushPoint=function(t){var e=this.spreadsheet.facet.getScrollOffset(),n=e.scrollY,r=e.scrollX,i={x:null==t?void 0:t.x,y:null==t?void 0:t.y},o=this.spreadsheet.getCell(t.target).getMeta(),a=o.colIndex,s=o.rowIndex;return h(h({},i),{rowIndex:s,colIndex:a,scrollY:n,scrollX:r})},e.prototype.getBrushRange=function(){var t,e,n,r,i,o,a,s,l=this.spreadsheet.facet.getScrollOffset(),u=l.scrollX,h=l.scrollY,c=Math.min(this.startBrushPoint.rowIndex,null===(t=this.endBrushPoint)||void 0===t?void 0:t.rowIndex),d=Math.max(this.startBrushPoint.rowIndex,null===(e=this.endBrushPoint)||void 0===e?void 0:e.rowIndex),f=Math.min(this.startBrushPoint.colIndex,null===(n=this.endBrushPoint)||void 0===n?void 0:n.colIndex),p=Math.max(this.startBrushPoint.colIndex,null===(r=this.endBrushPoint)||void 0===r?void 0:r.colIndex),v=this.startBrushPoint.x+this.startBrushPoint.scrollX-u,g=this.startBrushPoint.y+this.startBrushPoint.scrollY-h,y=Math.min(v,null===(i=this.endBrushPoint)||void 0===i?void 0:i.x),m=Math.max(v,null===(o=this.endBrushPoint)||void 0===o?void 0:o.x),C=Math.min(g,null===(a=this.endBrushPoint)||void 0===a?void 0:a.y),w=Math.max(g,null===(s=this.endBrushPoint)||void 0===s?void 0:s.y);return{start:{rowIndex:c,colIndex:f,x:y,y:C},end:{rowIndex:d,colIndex:p,x:m,y:w},width:m-y,height:w-C}},e.prototype.getBrushRangeCells=function(){var t=this;return this.setDisplayedCells(),this.displayedCells.filter(function(e){var n=e.getMeta();return t.isInBrushRange(n)})},e.prototype.mouseDown=function(t){var e;null===(e=null==t?void 0:t.preventDefault)||void 0===e||e.call(t),this.spreadsheet.interaction.hasIntercepts([Cj.CLICK])||(this.setBrushSelectionStage(CV.CLICK),this.initPrepareSelectMaskShape(),this.setDisplayedCells(),this.startBrushPoint=this.getBrushPoint(t))},e.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Cj.BRUSH_SELECTION])},e.prototype.bindMouseUp=function(t){var e=this;void 0===t&&(t=!1),this.spreadsheet.on(CD.GLOBAL_MOUSE_UP,function(n){if(e.brushSelectionStage!==CV.DRAGGED){e.resetDrag();return}if(t&&e.clearAutoScroll(),e.isValidBrushSelection()){e.addBrushIntercepts(),e.updateSelectedCells();var r=xZ(e.spreadsheet);e.spreadsheet.showTooltipWithInfo(n,r)}e.spreadsheet.interaction.getCurrentStateName()===CW.PREPARE_SELECT&&e.spreadsheet.interaction.reset(),e.resetDrag()}),this.spreadsheet.on(CD.GLOBAL_CONTEXT_MENU,function(){e.brushSelectionStage!==CV.UN_DRAGGED&&(e.spreadsheet.interaction.removeIntercepts([Cj.HOVER]),e.resetDrag())})},e.prototype.autoBrushScroll=function(t,e){var n,r;if(void 0===e&&(e=!1),this.clearAutoScroll(),!this.isPointInCanvas(t)){var i=(null==t?void 0:t.x)-(null===(n=this.endBrushPoint)||void 0===n?void 0:n.x),o=(null==t?void 0:t.y)-(null===(r=this.endBrushPoint)||void 0===r?void 0:r.y);return this.handleScroll(i,o,e),!0}return!1},e.prototype.emitBrushSelectionEvent=function(t,e){this.spreadsheet.emit(t,e),this.spreadsheet.emit(CD.GLOBAL_SELECTED,e),cP(e)&&this.spreadsheet.interaction.removeIntercepts([Cj.HOVER])},e.prototype.getVisibleBrushRangeCells=function(t){return this.brushRangeCells.find(function(e){var n=e.getMeta();return(null==n?void 0:n.id)===t})},e.prototype.isInBrushRange=function(t){return!1},e.prototype.bindMouseDown=function(){},e.prototype.bindMouseMove=function(){},e.prototype.updateSelectedCells=function(){},e.prototype.getPrepareSelectMaskPosition=function(t){return{x:t.start.x,y:t.start.y}},e}(bh),bm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.onUpdateCells=function(t){return t.updateCells(t.getAllColHeaderCells())},e}return u(e,t),e.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},e.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(CD.COL_CELL_MOUSE_DOWN,function(n){e.spreadsheet.interaction.getBrushSelection().col&&t.prototype.mouseDown.call(e,n)})},e.prototype.isPointInCanvas=function(t){var e=this.spreadsheet.facet.getCanvasHW().width,n=this.spreadsheet.facet.cornerBBox,r=n.width,i=n.minY,o=n.maxY;return t.x>=r&&t.x<=e&&t.y>=i&&t.y<=o},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(CD.COL_CELL_MOUSE_MOVE,function(e){if(t.brushSelectionStage!==CV.UN_DRAGGED){t.setBrushSelectionStage(CV.DRAGGED);var n=t.spreadsheet.container.getPointByEvent(e.originalEvent);t.isPointInCanvas(n)&&t.renderPrepareSelected(n)}})},e.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllColHeaderCells()},e.prototype.isInBrushRange=function(t){var e=this.getBrushRange(),n=e.start,r=e.end,i=this.spreadsheet.facet.getScrollOffset().scrollX,o=this.spreadsheet.facet.cornerBBox,a=t.x,s=void 0===a?0:a,l=t.y,u=void 0===l?0:l,h=t.width,c=t.height;return this.rectanglesIntersect({minX:n.x-o.width+i,minY:n.y,maxX:r.x-o.width+i,maxY:r.y},{minX:s,maxX:s+(void 0===h?0:h),minY:u,maxY:u+(void 0===c?0:c)})},e.prototype.updateSelectedCells=function(){var t=this.spreadsheet.interaction;t.changeState({cells:hK(this.brushRangeCells,m5),stateName:CW.BRUSH_SELECTED,onUpdateCells:this.onUpdateCells}),this.spreadsheet.emit(CD.COL_CELL_BRUSH_SELECTION,this.brushRangeCells),this.spreadsheet.emit(CD.GLOBAL_SELECTED,this.brushRangeCells),cP(this.brushRangeCells)&&t.removeIntercepts([Cj.HOVER])},e.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Cj.COL_BRUSH_SELECTION])},e}(by),bC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.getSelectedCellMetas=function(t){var n=[],r=e.spreadsheet.facet.layoutResult,i=r.rowLeafNodes,o=void 0===i?[]:i,a=r.colLeafNodes,s=void 0===a?[]:a,l=fo(t.start.rowIndex,t.end.rowIndex+1),u=fo(t.start.colIndex,t.end.colIndex+1);return l.forEach(function(t){u.forEach(function(r){var i=String(s[r].id),a=cP(o)?String(t):String(o[t].id);n.push({colIndex:r,rowIndex:t,id:"".concat(a,"-").concat(i),type:CG.DATA_CELL,rowId:a,colId:i,spreadsheet:e.spreadsheet})})}),n},e}return u(e,t),e.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(CD.DATA_CELL_MOUSE_DOWN,function(n){e.spreadsheet.interaction.getBrushSelection().data&&(t.prototype.mouseDown.call(e,n),e.resetScrollDelta())})},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_MOUSE_MOVE,function(e){if(t.brushSelectionStage!==CV.UN_DRAGGED){t.setBrushSelectionStage(CV.DRAGGED);var n=t.spreadsheet.container.getPointByEvent(e);t.autoBrushScroll(n)||t.renderPrepareSelected(n)}})},e.prototype.isInBrushRange=function(t){var e=this.getBrushRange(),n=e.start,r=e.end,i=t.rowIndex,o=t.colIndex;return i>=n.rowIndex&&i<=r.rowIndex&&o>=n.colIndex&&o<=r.colIndex},e.prototype.updateSelectedCells=function(){var t=this.getBrushRange(),e=this.getSelectedCellMetas(t);this.spreadsheet.interaction.changeState({cells:e,stateName:CW.SELECTED,onUpdateCells:C9});var n=this.getScrollBrushRangeCells(e);this.emitBrushSelectionEvent(CD.DATA_CELL_BRUSH_SELECTION,n)},e.prototype.getScrollBrushRangeCells=function(t){var e=this;return t.map(function(t){var n=e.getVisibleBrushRangeCells(t.id);if(n)return n;var r=e.spreadsheet.facet.layoutResult.getCellMeta(t.rowIndex,t.colIndex);return new(e.spreadsheet.isTableMode()?mY:yJ)(r,e.spreadsheet)})},e.prototype.bindMouseUp=function(){t.prototype.bindMouseUp.call(this,!0)},e.prototype.getPrepareSelectMaskPosition=function(t){var e=this.spreadsheet.facet.panelBBox,n=e.minX,r=e.minY;return{x:Math.max(t.start.x,n),y:Math.max(t.start.y,r)}},e}(by),bw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isInBrushRange=function(t){var n=e.getBrushRange(),r=n.start,i=n.end,o=e.spreadsheet.facet.getScrollOffset(),a=o.scrollY,s=o.rowHeaderScrollX,l=e.spreadsheet.facet.cornerBBox,u=t.x,h=void 0===u?0:u,c=t.y,d=void 0===c?0:c,f=t.width,p=t.height;return e.rectanglesIntersect({minX:r.x+s,minY:r.y-l.height+a,maxX:i.x+s,maxY:i.y-l.height+a},{minX:h,maxX:h+(void 0===f?0:f),minY:d,maxY:d+(void 0===p?0:p)})},e.onUpdateCells=function(t){return t.updateCells(t.getAllRowHeaderCells())},e.getSelectedRowNodes=function(){return e.spreadsheet.getRowNodes().filter(e.isInBrushRange)},e.getVisibleRowLeafCellByScrollDirection=function(t){var n=e.spreadsheet.interaction.getAllRowHeaderCells();return t===Cq.SCROLL_DOWN?hd(n):n.find(function(t){return t.getMeta().isLeaf})},e.getWillScrollToRowIndex=function(t){if(!cY(e.endBrushPoint.rowIndex))return e.getDefaultWillScrollToRowIndex(t);var n,r,i=e.getVisibleRowLeafCellByScrollDirection(t),o=(null!==(r=null===(n=null==i?void 0:i.getMeta())||void 0===n?void 0:n.rowIndex)&&void 0!==r?r:0)+e.getWillScrollRowIndexDiff(t);return e.validateYIndex(o)},e}return u(e,t),e.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(CD.ROW_CELL_MOUSE_DOWN,function(n){e.spreadsheet.interaction.getBrushSelection().row&&t.prototype.mouseDown.call(e,n)})},e.prototype.isPointInCanvas=function(t){var e=this.spreadsheet.facet.getCanvasHW().height,n=this.spreadsheet.facet.cornerBBox,r=n.minX,i=n.height,o=n.maxX;return t.x>=r&&t.x<=o&&t.y>=i&&t.y<=e},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_MOUSE_MOVE,function(e){if(t.brushSelectionStage!==CV.UN_DRAGGED){t.setBrushSelectionStage(CV.DRAGGED);var n=t.spreadsheet.container.getPointByEvent(e);t.autoBrushScroll(n,!0)||t.renderPrepareSelected(n)}})},e.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllRowHeaderCells()},e.prototype.updateSelectedCells=function(){var t=this.getSelectedRowNodes(),e=this.getScrollBrushRangeCells(t),n=hK(e,m5);this.spreadsheet.interaction.changeState({cells:n,stateName:CW.BRUSH_SELECTED,onUpdateCells:this.onUpdateCells}),this.emitBrushSelectionEvent(CD.ROW_CELL_BRUSH_SELECTION,e)},e.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Cj.ROW_BRUSH_SELECTION])},e.prototype.getScrollBrushRangeCells=function(t){var e=this;return t.map(function(t){return e.getVisibleBrushRangeCells(t.id)||e.spreadsheet.facet.rowHeader.createCellInstance(t)})},e.prototype.getPrepareSelectMaskPosition=function(t){var e=this.spreadsheet.facet.panelBBox.minY;return{x:t.start.x,y:Math.max(t.start.y,e)}},e}(by),bx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMultiSelection=!1,e}return u(e,t),e.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},e.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Cj.CLICK])},e.prototype.bindKeyboardDown=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_KEYBOARD_DOWN,function(e){m4(e)&&(t.isMultiSelection=!0,t.spreadsheet.interaction.addIntercepts([Cj.CLICK]))})},e.prototype.bindKeyboardUp=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_KEYBOARD_UP,function(e){m4(e)&&t.reset()})},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_MOUSE_MOVE,function(e){t.isMultiSelection&&!m3(e)&&t.reset()})},e.prototype.getSelectedCells=function(t){var e=t.getMeta().id,n=this.spreadsheet.interaction,r=n.getCells([CG.DATA_CELL]);return n.getCurrentStateName()!==CW.SELECTED&&(r=[]),r.find(function(t){return t.id===e})?r.filter(function(t){return t.id!==e}):p(p([],f(r),!1),[m5(t)],!1)},e.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(CD.DATA_CELL_CLICK,function(e){e.stopPropagation();var n=t.spreadsheet.getCell(e.target),r=n.getMeta(),i=t.spreadsheet.interaction;if(t.isMultiSelection&&r){var o=t.getSelectedCells(n);if(cP(o)){i.clearState(),t.spreadsheet.hideTooltip(),t.spreadsheet.emit(CD.GLOBAL_SELECTED,i.getActiveCells());return}i.addIntercepts([Cj.CLICK,Cj.HOVER]),t.spreadsheet.hideTooltip(),i.changeState({cells:o,stateName:CW.SELECTED,onUpdateCells:C9}),t.spreadsheet.emit(CD.GLOBAL_SELECTED,i.getActiveCells()),t.spreadsheet.showTooltipWithInfo(e,xZ(t.spreadsheet))}})},e}(bh),bS=function(){function t(t){var e=this;this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[],this.isCanvasEffect=!1,this.isGuiIconShape=function(t){return t instanceof rP&&t.attrs.type===vP.type},this.onCanvasMousedown=function(t){if(e.target=t.target,e.spreadsheet.interaction.clearHoverTimer(),e.isResizeArea(t)){e.spreadsheet.emit(CD.LAYOUT_RESIZE_MOUSE_DOWN,t);var n=function(n){if(!e.spreadsheet.getCanvasElement())return!1;e.spreadsheet.getCanvasElement()!==n.target&&(t.clientX=n.clientX,t.clientY=n.clientY,t.originalEvent=n,e.spreadsheet.emit(CD.LAYOUT_RESIZE_MOUSE_MOVE,t))};window.addEventListener("mousemove",n),window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",n)},{once:!0});return}switch(e.spreadsheet.getCellType(t.target)){case CG.DATA_CELL:e.spreadsheet.emit(CD.DATA_CELL_MOUSE_DOWN,t);break;case CG.ROW_CELL:e.spreadsheet.emit(CD.ROW_CELL_MOUSE_DOWN,t);break;case CG.COL_CELL:e.spreadsheet.emit(CD.COL_CELL_MOUSE_DOWN,t);break;case CG.CORNER_CELL:e.spreadsheet.emit(CD.CORNER_CELL_MOUSE_DOWN,t);break;case CG.MERGED_CELL:e.spreadsheet.emit(CD.MERGED_CELLS_MOUSE_DOWN,t)}},this.onCanvasMousemove=function(t){if(e.canvasMousemoveEvent=t,e.isResizeArea(t)){e.activeResizeArea(t),e.spreadsheet.emit(CD.LAYOUT_RESIZE_MOUSE_MOVE,t);return}e.resetResizeArea();var n=e.spreadsheet.getCell(t.target);if(n){var r=n.cellType;switch(r){case CG.DATA_CELL:e.spreadsheet.emit(CD.DATA_CELL_MOUSE_MOVE,t);break;case CG.ROW_CELL:e.spreadsheet.emit(CD.ROW_CELL_MOUSE_MOVE,t);break;case CG.COL_CELL:e.spreadsheet.emit(CD.COL_CELL_MOUSE_MOVE,t);break;case CG.CORNER_CELL:e.spreadsheet.emit(CD.CORNER_CELL_MOUSE_MOVE,t);break;case CG.MERGED_CELL:e.spreadsheet.emit(CD.MERGED_CELLS_MOUSE_MOVE,t)}if(!e.hasBrushSelectionIntercepts())switch(e.spreadsheet.emit(CD.GLOBAL_HOVER,t),r){case CG.DATA_CELL:e.spreadsheet.emit(CD.DATA_CELL_HOVER,t);break;case CG.ROW_CELL:e.spreadsheet.emit(CD.ROW_CELL_HOVER,t);break;case CG.COL_CELL:e.spreadsheet.emit(CD.COL_CELL_HOVER,t);break;case CG.CORNER_CELL:e.spreadsheet.emit(CD.CORNER_CELL_HOVER,t);break;case CG.MERGED_CELL:e.spreadsheet.emit(CD.MERGED_CELLS_HOVER,t)}}},this.onCanvasMouseup=function(t){if(e.isResizeArea(t)){e.spreadsheet.emit(CD.LAYOUT_RESIZE_MOUSE_UP,t);return}var n=e.spreadsheet.getCell(t.target);if(n){var r=n.cellType;if(e.target===t.target){var i=e.isGuiIconShape(t.target);switch(r){case CG.DATA_CELL:e.spreadsheet.emit(CD.DATA_CELL_CLICK,t);break;case CG.ROW_CELL:if(i)break;e.spreadsheet.emit(CD.ROW_CELL_CLICK,t);break;case CG.COL_CELL:if(i)break;e.spreadsheet.emit(CD.COL_CELL_CLICK,t);break;case CG.CORNER_CELL:if(i)break;e.spreadsheet.emit(CD.CORNER_CELL_CLICK,t);break;case CG.MERGED_CELL:e.spreadsheet.emit(CD.MERGED_CELLS_CLICK,t)}}switch(r){case CG.DATA_CELL:e.spreadsheet.emit(CD.DATA_CELL_MOUSE_UP,t);break;case CG.ROW_CELL:e.spreadsheet.emit(CD.ROW_CELL_MOUSE_UP,t);break;case CG.COL_CELL:e.spreadsheet.emit(CD.COL_CELL_MOUSE_UP,t);break;case CG.CORNER_CELL:e.spreadsheet.emit(CD.CORNER_CELL_MOUSE_UP,t);break;case CG.MERGED_CELL:e.spreadsheet.emit(CD.MERGED_CELLS_MOUSE_UP,t)}}},this.onCanvasClick=function(t){e.spreadsheet.emit(CD.GLOBAL_CLICK,t)},this.onCanvasDoubleClick=function(t){var n=e.spreadsheet;if(e.isResizeArea(t)){n.emit(CD.LAYOUT_RESIZE_MOUSE_UP,t);return}n.emit(CD.GLOBAL_DOUBLE_CLICK,t);var r=n.getCell(t.target);if(r){var i=r.cellType;if(e.target===t.target)switch(i){case CG.DATA_CELL:n.emit(CD.DATA_CELL_DOUBLE_CLICK,t);break;case CG.ROW_CELL:n.emit(CD.ROW_CELL_DOUBLE_CLICK,t);break;case CG.COL_CELL:n.emit(CD.COL_CELL_DOUBLE_CLICK,t);break;case CG.CORNER_CELL:n.emit(CD.CORNER_CELL_DOUBLE_CLICK,t);break;case CG.MERGED_CELL:n.emit(CD.MERGED_CELLS_DOUBLE_CLICK,t)}}},this.onCanvasMouseout=function(t){if(e.isAutoResetSheetStyle&&(null==t||!t.shape)){var n=e.spreadsheet.interaction;n.isSelectedState()||n.intercepts.size>0||n.reset()}},this.onCanvasContextMenu=function(t){var n=e.spreadsheet;if(e.isResizeArea(t)){n.emit(CD.LAYOUT_RESIZE_MOUSE_UP,t);return}switch(n.emit(CD.GLOBAL_CONTEXT_MENU,t),e.spreadsheet.getCellType(t.target)){case CG.DATA_CELL:e.spreadsheet.emit(CD.DATA_CELL_CONTEXT_MENU,t);break;case CG.ROW_CELL:e.spreadsheet.emit(CD.ROW_CELL_CONTEXT_MENU,t);break;case CG.COL_CELL:e.spreadsheet.emit(CD.COL_CELL_CONTEXT_MENU,t);break;case CG.CORNER_CELL:e.spreadsheet.emit(CD.CORNER_CELL_CONTEXT_MENU,t);break;case CG.MERGED_CELL:e.spreadsheet.emit(CD.MERGED_CELLS_CONTEXT_MENU,t)}},this.spreadsheet=t,this.bindEvents()}return Object.defineProperty(t.prototype,"canvasContainer",{get:function(){return this.spreadsheet.container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAutoResetSheetStyle",{get:function(){return this.spreadsheet.options.interaction.autoResetSheetStyle},enumerable:!1,configurable:!0}),t.prototype.bindEvents=function(){var t=this;this.clearAllEvents(),this.addCanvasEvent(CN.CLICK,this.onCanvasClick),this.addCanvasEvent(CN.MOUSE_DOWN,this.onCanvasMousedown),this.addCanvasEvent(CN.MOUSE_MOVE,this.onCanvasMousemove),this.addCanvasEvent(CN.MOUSE_OUT,this.onCanvasMouseout),this.addCanvasEvent(CN.MOUSE_UP,this.onCanvasMouseup),this.addCanvasEvent(CN.DOUBLE_CLICK,this.onCanvasDoubleClick),this.addCanvasEvent(CN.CONTEXT_MENU,this.onCanvasContextMenu),this.addS2Event(CD.GLOBAL_ACTION_ICON_CLICK,function(){t.spreadsheet.interaction.addIntercepts([Cj.HOVER]),t.spreadsheet.interaction.clearState()}),this.addDomEventListener(window,CN.CLICK,function(e){t.resetSheetStyle(e),t.isCanvasEffect=t.isMouseOnTheCanvasContainer(e)}),this.addDomEventListener(window,CN.KEY_DOWN,function(e){t.onKeyboardCopy(e),t.onKeyboardEsc(e),t.spreadsheet.emit(CD.GLOBAL_KEYBOARD_DOWN,e)}),this.addDomEventListener(window,CN.KEY_UP,function(e){t.spreadsheet.emit(CD.GLOBAL_KEYBOARD_UP,e)}),this.addDomEventListener(window,CN.MOUSE_UP,function(e){t.spreadsheet.emit(CD.GLOBAL_MOUSE_UP,e)}),this.addDomEventListener(window,CN.MOUSE_MOVE,function(e){t.spreadsheet.emit(CD.GLOBAL_MOUSE_MOVE,e)})},t.prototype.onKeyboardCopy=function(t){if(this.isCanvasEffect&&this.spreadsheet.options.interaction.enableCopy&&g9(t.key,CY.COPY)&&(t.metaKey||t.ctrlKey)){var e=y_(this.spreadsheet);cY(e)||this.spreadsheet.emit(CD.GLOBAL_COPIED,e)}},t.prototype.onKeyboardEsc=function(t){this.isCanvasEffect&&g9(t.key,CY.ESC)&&this.resetSheetStyle(t)},t.prototype.resetSheetStyle=function(t){if(this.isAutoResetSheetStyle&&this.spreadsheet){var e=this.spreadsheet.interaction;if(e.hasIntercepts([Cj.BRUSH_SELECTION,Cj.COL_BRUSH_SELECTION,Cj.ROW_BRUSH_SELECTION])){e.removeIntercepts([Cj.BRUSH_SELECTION,Cj.ROW_BRUSH_SELECTION,Cj.COL_BRUSH_SELECTION]);return}this.isMouseOnTheTooltip(t)||this.isMouseOnTheCanvasContainer(t)||(e.reset(),this.spreadsheet.emit(CD.GLOBAL_RESET,t),this.spreadsheet.emit(CD.GLOBAL_SELECTED,e.getActiveCells()))}},t.prototype.isMouseEvent=function(t){return uk(t,"clientX")&&uk(t,"clientY")},t.prototype.isMouseOnTheCanvasContainer=function(t){if(this.isMouseEvent(t)){var e=this.spreadsheet.getCanvasElement();if(!e)return!1;var n=e.getBoundingClientRect()||{},r=n.x,i=n.y,o=this.getContainerRect(),a=o.width,s=o.height;return e.contains(t.target)&&t.clientX<=r+a&&t.clientY<=i+s}return!1},t.prototype.getContainerRect=function(){var t,e=this.spreadsheet,n=e.facet,r=e.options,i=n.hRowScrollBar||n.hScrollBar,o=(null==n?void 0:n.panelBBox)||{},a=o.maxX,s=o.maxY;return{width:Math.min(r.width,a),height:Math.min(r.height,s+((null===(t=null==i?void 0:i.theme)||void 0===t?void 0:t.size)||0))}},t.prototype.isMouseOnTheTooltip=function(t){var e,n,r,i,o=this.spreadsheet.tooltip;if(!(null==o?void 0:o.visible))return!1;var a=(null===(r=null===(n=null===(e=this.spreadsheet.tooltip)||void 0===e?void 0:e.container)||void 0===n?void 0:n.getBoundingClientRect)||void 0===r?void 0:r.call(n))||{},s=a.x,l=a.y,u=a.width,h=a.height;return t.target instanceof Node?x0(null===(i=this.spreadsheet.tooltip)||void 0===i?void 0:i.container,t.target):!!this.isMouseEvent(t)&&t.clientX>=s&&t.clientX<=s+u&&t.clientY>=l&&t.clientY<=l+h},t.prototype.isResizeArea=function(t){var e=sd(t.target,"attrs.appendInfo");return null==e?void 0:e.isResizeArea},t.prototype.activeResizeArea=function(t){this.resetResizeArea();var e=t.target;this.spreadsheet.store.set("activeResizeArea",e),e.attr(iL.backgroundOpacity,this.spreadsheet.theme.resizeArea.interactionState.hover.backgroundOpacity)},t.prototype.resetResizeArea=function(){var t=this.spreadsheet.store.get("activeResizeArea");cP(t)||t.attr(iL.backgroundOpacity,this.spreadsheet.theme.resizeArea.backgroundOpacity),this.spreadsheet.store.set("activeResizeArea",t)},t.prototype.hasBrushSelectionIntercepts=function(){return this.spreadsheet.interaction.hasIntercepts([Cj.HOVER,Cj.BRUSH_SELECTION,Cj.ROW_BRUSH_SELECTION,Cj.COL_BRUSH_SELECTION])},t.prototype.clear=function(){this.unbindEvents()},t.prototype.unbindEvents=function(){this.clearAllEvents()},t.prototype.addCanvasEvent=function(t,e){var n;null===(n=this.canvasContainer)||void 0===n||n.on(t,e),this.canvasEventHandlers.push({type:t,handler:e})},t.prototype.addS2Event=function(t,e){this.spreadsheet.on(t,e),this.s2EventHandlers.push({type:t,handler:e})},t.prototype.addDomEventListener=function(t,e,n){if(t.addEventListener){var r=this.spreadsheet.options.interaction.eventListenerOptions;t.addEventListener(e,n,r),this.domEventListeners.push({target:t,type:e,handler:n,options:r})}else console.error("Please make sure ".concat(t," has addEventListener function"))},t.prototype.clearAllEvents=function(){var t=this;hm(this.canvasEventHandlers,function(e){var n,r=e.type,i=e.handler;null===(n=t.canvasContainer)||void 0===n||n.off(r,i)}),hm(this.s2EventHandlers,function(e){var n=e.type,r=e.handler;t.spreadsheet.off(n,r)}),hm(this.domEventListeners,function(t){t.target.removeEventListener(t.type,t.handler,t.options)}),this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[]},t}(),bb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isRangeSelection=!1,e.handleColClick=function(t){t.stopPropagation();var n=e.spreadsheet.interaction,r=e.spreadsheet.getCell(t.target),i=null==r?void 0:r.getMeta();if(!cY(null==i?void 0:i.x)){n.addIntercepts([Cj.HOVER]);var o=[m5(r)],a=e.spreadsheet.store.get("lastClickedCell");if(e.isRangeSelection&&a&&a.cellType===r.cellType&&a.getMeta().level===r.getMeta().level){var s=f([e.spreadsheet.facet.layoutResult.rowsHierarchy.maxLevel,e.spreadsheet.facet.layoutResult.colsHierarchy.maxLevel],2),l=s[0],u=s[1],h=m6(a.getMeta(),r.getMeta()),c=h.start,d=h.end;r instanceof yJ?o=e.handleSeriesNumberRowSelected(c.rowIndex,d.rowIndex,r):r.cellType===CG.ROW_CELL&&r.getMeta().level===l?o=e.handleRowSelected(c.rowIndex,d.rowIndex,r):r.cellType===CG.COL_CELL&&r.getMeta().level===u&&(o=e.handleColSelected(c.colIndex,d.colIndex,r)),n.changeState({cells:o,stateName:CW.SELECTED})}else cP(n.getCells())&&n.removeIntercepts([Cj.HOVER]),e.spreadsheet.store.set("lastClickedCell",r);var p=o.map(function(t){return t.id});n.updateCells(n.getRowColActiveCells(p)),e.spreadsheet.emit(CD.GLOBAL_SELECTED,n.getActiveCells())}},e}return u(e,t),e.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindColCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},e.prototype.reset=function(){this.isRangeSelection=!1,this.spreadsheet.interaction.removeIntercepts([Cj.CLICK])},e.prototype.bindKeyboardDown=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_KEYBOARD_DOWN,function(e){e.key===CY.SHIFT&&(t.isRangeSelection=!0,t.spreadsheet.interaction.addIntercepts([Cj.CLICK]))})},e.prototype.bindKeyboardUp=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_KEYBOARD_UP,function(e){e.key===CY.SHIFT&&t.reset()})},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_MOUSE_MOVE,function(e){t.isRangeSelection&&!e.shiftKey&&t.reset()})},e.prototype.bindColCellClick=function(){var t=this;this.spreadsheet.isTableMode()&&this.spreadsheet.on(CD.ROW_CELL_CLICK,function(e){t.handleColClick(e)}),this.spreadsheet.on(CD.COL_CELL_CLICK,function(e){t.handleColClick(e)})},e.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(CD.DATA_CELL_CLICK,function(e){e.stopPropagation();var n=t.spreadsheet.getCell(e.target),r=n.getMeta(),i=t.spreadsheet.interaction;if(r){var o=t.spreadsheet.store.get("lastClickedCell");if(!(t.isRangeSelection&&(null==o?void 0:o.cellType)===n.cellType)){t.spreadsheet.store.set("lastClickedCell",n);return}var a=m6(o.getMeta(),n.getMeta()),s=a.start,l=a.end,u=fo(s.colIndex,l.colIndex+1).flatMap(function(e){var r=t.spreadsheet.facet.layoutResult.colLeafNodes[e].id;return fo(s.rowIndex,l.rowIndex+1).map(function(i){return{id:(t.spreadsheet.facet.getSeriesNumberWidth()||t.spreadsheet.isTableMode()?String(i):t.spreadsheet.facet.layoutResult.rowLeafNodes[i].id)+"-"+r,colIndex:e,rowIndex:i,type:n.cellType}})});i.addIntercepts([Cj.CLICK,Cj.HOVER]),i.changeState({cells:u,stateName:CW.SELECTED}),t.spreadsheet.showTooltipWithInfo(e,xZ(t.spreadsheet)),t.spreadsheet.emit(CD.GLOBAL_SELECTED,i.getActiveCells())}})},e.prototype.handleSeriesNumberRowSelected=function(t,e,n){var r=this.spreadsheet.facet.layoutResult.colLeafNodes[0].id;return fo(t,e+1).map(function(t){return{id:String(t)+"-"+r,colIndex:0,rowIndex:t,type:n.cellType}})},e.prototype.handleRowSelected=function(t,e,n){return this.spreadsheet.facet.layoutResult.rowNodes.filter(function(n){return cs(n.rowIndex,t,e+1)}).map(function(t){return{id:t.id,colIndex:t.colIndex,rowIndex:t.rowIndex,type:n.cellType}})},e.prototype.handleColSelected=function(t,e,n){return this.spreadsheet.facet.layoutResult.colLeafNodes.filter(function(n){return cs(n.colIndex,t,e+1)}).map(function(t){return{id:t.id,colIndex:t.colIndex,rowIndex:t.rowIndex,type:n.cellType}})},e}(bh),b_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.resizeStartPosition={},e.resizeMouseMove=function(t){if(null===(n=e.resizeReferenceGroup)||void 0===n?void 0:n.get("visible")){null===(r=null==t?void 0:t.preventDefault)||void 0===r||r.call(t);var n,r,i=t.originalEvent,o=e.getResizeInfo(),a=e.resizeReferenceGroup.getChildren()||[];if(!cP(a)){var s=f(a,2)[1],l=f(ud(s.attr("path")),2),u=l[0],h=l[1];o.type===CZ.Horizontal?e.updateHorizontalResizingEndGuideLinePosition(i,o,u,h):e.updateVerticalResizingEndGuideLinePosition(i,o,u,h),e.updateResizeGuideLineTheme(s),s.attr("path",[u,h])}}},e}return u(e,t),e.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},e.prototype.initResizeGroup=function(){if(!this.resizeReferenceGroup){this.resizeReferenceGroup=this.spreadsheet.foregroundGroup.addGroup();var t=this.spreadsheet.options,e=t.width,n=t.height,r=this.getResizeAreaTheme(),i=r.guideLineColor,o={path:"",lineDash:r.guideLineDash,stroke:i,lineWidth:r.size};this.resizeReferenceGroup.addShape("path",{id:"RESIZE_START_GUIDE_LINE",attrs:o}),this.resizeReferenceGroup.addShape("path",{id:"RESIZE_END_GUIDE_LINE",attrs:o}),this.resizeReferenceGroup.addShape("rect",{id:"RESIZE_MASK",attrs:{appendInfo:{isResizeArea:!0},x:0,y:0,width:e,height:n,fill:"transparent"}})}},e.prototype.getResizeAreaTheme=function(){return this.spreadsheet.theme.resizeArea},e.prototype.setResizeTarget=function(t){this.resizeTarget=t},e.prototype.getGuideLineWidthAndHeight=function(){var t=this.spreadsheet.options,e=t.width,n=t.height,r=this.spreadsheet.facet.panelBBox,i=r.maxY;return{width:Math.min(r.maxX,e),height:Math.min(i,n)}},e.prototype.getResizeShapes=function(){var t;return(null===(t=this.resizeReferenceGroup)||void 0===t?void 0:t.get("children"))||[]},e.prototype.setResizeMaskCursor=function(t){var e=f(this.getResizeShapes(),3)[2];null==e||e.attr("cursor",t)},e.prototype.updateResizeGuideLinePosition=function(t,e){var n=this.getResizeShapes();if(!cP(n)){var r=f(n,2),i=r[0],o=r[1],a=e.type,s=e.offsetX,l=e.offsetY,u=e.width,h=e.height,c=this.getGuideLineWidthAndHeight(),d=c.width,p=c.height;if(this.setResizeMaskCursor("".concat(a,"-resize")),a===CZ.Horizontal){i.attr("path",[["M",s,l],["L",s,p]]),o.attr("path",[["M",s+u,l],["L",s+u,p]]),this.resizeStartPosition.offsetX=t.offsetX,this.resizeStartPosition.clientX=t.clientX;return}i.attr("path",[["M",s,l],["L",d,l]]),o.attr("path",[["M",s,l+h],["L",d,l+h]]),this.resizeStartPosition.offsetY=t.offsetY,this.resizeStartPosition.clientY=t.clientY}},e.prototype.bindMouseDown=function(){var t=this;this.spreadsheet.on(CD.LAYOUT_RESIZE_MOUSE_DOWN,function(e){var n=e.target,r=e.originalEvent,i=t.getCellAppendInfo(e.target);t.spreadsheet.store.set("resized",!1),(null==i?void 0:i.isResizeArea)&&(t.spreadsheet.interaction.reset(),t.spreadsheet.interaction.addIntercepts([Cj.RESIZE]),t.setResizeTarget(n),t.showResizeGroup(),t.updateResizeGuideLinePosition(r,i))})},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(CD.LAYOUT_RESIZE_MOUSE_MOVE,function(e){fq(t.resizeMouseMove,33)(e)})},e.prototype.getResizeGuideLinePosition=function(){var t=f(this.resizeReferenceGroup.getChildren()||[],2),e=t[0],n=t[1],r=(null==e?void 0:e.attr("path"))||[],i=(null==n?void 0:n.attr("path"))||[],o=f(r[0]||[],3),a=o[1],s=o[2],l=f(i[0]||[],3),u=l[1],h=l[2];return{start:{x:void 0===a?0:a,y:void 0===s?0:s},end:{x:void 0===u?0:u,y:void 0===h?0:h}}},e.prototype.getDisAllowResizeInfo=function(){var t,e=this.getResizeInfo(),n=this.spreadsheet.options.interaction.resize,r=e.width,i=e.height,o=e.resizedWidth,a=e.resizedHeight,s=null===(t=null==n?void 0:n.disable)||void 0===t?void 0:t.call(n,e);return{displayWidth:s?r:o,displayHeight:s?i:a,isDisabled:s}},e.prototype.getResizeWidthDetail=function(){var t,e,n=this.getResizeInfo(),r=this.getDisAllowResizeInfo().displayWidth;switch(n.effect){case C$.Field:return{eventType:CD.LAYOUT_RESIZE_ROW_WIDTH,style:{rowCfg:{widthByField:((t={})[n.id]=r,t)}}};case C$.Tree:return{eventType:CD.LAYOUT_RESIZE_TREE_WIDTH,style:{treeRowsWidth:r,rowCfg:{treeRowsWidth:r}}};case C$.Cell:return{eventType:CD.LAYOUT_RESIZE_COL_WIDTH,style:{colCfg:{widthByFieldValue:((e={})[n.id]=r,e)}}};case C$.Series:return{eventType:CD.LAYOUT_RESIZE_SERIES_WIDTH,seriesNumberWidth:r};default:return null}},e.prototype.getResizeHeightDetail=function(){var t,e,n,r=this.spreadsheet.options,i=r.interaction.resize,o=r.style.rowCfg.heightByField,a=this.spreadsheet.theme.rowCell.cell.padding,s=this.getResizeInfo(),l=this.getDisAllowResizeInfo().displayHeight,u=l-a.top-a.bottom;switch(s.effect){case C$.Field:return{eventType:CD.LAYOUT_RESIZE_COL_HEIGHT,style:{colCfg:{heightByField:((t={})[s.id]=l,t)}}};case C$.Cell:return n=(null==o?void 0:o[String(s.id)])||(null==i?void 0:i.rowResizeType)===CQ.CURRENT?{rowCfg:{heightByField:((e={})[s.id]=u,e)}}:{cellCfg:{height:u}},{eventType:CD.LAYOUT_RESIZE_ROW_HEIGHT,style:n};default:return null}},e.prototype.getResizeDetail=function(){return this.getResizeInfo().type===CZ.Horizontal?this.getResizeWidthDetail():this.getResizeHeightDetail()},e.prototype.showResizeGroup=function(){this.initResizeGroup(),this.resizeReferenceGroup.set("visible",!0)},e.prototype.hideResizeGroup=function(){this.resizeReferenceGroup.set("visible",!1)},e.prototype.bindMouseUp=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_MOUSE_UP,function(){var e;t.setResizeMaskCursor("default"),!t.resizeReferenceGroup||cP(null===(e=t.resizeReferenceGroup)||void 0===e?void 0:e.getChildren())||(t.hideResizeGroup(),t.renderResizedResult())})},e.prototype.updateResizeGuideLineTheme=function(t){var e=this.getResizeAreaTheme(),n=e.guideLineColor,r=e.guideLineDisableColor,i=this.getDisAllowResizeInfo().isDisabled;t.attr("stroke",i?r:n),this.setResizeMaskCursor(i?"no-drop":"default")},e.prototype.updateHorizontalResizingEndGuideLinePosition=function(t,e,n,r){var i=t.clientX-this.resizeStartPosition.clientX;e.width+i<28&&(i=-(e.width-28));var o=e.offsetX+e.width+i;n[1]=o,r[1]=o,this.resizeTarget.attr({x:o-e.size/2})},e.prototype.updateVerticalResizingEndGuideLinePosition=function(t,e,n,r){var i=t.clientY-this.resizeStartPosition.clientY;e.height+i<16&&(i=-(e.height-16));var o=e.offsetY+e.height+i;n[2]=o,r[2]=o,this.resizeTarget.attr({y:o-e.size/2})},e.prototype.renderResizedResult=function(){var t=this.getResizeInfo(),e=this.getResizeDetail()||{},n=e.style,r=e.seriesNumberWidth,i=e.eventType,o={info:t,style:n};this.spreadsheet.emit(CD.LAYOUT_RESIZE,o),this.spreadsheet.emit(i,o),n&&this.spreadsheet.setOptions({style:n}),r&&this.spreadsheet.setTheme({rowCell:{seriesNumberWidth:r}}),this.spreadsheet.store.set("resized",!0),this.render()},e.prototype.getResizeInfo=function(){var t=this.getCellAppendInfo(this.resizeTarget),e=this.getResizeGuideLinePosition(),n=e.start,r=e.end,i=Math.floor(r.x-n.x),o=Math.floor(r.y-n.y);return h(h({},t),{resizedWidth:i,resizedHeight:o})},e.prototype.render=function(){this.resizeStartPosition={},this.resizeTarget=null,this.resizeReferenceGroup=null,this.spreadsheet.render(!1)},e}(bh),bE=[CY.ARROW_LEFT,CY.ARROW_RIGHT,CY.ARROW_UP,CY.ARROW_DOWN],bL=function(t){function e(e){return t.call(this,e)||this}return u(e,t),e.prototype.isCanvasEffect=function(){return this.spreadsheet.interaction.eventController.isCanvasEffect},e.prototype.bindEvents=function(){var t=this;this.spreadsheet.on(CD.GLOBAL_KEYBOARD_DOWN,function(e){if(t.isCanvasEffect()){var n=e.shiftKey,r=e.metaKey,i=bE.includes(e.key),o=!1,a=!1,s=!1;i&&(r&&n?(o=!1,a=!0,s=!1):r?(o=!0,a=!0,s=!0):n?(o=!1,a=!1,s=!1):(o=!0,a=!1,s=!0),t.handleMove({event:e,changeStartCell:o,isJumpMode:a,isSingleSelection:s}))}}),this.spreadsheet.on(CD.DATA_CELL_CLICK,function(e){var n=t.spreadsheet.getCell(e.target).getMeta();n&&(t.startCell=t.getCellMetaFromViewMeta(n),t.endCell=t.startCell)})},e.prototype.getCellMetaFromViewMeta=function(t){return{rowIndex:t.rowIndex,colIndex:t.colIndex,id:t.id,type:CG.DATA_CELL}},e.prototype.handleMove=function(t){var e=t.event,n=t.changeStartCell,r=t.isJumpMode,i=t.isSingleSelection,o=this.spreadsheet,a=this.startCell,s=this.endCell,l=n?a:s,u=this.getMoveInfo(e.key,l,r);if(u){var h=f([u.row,u.col],2),c=h[0],d=h[1];this.scrollToActiveCell(o,c,d);var p=this.generateCellMeta(o,c,d),v=i?[p]:this.getRangeCells(o,a,p);m8(o,v),n&&(this.startCell=p),this.endCell=p,this.spreadsheet.emit(CD.DATA_CELL_SELECT_MOVE,v)}},e.prototype.generateCellMeta=function(t,e,n){var r=t.isTableMode,i=t.facet.layoutResult,o=i.colLeafNodes,a=i.rowLeafNodes,s=r()?String(e):a[e].id,l=o[n].id;return{rowIndex:e,colIndex:n,id:yj(s,l),type:CG.DATA_CELL}},e.prototype.getRangeCells=function(t,e,n){for(var r=m6(e,n),i=r.start,o=i.rowIndex,a=i.colIndex,s=r.end,l=s.rowIndex,u=s.colIndex,h=[],c=o;c<=l;c++)for(var d=a;d<=u;d++)h.push(this.generateCellMeta(t,c,d));return h},e.prototype.getMoveInfo=function(t,e,n){var r=this.spreadsheet,i=r.options,o=i.frozenColCount,a=i.frozenRowCount,s=i.frozenTrailingColCount,l=i.frozenTrailingRowCount,u=r.facet.layoutResult,h=u.rowLeafNodes,c=f([0+(void 0===o?0:o),u.colLeafNodes.length-(void 0===s?0:s)-1],2),d=c[0],p=c[1],v=f([0+(void 0===a?0:a),(r.isTableMode()?r.dataSet.getDisplayDataSet().length:h.length)-(void 0===l?0:l)-1],2),g=v[0],y=v[1];if(e)switch(t){case CY.ARROW_RIGHT:if(e.colIndex+1>p)return;return{row:e.rowIndex,col:n?p:e.colIndex+1};case CY.ARROW_LEFT:if(e.colIndex-1<d)return;return{row:e.rowIndex,col:n?d:e.colIndex-1};case CY.ARROW_UP:if(e.rowIndex-1<g)return;return{row:n?g:e.rowIndex-1,col:e.colIndex};case CY.ARROW_DOWN:if(e.rowIndex+1>y)return;return{row:n?y:e.rowIndex+1,col:e.colIndex}}},e.prototype.calculateOffset=function(t,e,n){var r=t.options,i=r.frozenRowCount,o=r.frozenTrailingRowCount,a=t.facet,s=t.frozenColGroup,l=t.frozenTrailingColGroup,u=t.frozenRowGroup,h=t.frozenTrailingRowGroup,c=a.layoutResult.colLeafNodes,d=a.getScrollOffset(),f=d.scrollX,p=d.scrollY,v=a.panelBBox,g=v.viewportHeight,y=v.viewportWidth,m=sd(t,"theme.splitLine"),C=s?Math.floor(s.getBBox().width-m.verticalBorderWidth/2):0,w=l?Math.floor(l.getBBox().width):0,x=u?Math.floor(u.getBBox().height-m.horizontalBorderWidth/2):0,S=h?Math.floor(h.getBBox().height):0,b=v2(f,p,a.viewCellWidths,a.viewCellHeights,{width:y-C-w,height:g-x-S,x:C,y:x},a.getRealScrollX(a.cornerBBox.width)),_=-1,E=-1,L=c.find(function(t){return t.colIndex===n});return n<=b[0]?_=L.x-C:n>=b[1]&&n<c.length-(void 0===o?0:o)&&(_=L.x+L.width-y+w),e<=b[2]?E=a.viewCellHeights.getCellOffsetY(e-(void 0===i?0:i)):e>=b[3]&&(E=a.viewCellHeights.getCellOffsetY(e+1)+S-g),{offsetX:_,offsetY:E}},e.prototype.scrollToActiveCell=function(t,e,n){var r=this.calculateOffset(t,e,n),i=r.offsetX,o=r.offsetY,a=t.facet,s=t.facet.getScrollOffset(),l=s.scrollX,u=s.scrollY;a.scrollWithAnimation({offsetX:{value:i>-1?i:l},offsetY:{value:o>-1?o:u}})},e}(bh),bT=function(){function t(t){var e=this;this.interactions=new Map,this.intercepts=new Set,this.hoverTimer=null,this.defaultState={cells:[],force:!1},this.onTriggerInteractionsResetEffect=function(){e.interactions.forEach(function(t){t.reset()})},this.selectAll=function(){e.changeState({stateName:CW.ALL_SELECTED})},this.getCellChildrenNodes=function(t){var n,r=null===(n=null==t?void 0:t.getMeta)||void 0===n?void 0:n.call(t),i=(null==t?void 0:t.cellType)===CG.ROW_CELL;return e.spreadsheet.isHierarchyTreeType()&&i?vE.getAllLeaveNodes(r).filter(function(t){return t.rowIndex===r.rowIndex}):vE.getAllChildrenNodes(r)},this.selectHeaderCell=function(t){void 0===t&&(t={});var n,r=t.cell;if(!cP(r)){var i=null===(n=null==r?void 0:r.getMeta)||void 0===n?void 0:n.call(r);if(!(!i||cY(null==i?void 0:i.x))){e.addIntercepts([Cj.HOVER]);var o=e.spreadsheet.isHierarchyTreeType(),a=(null==r?void 0:r.cellType)===CG.COL_CELL,s=e.getState(),l=e.isSelectedCell(r),u=(null==t?void 0:t.isMultiSelection)&&e.isSelectedState(),h=l?[]:e.getCellChildrenNodes(r),c=l?[]:[m5(r)];if(u&&(c=uv(null==s?void 0:s.cells,c),h=uv(null==s?void 0:s.nodes,h),l&&(c=c.filter(function(t){return t.id!==i.id}),h=h.filter(function(t){return!(null==t?void 0:t.id.includes(i.id))}))),cP(c)){e.reset(),e.spreadsheet.emit(CD.GLOBAL_SELECTED,e.getActiveCells());return}var d=h.filter(function(t){return null==t?void 0:t.isLeaf});e.changeState({cells:c,nodes:d,stateName:CW.SELECTED});var f=c.map(function(t){return t.id});return e.updateCells(e.getRowColActiveCells(f)),(!o||a)&&e.highlightNodes(h),e.spreadsheet.emit(CD.GLOBAL_SELECTED,e.getActiveCells()),!0}}},this.highlightNodes=function(t){void 0===t&&(t=[]),t.forEach(function(t){var e;null===(e=null==t?void 0:t.belongsCell)||void 0===e||e.updateByState(CW.SELECTED,t.belongsCell)})},this.mergeCells=function(t,n){mt(e.spreadsheet,t,n)},this.unmergeCell=function(t){mn(e.spreadsheet,t)},this.spreadsheet=t,this.registerEventController(),this.registerInteractions(),window.addEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)}return t.prototype.destroy=function(){this.interactions.clear(),this.intercepts.clear(),this.eventController.clear(),this.clearHoverTimer(),this.resetState(),window.removeEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)},t.prototype.reset=function(){this.clearState(),this.clearHoverTimer(),this.intercepts.clear(),this.spreadsheet.hideTooltip()},t.prototype.setState=function(t){we(this.spreadsheet,t)},t.prototype.getState=function(){return this.spreadsheet.store.get(iM)||this.defaultState},t.prototype.setInteractedCells=function(t){var e=this.getInteractedCells().concat([t]),n=this.getState();n.interactedCells=e,this.setState(n)},t.prototype.getInteractedCells=function(){var t=this.getState();return(null==t?void 0:t.interactedCells)||[]},t.prototype.resetState=function(){this.spreadsheet.store.set(iM,this.defaultState)},t.prototype.getCurrentStateName=function(){return this.getState().stateName},t.prototype.isEqualStateName=function(t){return this.getCurrentStateName()===t},t.prototype.isStateOf=function(t){var e=this.getState();return(null==e?void 0:e.stateName)===t},t.prototype.isSelectedState=function(){return this.isStateOf(CW.SELECTED)||this.isStateOf(CW.BRUSH_SELECTED)},t.prototype.isAllSelectedState=function(){return this.isStateOf(CW.ALL_SELECTED)},t.prototype.isHoverFocusState=function(){return this.isStateOf(CW.HOVER_FOCUS)},t.prototype.isHoverState=function(){return this.isStateOf(CW.HOVER)},t.prototype.isActiveCell=function(t){return!!this.getCells().find(function(e){return t.getMeta().id===e.id})},t.prototype.isSelectedCell=function(t){return this.isSelectedState()&&this.isActiveCell(t)},t.prototype.getCells=function(t){var e=this.getState(),n=(null==e?void 0:e.cells)||[];return cY(t)?n:n.filter(function(e){return t.includes(e.type)})},t.prototype.getActiveCells=function(){var t=this.getCells().map(function(t){return t.id}),e=this.getAllCells();return hK(t,function(t){return hW(e,function(e){var n;return(null===(n=null==e?void 0:e.getMeta())||void 0===n?void 0:n.id)===t})}).filter(function(t){return t})},t.prototype.clearStyleIndependent=function(){(this.isSelectedState()||this.isHoverState()||this.isAllSelectedState())&&this.getPanelGroupAllDataCells().forEach(function(t){t.hideInteractionShape()})},t.prototype.getPanelGroupAllUnSelectedDataCells=function(){var t=this;return this.getPanelGroupAllDataCells().filter(function(e){return!t.isActiveCell(e)})},t.prototype.getPanelGroupAllDataCells=function(){var t;return SH(null===(t=this.spreadsheet.panelGroup)||void 0===t?void 0:t.getChildren(),yJ)},t.prototype.getAllRowHeaderCells=function(){var t,e,n=((null===(t=this.spreadsheet.foregroundGroup)||void 0===t?void 0:t.getChildren())||[]).find(function(t){return t instanceof S0&&!(t instanceof S2)});return SH((null===(e=null==n?void 0:n.cfg)||void 0===e?void 0:e.children)||[],m1).filter(function(t){return t.cellType===CG.ROW_CELL})},t.prototype.getAllColHeaderCells=function(){var t,e,n=((null===(t=this.spreadsheet.foregroundGroup)||void 0===t?void 0:t.getChildren())||[]).find(function(t){return t instanceof S$});return SH((null===(e=null==n?void 0:n.cfg)||void 0===e?void 0:e.children)||[],mz).filter(function(t){return t.cellType===CG.COL_CELL})},t.prototype.getRowColActiveCells=function(t){return uv(this.getAllRowHeaderCells(),this.getAllColHeaderCells()).filter(function(e){return t.includes(e.getMeta().id)})},t.prototype.getAllCells=function(){return uv(this.getPanelGroupAllDataCells(),this.getAllRowHeaderCells(),this.getAllColHeaderCells())},t.prototype.hideColumns=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=!0),mc(this.spreadsheet,t,e)},t.prototype.getBrushSelectionInfo=function(t){var e,n,r;return cN(t)?{dataBrushSelection:t,rowBrushSelection:t,colBrushSelection:t}:{dataBrushSelection:null!==(e=null==t?void 0:t.data)&&void 0!==e&&e,rowBrushSelection:null!==(n=null==t?void 0:t.row)&&void 0!==n&&n,colBrushSelection:null!==(r=null==t?void 0:t.col)&&void 0!==r&&r}},t.prototype.getDefaultInteractions=function(){var t=this.spreadsheet.options.interaction,e=t.resize,n=t.brushSelection,r=t.multiSelection,i=t.rangeSelection,o=t.selectedCellMove,a=this.getBrushSelectionInfo(n),s=a.dataBrushSelection,l=a.rowBrushSelection,u=a.colBrushSelection;return[{key:CF.CORNER_CELL_CLICK,interaction:bv},{key:CF.DATA_CELL_CLICK,interaction:bc},{key:CF.ROW_COLUMN_CLICK,interaction:bf},{key:CF.ROW_TEXT_CLICK,interaction:bp},{key:CF.MERGED_CELLS_CLICK,interaction:bd},{key:CF.HOVER,interaction:bg,enable:!vS()},{key:CF.BRUSH_SELECTION,interaction:bC,enable:!vS()&&s},{key:CF.ROW_BRUSH_SELECTION,interaction:bw,enable:!vS()&&l},{key:CF.COL_BRUSH_SELECTION,interaction:bm,enable:!vS()&&u},{key:CF.COL_ROW_RESIZE,interaction:b_,enable:!vS()&&e},{key:CF.DATA_CELL_MULTI_SELECTION,interaction:bx,enable:!vS()&&r},{key:CF.RANGE_SELECTION,interaction:bb,enable:!vS()&&i},{key:CF.SELECTED_CELL_MOVE,interaction:bL,enable:!vS()&&o}]},t.prototype.registerInteractions=function(){var t=this,e=this.spreadsheet.options.interaction.customInteractions;this.interactions.clear(),this.getDefaultInteractions().forEach(function(e){var n=e.key,r=e.interaction;!1!==e.enable&&t.interactions.set(n,new r(t.spreadsheet))}),cP(e)||hm(e,function(e){var n=e.interaction;t.interactions.set(e.key,new n(t.spreadsheet))})},t.prototype.registerEventController=function(){this.eventController=new bS(this.spreadsheet)},t.prototype.draw=function(){this.spreadsheet.container.draw()},t.prototype.clearState=function(){wt(this.spreadsheet)&&this.draw()},t.prototype.changeState=function(t){var e=this,n=this.spreadsheet.interaction,r=t.cells,i=t.force,o=t.stateName,a=t.onUpdateCells;if(cP(void 0===r?[]:r)&&o===CW.SELECTED){i&&n.changeState({cells:[],stateName:CW.UNSELECTED});return}this.getCurrentStateName()===CW.ALL_SELECTED&&this.clearStyleIndependent(),this.clearState(),this.setState(t);var s=function(){e.updatePanelGroupAllDataCells()};a?a(this,s):s(),this.draw()},t.prototype.updatePanelGroupAllDataCells=function(){this.updateCells(this.getPanelGroupAllDataCells())},t.prototype.updateCells=function(t){void 0===t&&(t=[]),t.forEach(function(t){t.update()})},t.prototype.addIntercepts=function(t){var e=this;void 0===t&&(t=[]),t.forEach(function(t){e.intercepts.add(t)})},t.prototype.hasIntercepts=function(t){var e=this;return void 0===t&&(t=[]),t.some(function(t){return e.intercepts.has(t)})},t.prototype.removeIntercepts=function(t){var e=this;void 0===t&&(t=[]),t.forEach(function(t){e.intercepts.delete(t)})},t.prototype.clearHoverTimer=function(){clearTimeout(this.hoverTimer)},t.prototype.setHoverTimer=function(t){this.hoverTimer=t},t.prototype.getHoverTimer=function(){return this.hoverTimer},t.prototype.getSelectedCellHighlight=function(){var t=this.spreadsheet.options.interaction.selectedCellHighlight;if(cN(t))return{rowHeader:t,colHeader:t,currentRow:!1,currentCol:!1};var e=null!=t?t:{},n=e.rowHeader,r=e.colHeader,i=e.currentRow,o=e.currentCol;return{rowHeader:void 0!==n&&n,colHeader:void 0!==r&&r,currentRow:void 0!==i&&i,currentCol:void 0!==o&&o}},t.prototype.getHoverAfterScroll=function(){return this.spreadsheet.options.interaction.hoverAfterScroll},t.prototype.getHoverHighlight=function(){var t=this.spreadsheet.options.interaction.hoverHighlight;if(cN(t))return{rowHeader:t,colHeader:t,currentRow:t,currentCol:t};var e=null!=t?t:{},n=e.rowHeader,r=e.colHeader,i=e.currentRow,o=e.currentCol;return{rowHeader:void 0!==n&&n,colHeader:void 0!==r&&r,currentRow:void 0!==i&&i,currentCol:void 0!==o&&o}},t.prototype.getBrushSelection=function(){var t=this.spreadsheet.options.interaction.brushSelection;if(cN(t))return{data:t,row:t,col:t};var e=null!=t?t:{},n=e.data,r=e.row,i=e.col;return{data:void 0!==n&&n,row:void 0!==r&&r,col:void 0!==i&&i}},t}(),bM=function(){function t(t){var e=this;this.viewport=window,this.isDevicePixelRatioChange=!1,this.init=function(){e.initDevicePixelRatioListener(),e.initDeviceZoomListener()},this.destroy=function(){e.removeDevicePixelRatioListener(),e.removeDeviceZoomListener()},this.removeDevicePixelRatioListener=function(){var t;(null===(t=e.devicePixelRatioMedia)||void 0===t?void 0:t.removeEventListener)?e.devicePixelRatioMedia.removeEventListener("change",e.renderByDevicePixelRatioChanged):e.devicePixelRatioMedia.removeListener(e.renderByDevicePixelRatioChanged)},this.initDeviceZoomListener=function(){var t,n;vS()||null===(n=null===(t=e.viewport)||void 0===t?void 0:t.visualViewport)||void 0===n||n.addEventListener("resize",e.renderByZoomScaleWithoutResizeEffect)},this.removeDeviceZoomListener=function(){var t,n;vS()||null===(n=null===(t=e.viewport)||void 0===t?void 0:t.visualViewport)||void 0===n||n.removeEventListener("resize",e.renderByZoomScaleWithoutResizeEffect)},this.renderByZoomScaleWithoutResizeEffect=function(t){e.isDevicePixelRatioChange=!1,e.renderByZoomScale(t)},this.renderByDevicePixelRatioChanged=function(){e.isDevicePixelRatioChange=!0,e.renderByDevicePixelRatio()},this.renderByDevicePixelRatio=function(t){void 0===t&&(t=window.devicePixelRatio);var n=e.spreadsheet,r=n.container,i=n.options,o=i.width,a=i.height,s=i.devicePixelRatio,l=e.spreadsheet.getCanvasElement();if(r.get("pixelRatio")!==t&&l){var u=Math.max(t,s,1);r.set("pixelRatio",u),r.changeSize(o,a),e.spreadsheet.render(!1)}},this.renderByZoomScale=u3(function(t){var n=Math.ceil(t.target.scale);n>=1&&!e.isDevicePixelRatioChange&&e.renderByDevicePixelRatio(n)},350),this.spreadsheet=t}return t.prototype.initDevicePixelRatioListener=function(){var t;this.devicePixelRatioMedia=window.matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)")),(null===(t=this.devicePixelRatioMedia)||void 0===t?void 0:t.addEventListener)?this.devicePixelRatioMedia.addEventListener("change",this.renderByDevicePixelRatioChanged):this.devicePixelRatioMedia.addListener(this.renderByDevicePixelRatioChanged)},t}(),bR=function(){function t(t){this.visible=!1,this.position={x:0,y:0},this.spreadsheet=t}return t.prototype.show=function(t){var e,n,r,i=t.position,o=t.options,a=t.content,s=t.event,l=xN(o).enterable,u=this.spreadsheet.options.tooltip||{},h=u.autoAdjustBoundary,c=u.adjustPosition;this.visible=!0,this.options=t;var d=this.getContainer();this.renderContent(a);var f=xB({spreadsheet:this.spreadsheet,position:i,tooltipContainer:d,autoAdjustBoundary:h}),p=f.x,v=f.y;this.position=null!==(e=null==c?void 0:c({position:{x:p,y:v},event:s}))&&void 0!==e?e:{x:p,y:v},xk(d,{style:{left:"".concat(null===(n=this.position)||void 0===n?void 0:n.x,"px"),top:"".concat(null===(r=this.position)||void 0===r?void 0:r.y,"px"),pointerEvents:l?"all":"none"},visible:!0})},t.prototype.hide=function(){this.visible=!1,this.container&&(xk(this.container,{style:{pointerEvents:"none"},visible:!1}),this.resetPosition())},t.prototype.destroy=function(){var t,e;this.visible=!1,this.container&&(this.resetPosition(),null===(e=(t=this.container).remove)||void 0===e||e.call(t),this.container=null)},t.prototype.renderContent=function(t){if(this.container){this.clearContent();var e=(this.spreadsheet.options.tooltip||{}).content,n=null!=t?t:e;if(!cY(n)){if("string"==typeof n){this.container.innerHTML=n;return}n instanceof Element&&this.container.appendChild(n)}}},t.prototype.clearContent=function(){this.container&&(this.container.innerHTML="")},t.prototype.disablePointerEvent=function(){this.container&&"none"!==this.container.style.pointerEvents&&xk(this.container,{style:{pointerEvents:"none"}})},t.prototype.resetPosition=function(){this.position={x:0,y:0}},t.prototype.getContainer=function(){var t;if(!this.container){var e=this.spreadsheet.options.tooltip,n=(null===(t=e.getContainer)||void 0===t?void 0:t.call(e))||document.body,r=document.createElement("div");xk(r,{style:e.style,className:[vC].concat(e.className)}),n.appendChild(r),this.container=r}return this.container},t}(),bI=function(t){function e(e,n,r){var i=t.call(this)||this;return i.store=new vH,i.untypedOn=i.on,i.untypedEmit=i.emit,i.on=function(t,e){return i.untypedOn(t,e)},i.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return i.untypedEmit.apply(i,p([t],f(e),!1))},i.initHiddenColumnsDetail=function(){var t=i.options.interaction.hiddenColumnFields,e=i.store.get("hiddenColumnsDetail");cP(t)&&cP(e)||mc(i,t,!0)},i.measureText=sr(function(t,e){if(void 0===t&&(t=""),!e)return null;var n,r=null===(n=i.getCanvasElement())||void 0===n?void 0:n.getContext("2d"),o=e.fontSize,a=e.fontFamily,s=e.fontWeight,l=e.fontStyle,u=e.fontVariant;return r.font=[l,u,s,"".concat(o,"px"),a].join(" ").trim(),r.measureText(String(t))},function(t,e){return p([t],f(ch(e)),!1).join("")}),i.measureTextWidth=function(t,e){void 0===t&&(t="");var n=i.measureText(t,e);return(null==n?void 0:n.width)||0},i.measureTextHeight=function(t,e){void 0===t&&(t="");var n=i.measureText(t,e);return n?n.actualBoundingBoxAscent+n.actualBoundingBoxDescent:0},i.measureTextWidthRoughly=function(t,e){void 0===e&&(e={});var n,r,o=i.measureTextWidth("a",e),a=i.measureTextWidth("蚂",e),s=0;if(!t)return s;try{for(var l=d(t),u=l.next();!u.done;u=l.next()){var h=u.value.charCodeAt(0);s+=h>=0&&h<=255?o:a}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return s},i.dataCfg=wa(n),i.options=ws(r),i.dataSet=i.getDataSet(i.options),i.setDebug(),i.initTooltip(),i.initGroups(e),i.bindEvents(),i.initInteraction(),i.initTheme(),i.initHdAdapter(),i.registerIcons(),i.setOverscrollBehavior(),i}return u(e,t),e.prototype.setOverscrollBehavior=function(){var t=this.options.interaction.overscrollBehavior,e=window.getComputedStyle(document.body).getPropertyValue("overscroll-behavior");e&&"auto"!==e?this.store.set("initOverscrollBehavior",e):t&&(document.body.style.overscrollBehavior=t)},e.prototype.restoreOverscrollBehavior=function(){document.body.style.overscrollBehavior=this.store.get("initOverscrollBehavior")||""},e.prototype.setDebug=function(){vI.getInstance().setDebug(this.options.debug)},e.prototype.initTheme=function(){this.setThemeCfg({name:"default"})},e.prototype.getMountContainer=function(t){var e=cl(t)?document.querySelector(t):t;if(!e)throw Error("Target mount container is not a DOM element");return e},e.prototype.initHdAdapter=function(){this.options.hdAdapter&&(this.hdAdapter=new bM(this),this.hdAdapter.init())},e.prototype.initInteraction=function(){var t,e;null===(e=null===(t=this.interaction)||void 0===t?void 0:t.destroy)||void 0===e||e.call(t),this.interaction=new bT(this)},e.prototype.initTooltip=function(){var t,e,n,r;null===(e=null===(t=this.tooltip)||void 0===t?void 0:t.destroy)||void 0===e||e.call(t),this.tooltip=this.renderTooltip(),this.tooltip instanceof bR||console.warn("[Custom Tooltip]: ".concat(null===(r=null===(n=this.tooltip)||void 0===n?void 0:n.constructor)||void 0===r?void 0:r.toString()," should be extends from BaseTooltip"))},e.prototype.renderTooltip=function(){var t,e;return(null===(e=null===(t=this.options.tooltip)||void 0===t?void 0:t.renderTooltip)||void 0===e?void 0:e.call(t,this))||new bR(this)},e.prototype.showTooltip=function(t){var e,n,r=t.content,i=t.event,o=this.getCell(null==i?void 0:i.target),a=oa(r)?r(o,t):r;null===(n=(e=this.tooltip).show)||void 0===n||n.call(e,h(h({},t),{content:a}))},e.prototype.showTooltipWithInfo=function(t,e,n){var r,i=xQ(this,t),o=i.showTooltip,a=i.content;if(o){var s=this.getCell(null==t?void 0:t.target),l=null!==(r=null==n?void 0:n.data)&&void 0!==r?r:xK({spreadsheet:this,cellInfos:e,targetCell:s,options:h({enableFormat:!0},n)});this.showTooltip({data:l,position:{x:t.clientX,y:t.clientY},options:h({enterable:!0},n),event:t,content:a})}},e.prototype.hideTooltip=function(){var t,e;null===(e=(t=this.tooltip).hide)||void 0===e||e.call(t)},e.prototype.destroyTooltip=function(){var t,e;null===(e=(t=this.tooltip).destroy)||void 0===e||e.call(t)},e.prototype.registerIcons=function(){var t=this.options.customSVGIcons;cP(t)||hm(t,function(t){vB(t.name,t.svg)})},e.prototype.setDataCfg=function(t,e){this.store.set("originalDataCfg",t),e?this.dataCfg=wa(t):this.dataCfg=wa(this.dataCfg,t),x2(this)},e.prototype.setOptions=function(t,e){var n;this.hideTooltip(),e?this.options=ws(t):this.options=wi(this.options,t),(e||(null===(n=t.tooltip)||void 0===n?void 0:n.renderTooltip))&&this.initTooltip(),this.resetHiddenColumnsDetailInfoIfNeeded(),this.registerIcons()},e.prototype.resetHiddenColumnsDetailInfoIfNeeded=function(){var t;cP(null===(t=this.options.interaction)||void 0===t?void 0:t.hiddenColumnFields)||this.store.set("hiddenColumnsDetail",[])},e.prototype.render=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e={}),this.getCanvasElement()){var n=e.reBuildDataSet,r=e.reBuildHiddenColumnsDetail;this.emit(CD.LAYOUT_BEFORE_RENDER),void 0!==n&&n&&(this.dataSet=this.getDataSet(this.options)),t&&(this.clearDrillDownData("",!0),this.dataSet.setDataCfg(this.dataCfg)),this.buildFacet(),(void 0===r||r)&&this.initHiddenColumnsDetail(),this.emit(CD.LAYOUT_AFTER_RENDER)}},e.prototype.destroy=function(){var t,e,n,r,i;this.restoreOverscrollBehavior(),this.emit(CD.LAYOUT_DESTROY),null===(t=this.facet)||void 0===t||t.destroy(),null===(e=this.hdAdapter)||void 0===e||e.destroy(),null===(n=this.interaction)||void 0===n||n.destroy(),null===(r=this.store)||void 0===r||r.clear(),this.destroyTooltip(),this.clearCanvasEvent(),null===(i=this.container)||void 0===i||i.destroy(),gx()},e.prototype.setThemeCfg=function(t){void 0===t&&(t={});var e=(null==t?void 0:t.theme)||{},n=v_(h(h({},t),{spreadsheet:this}));this.theme=wi(n,e)},e.prototype.setTheme=function(t){this.theme=wi(this.theme,t)},e.prototype.updatePagination=function(t){this.options=wi(this.options,{pagination:t}),this.store.set("scrollX",0),this.store.set("scrollY",0)},e.prototype.getContentHeight=function(){return this.facet.getContentHeight()},e.prototype.changeSize=function(t,e){void 0===t&&(t=this.options.width),void 0===e&&(e=this.options.height),this.changeSheetSize(t,e)},e.prototype.changeSheetSize=function(t,e){void 0===t&&(t=this.options.width),void 0===e&&(e=this.options.height);var n=this.getCanvasElement(),r=this.container.get("width"),i=this.container.get("height");(t!==r||e!==i)&&n&&(this.options=wi(this.options,{width:t,height:e}),this.container.changeSize(t,e))},e.prototype.getCanvasElement=function(){return this.container.get("el")},e.prototype.getLayoutWidthType=function(){return this.options.style.layoutWidthType},e.prototype.getRowNodes=function(t){return(void 0===t&&(t=-1),-1===t)?this.facet.layoutResult.rowNodes:this.facet.layoutResult.rowNodes.filter(function(e){return e.level===t})},e.prototype.getRowLeafNodes=function(){var t;return(null===(t=this.facet)||void 0===t?void 0:t.layoutResult.rowLeafNodes)||[]},e.prototype.getColumnNodes=function(t){void 0===t&&(t=-1);var e,n=(null===(e=this.facet)||void 0===e?void 0:e.layoutResult.colNodes)||[];return -1===t?n:n.filter(function(e){return e.level===t})},e.prototype.getColumnLeafNodes=function(){var t;return(null===(t=this.facet)||void 0===t?void 0:t.layoutResult.colLeafNodes)||[]},e.prototype.updateScrollOffset=function(t){this.facet.updateScrollOffset(wi({offsetX:{value:void 0,animate:!1},offsetY:{value:void 0,animate:!1},rowHeaderOffsetX:{value:void 0,animate:!1}},t))},e.prototype.getTooltipDataItemMappingCallback=function(){var t;return null===(t=this.options)||void 0===t?void 0:t.mappingDisplayDataItem},e.prototype.isCellType=function(t){return t instanceof yV},e.prototype.getCell=function(t){for(var e,n=t;n&&!(n instanceof r4);){if(this.isCellType(n))return n;n=null===(e=n.get)||void 0===e?void 0:e.call(n,"parent")}return null},e.prototype.getCellType=function(t){var e=this.getCell(t);return null==e?void 0:e.cellType},e.prototype.getTotalsConfig=function(t){var e=sd(this.options.totals,cd(this.dataSet.fields.rows,t)?"row":"col",{}),n=!!(e.showSubTotals&&cd(e.subTotalsDimensions,t))&&e.showSubTotals;return h(h({label:vy("总计"),subLabel:vy("小计"),totalsGroupDimensions:[],subTotalsGroupDimensions:[]},e),{showSubTotals:n})},e.prototype.initGroups=function(t){var e=this.options,n=e.width,r=e.height,i=e.supportCSSTransform,o=e.devicePixelRatio;this.container=new r4({container:this.getMountContainer(t),width:n,height:r,localRefresh:!1,supportCSSTransform:i,pixelRatio:Math.max(o,1)}),this.backgroundGroup=this.container.addGroup({name:"backGroundGroup",zIndex:0}),this.panelGroup=this.container.addGroup({name:"panelGroup",zIndex:1}),this.foregroundGroup=this.container.addGroup({name:"foreGroundGroup",zIndex:3}),this.initPanelGroupChildren(),this.updateContainerStyle()},e.prototype.updateContainerStyle=function(){var t=this.getCanvasElement();t&&(t.style.display="block")},e.prototype.initPanelGroupChildren=function(){this.panelScrollGroup=new bu({name:"panelScrollGroup",zIndex:1,s2:this}),this.panelGroup.add(this.panelScrollGroup)},e.prototype.getInitColumnLeafNodes=function(){return this.store.get("initColumnLeafNodes",[])},e.prototype.clearColumnLeafNodes=function(){this.clearInitColumnLeafNodes()},e.prototype.clearInitColumnLeafNodes=function(){this.store.set("initColumnLeafNodes",void 0)},e.prototype.clearCanvasEvent=function(){var t=this;h3(this.getEvents(),function(e,n){t.off(n)})},e.prototype.updateSortMethodMap=function(t,e,n){void 0===n&&(n=!1);var r,i=n?null:this.store.get("sortMethodMap");this.store.set("sortMethodMap",h(h({},i),((r={})[t]=e,r)))},e.prototype.getMenuDefaultSelectedKeys=function(t){var e=sd(this.store.get("sortMethodMap"),t);return e?[e]:[]},e}(ty),bO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getDataSet=function(t){var e=t.dataSet,n=t.hierarchyType;return e?e(this):"customTree"===n?new x6(this):new x8(this)},e.prototype.getContentHeight=function(){return this.facet.getContentHeight()},e.prototype.isPivotMode=function(){return!0},e.prototype.isTableMode=function(){return!1},e.prototype.isHierarchyTreeType=function(){var t=this.options.hierarchyType;return"tree"===t||"customTree"===t},e.prototype.isScrollContainsRowHeader=function(){return!this.isFrozenRowHeader()},e.prototype.isFrozenRowHeader=function(){var t;return null===(t=this.options)||void 0===t?void 0:t.frozenRowHeader},e.prototype.isValueInCols=function(){return this.dataSet.fields.valueInCols},e.prototype.clearDrillDownData=function(t,e){this.dataSet instanceof x8&&this.dataSet.clearDrillDownData(t)&&!e&&(this.interaction.reset(),this.render(!1))},e.prototype.getFacetCfgFromDataSetAndOptions=function(){var t=this,e=this.dataSet,n=e.fields,r=e.meta,i=this.options,o=i.style,a=i.dataCell;return h(h(h(h({},this.options),n),o),{meta:r,spreadsheet:this,dataSet:this.dataSet,dataCell:null!=a?a:function(e){return new yJ(e,t)}})},e.prototype.buildFacet=function(){var t,e=this.getFacetCfgFromDataSetAndOptions();null===(t=this.facet)||void 0===t||t.destroy(),this.facet=new bi(e),this.facet.render()},e.prototype.bindEvents=function(){this.off(CD.ROW_CELL_COLLAPSE_TREE_ROWS),this.off(CD.LAYOUT_TREE_ROWS_COLLAPSE_ALL),this.on(CD.ROW_CELL_COLLAPSE_TREE_ROWS,this.handleRowCellCollapseTreeRows),this.on(CD.LAYOUT_TREE_ROWS_COLLAPSE_ALL,this.handleTreeRowsCollapseAll)},e.prototype.handleRowCellCollapseTreeRows=function(t){var e,n=t.id,r=t.isCollapsed,i={style:{collapsedRows:((e={})[n]=r,e)}};this.emit(CD.LAYOUT_COLLAPSE_ROWS,{collapsedRows:i.style.collapsedRows,meta:null==t?void 0:t.node}),this.setOptions(i),this.render(!1),this.emit(CD.LAYOUT_AFTER_COLLAPSE_ROWS,{collapsedRows:i.style.collapsedRows,meta:null==t?void 0:t.node})},e.prototype.handleTreeRowsCollapseAll=function(t){this.setOptions({style:{hierarchyCollapse:!t,collapsedRows:null,rowExpandDepth:null}}),this.render(!1)},e.prototype.groupSortByMethod=function(t,e){var n=this.dataCfg.fields,r=n.rows,i=n.columns,o=this.options.style.colCfg.hideMeasureColumn,a=this.isValueInCols()?hd(r):hd(i),s=e.query,l=e.value,u=ud(s),c=l;o&&this.isValueInCols()&&(c=this.dataSet.fields.values[0],u[r5]=c);var d={sortFieldId:a,sortMethod:t,sortByMeasure:c,query:u},v=this.dataCfg.sortParams.filter(function(t){return(null==t?void 0:t.sortFieldId)!==a});this.updateSortMethodMap(e.id,t,!0);var g=p(p([],f(v),!1),[d],!1);this.emit(CD.RANGE_SORT,g),this.setDataCfg(h(h({},this.dataCfg),{sortParams:g})),this.render()},e.prototype.handleGroupSort=function(t,e){var n=this;t.stopPropagation(),this.interaction.addIntercepts([Cj.HOVER]);var r=this.getMenuDefaultSelectedKeys(null==e?void 0:e.id),i={onClick:function(r){var i=r.key;n.groupSortByMethod(i,e),n.emit(CD.RANGE_SORTED,t)},menus:[{key:"asc",icon:"groupAsc",text:vy("组内升序")},{key:"desc",icon:"groupDesc",text:vy("组内降序")},{key:"none",text:vy("不排序")}],defaultSelectedKeys:r};this.showTooltipWithInfo(t,[],{operator:i,onlyMenu:!0,forceRender:!0})},e.prototype.initPanelGroupChildren=function(){t.prototype.initPanelGroupChildren.call(this),this.frozenRowGroup=new bl(h({KEY_GROUP_PANEL_FROZEN_ROW:ii},{zIndex:2,s2:this})),this.panelGroup.add(this.frozenRowGroup)},e.prototype.isCellType=function(t){return t instanceof yV&&!(t instanceof m2)},e}(bI),bA=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onSortTooltipClick=function(t,n){var r=t.key,i=n.field;e.updateSortMethodMap(n.id,r),e.emit(CD.RANGE_SORT,[{sortFieldId:i,sortMethod:r}])},e}return u(e,t),e.prototype.getDataSet=function(t){var e=t.dataSet;return e?e(this):new x7(this)},e.prototype.isPivotMode=function(){return!1},e.prototype.isTableMode=function(){return!0},e.prototype.isHierarchyTreeType=function(){return!1},e.prototype.isScrollContainsRowHeader=function(){return!1},e.prototype.isFrozenRowHeader=function(){return!1},e.prototype.clearDrillDownData=function(){},e.prototype.isValueInCols=function(){return!1},e.prototype.bindEvents=function(){},e.prototype.initPanelGroupChildren=function(){var e,n=this;t.prototype.initPanelGroupChildren.call(this);var r={zIndex:2,s2:this};e=f([ii,io,"frozenTrailingRowGroup","frozenTrailingColGroup","frozenTopGroup","frozenBottomGroup"].map(function(t){var e=new bl(h({name:t},r));return n.panelGroup.add(e),e}),6),this.frozenRowGroup=e[0],this.frozenColGroup=e[1],this.frozenTrailingRowGroup=e[2],this.frozenTrailingColGroup=e[3],this.frozenTopGroup=e[4],this.frozenBottomGroup=e[5]},e.prototype.getFacetCfgFromDataSetAndOptions=function(){var t=this,e=this.dataSet,n=e.fields,r=e.meta,i=this.options,o=i.style,a=i.dataCell;return h(h(h(h({},this.options),n),o),{meta:r,spreadsheet:this,dataSet:this.dataSet,dataCell:null!=a?a:function(e){return t.options.showSeriesNumber&&0===e.colIndex?new mU(e,t):new mY(e,t)}})},e.prototype.buildFacet=function(){var t,e=this.getFacetCfgFromDataSetAndOptions();null===(t=this.facet)||void 0===t||t.destroy(),this.facet=new ba(e),this.facet.render()},e.prototype.clearFrozenGroups=function(){this.frozenRowGroup.set("children",[]),this.frozenColGroup.set("children",[]),this.frozenTrailingRowGroup.set("children",[]),this.frozenTrailingColGroup.set("children",[]),this.frozenTopGroup.set("children",[]),this.frozenBottomGroup.set("children",[])},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.clearFrozenGroups(),this.off(CD.RANGE_SORT),this.off(CD.RANGE_FILTER)},e.prototype.handleGroupSort=function(t,e){var n=this;t.stopPropagation(),this.interaction.addIntercepts([Cj.HOVER]);var r=this.getMenuDefaultSelectedKeys(null==e?void 0:e.id),i={onClick:function(t){var r=t.key;n.onSortTooltipClick({key:r},e)},menus:[{key:"asc",icon:"groupAsc",text:vy("升序")},{key:"desc",icon:"groupDesc",text:vy("降序")},{key:"none",text:vy("不排序")}],defaultSelectedKeys:r};this.showTooltipWithInfo(t,[],{operator:i,onlyMenu:!0,forceRender:!0})},e}(bI)}}]);