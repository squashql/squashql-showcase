(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[390],{4618:function(e,t,n){Promise.resolve().then(n.bind(n,4058))},722:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var s,i,l=n(3827),a=n(4090);function r(e){if("expression"in e)return e.alias;if(e.fullName)return e.fullName;if(e.alias)return e.alias;throw Error("Unexpected type "+e)}function c(e){var t;return(0,l.jsxs)("div",{children:[function(e){switch(e){case 0:return"Rows";case 1:return"Columns";case 2:return"Measures"}}(e.type),":",null===(t=e.elements)||void 0===t?void 0:t.map((t,n)=>(0,l.jsx)("span",{className:"ms-1 mb-1 badge rounded-pill text-bg-dark",style:{cursor:"pointer"},onClick:()=>(function(e,t){let n=t.type,s=t.selectableElements,i=t.elements,l=i.map(e=>r(e)).indexOf(e),a=i.slice(),c=s.slice();c.push(a[l]),a.splice(l,1),t.elementsDispatcher(a),t.selectableElementsDispatcher(c),t.queryResultDispatcher(a,n)})(r(t),e),children:r(t)},n)),(0,l.jsx)("div",{className:"w-25",children:(0,l.jsxs)("select",{value:"DEFAULT",className:"form-select form-select-sm",onChange:t=>(function(e,t){let n=t.type,s=t.selectableElements,i=t.elements,l=s.map(e=>r(e)).indexOf(e.target.value),a=s.slice();i.push(a[l]),a.splice(l,1),t.elementsDispatcher(i),t.selectableElementsDispatcher(a),t.queryResultDispatcher(i,n)})(t,e),children:[(0,l.jsx)("option",{value:"DEFAULT",disabled:!0,children:"Select option"}),e.selectableElements.map((e,t)=>(0,l.jsx)("option",{value:r(e),children:r(e)},t))]})})]})}(s=i||(i={}))[s.ROWS=0]="ROWS",s[s.COLUMNS=1]="COLUMNS",s[s.VALUES=2]="VALUES";var o=n(4194);class u{async executePivotQuery(e,t,n,s,i){let l=t.concat(n);if(0!==l.length&&0!==s.length){let a={rows:t,columns:n,minify:i};return this.querier.executePivotQuery(e.query(l,s,a),a)}}constructor(){this.querier=new o.Querier("http://localhost:8080")}}let h=new u;var d=n(4232);function p(e){let t=e.queryProvider,[s,r]=(0,a.useState)(),[o,u]=(0,a.useState)([]),[p,m]=(0,a.useState)([]),[b,y]=(0,a.useState)(t.selectableFields),[f,w]=(0,a.useState)(t.measures),[g,x]=(0,a.useState)([]),[S,F]=(0,a.useState)(!0);function T(e,t){let n=o,s=p,l=g;switch(t){case i.ROWS:n=e;break;case i.COLUMNS:s=e;break;case i.VALUES:l=e}return E(n,s,l,S)}function E(e,n,s,i){return h.executePivotQuery(t,e.map(e=>e),n.map(e=>e),s.map(e=>e),i).then(e=>r(e))}let v=(0,d.default)(()=>Promise.all([n.e(470),n.e(835),n.e(726),n.e(696)]).then(n.bind(n,5696)),{loadableGenerated:{webpack:()=>[5696]},ssr:!1});return(0,l.jsxs)("div",{className:"ms-1",children:[(0,l.jsx)("nav",{"aria-label":"breadcrumb",children:(0,l.jsxs)("ol",{className:"breadcrumb",children:[(0,l.jsx)("li",{className:"breadcrumb-item",children:(0,l.jsx)("a",{href:"../",children:"Home"})}),(0,l.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:e.title})]})}),(0,l.jsx)(c,{type:i.ROWS,elements:o,selectableElements:b,elementsDispatcher:u,selectableElementsDispatcher:y,queryResultDispatcher:T}),(0,l.jsx)(c,{type:i.COLUMNS,elements:p,selectableElements:b,elementsDispatcher:m,selectableElementsDispatcher:y,queryResultDispatcher:T}),(0,l.jsx)(c,{type:i.VALUES,elements:g,selectableElements:f,elementsDispatcher:x,selectableElementsDispatcher:w,queryResultDispatcher:T}),(0,l.jsxs)("div",{className:"row row-cols-auto",children:[(0,l.jsx)("div",{className:"col",children:(0,l.jsx)("button",{className:"btn btn-ligth",onClick:function(){return E(o,p,g,S)},children:"Refresh"})}),(0,l.jsxs)("div",{className:"col py-2",children:[(0,l.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",checked:S,onChange:function(){F(!S),E(o,p,g,!S)}}),(0,l.jsx)("label",{className:"form-check-label px-1",htmlFor:"flexCheckChecked",children:"Minify"})]}),e.elements]}),void 0!==s?(0,l.jsx)(v,{result:s}):void 0]})}},8257:function(e,t,n){"use strict";n.d(t,{Fx:function(){return h},RE:function(){return u},cn:function(){return o},lB:function(){return c}});var s=n(4194);class i{constructor(){this._name="spending",this.city=new s.TableField("spending.city"),this.country=new s.TableField("spending.country"),this.continent=new s.TableField("spending.continent"),this.spendingCategory=new s.TableField("spending.spending category"),this.spendingSubcategory=new s.TableField("spending.spending subcategory"),this.year=new s.TableField("spending.year"),this.amount=new s.TableField("spending.amount"),this._fields=[this.city,this.country,this.continent,this.spendingCategory,this.spendingSubcategory,this.year,this.amount]}}class l{constructor(){this._name="portfolio",this.ticker=new s.TableField("portfolio.Ticker"),this.dateScenario=new s.TableField("portfolio.DateScenario"),this.currency=new s.TableField("portfolio.Currency"),this.nbShares=new s.TableField("portfolio.NbShares"),this.riskType=new s.TableField("portfolio.RiskType"),this.scenarioValue=new s.TableField("portfolio.ScenarioValue"),this._fields=[this.ticker,this.dateScenario,this.currency,this.nbShares,this.riskType,this.scenarioValue]}}class a{constructor(){this._name="population",this.country=new s.TableField("population.country"),this.continent=new s.TableField("population.continent"),this.population=new s.TableField("population.population"),this._fields=[this.country,this.continent,this.population]}}class r{constructor(){this._name="budget",this.incomeExpenditure=new s.TableField("budget.Income / Expenditure"),this.category=new s.TableField("budget.Category"),this.subcategory=new s.TableField("budget.Subcategory"),this.year=new s.TableField("budget.Year"),this.month=new s.TableField("budget.Month"),this.day=new s.TableField("budget.Day"),this.date=new s.TableField("budget.Date"),this.description=new s.TableField("budget.Description"),this.amount=new s.TableField("budget.Amount"),this.happinessScore=new s.TableField("budget.Happiness score"),this.scenario=new s.TableField("budget.Scenario"),this._fields=[this.incomeExpenditure,this.category,this.subcategory,this.year,this.month,this.day,this.date,this.description,this.amount,this.happinessScore,this.scenario]}}let c=new i,o=new l,u=new a,h=new r},4058:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s=n(3827),i=n(722),l=n(4194),a=n(8257);class r{constructor(){this.alias="% amount on rows",this.class=""}}let c=new r,o=new l.TableField("group of countries"),u=new Map(Object.entries({"comp. with fr":["france","usa","uk"],"comp. with uk":["uk","france","usa"],"comp. with usa":["usa","france","uk"]})),h=[a.lB.spendingCategory,a.lB.spendingSubcategory,a.lB.continent,a.lB.country,a.lB.city,a.lB.year,o],d=function(){let e=(0,l.sum)("amount",a.lB.amount),t=(0,l.comparisonMeasureWithPeriod)("YoY Growth",l.ComparisonMethod.ABSOLUTE_DIFFERENCE,e,new Map([[a.lB.year,"y-1"]]),new l.Year(a.lB.year)),n=(0,l.comparisonMeasureWithinSameGroup)("group amount comparison",l.ComparisonMethod.ABSOLUTE_DIFFERENCE,e,new Map([[a.lB.country,"first"]]));return[e,t,n,c]}();class p{query(e,t,n){let s=t.indexOf(c),i=[...t];if(s>=0){let e=i[s];i.splice(s,1),i.push(function(e,t){let n=(0,l.sum)("amount",a.lB.amount),s=(0,l.comparisonMeasureWithParent)(e.alias+"_underlying",l.ComparisonMethod.DIVIDE,n,t);return(0,l.multiply)(e.alias,(0,l.integer)(100),s)}(e,n.rows))}let r=e.indexOf(o);e=e.filter(e=>e!==o);let h=r>=0?[new l.GroupColumnSet(o,a.lB.country,u)]:[];return(0,l.from)(a.lB._name).select(e,h,i).build()}constructor(){this.selectableFields=h,this.measures=d}}let m=new p;function b(){return(0,s.jsx)(i.Z,{title:"Spending",queryProvider:m})}}},function(e){e.O(0,[798,971,69,744],function(){return e(e.s=4618)}),_N_E=e.O()}]);