(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{3432:function(e,t,n){Promise.resolve().then(n.bind(n,6497))},722:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i,s,l=n(3827),a=n(4090);function r(e){if("expression"in e)return e.alias;if(e.fullName)return e.fullName;if(e.alias)return e.alias;throw Error("Unexpected type "+e)}function c(e){var t;return(0,l.jsxs)("div",{children:[function(e){switch(e){case 0:return"Rows";case 1:return"Columns";case 2:return"Measures"}}(e.type),":",null===(t=e.elements)||void 0===t?void 0:t.map((t,n)=>(0,l.jsx)("span",{className:"ms-1 mb-1 badge rounded-pill text-bg-dark",style:{cursor:"pointer"},onClick:()=>(function(e,t){let n=t.type,i=t.selectableElements,s=t.elements,l=s.map(e=>r(e)).indexOf(e),a=s.slice(),c=i.slice();c.push(a[l]),a.splice(l,1),t.elementsDispatcher(a),t.selectableElementsDispatcher(c),t.queryResultDispatcher(a,n)})(r(t),e),children:r(t)},n)),(0,l.jsx)("div",{className:"w-25",children:(0,l.jsxs)("select",{value:"DEFAULT",className:"form-select form-select-sm",onChange:t=>(function(e,t){let n=t.type,i=t.selectableElements,s=t.elements,l=i.map(e=>r(e)).indexOf(e.target.value),a=i.slice();s.push(a[l]),a.splice(l,1),t.elementsDispatcher(s),t.selectableElementsDispatcher(a),t.queryResultDispatcher(s,n)})(t,e),children:[(0,l.jsx)("option",{value:"DEFAULT",disabled:!0,children:"Select option"}),e.selectableElements.map((e,t)=>(0,l.jsx)("option",{value:r(e),children:r(e)},t))]})})]})}(i=s||(s={}))[i.ROWS=0]="ROWS",i[i.COLUMNS=1]="COLUMNS",i[i.VALUES=2]="VALUES";var o=n(4194);class u{async executePivotQuery(e,t,n,i,s){let l=t.concat(n);if(0!==l.length&&0!==i.length){let a={rows:t,columns:n,minify:s};return this.querier.executePivotQuery(e.query(l,i,a),a)}}constructor(){this.querier=new o.Querier("http://localhost:8080")}}let d=new u;var h=n(4232);function p(e){let t=e.queryProvider,[i,r]=(0,a.useState)(),[o,u]=(0,a.useState)([]),[p,b]=(0,a.useState)([]),[m,f]=(0,a.useState)(t.selectableFields),[y,g]=(0,a.useState)(t.measures),[w,x]=(0,a.useState)([]),[F,T]=(0,a.useState)(!0);function S(e,t){let n=o,i=p,l=w;switch(t){case s.ROWS:n=e;break;case s.COLUMNS:i=e;break;case s.VALUES:l=e}return E(n,i,l,F)}function E(e,n,i,s){return d.executePivotQuery(t,e.map(e=>e),n.map(e=>e),i.map(e=>e),s).then(e=>r(e))}let v=(0,h.default)(()=>Promise.all([n.e(470),n.e(835),n.e(726),n.e(696)]).then(n.bind(n,5696)),{loadableGenerated:{webpack:()=>[5696]},ssr:!1});return(0,l.jsxs)("div",{className:"ms-1",children:[(0,l.jsx)("nav",{"aria-label":"breadcrumb",children:(0,l.jsxs)("ol",{className:"breadcrumb",children:[(0,l.jsx)("li",{className:"breadcrumb-item",children:(0,l.jsx)("a",{href:"../",children:"Home"})}),(0,l.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:e.title})]})}),(0,l.jsx)(c,{type:s.ROWS,elements:o,selectableElements:m,elementsDispatcher:u,selectableElementsDispatcher:f,queryResultDispatcher:S}),(0,l.jsx)(c,{type:s.COLUMNS,elements:p,selectableElements:m,elementsDispatcher:b,selectableElementsDispatcher:f,queryResultDispatcher:S}),(0,l.jsx)(c,{type:s.VALUES,elements:w,selectableElements:y,elementsDispatcher:x,selectableElementsDispatcher:g,queryResultDispatcher:S}),(0,l.jsxs)("div",{className:"row row-cols-auto",children:[(0,l.jsx)("div",{className:"col",children:(0,l.jsx)("button",{className:"btn btn-ligth",onClick:function(){return E(o,p,w,F)},children:"Refresh"})}),(0,l.jsxs)("div",{className:"col py-2",children:[(0,l.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",checked:F,onChange:function(){T(!F),E(o,p,w,!F)}}),(0,l.jsx)("label",{className:"form-check-label px-1",htmlFor:"flexCheckChecked",children:"Minify"})]}),e.elements]}),void 0!==i?(0,l.jsx)(v,{result:i}):void 0]})}},8257:function(e,t,n){"use strict";n.d(t,{Fx:function(){return d},RE:function(){return u},cn:function(){return o},lB:function(){return c}});var i=n(4194);class s{constructor(){this._name="spending",this.city=new i.TableField("spending.city"),this.country=new i.TableField("spending.country"),this.continent=new i.TableField("spending.continent"),this.spendingCategory=new i.TableField("spending.spending category"),this.spendingSubcategory=new i.TableField("spending.spending subcategory"),this.year=new i.TableField("spending.year"),this.amount=new i.TableField("spending.amount"),this._fields=[this.city,this.country,this.continent,this.spendingCategory,this.spendingSubcategory,this.year,this.amount]}}class l{constructor(){this._name="portfolio",this.ticker=new i.TableField("portfolio.Ticker"),this.dateScenario=new i.TableField("portfolio.DateScenario"),this.currency=new i.TableField("portfolio.Currency"),this.nbShares=new i.TableField("portfolio.NbShares"),this.riskType=new i.TableField("portfolio.RiskType"),this.scenarioValue=new i.TableField("portfolio.ScenarioValue"),this._fields=[this.ticker,this.dateScenario,this.currency,this.nbShares,this.riskType,this.scenarioValue]}}class a{constructor(){this._name="population",this.country=new i.TableField("population.country"),this.continent=new i.TableField("population.continent"),this.population=new i.TableField("population.population"),this._fields=[this.country,this.continent,this.population]}}class r{constructor(){this._name="budget",this.incomeExpenditure=new i.TableField("budget.Income / Expenditure"),this.category=new i.TableField("budget.Category"),this.subcategory=new i.TableField("budget.Subcategory"),this.year=new i.TableField("budget.Year"),this.month=new i.TableField("budget.Month"),this.day=new i.TableField("budget.Day"),this.date=new i.TableField("budget.Date"),this.description=new i.TableField("budget.Description"),this.amount=new i.TableField("budget.Amount"),this.happinessScore=new i.TableField("budget.Happiness score"),this.scenario=new i.TableField("budget.Scenario"),this._fields=[this.incomeExpenditure,this.category,this.subcategory,this.year,this.month,this.day,this.date,this.description,this.amount,this.happinessScore,this.scenario]}}let c=new s,o=new l,u=new a,d=new r},6497:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var i=n(3827),s=n(722),l=n(4194),a=n(8257);let r=new l.AliasedField("continent"),c=new l.AliasedField("country"),o=[a.lB.spendingCategory,a.lB.spendingSubcategory,a.lB.city,a.lB.year,r,c],u=[(0,l.sum)("amount",a.lB.amount)],d=[r,c],h=[(0,l.sum)("population",a.RE.population)];class p{query(e,t){let n,i;let s=t.filter(e=>u.includes(e)),p=t.filter(e=>h.includes(e)),b=e.filter(e=>o.includes(e)),m=e.filter(e=>d.includes(e));if(s.length>0&&(this.aliasTableFields(b,[r,c],[a.lB.continent,a.lB.country]),n=(0,l.from)(a.lB._name).select(b,[],s).build()),p.length>0&&(this.aliasTableFields(m,[r,c],[a.RE.continent,a.RE.country]),i=(0,l.from)(a.RE._name).select(m,[],p).build()),n&&i)return new l.QueryMerge(i).join(n,l.JoinType.LEFT);if(n)return n;if(i)return i;throw Error("No query is defined")}aliasTableFields(e,t,n){for(let i=0;i<t.length;i++){let s=e.indexOf(t[i]);s>=0&&(e[s]=n[i].as(t[i].alias))}}constructor(){this.selectableFields=o.concat(d).filter((e,t,n)=>n.indexOf(e)===t),this.measures=u.concat(h)}}let b=new p;function m(){return(0,i.jsx)(s.Z,{title:"Spending and population",queryProvider:b})}}},function(e){e.O(0,[798,971,69,744],function(){return e(e.s=3432)}),_N_E=e.O()}]);