(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{3432:function(e,t,i){Promise.resolve().then(i.bind(i,6497))},5077:function(e,t,i){"use strict";i.d(t,{$$:function(){return r},ZP:function(){return o},we:function(){return s}});var n,s,l=i(3827);function a(e){if("expression"in e)return e.alias;if(e.fullName)return e.fullName;if(e)return e.alias;throw Error("Unexpected type "+e)}function r(e){return"string"==typeof e?e:"type"in e&&"showTotals"in e?a(e.type):a(e)}function o(e){var t;return(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col px-0",children:function(e){switch(e){case 0:return"Rows";case 1:return"Columns";case 2:return"Measures";case 3:return"Filters"}}(e.axisType)}),(0,l.jsx)("div",{className:"col-8 px-0",children:(0,l.jsxs)("select",{value:"DEFAULT",className:"form-select form-select-sm",onChange:t=>(function(e,t){let i=t.selectableElements.slice(),n=t.selectedElements.slice(),s=i.map(e=>r(e)).indexOf(e.target.value);n.push(i[s]),i.splice(s,1),t.elementsDispatcher(n,i)})(t,e),children:[(0,l.jsx)("option",{value:"DEFAULT",disabled:!0,children:"Select option"}),e.selectableElements.map((e,t)=>(0,l.jsx)("option",{value:r(e),children:r(e)},t))]})})]}),(0,l.jsx)("div",{className:"row",children:null===(t=e.selectedElements)||void 0===t?void 0:t.map((t,i)=>(0,l.jsxs)("div",{className:"row m-1 p-1 text-bg-light",style:{borderRadius:4},children:[(0,l.jsxs)("div",{className:"px-1",children:[(0,l.jsx)("strong",{children:r(t)}),(0,l.jsx)("button",{type:"button",className:"btn-close float-end","aria-label":"Close",onClick:()=>(function(e,t){let i=t.selectableElements.slice(),n=t.selectedElements.slice(),s=n.map(e=>r(e)).indexOf(e);i.push(n[s]),n.splice(s,1),t.elementsDispatcher(n,i)})(r(t),e)})]}),(0,l.jsx)("div",{className:"row px-3",children:e.showTotalsCheckBox&&(0,l.jsxs)("div",{className:"col form-check",children:[(0,l.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"showTotals",checked:t.showTotals,onChange:()=>(function(e,t){let i=t.selectedElements.slice(),n=i.map(e=>r(e)).indexOf(e);i[n]={type:i[n].type,showTotals:!i[n].showTotals},t.elementsDispatcher(i,t.selectableElements)})(r(t),e)}),(0,l.jsx)("label",{className:"form-check-label",htmlFor:"showTotals",children:(0,l.jsx)("small",{children:"Show totals"})})]})})]},i))})]})}(n=s||(s={}))[n.ROWS=0]="ROWS",n[n.COLUMNS=1]="COLUMNS",n[n.VALUES=2]="VALUES",n[n.FILTERS=3]="FILTERS"},1248:function(e,t,i){"use strict";i.d(t,{H:function(){return n}});let n="http://localhost:8080"},8408:function(e,t,i){"use strict";i.d(t,{T1:function(){return a},c_:function(){return r}});var n=i(4194),s=i(1248);class l{async executePivotQuery(e,t,i,n,s,l){let a=t.concat(i);if(0===a.length||0===n.length)return Promise.resolve();{let r={rows:t.map(e=>e.type),columns:i.map(e=>e.type),hiddenTotals:a.filter(e=>!e.showTotals).map(e=>e.type)},o=e.query(a.map(e=>e.type),n,s,r);return o.minify=l,this.querier.executePivotQuery(o,r)}}constructor(){this.querier=new n.Querier(s.H)}}function a(e){let t=[];return e.forEach((e,i)=>{let s=(0,n.any)(e.map(e=>(0,n.criterion)(i,(0,n.eq)(e))));t.push(s)}),(0,n.all)(t)}let r=new l},8257:function(e,t,i){"use strict";i.d(t,{Fx:function(){return d},RE:function(){return u},cn:function(){return c},lB:function(){return o}});var n=i(4194);class s{constructor(){this._name="spending",this.city=new n.TableField("spending.city"),this.country=new n.TableField("spending.country"),this.continent=new n.TableField("spending.continent"),this.spendingCategory=new n.TableField("spending.spending category"),this.spendingSubcategory=new n.TableField("spending.spending subcategory"),this.year=new n.TableField("spending.year"),this.amount=new n.TableField("spending.amount"),this._fields=[this.city,this.country,this.continent,this.spendingCategory,this.spendingSubcategory,this.year,this.amount]}}class l{constructor(){this._name="portfolio",this.ticker=new n.TableField("portfolio.Ticker"),this.dateScenario=new n.TableField("portfolio.DateScenario"),this.currency=new n.TableField("portfolio.Currency"),this.nbShares=new n.TableField("portfolio.NbShares"),this.portfolio=new n.TableField("portfolio.Portfolio"),this.riskType=new n.TableField("portfolio.RiskType"),this.scenarioValue=new n.TableField("portfolio.ScenarioValue"),this._fields=[this.ticker,this.dateScenario,this.currency,this.nbShares,this.portfolio,this.riskType,this.scenarioValue]}}class a{constructor(){this._name="population",this.country=new n.TableField("population.country"),this.continent=new n.TableField("population.continent"),this.population=new n.TableField("population.population"),this._fields=[this.country,this.continent,this.population]}}class r{constructor(){this._name="budget",this.incomeExpenditure=new n.TableField("budget.Income / Expenditure"),this.category=new n.TableField("budget.Category"),this.subcategory=new n.TableField("budget.Subcategory"),this.year=new n.TableField("budget.Year"),this.month=new n.TableField("budget.Month"),this.day=new n.TableField("budget.Day"),this.date=new n.TableField("budget.Date"),this.description=new n.TableField("budget.Description"),this.amount=new n.TableField("budget.Amount"),this.happinessScore=new n.TableField("budget.Happiness score"),this.scenario=new n.TableField("budget.Scenario"),this._fields=[this.incomeExpenditure,this.category,this.subcategory,this.year,this.month,this.day,this.date,this.description,this.amount,this.happinessScore,this.scenario]}}let o=new s,c=new l,u=new a,d=new r},6497:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return w}});var n=i(3827),s=i(4194),l=i(8257),a=i(8408),r=i(5077);let o=new s.AliasedField("continent"),c=new s.AliasedField("country"),u=[l.lB.spendingCategory,l.lB.spendingSubcategory,l.lB.city,l.lB.year,o,c],d=[(0,s.sum)("amount",l.lB.amount)],h=[o,c],p=[(0,s.sum)("population",l.RE.population)];class f{query(e,t,i,n){let f,m;let b=t.filter(e=>d.map(e=>e.alias).includes(e.alias)),y=t.filter(e=>p.map(e=>e.alias).includes(e.alias)),w=e.filter(e=>u.map(e=>(0,r.$$)(e)).includes((0,r.$$)(e))),g=e.filter(e=>h.map(e=>(0,r.$$)(e)).includes((0,r.$$)(e)));if(b.length>0){this.aliasTableFields(w,[o,c],[l.lB.continent,l.lB.country]);let e=this.aliasTableFieldsInFilters(i,[o,c],[l.lB.continent,l.lB.country]);f=(0,s.from)(l.lB._name).where((0,a.T1)(e)).select(w,[],b).build()}if(y.length>0&&(this.aliasTableFields(g,[o,c],[l.RE.continent,l.RE.country]),m=(0,s.from)(l.RE._name).select(g,[],y).build()),f&&m)return new s.QueryMerge(m).join(f,s.JoinType.LEFT);if(f)return f;if(m)return m;throw Error("No query is defined")}aliasTableFields(e,t,i){for(let n=0;n<t.length;n++){let s=e.indexOf(t[n]);s>=0&&(e[s]=i[n].as(t[n].alias))}}aliasTableFieldsInFilters(e,t,i){let n=new Map(e);for(let s=0;s<t.length;s++){let l=e.get(t[s]);l&&(n.delete(t[s]),n.set(i[s].as(t[s].alias),l))}return n}constructor(){this.selectableFields=u.concat(h).filter((e,t,i)=>i.indexOf(e)===t),this.measures=d.concat(p),this.formatters=[],this.table=[l.lB,l.RE]}}var m=i(4232);let b=new f,y=(0,m.default)(()=>Promise.all([i.e(891),i.e(192)]).then(i.bind(i,2891)),{loadableGenerated:{webpack:()=>[2891]},ssr:!1});function w(){return(0,n.jsx)(y,{title:"Spending and population",queryProvider:b})}}},function(e){e.O(0,[798,971,69,744],function(){return e(e.s=3432)}),_N_E=e.O()}]);